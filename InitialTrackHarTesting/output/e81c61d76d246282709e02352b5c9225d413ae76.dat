var e,t;(()=>{var e=1e4;function t(e){return{lang:e?.lang??void 0,message:e?.message,abortEarly:e?.abortEarly??void 0,abortPipeEarly:e?.abortPipeEarly??void 0}}function r(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function n(e,t,n,i,o){const a=o&&"input"in o?o.input:n.value,s=o?.expected??e.expects??null,l=o?.received??r(a),c={kind:e.kind,type:e.type,input:a,expected:s,received:l,message:`Invalid ${t}: ${s?`Expected ${s} but r`:"R"}eceived ${l}`,requirement:e.requirement,path:o?.path,issues:o?.issues,lang:i.lang,abortEarly:i.abortEarly,abortPipeEarly:i.abortPipeEarly},u="schema"===e.kind,p=o?.message??e.message??(e.reference,void c.lang)??(u?void c.lang:null)??i.message??void c.lang;void 0!==p&&(c.message="function"==typeof p?p(c):p),u&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function i(e){return{version:1,vendor:"valibot",validate:r=>e["~run"]({value:r},t())}}function o(e,t){const r=[...new Set(e)];return r.length>1?`(${r.join(` ${t} `)})`:r[0]??"never"}var a=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function s(e,t,r){return"function"==typeof e.fallback?e.fallback(t,r):e.fallback}function l(e,t,r){return"function"==typeof e.default?e.default(t,r):e.default}function c(e){let t;if(e)for(const r of e)t?t.push(...r.issues):t=r.issues;return t}const u=function e(t,r){return{kind:"schema",type:"array",reference:e,expects:"Array",async:!1,item:t,message:r,get"~standard"(){return i(this)},"~run"(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<r.length;n++){const i=r[n],o=this.item["~run"]({value:i},t);if(o.issues){const a={type:"array",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else n(this,"type",e,t);return e}}},p=function e(t){return{kind:"schema",type:"boolean",reference:e,expects:"boolean",async:!1,message:t,get"~standard"(){return i(this)},"~run"(e,t){return"boolean"==typeof e.value?e.typed=!0:n(this,"type",e,t),e}}},d=function e(t,r){return{kind:"schema",type:"custom",reference:e,expects:"unknown",async:!1,check:t,message:r,get"~standard"(){return i(this)},"~run"(e,t){return this.check(e.value)?e.typed=!0:n(this,"type",e,t),e}}},y=function e(t,o){return{kind:"schema",type:"literal",reference:e,expects:r(t),async:!1,literal:t,message:o,get"~standard"(){return i(this)},"~run"(e,t){return e.value===this.literal?e.typed=!0:n(this,"type",e,t),e}}},f=function e(t){return{kind:"schema",type:"number",reference:e,expects:"number",async:!1,message:t,get"~standard"(){return i(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?n(this,"type",e,t):e.typed=!0,e}}},h=function e(t,r){return{kind:"schema",type:"object",reference:e,expects:"Object",async:!1,entries:t,message:r,get"~standard"(){return i(this)},"~run"(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const i in this.entries){const o=this.entries[i];if(i in r||("exact_optional"===o.type||"optional"===o.type||"nullish"===o.type)&&void 0!==o.default){const n=i in r?r[i]:l(o),a=o["~run"]({value:n},t);if(a.issues){const o={type:"object",origin:"value",input:r,key:i,value:n};for(const t of a.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[i]=a.value}else if(void 0!==o.fallback)e.value[i]=s(o);else if("exact_optional"!==o.type&&"optional"!==o.type&&"nullish"!==o.type&&(n(this,"key",e,t,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:r,key:i,value:r[i]}]}),t.abortEarly))break}}else n(this,"type",e,t);return e}}},g=function e(t,r){return{kind:"schema",type:"optional",reference:e,expects:`(${t.expects} | undefined)`,async:!1,wrapped:t,default:r,get"~standard"(){return i(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=l(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}},v=function(e,r,n){const i=e["~run"]({value:r},t(n));if(i.issues)throw new a(i.issues);return i.value},w=function(...e){return{...e[0],pipe:e,get"~standard"(){return i(this)},"~run"(t,r){for(const n of e)if("metadata"!==n.kind){if(t.issues&&("schema"===n.kind||"transformation"===n.kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=n["~run"](t,r))}return t}}},m=function e(t,r){return{kind:"validation",type:"regex",reference:e,async:!1,expects:`${t}`,requirement:t,message:r,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&n(this,"format",e,t),e}}},b=function e(t){return{kind:"schema",type:"string",reference:e,expects:"string",async:!1,message:t,get"~standard"(){return i(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:n(this,"type",e,t),e}}},x=function e(t){return{kind:"transformation",type:"transform",reference:e,async:!1,operation:t,"~run"(e){return e.value=this.operation(e.value),e}}},S=function e(t,r){return{kind:"schema",type:"union",reference:e,expects:o(t.map(e=>e.expects),"|"),async:!1,options:t,message:r,get"~standard"(){return i(this)},"~run"(e,t){let r,i,o;for(const n of this.options){const a=n["~run"]({value:e.value},t);if(a.typed){if(!a.issues){r=a;break}i?i.push(a):i=[a]}else o?o.push(a):o=[a]}if(r)return r;if(i){if(1===i.length)return i[0];n(this,"type",e,t,{issues:c(i)}),e.typed=!0}else{if(1===o?.length)return o[0];n(this,"type",e,t,{issues:c(o)})}return e}}},P={control:"control",variant:"variant",holdout:"holdout"},A={C:P.control,V:P.variant,H:P.holdout},k=w(b(),d(e=>!!e.match(/.*-[CVH]$/))),D=w(b(),m(/[a-z:_-\d]*test(\d)_(a(?:a|b))$/,e=>`Invalid configuration: "id" is required and must be a string ending in test1_ab or similar. Received: ${e}`)),V=w(u(h({distributionPercent:f(),name:k})),d(e=>{const t=e.reduce((e,t)=>e+t.distributionPercent,0);if(100!==t)throw new Error(`Invalid configuration: sum of distributionPercent must be 100. Received: ${t}`);return!0}),d(e=>{const t=e.map(e=>e.name);if(new Set(t).size!==t.length)throw new Error("Invalid configuration: segment names must be unique");return!0})),T=h({id:D,groups:V,type:S([y("external"),y("internal")])}),L=g(h({default:p()}),{default:!0}),j=h({name:b()}),E=g(h({id:j,session:j}),{id:{name:"_ml_id"},session:{name:"_ml_ses"}}),O=w(u(T),d(e=>{const t=e.map(e=>e.id);if(new Set(t).size!==t.length)throw new Error("Invalid configuration: experiment IDs must be unique");return!0}),d(e=>{const t=e,r={internal:0,external:0};for(const e of t)r[e.type]++;if(r.internal>1)throw new Error(`Invalid configuration: ${r.internal} internal tests found, only one is allowed`);if(r.external>1)throw new Error(`Invalid configuration: ${r.external} external tests found, only one is allowed`);return!0}),x(e=>(e.sort((e,t)=>"internal"===e.type&&"external"===t.type?-1:"external"===e.type&&"internal"===t.type?1:0),e))),_=h({hostname:b(),experiments:O,cookies:E,consent:L}),B=JSON.parse('{"hostname":"dailymail.co.uk","subMarket":"row","experiments":[{"id":"pw:article:test4_ab","type":"external","groups":[{"distributionPercent":20,"name":"MATHER_QS_AB_TEST4-V"},{"distributionPercent":20,"name":"MATHER_QS_AB_TEST4-C"},{"distributionPercent":60,"name":"MATHER_QS_AB_TEST4-H"}]},{"id":"i:test1_ab","type":"internal","groups":[{"distributionPercent":50,"name":"INTERNAL_AB_TEST1-C"},{"distributionPercent":50,"name":"INTERNAL_AB_TEST1-V"}]}],"cookies":{"id":{"name":"_ml_id"},"session":{"name":"_ml_ses"}}}'),C=new class{constructor(e){const t=v(_,e);this.cookies=t.cookies,this.hostname=t.hostname,this.experiments=t.experiments,this.baseConsent=t.consent}get consent(){var e;const t=(()=>{if("undefined"==typeof sessionStorage)return null;const e=sessionStorage.getItem("sophi_abtest_config");if(null!==e)try{return JSON.parse(e)}catch(e){return null}return null})();return null!==(e=null==t?void 0:t.consent)&&void 0!==e?e:this.baseConsent}}(B);var $=function(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,$)};const I=(e,t,r,n)=>{((e,t)=>{localStorage&&localStorage.setItem(e,t)})(e,t);const i=[`${e}=${t}`,`expires=${r}`,`domain=.${n.hostname}`,"path=/","SameSite=None","Secure"].join(";");window.document.cookie=i},W=e=>{if(!document.cookie)return"";const t=document.cookie.split("; ").find(t=>0===t.indexOf(e));return t?t.split("=")[1]:""},R=e=>{let t;return localStorage&&(t=localStorage.getItem(e)),t||(t=W(e)),t&&"false"!==t?t:""},U=C.cookies.id.name,M=(t,r,n)=>{return i=function(t){if(100!==t.map(function(e){return e.distributionPercent}).reduce(function(e,t){return e+t}))throw new Error("Total weight percentages must equal 100%");var r=0,n=[];return t.forEach(function(t){if(r!=e){var i=r+t.distributionPercent*e/100,o={id:t.name,range_start:0===r?r:r+1,range_end:Math.min(i,e)};r=i,n.push(o)}}),n}(t),o=n,a=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=t/Math.pow(2,32);return Math.floor(n*r)}(function(e){return function(e,t){var r,n,i,o,a,s,l,c;for(r=3&e.length,n=e.length-r,i=t,a=3432918353,s=461845907,c=0;c<n;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+(((o>>>16)+58964&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}("".concat(r,"-").concat(o))),function(e,t){var r=null;return e.forEach(function(e){t>=e.range_start&&t<=e.range_end&&(r=e.id)}),r}(i,a);var i,o,a};var N="Sophi AB Test:";const G=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=console).log.apply(e,[N].concat(r))},z=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=console).warn.apply(e,[N].concat(r))},F=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=console).error.apply(e,[N].concat(r))};var q=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})};const H="sophi_abtest_group",J="sophi_abtest_id";window.sophi=window.sophi||{};let Y=C.consent.default;const Z=()=>{const e=(e=>{if(W(e))return R(e).split(".")[0];const t=new Date,r=new Date(t.setFullYear(t.getFullYear()+2)).toUTCString(),n=$(),i=Math.floor(t.getTime()/1e3),o=[n,i,"1",i,i].join(".");return I(e,o,r,C),n})(U),t=R("_matheriSegs"),r=W("_matheriSegs"),n=t.split(","),i=[];for(const t of C.experiments){const r=t.groups.find(e=>n.includes(e.name));i.push((null==r?void 0:r.name)||M(t.groups,t.id,e))}const o=((e,t)=>{let r=t;return e.some(e=>"external"===e.type)||(r+=",always-H"),r})(C.experiments,i.join(","));o===n.join(",")&&r===t||I("_matheriSegs",o,(()=>{const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()})(),C)},K=e=>{const t=e.charAt(e.length-1);return A[t]},Q=e=>{const t=Object.assign({},e);if(window.location.search){const r=new URLSearchParams(window.location.search);r.has(J)&&((e,t,r)=>{e?(t.experimentId=e.toLowerCase(),G(`Test ID override. Original: ${r.experimentId}. Overridden by: ${e}.`)):z(`Invalid test ID override in URL parameter ${J}: ${e}`)})(r.get(J),t,e),r.has(H)&&((e,t,r)=>{e&&e.toLowerCase()in P?(t.assignedGroup=e,G(`Test group override. Original: ${r.assignedGroup}. Overridden by: ${e}.`)):z(`Invalid test group override in URL parameter ${H}: ${e}`)})(r.get(H),t,e)}return t},X=function(){var e;if(!Y)return[];const t=C.experiments,r=R("_matheriSegs").split(","),n=[];for(const i of t){const t=null===(e=i.groups.find(e=>r.includes(e.name)))||void 0===e?void 0:e.name;if(!t)continue;const o=K(t),a={experimentId:i.id,assignedGroup:o,type:i.type};n.push(a)}return n};function ee(e="external"){return X().filter(t=>t.type===e).map(e=>{var{type:t}=e;return function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["type"])}).map("external"===e?Q:e=>e)}function te(e){if(!Y)return;const t=X();let r="";if("string"!=typeof e)return;r=e.toLowerCase();const n=t.find(e=>e.experimentId.toLowerCase()===r);return void 0===n&&z(`Experiment ${e} not found`),n&&"external"===n.type?Q(n):n}if(Y)try{Z()}catch(e){F("Error initializing storage:",e)}const re={getAllExperiments:(...e)=>q(void 0,[...e],void 0,function*(e="external"){return ee(e)}),getAllExperimentsSync:(e="external")=>ee(e),getExperiment:e=>q(void 0,void 0,void 0,function*(){return te(e)}),getExperimentSync:e=>te(e),enableConsent:()=>{try{Y=!0,Z()}catch(e){F("Error enabling consent:",e)}}};window.sophi.abTests=re,window.dispatchEvent(new Event("sophi.abTests:ready"))})(),e=globalThis,t=()=>(()=>{var e={1(e,t,r){var n=r(5578),i=r(7255),o=r(5755),a=r(1866),s=r(6029),l=r(5022),c=n.Symbol,u=i("wks"),p=l?c.for||c:c&&c.withoutSetter||a;e.exports=function(e){return o(u,e)||(u[e]=s&&o(c,e)?c[e]:p("Symbol."+e)),u[e]}},41(e){e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},69(e,t,r){var n=r(231).has;e.exports=function(e){return n(e),e}},169(e,t,r){var n=r(4762),i=r(8473),o=r(1483),a=r(5755),s=r(382),l=r(2048).CONFIGURABLE,c=r(7268),u=r(4483),p=u.enforce,d=u.get,y=String,f=Object.defineProperty,h=n("".slice),g=n("".replace),v=n([].join),w=s&&!i(function(){return 8!==f(function(){},"length",{value:8}).length}),m=String(String).split("String"),b=e.exports=function(e,t,r){"Symbol("===h(y(t),0,7)&&(t="["+g(y(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!a(e,"name")||l&&e.name!==t)&&(s?f(e,"name",{value:t,configurable:!0}):e.name=t),w&&r&&a(r,"arity")&&e.length!==r.arity&&f(e,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=p(e);return a(n,"source")||(n.source=v(m,"string"==typeof t?t:"")),e};Function.prototype.toString=b(function(){return o(this)&&d(this).source||c(this)},"toString")},194(e,t,r){var n=r(8612),i=r(1807),o=r(312),a=r(7035);n({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(e){return i(a,this,o(e))}})},231(e,t,r){var n=r(4762),i=WeakSet.prototype;e.exports={WeakSet,add:n(i.add),has:n(i.has),remove:n(i.delete)}},274(e,t,r){var n=r(8473);e.exports=!n(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},312(e,t,r){var n=r(1409),i=r(1483),o=r(4713),a=r(1704),s=n("Set");e.exports=function(e){return function(e){return a(e)&&"number"==typeof e.size&&i(e.has)&&i(e.keys)}(e)?e:o(e)?new s(e):e}},348(e,t,r){var n=r(1807),i=r(1483),o=r(1704),a=TypeError;e.exports=function(e,t){var r,s;if("string"===t&&i(r=e.toString)&&!o(s=n(r,e)))return s;if(i(r=e.valueOf)&&!o(s=n(r,e)))return s;if("string"!==t&&i(r=e.toString)&&!o(s=n(r,e)))return s;throw new a("Can't convert object to primitive value")}},382(e,t,r){var n=r(8473);e.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},458(e,t,r){r(7227)},507(e,t,r){var n=r(8612),i=r(1807),o=r(312),a=r(6006);n({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(e){return i(a,this,o(e))}})},560(e,t,r){var n=r(8612),i=r(7380),o=r(1506),a=r(8618).set;n({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(e){for(var t=i(this),r=arguments.length,n=0;n<r;)o(arguments[n++],function(e,r){a(t,e,r)},{AS_ENTRIES:!0});return t}})},670(e,t,r){var n=r(382),i=r(5835),o=r(7738);e.exports=function(e,t,r){n?i.f(e,t,o(0,r)):e[t]=r}},680(e,t,r){var n=r(4762),i=r(8120);e.exports=function(e,t,r){try{return n(i(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},864(e,t,r){var n=r(8612),i=r(8120),o=r(7380),a=r(3197),s=TypeError;n({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=o(this),r=arguments.length<2,n=r?void 0:arguments[1];if(i(e),a(t,function(i,o){r?(r=!1,n=i):n=e(n,i,o,t)}),r)throw new s("Reduce of empty map with no initial value");return n}})},1e3(e,t,r){var n=r(8612),i=r(4762),o=r(4246),a=r(1639),s=r(6261),l=i([].join),c=i([].push);n({target:"Set",proto:!0,real:!0,forced:!0},{join:function(e){var t=o(this),r=void 0===e?",":s(e),n=[];return a(t,function(e){c(n,e)}),l(n,r)}})},1278(e,t,r){var n=r(4762),i=n({}.toString),o=n("".slice);e.exports=function(e){return o(i(e),8,-1)}},1409(e,t,r){var n=r(5578),i=r(1483);e.exports=function(e,t){return arguments.length<2?(r=n[e],i(r)?r:void 0):n[e]&&n[e][t];var r}},1423(e,t,r){var n=r(1409),i=r(1483),o=r(4815),a=r(5022),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&o(t.prototype,s(e))}},1483(e){var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},1506(e,t,r){var n=r(2914),i=r(1807),o=r(2293),a=r(8761),s=r(5299),l=r(6960),c=r(4815),u=r(4887),p=r(6665),d=r(6721),y=TypeError,f=function(e,t){this.stopped=e,this.result=t},h=f.prototype;e.exports=function(e,t,r){var g,v,w,m,b,x,S,P=r&&r.that,A=!(!r||!r.AS_ENTRIES),k=!(!r||!r.IS_RECORD),D=!(!r||!r.IS_ITERATOR),V=!(!r||!r.INTERRUPTED),T=n(t,P),L=function(e){return g&&d(g,"normal"),new f(!0,e)},j=function(e){return A?(o(e),V?T(e[0],e[1],L):T(e[0],e[1])):V?T(e,L):T(e)};if(k)g=e.iterator;else if(D)g=e;else{if(!(v=p(e)))throw new y(a(e)+" is not iterable");if(s(v)){for(w=0,m=l(e);m>w;w++)if((b=j(e[w]))&&c(h,b))return b;return new f(!1)}g=u(e,v)}for(x=k?e.next:g.next;!(S=i(x,g)).done;){try{b=j(S.value)}catch(e){d(g,"throw",e)}if("object"==typeof b&&b&&c(h,b))return b}return new f(!1)}},1507(e){e.exports={}},1591(e,t,r){var n=r(8612),i=r(4246),o=r(6880).add;n({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=i(this),t=0,r=arguments.length;t<r;t++)o(e,arguments[t]);return e}})},1639(e,t,r){var n=r(4762),i=r(6001),o=r(6880),a=o.Set,s=o.proto,l=n(s.forEach),c=n(s.keys),u=c(new a).next;e.exports=function(e,t,r){return r?i({iterator:c(e),next:u},t):l(e,t)}},1641(e,t,r){var n=r(8612),i=r(2914),o=r(7380),a=r(8618),s=r(3197),l=a.Map,c=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=new l;return s(t,function(e,i){c(n,i,r(e,i,t))}),n}})},1703(e){var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},1704(e,t,r){var n=r(1483);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},1799(e,t,r){var n=r(382),i=r(8473),o=r(3145);e.exports=!n&&!i(function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},1807(e,t,r){var n=r(274),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},1831(e,t,r){var n=r(9557),i=r(5578),o=r(2095),a="__core-js_shared__",s=e.exports=i[a]||o(a,{});(s.versions||(s.versions=[])).push({version:"3.46.0",mode:n?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.46.0/LICENSE",source:"https://github.com/zloirock/core-js"})},1851(e,t,r){var n,i,o,a=r(8473),s=r(1483),l=r(1704),c=r(5290),u=r(3181),p=r(7914),d=r(1),y=r(9557),f=d("iterator"),h=!1;[].keys&&("next"in(o=[].keys())?(i=u(u(o)))!==Object.prototype&&(n=i):h=!0),!l(n)||a(function(){var e={};return n[f].call(e)!==e})?n={}:y&&(n=c(n)),s(n[f])||p(n,f,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:h}},1866(e,t,r){var n=r(4762),i=0,o=Math.random(),a=n(1.1.toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},1911(e,t,r){var n=r(8612),i=r(7380),o=r(8618).remove;n({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e,t=i(this),r=!0,n=0,a=arguments.length;n<a;n++)e=o(t,arguments[n]),r=r&&e;return!!r}})},1916(e,t,r){var n=r(4246),i=r(6880),o=r(4824),a=r(3131),s=r(6001),l=i.add,c=i.has,u=i.remove;e.exports=function(e){var t=n(this),r=a(e).getIterator(),i=o(t);return s(r,function(e){c(t,e)?u(i,e):l(i,e)}),i}},1969(e,t,r){var n=r(4762),i=WeakMap.prototype;e.exports={WeakMap,set:n(i.set),get:n(i.get),has:n(i.has),remove:n(i.delete)}},1975(e,t,r){var n=r(8612),i=r(1807),o=r(8120),a=r(2293),s=r(41),l=r(8660),c=r(8901),u=r(9557),p=r(6721),d=r(7486),y=r(5267),f=!u&&!d("filter",function(){}),h=!u&&!f&&y("filter",TypeError),g=u||f||h,v=l(function(){for(var e,t,r=this.iterator,n=this.predicate,o=this.next;;){if(e=a(i(o,r)),this.done=!!e.done)return;if(t=e.value,c(r,n,[t,this.counter++],!0))return t}});n({target:"Iterator",proto:!0,real:!0,forced:g},{filter:function(e){a(this);try{o(e)}catch(e){p(this,"throw",e)}return h?i(h,this,e):new v(s(this),{predicate:e})}})},1983(e,t,r){var n=r(6721);e.exports=function(e,t,r){for(var i=e.length-1;i>=0;i--)if(void 0!==e[i])try{r=n(e[i].iterator,t,r)}catch(e){t="throw",r=e}if("throw"===t)throw r;return r}},1984(e,t,r){var n=r(4246),i=r(5828),o=r(1639),a=r(3131);e.exports=function(e){var t=n(this),r=a(e);return!(i(t)>r.size)&&!1!==o(t,function(e){if(!r.includes(e))return!1},!0)}},2048(e,t,r){var n=r(382),i=r(5755),o=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=i(o,"name"),l=s&&"something"===function(){}.name,c=s&&(!n||n&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:c}},2095(e,t,r){var n=r(5578),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},2121(e,t,r){var n=r(4762),i=r(8473),o=r(1278),a=Object,s=n("".split);e.exports=i(function(){return!a("z").propertyIsEnumerable(0)})?function(e){return"String"===o(e)?s(e,""):a(e)}:a},2278(e,t,r){var n=r(6742),i=r(4741).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},2293(e,t,r){var n=r(1704),i=String,o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not an object")}},2313(e,t,r){var n=r(7914);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},2347(e,t,r){var n=r(3312),i=Object;e.exports=function(e){return i(n(e))}},2355(e,t,r){var n=r(1807),i=r(1704),o=r(1423),a=r(2564),s=r(348),l=r(1),c=TypeError,u=l("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var r,l=a(e,u);if(l){if(void 0===t&&(t="default"),r=n(l,e,t),!i(r)||o(r))return r;throw new c("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},2455(e,t,r){var n=r(8612),i=r(2914),o=r(4246),a=r(1639);n({target:"Set",proto:!0,real:!0,forced:!0},{find:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=a(t,function(e){if(r(e,e,t))return{value:e}},!0);return n&&n.value}})},2477(e,t,r){var n=r(8612),i=r(1807),o=r(312),a=r(5790);n({target:"Set",proto:!0,real:!0,forced:!0},{union:function(e){return i(a,this,o(e))}})},2564(e,t,r){var n=r(8120),i=r(5983);e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},2592(e,t,r){var n=r(8612),i=r(2914),o=r(7380),a=r(8618),s=r(3197),l=a.Map,c=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=new l;return s(t,function(e,i){r(e,i,t)&&c(n,i,e)}),n}})},2811(e,t,r){var n=r(1409);e.exports=n("document","documentElement")},2822(e,t,r){var n=r(8612),i=r(8120),o=r(4246),a=r(1639),s=TypeError;n({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=o(this),r=arguments.length<2,n=r?void 0:arguments[1];if(i(e),a(t,function(i){r?(r=!1,n=i):n=e(n,i,i,t)}),r)throw new s("Reduce of empty set with no initial value");return n}})},2914(e,t,r){var n=r(3786),i=r(8120),o=r(274),a=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},3005(e,t,r){var n=r(1703);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},3049(e,t,r){var n=r(4246),i=r(6880).has,o=r(5828),a=r(3131),s=r(6001),l=r(6721);e.exports=function(e){var t=n(this),r=a(e);if(o(t)<r.size)return!1;var c=r.getIterator();return!1!==s(c,function(e){if(!i(t,e))return l(c,"normal",!1)})}},3067(e,t,r){var n=r(274),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(o):function(){return a.apply(o,arguments)})},3131(e,t,r){var n=r(8120),i=r(2293),o=r(1807),a=r(3005),s=r(41),l="Invalid size",c=RangeError,u=TypeError,p=Math.max,d=function(e,t){this.set=e,this.size=p(t,0),this.has=n(e.has),this.keys=n(e.keys)};d.prototype={getIterator:function(){return s(i(o(this.keys,this.set)))},includes:function(e){return o(this.has,this.set,e)}},e.exports=function(e){i(e);var t=+e.size;if(t!=t)throw new u(l);var r=a(t);if(r<0)throw new c(l);return new d(e,r)}},3145(e,t,r){var n=r(5578),i=r(1704),o=n.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},3181(e,t,r){var n=r(5755),i=r(1483),o=r(2347),a=r(5409),s=r(9441),l=a("IE_PROTO"),c=Object,u=c.prototype;e.exports=s?c.getPrototypeOf:function(e){var t=o(e);if(n(t,l))return t[l];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof c?u:null}},3197(e,t,r){var n=r(4762),i=r(6001),o=r(8618),a=o.Map,s=o.proto,l=n(s.forEach),c=n(s.entries),u=c(new a).next;e.exports=function(e,t,r){return r?i({iterator:c(e),next:u},function(e){return t(e[1],e[0])}):l(e,t)}},3211(e,t,r){var n=r(8612),i=r(2914),o=r(7380),a=r(8618),s=r(3197),l=a.Map,c=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=new l;return s(t,function(e,i){c(n,r(e,i,t),e)}),n}})},3242(e,t,r){var n=r(8612),i=r(1807),o=r(1506),a=r(8120),s=r(2293),l=r(41),c=r(6721),u=r(5267)("find",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:u},{find:function(e){s(this);try{a(e)}catch(e){c(this,"throw",e)}if(u)return i(u,this,e);var t=l(this),r=0;return o(t,function(t,n){if(e(t,r++))return n(t)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},3312(e,t,r){var n=r(5983),i=TypeError;e.exports=function(e){if(n(e))throw new i("Can't call method on "+e);return e}},3392(e,t,r){var n=r(3005),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},3567(e,t,r){var n=r(8612),i=r(9531),o=r(7380),a=r(3197);n({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(e){return!0===a(o(this),function(t){if(i(t,e))return!0},!0)}})},3617(e,t,r){var n=r(8612),i=r(5578),o=r(6021),a=r(2293),s=r(1483),l=r(3181),c=r(3864),u=r(670),p=r(8473),d=r(5755),y=r(1),f=r(1851).IteratorPrototype,h=r(382),g=r(9557),v="constructor",w="Iterator",m=y("toStringTag"),b=TypeError,x=i[w],S=g||!s(x)||x.prototype!==f||!p(function(){x({})}),P=function(){if(o(this,f),l(this)===f)throw new b("Abstract class Iterator not directly constructable")},A=function(e,t){h?c(f,e,{configurable:!0,get:function(){return t},set:function(t){if(a(this),this===f)throw new b("You can't redefine this property");d(this,e)?this[e]=t:u(this,e,t)}}):f[e]=t};d(f,m)||A(m,w),!S&&d(f,v)&&f[v]!==Object||A(v,P),P.prototype=f,n({global:!0,constructor:!0,forced:S},{Iterator:P})},3644(e,t,r){var n=r(8612),i=r(69),o=r(231).add;n({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=i(this),t=0,r=arguments.length;t<r;t++)o(e,arguments[t]);return e}})},3658(e,t,r){var n=r(6742),i=r(4741);e.exports=Object.keys||function(e){return n(e,i)}},3786(e,t,r){var n=r(1278),i=r(4762);e.exports=function(e){if("Function"===n(e))return i(e)}},3789(e,t,r){var n=r(8612),i=r(7380),o=r(3197);n({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(e){var t=o(i(this),function(t,r){if(t===e)return{key:r}},!0);return t&&t.key}})},3815(e,t,r){var n=r(2355),i=r(1423);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},3864(e,t,r){var n=r(169),i=r(5835);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),i.f(e,t,r)}},3896(e,t,r){var n=r(382),i=r(8473);e.exports=n&&i(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},3991(e,t,r){var n=r(8612),i=r(1807),o=r(8120),a=r(2293),s=r(41),l=r(8660),c=r(8901),u=r(6721),p=r(7486),d=r(5267),y=r(9557),f=!y&&!p("map",function(){}),h=!y&&!f&&d("map",TypeError),g=y||f||h,v=l(function(){var e=this.iterator,t=a(i(this.next,e));if(!(this.done=!!t.done))return c(e,this.mapper,[t.value,this.counter++],!0)});n({target:"Iterator",proto:!0,real:!0,forced:g},{map:function(e){a(this);try{o(e)}catch(e){u(this,"throw",e)}return h?i(h,this,e):new v(s(this),{mapper:e})}})},4246(e,t,r){var n=r(6880).has;e.exports=function(e){return n(e),e}},4338(e,t,r){var n={};n[r(1)("toStringTag")]="z",e.exports="[object z]"===String(n)},4347(e,t){t.f=Object.getOwnPropertySymbols},4364(e,t,r){r(3991)},4483(e,t,r){var n,i,o,a=r(4644),s=r(5578),l=r(1704),c=r(9037),u=r(5755),p=r(1831),d=r(5409),y=r(1507),f="Object already initialized",h=s.TypeError,g=s.WeakMap;if(a||p.state){var v=p.state||(p.state=new g);v.get=v.get,v.has=v.has,v.set=v.set,n=function(e,t){if(v.has(e))throw new h(f);return t.facade=e,v.set(e,t),t},i=function(e){return v.get(e)||{}},o=function(e){return v.has(e)}}else{var w=d("state");y[w]=!0,n=function(e,t){if(u(e,w))throw new h(f);return t.facade=e,c(e,w,t),t},i=function(e){return u(e,w)?e[w]:{}},o=function(e){return u(e,w)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!l(t)||(r=i(t)).type!==e)throw new h("Incompatible receiver, "+e+" required");return r}}}},4644(e,t,r){var n=r(5578),i=r(1483),o=n.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},4697(e,t,r){var n=r(8612),i=r(2914),o=r(7380),a=r(3197);n({target:"Map",proto:!0,real:!0,forced:!0},{find:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=a(t,function(e,n){if(r(e,n,t))return{value:e}},!0);return n&&n.value}})},4713(e,t,r){var n=r(6145),i=r(5755),o=r(5983),a=r(1),s=r(6775),l=a("iterator"),c=Object;e.exports=function(e){if(o(e))return!1;var t=c(e);return void 0!==t[l]||"@@iterator"in t||i(s,n(t))}},4741(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},4762(e,t,r){var n=r(274),i=Function.prototype,o=i.call,a=n&&i.bind.bind(o,o);e.exports=n?a:function(e){return function(){return o.apply(e,arguments)}}},4815(e,t,r){var n=r(4762);e.exports=n({}.isPrototypeOf)},4824(e,t,r){var n=r(6880),i=r(1639),o=n.Set,a=n.add;e.exports=function(e){var t=new o;return i(e,function(e){a(t,e)}),t}},4846(e,t,r){r(3617)},4887(e,t,r){var n=r(1807),i=r(8120),o=r(2293),a=r(8761),s=r(6665),l=TypeError;e.exports=function(e,t){var r=arguments.length<2?s(e):t;if(i(r))return o(n(r,e));throw new l(a(e)+" is not iterable")}},4961(e,t,r){var n=r(382),i=r(1807),o=r(7611),a=r(7738),s=r(5599),l=r(3815),c=r(5755),u=r(1799),p=Object.getOwnPropertyDescriptor;t.f=n?p:function(e,t){if(e=s(e),t=l(t),u)try{return p(e,t)}catch(e){}if(c(e,t))return a(!i(o.f,e,t),e[t])}},5022(e,t,r){var n=r(6029);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5231(e,t,r){var n=r(8612),i=r(2914),o=r(7380),a=r(3197);n({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=a(t,function(e,n){if(r(e,n,t))return{key:n}},!0);return n&&n.key}})},5247(e){e.exports=function(e,t){return{value:e,done:t}}},5267(e,t,r){var n=r(5578);e.exports=function(e,t){var r=n.Iterator,i=r&&r.prototype,o=i&&i[e],a=!1;if(o)try{o.call({next:function(){return{done:!0}},return:function(){a=!0}},-1)}catch(e){e instanceof t||(a=!1)}if(!a)return o}},5281(e,t,r){var n=r(8612),i=r(1807),o=r(312),a=r(5472);n({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(e){return i(a,this,o(e))}})},5290(e,t,r){var n,i=r(2293),o=r(5799),a=r(4741),s=r(1507),l=r(2811),c=r(3145),u=r(5409),p="prototype",d="script",y=u("IE_PROTO"),f=function(){},h=function(e){return"<"+d+">"+e+"</"+d+">"},g=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;v="undefined"!=typeof document?document.domain&&n?g(n):(t=c("iframe"),r="java"+d+":",t.style.display="none",l.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F):g(n);for(var i=a.length;i--;)delete v[p][a[i]];return v()};s[y]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f[p]=i(e),r=new f,f[p]=null,r[y]=e):r=v(),void 0===t?r:o.f(r,t)}},5299(e,t,r){var n=r(1),i=r(6775),o=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},5409(e,t,r){var n=r(7255),i=r(1866),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5472(e,t,r){var n=r(4246),i=r(6880),o=r(5828),a=r(3131),s=r(1639),l=r(6001),c=i.Set,u=i.add,p=i.has;e.exports=function(e){var t=n(this),r=a(e),i=new c;return o(t)>r.size?l(r.getIterator(),function(e){p(t,e)&&u(i,e)}):s(t,function(e){r.includes(e)&&u(i,e)}),i}},5473(e,t,r){var n=r(8612),i=r(1807),o=r(312),a=r(1916);n({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(e){return i(a,this,o(e))}})},5568(e,t,r){r(9217)},5578(e){var t=function(e){return e&&e.Math===Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof globalThis&&globalThis)||t("object"==typeof this&&this)||function(){return this}()||Function("return this")()},5599(e,t,r){var n=r(2121),i=r(3312);e.exports=function(e){return n(i(e))}},5755(e,t,r){var n=r(4762),i=r(2347),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},5790(e,t,r){var n=r(4246),i=r(6880).add,o=r(4824),a=r(3131),s=r(6001);e.exports=function(e){var t=n(this),r=a(e).getIterator(),l=o(t);return s(r,function(e){i(l,e)}),l}},5799(e,t,r){var n=r(382),i=r(3896),o=r(5835),a=r(2293),s=r(5599),l=r(3658);t.f=n&&!i?Object.defineProperties:function(e,t){a(e);for(var r,n=s(t),i=l(t),c=i.length,u=0;c>u;)o.f(e,r=i[u++],n[r]);return e}},5828(e,t,r){var n=r(680),i=r(6880);e.exports=n(i.proto,"size","get")||function(e){return e.size}},5835(e,t,r){var n=r(382),i=r(1799),o=r(3896),a=r(2293),s=r(3815),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,p="enumerable",d="configurable",y="writable";t.f=n?o?function(e,t,r){if(a(e),t=s(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&y in r&&!r[y]){var n=u(e,t);n&&n[y]&&(e[t]=r.value,r={configurable:d in r?r[d]:n[d],enumerable:p in r?r[p]:n[p],writable:!1})}return c(e,t,r)}:c:function(e,t,r){if(a(e),t=s(t),a(r),i)try{return c(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new l("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},5899(e,t,r){var n=r(1969).has;e.exports=function(e){return n(e),e}},5983(e){e.exports=function(e){return null==e}},6001(e,t,r){var n=r(1807);e.exports=function(e,t,r){for(var i,o,a=r?e:e.iterator,s=e.next;!(i=n(s,a)).done;)if(void 0!==(o=t(i.value)))return o}},6006(e,t,r){var n=r(4246),i=r(6880),o=r(4824),a=r(5828),s=r(3131),l=r(1639),c=r(6001),u=i.has,p=i.remove;e.exports=function(e){var t=n(this),r=s(e),i=o(t);return a(t)<=r.size?l(t,function(e){r.includes(e)&&p(i,e)}):c(r.getIterator(),function(e){u(i,e)&&p(i,e)}),i}},6021(e,t,r){var n=r(4815),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new i("Incorrect invocation")}},6029(e,t,r){var n=r(6477),i=r(8473),o=r(5578).String;e.exports=!!Object.getOwnPropertySymbols&&!i(function(){var e=Symbol("symbol detection");return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},6145(e,t,r){var n=r(4338),i=r(1483),o=r(1278),a=r(1)("toStringTag"),s=Object,l="Arguments"===o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=s(e),a))?r:l?o(t):"Object"===(n=o(t))&&i(t.callee)?"Arguments":n}},6211(e,t,r){r(3242)},6237(e,t,r){var n=r(8612),i=r(4246),o=r(6880).remove;n({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e,t=i(this),r=!0,n=0,a=arguments.length;n<a;n++)e=o(t,arguments[n]),r=r&&e;return!!r}})},6261(e,t,r){var n=r(6145),i=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},6477(e,t,r){var n,i,o=r(5578),a=r(9461),s=o.process,l=o.Deno,c=s&&s.versions||l&&l.version,u=c&&c.v8;u&&(i=(n=u.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},6651(e,t,r){var n=r(5599),i=r(3392),o=r(6960),a=function(e){return function(t,r,a){var s=n(t),l=o(s);if(0===l)return!e&&-1;var c,u=i(a,l);if(e&&r!=r){for(;l>u;)if((c=s[u++])!=c)return!0}else for(;l>u;u++)if((e||u in s)&&s[u]===r)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},6665(e,t,r){var n=r(6145),i=r(2564),o=r(5983),a=r(6775),s=r(1)("iterator");e.exports=function(e){if(!o(e))return i(e,s)||i(e,"@@iterator")||a[n(e)]}},6721(e,t,r){var n=r(1807),i=r(2293),o=r(2564);e.exports=function(e,t,r){var a,s;i(e);try{if(!(a=o(e,"return"))){if("throw"===t)throw r;return r}a=n(a,e)}catch(e){s=!0,a=e}if("throw"===t)throw r;if(s)throw a;return i(a),r}},6726(e,t,r){var n=r(5755),i=r(9497),o=r(4961),a=r(5835);e.exports=function(e,t,r){for(var s=i(t),l=a.f,c=o.f,u=0;u<s.length;u++){var p=s[u];n(e,p)||r&&n(r,p)||l(e,p,c(t,p))}}},6742(e,t,r){var n=r(4762),i=r(5755),o=r(5599),a=r(6651).indexOf,s=r(1507),l=n([].push);e.exports=function(e,t){var r,n=o(e),c=0,u=[];for(r in n)!i(s,r)&&i(n,r)&&l(u,r);for(;t.length>c;)i(n,r=t[c++])&&(~a(u,r)||l(u,r));return u}},6746(e,t,r){var n=r(8612),i=r(5899),o=r(1969).remove;n({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e,t=i(this),r=!0,n=0,a=arguments.length;n<a;n++)e=o(t,arguments[n]),r=r&&e;return!!r}})},6775(e){e.exports={}},6880(e,t,r){var n=r(4762),i=Set.prototype;e.exports={Set,add:n(i.add),has:n(i.has),remove:n(i.delete),proto:i}},6913(e,t,r){var n=r(8612),i=r(1807),o=r(312),a=r(1984);n({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(e){return i(a,this,o(e))}})},6960(e,t,r){var n=r(8324);e.exports=function(e){return n(e.length)}},6993(e,t,r){var n=r(8612),i=r(2914),o=r(4246),a=r(1639);n({target:"Set",proto:!0,real:!0,forced:!0},{every:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0);return!1!==a(t,function(e){if(!r(e,e,t))return!1},!0)}})},7035(e,t,r){var n=r(4246),i=r(6880).has,o=r(5828),a=r(3131),s=r(1639),l=r(6001),c=r(6721);e.exports=function(e){var t=n(this),r=a(e);if(o(t)<=r.size)return!1!==s(t,function(e){if(r.includes(e))return!1},!0);var u=r.getIterator();return!1!==l(u,function(e){if(i(t,e))return c(u,"normal",!1)})}},7080(e,t,r){var n=r(8612),i=r(69),o=r(231).remove;n({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e,t=i(this),r=!0,n=0,a=arguments.length;n<a;n++)e=o(t,arguments[n]),r=r&&e;return!!r}})},7227(e,t,r){var n=r(8612),i=r(1506),o=r(8120),a=r(2293),s=r(41),l=r(6721),c=r(5267),u=r(3067),p=r(8473),d=TypeError,y=p(function(){[].keys().reduce(function(){},void 0)}),f=!y&&c("reduce",d);n({target:"Iterator",proto:!0,real:!0,forced:y||f},{reduce:function(e){a(this);try{o(e)}catch(e){l(this,"throw",e)}var t=arguments.length<2,r=t?void 0:arguments[1];if(f)return u(f,this,t?[e]:[e,r]);var n=s(this),c=0;if(i(n,function(n){t?(t=!1,r=n):r=e(r,n,c),c++},{IS_RECORD:!0}),t)throw new d("Reduce of empty iterator with no initial value");return r}})},7255(e,t,r){var n=r(1831);e.exports=function(e,t){return n[e]||(n[e]=t||{})}},7268(e,t,r){var n=r(4762),i=r(1483),o=r(1831),a=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},7368(e,t,r){var n=r(8612),i=r(2914),o=r(4246),a=r(6880),s=r(1639),l=a.Set,c=a.add;n({target:"Set",proto:!0,real:!0,forced:!0},{map:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=new l;return s(t,function(e){c(n,r(e,e,t))}),n}})},7380(e,t,r){var n=r(8618).has;e.exports=function(e){return n(e),e}},7458(e,t,r){r(1975)},7486(e){e.exports=function(e,t){var r="function"==typeof Iterator&&Iterator.prototype[e];if(r)try{r.call({next:null},t).next()}catch(e){return!0}}},7611(e,t){var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},7738(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7750(e,t,r){var n=r(8612),i=r(2914),o=r(7380),a=r(3197);n({target:"Map",proto:!0,real:!0,forced:!0},{some:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0);return!0===a(t,function(e,n){if(r(e,n,t))return!0},!0)}})},7911(e,t,r){var n=r(8612),i=r(2914),o=r(7380),a=r(3197);n({target:"Map",proto:!0,real:!0,forced:!0},{every:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0);return!1!==a(t,function(e,n){if(!r(e,n,t))return!1},!0)}})},7914(e,t,r){var n=r(1483),i=r(5835),o=r(169),a=r(2095);e.exports=function(e,t,r,s){s||(s={});var l=s.enumerable,c=void 0!==s.name?s.name:t;if(n(r)&&o(r,c,s),s.global)l?e[t]=r:a(t,r);else{try{s.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},7918(e,t,r){var n=r(8612),i=r(2914),o=r(4246),a=r(6880),s=r(1639),l=a.Set,c=a.add;n({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=new l;return s(t,function(e){r(e,e,t)&&c(n,e)}),n}})},8120(e,t,r){var n=r(1483),i=r(8761),o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not a function")}},8324(e,t,r){var n=r(3005),i=Math.min;e.exports=function(e){var t=n(e);return t>0?i(t,9007199254740991):0}},8473(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},8608(e,t,r){var n=r(8612),i=r(1807),o=r(312),a=r(3049);n({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(e){return i(a,this,o(e))}})},8612(e,t,r){var n=r(5578),i=r(4961).f,o=r(9037),a=r(7914),s=r(2095),l=r(6726),c=r(8730);e.exports=function(e,t){var r,u,p,d,y,f=e.target,h=e.global,g=e.stat;if(r=h?n:g?n[f]||s(f,{}):n[f]&&n[f].prototype)for(u in t){if(d=t[u],p=e.dontCallGetSet?(y=i(r,u))&&y.value:r[u],!c(h?u:f+(g?".":"#")+u,e.forced)&&void 0!==p){if(typeof d==typeof p)continue;l(d,p)}(e.sham||p&&p.sham)&&o(d,"sham",!0),a(r,u,d,e)}}},8618(e,t,r){var n=r(4762),i=Map.prototype;e.exports={Map,set:n(i.set),get:n(i.get),has:n(i.has),remove:n(i.delete),proto:i}},8660(e,t,r){var n=r(1807),i=r(5290),o=r(9037),a=r(2313),s=r(1),l=r(4483),c=r(2564),u=r(1851).IteratorPrototype,p=r(5247),d=r(6721),y=r(1983),f=s("toStringTag"),h="IteratorHelper",g="WrapForValidIterator",v="normal",w="throw",m=l.set,b=function(e){var t=l.getterFor(e?g:h);return a(i(u),{next:function(){var r=t(this);if(e)return r.nextHandler();if(r.done)return p(void 0,!0);try{var n=r.nextHandler();return r.returnHandlerResult?n:p(n,r.done)}catch(e){throw r.done=!0,e}},return:function(){var r=t(this),i=r.iterator;if(r.done=!0,e){var o=c(i,"return");return o?n(o,i):p(void 0,!0)}if(r.inner)try{d(r.inner.iterator,v)}catch(e){return d(i,w,e)}if(r.openIters)try{y(r.openIters,v)}catch(e){return d(i,w,e)}return i&&d(i,v),p(void 0,!0)}})},x=b(!0),S=b(!1);o(S,f,"Iterator Helper"),e.exports=function(e,t,r){var n=function(n,i){i?(i.iterator=n.iterator,i.next=n.next):i=n,i.type=t?g:h,i.returnHandlerResult=!!r,i.nextHandler=e,i.counter=0,i.done=!1,m(this,i)};return n.prototype=t?x:S,n}},8730(e,t,r){var n=r(8473),i=r(1483),o=/#|\.prototype\./,a=function(e,t){var r=l[s(e)];return r===u||r!==c&&(i(t)?n(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";e.exports=a},8761(e){var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},8901(e,t,r){var n=r(2293),i=r(6721);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){i(e,"throw",t)}}},9037(e,t,r){var n=r(382),i=r(5835),o=r(7738);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},9217(e,t,r){var n=r(8612),i=r(1807),o=r(1506),a=r(8120),s=r(2293),l=r(41),c=r(6721),u=r(5267)("some",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:u},{some:function(e){s(this);try{a(e)}catch(e){c(this,"throw",e)}if(u)return i(u,this,e);var t=l(this),r=0;return o(t,function(t,n){if(e(t,r++))return n()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},9271(e,t,r){var n=r(8612),i=r(8120),o=r(7380),a=r(8618),s=TypeError,l=a.get,c=a.has,u=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{update:function(e,t){var r=o(this),n=arguments.length;i(t);var a=c(r,e);if(!a&&n<3)throw new s("Updating absent value");var p=a?l(r,e):i(n>2?arguments[2]:void 0)(e,r);return u(r,e,t(p,e,r)),r}})},9441(e,t,r){var n=r(8473);e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},9461(e,t,r){var n=r(5578).navigator,i=n&&n.userAgent;e.exports=i?String(i):""},9497(e,t,r){var n=r(1409),i=r(4762),o=r(2278),a=r(4347),s=r(2293),l=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(s(e)),r=a.f;return r?l(t,r(e)):t}},9531(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},9557(e){e.exports=!1},9655(e,t,r){r(9930)},9828(e,t,r){var n=r(8612),i=r(2914),o=r(4246),a=r(1639);n({target:"Set",proto:!0,real:!0,forced:!0},{some:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0);return!0===a(t,function(e){if(r(e,e,t))return!0},!0)}})},9930(e,t,r){var n=r(8612),i=r(1807),o=r(1506),a=r(8120),s=r(2293),l=r(41),c=r(6721),u=r(5267)("forEach",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:u},{forEach:function(e){s(this);try{a(e)}catch(e){c(this,"throw",e)}if(u)return i(u,this,e);var t=l(this),r=0;o(t,function(t){e(t,r++)},{IS_RECORD:!0})}})}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};function i(e){return{lang:e?.lang??void 0,message:e?.message,abortEarly:e?.abortEarly??void 0,abortPipeEarly:e?.abortPipeEarly??void 0}}function o(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function a(e,t,r,n,i){const a=i&&"input"in i?i.input:r.value,s=i?.expected??e.expects??null,l=i?.received??o(a),c={kind:e.kind,type:e.type,input:a,expected:s,received:l,message:`Invalid ${t}: ${s?`Expected ${s} but r`:"R"}eceived ${l}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},u="schema"===e.kind,p=i?.message??e.message??(e.reference,void c.lang)??(u?void c.lang:null)??n.message??void c.lang;void 0!==p&&(c.message="function"==typeof p?p(c):p),u&&(r.typed=!1),r.issues?r.issues.push(c):r.issues=[c]}function s(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},i())}}function l(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}function c(e,t){const r=[...new Set(e)];return r.length>1?`(${r.join(` ${t} `)})`:r[0]??"never"}function u(e){if(e.path){let t="";for(const r of e.path){if("string"!=typeof r.key&&"number"!=typeof r.key)return null;t+=t?`.${r.key}`:r.key}return t}return null}r.d(n,{default:()=>Pa}),r(4846),r(7458),r(4364),r(6746),r(3644),r(7080),r(1911),r(7911),r(2592),r(4697),r(5231),r(3567),r(3789),r(3211),r(1641),r(560),r(864),r(7750),r(9271);var p=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function d(e){return{kind:"transformation",type:"transform",reference:d,async:!1,operation:e,"~run"(e){return e.value=this.operation(e.value),e}}}function y(e,t,r){return"function"==typeof e.fallback?e.fallback(t,r):e.fallback}function f(e,t,r){return"function"==typeof e.default?e.default(t,r):e.default}function h(e){return{kind:"schema",type:"boolean",reference:h,expects:"boolean",async:!1,message:e,get"~standard"(){return s(this)},"~run"(e,t){return"boolean"==typeof e.value?e.typed=!0:a(this,"type",e,t),e}}}function g(e){return{kind:"schema",type:"date",reference:g,expects:"Date",async:!1,message:e,get"~standard"(){return s(this)},"~run"(e,t){return e.value instanceof Date?isNaN(e.value)?a(this,"type",e,t,{received:'"Invalid Date"'}):e.typed=!0:a(this,"type",e,t),e}}}function v(e,t){if(typeof e==typeof t){if(e===t||e instanceof Date&&t instanceof Date&&+e===+t)return{value:e};if(e&&t&&e.constructor===Object&&t.constructor===Object){for(const r in t)if(r in e){const n=v(e[r],t[r]);if(n.issue)return n;e[r]=n.value}else e[r]=t[r];return{value:e}}if(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length){for(let r=0;r<e.length;r++){const n=v(e[r],t[r]);if(n.issue)return n;e[r]=n.value}return{value:e}}}return{issue:!0}}function w(e,t){return{kind:"schema",type:"non_optional",reference:w,expects:"!undefined",async:!1,wrapped:e,message:t,get"~standard"(){return s(this)},"~run"(e,t){return void 0!==e.value&&(e=this.wrapped["~run"](e,t)),void 0===e.value&&a(this,"type",e,t),e}}}function m(e){return{kind:"schema",type:"null",reference:m,expects:"null",async:!1,message:e,get"~standard"(){return s(this)},"~run"(e,t){return null===e.value?e.typed=!0:a(this,"type",e,t),e}}}function b(e){return{kind:"schema",type:"number",reference:b,expects:"number",async:!1,message:e,get"~standard"(){return s(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?a(this,"type",e,t):e.typed=!0,e}}}function x(e,t){return{kind:"schema",type:"object",reference:x,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return s(this)},"~run"(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const n in this.entries){const i=this.entries[n];if(n in r||("exact_optional"===i.type||"optional"===i.type||"nullish"===i.type)&&void 0!==i.default){const o=n in r?r[n]:f(i),a=i["~run"]({value:o},t);if(a.issues){const i={type:"object",origin:"value",input:r,key:n,value:o};for(const t of a.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[n]=a.value}else if(void 0!==i.fallback)e.value[n]=y(i);else if("exact_optional"!==i.type&&"optional"!==i.type&&"nullish"!==i.type&&(a(this,"key",e,t,{input:void 0,expected:`"${n}"`,path:[{type:"object",origin:"key",input:r,key:n,value:r[n]}]}),t.abortEarly))break}}else a(this,"type",e,t);return e}}}function S(e,t){return{kind:"schema",type:"optional",reference:S,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return s(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=f(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function P(e,t){return{kind:"schema",type:"picklist",reference:P,expects:c(e.map(o),"|"),async:!1,options:e,message:t,get"~standard"(){return s(this)},"~run"(e,t){return this.options.includes(e.value)?e.typed=!0:a(this,"type",e,t),e}}}function A(e,t,r){return{kind:"schema",type:"record",reference:A,expects:"Object",async:!1,key:e,value:t,message:r,get"~standard"(){return s(this)},"~run"(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const n in r)if(l(r,n)){const i=r[n],o=this.key["~run"]({value:n},t);if(o.issues){const a={type:"object",origin:"key",input:r,key:n,value:i};for(const t of o.issues)t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}const a=this.value["~run"]({value:i},t);if(a.issues){const o={type:"object",origin:"value",input:r,key:n,value:i};for(const t of a.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}o.typed&&a.typed||(e.typed=!1),o.typed&&(e.value[o.value]=a.value)}}else a(this,"type",e,t);return e}}}function k(e){return{kind:"schema",type:"string",reference:k,expects:"string",async:!1,message:e,get"~standard"(){return s(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:a(this,"type",e,t),e}}}function D(e){let t;if(e)for(const r of e)t?t.push(...r.issues):t=r.issues;return t}function V(e,t){return{kind:"schema",type:"union",reference:V,expects:c(e.map(e=>e.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return s(this)},"~run"(e,t){let r,n,i;for(const o of this.options){const a=o["~run"]({value:e.value},t);if(a.typed){if(!a.issues){r=a;break}n?n.push(a):n=[a]}else i?i.push(a):i=[a]}if(r)return r;if(n){if(1===n.length)return n[0];a(this,"type",e,t,{issues:D(n)}),e.typed=!0}else{if(1===i?.length)return i[0];a(this,"type",e,t,{issues:D(i)})}return e}}}function T(e,t,r){const n=e["~run"]({value:t},i(r));if(n.issues)throw new p(n.issues);return n.value}function L(...e){return{...e[0],pipe:e,get"~standard"(){return s(this)},"~run"(t,r){for(const n of e)if("metadata"!==n.kind){if(t.issues&&("schema"===n.kind||"transformation"===n.kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=n["~run"](t,r))}return t}}}const j={any:function e(){return{kind:"schema",type:"any",reference:e,expects:"any",async:!1,get"~standard"(){return s(this)},"~run":e=>(e.typed=!0,e)}},array:function e(t,r){return{kind:"schema",type:"array",reference:e,expects:"Array",async:!1,item:t,message:r,get"~standard"(){return s(this)},"~run"(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<r.length;n++){const i=r[n],o=this.item["~run"]({value:i},t);if(o.issues){const a={type:"array",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else a(this,"type",e,t);return e}}},boolean:h,check:function e(t,r){return{kind:"validation",type:"check",reference:e,async:!1,expects:null,requirement:t,message:r,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&a(this,"input",e,t),e}}},custom:function e(t,r){return{kind:"schema",type:"custom",reference:e,expects:"unknown",async:!1,check:t,message:r,get"~standard"(){return s(this)},"~run"(e,t){return this.check(e.value)?e.typed=!0:a(this,"type",e,t),e}}},exactOptional:function e(t,r){return{kind:"schema",type:"exact_optional",reference:e,expects:t.expects,async:!1,wrapped:t,default:r,get"~standard"(){return s(this)},"~run"(e,t){return this.wrapped["~run"](e,t)}}},flatten:function(e){const t={};for(const r of e)if(r.path){const e=u(r);e?(t.nested||(t.nested={}),t.nested[e]?t.nested[e].push(r.message):t.nested[e]=[r.message]):t.other?t.other.push(r.message):t.other=[r.message]}else t.root?t.root.push(r.message):t.root=[r.message];return t},intersect:function e(t,r){return{kind:"schema",type:"intersect",reference:e,expects:c(t.map(e=>e.expects),"&"),async:!1,options:t,message:r,get"~standard"(){return s(this)},"~run"(e,t){if(this.options.length){const r=e.value;let n;e.typed=!0;for(const i of this.options){const o=i["~run"]({value:r},t);if(o.issues&&(e.issues?e.issues.push(...o.issues):e.issues=o.issues,t.abortEarly)){e.typed=!1;break}o.typed||(e.typed=!1),e.typed&&(n?n.push(o.value):n=[o.value])}if(e.typed){e.value=n[0];for(let r=1;r<n.length;r++){const i=v(e.value,n[r]);if(i.issue){a(this,"type",e,t,{received:"unknown"});break}e.value=i.value}}}else a(this,"type",e,t);return e}}},literal:function e(t,r){return{kind:"schema",type:"literal",reference:e,expects:o(t),async:!1,literal:t,message:r,get"~standard"(){return s(this)},"~run"(e,t){return e.value===this.literal?e.typed=!0:a(this,"type",e,t),e}}},maxValue:function e(t,r){return{kind:"validation",type:"max_value",reference:e,async:!1,expects:`<=${t instanceof Date?t.toJSON():o(t)}`,requirement:t,message:r,"~run"(e,t){return!e.typed||e.value<=this.requirement||a(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():o(e.value)}),e}}},message:function(e,t){return{...e,get"~standard"(){return s(this)},"~run":(r,n)=>e["~run"](r,{...n,message:t})}},minLength:function e(t,r){return{kind:"validation",type:"min_length",reference:e,async:!1,expects:`>=${t}`,requirement:t,message:r,"~run"(e,t){return e.typed&&e.value.length<this.requirement&&a(this,"length",e,t,{received:`${e.value.length}`}),e}}},minValue:function e(t,r){return{kind:"validation",type:"min_value",reference:e,async:!1,expects:`>=${t instanceof Date?t.toJSON():o(t)}`,requirement:t,message:r,"~run"(e,t){return!e.typed||e.value>=this.requirement||a(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():o(e.value)}),e}}},null_:m,number:b,object:x,optional:S,parse:T,partial:function(e,t){const r={};for(const n in e.entries)r[n]=!t||t.includes(n)?S(e.entries[n]):e.entries[n];return{...e,entries:r,get"~standard"(){return s(this)}}},picklist:P,pipe:L,record:A,required:function(e,t,r){const n=Array.isArray(t)?t:void 0,i=Array.isArray(t)?r:t,o={};for(const t in e.entries)o[t]=!n||n.includes(t)?w(e.entries[t],i):e.entries[t];return{...e,entries:o,get"~standard"(){return s(this)}}},safeParse:function(e,t,r){const n=e["~run"]({value:t},i(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}},string:k,transform:d,toLowerCase:function e(){return{kind:"transformation",type:"to_lower_case",reference:e,async:!1,"~run":e=>(e.value=e.value.toLowerCase(),e)}},trim:function e(){return{kind:"transformation",type:"trim",reference:e,async:!1,"~run":e=>(e.value=e.value.trim(),e)}},tuple:function e(t,r){return{kind:"schema",type:"tuple",reference:e,expects:"Array",async:!1,items:t,message:r,get"~standard"(){return s(this)},"~run"(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<this.items.length;n++){const i=r[n],o=this.items[n]["~run"]({value:i},t);if(o.issues){const a={type:"array",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else a(this,"type",e,t);return e}}},union:V,unwrap:function(e){return e.wrapped},url:function e(t){return{kind:"validation",type:"url",reference:e,async:!1,expects:null,requirement(e){try{return new URL(e),!0}catch{return!1}},message:t,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&a(this,"URL",e,t),e}}},ValiError:p,value:function e(t,r){return{kind:"validation",type:"value",reference:e,async:!1,expects:t instanceof Date?t.toJSON():o(t),requirement:t,message:r,"~run"(e,t){return!e.typed||this.requirement<=e.value&&this.requirement>=e.value||a(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():o(e.value)}),e}}}},E=x({assignedGroup:P(["control","variant","holdout"]),experimentId:k()}),O={PAYWALL:"paywall",REGWALL:"regwall"},_="always",B="never",C="anonymous",$="registered",I=j.union([j.literal(C),j.literal($),j.literal("subscribed")]),W=j.picklist([O.REGWALL,O.PAYWALL]),R=j.picklist([_,B]),U={nowall:0,paywall:1,regwall:2},M={always:1,never:0},N={regwall:"b",paywall:"d",finalEnsemble:"z",onDevicePolicy:"v",contentPropensityTier:"q",userPropensityTier:"s"},G=(new Map([[U.nowall,void 0],[U.paywall,O.PAYWALL],[U.regwall,O.REGWALL]]),new Map([[U.nowall,B],[U.paywall,_],[U.regwall,_]])),z=j.object({wallVisibility:R,wallType:W}),F=j.object(Object.assign(Object.assign({},z.entries),{score:j.number(),threshold:j.pipe(j.number(),j.minValue(0),j.maxValue(1))})),q=j.array(F),H=j.object({wallVisibility:j.literal(_),wallType:W,outcomes:q}),J=j.object({wallVisibility:j.literal(B),outcomes:q}),Y=j.union([H,J]),Z=j.object({wallType:j.literal(O.REGWALL),wallTypeCode:j.literal(U.regwall),wallVisibility:j.literal(_),wallVisibilityCode:j.literal(M.always)}),K=j.object({wallType:j.literal(O.PAYWALL),wallTypeCode:j.literal(U.paywall),wallVisibility:j.literal(_),wallVisibilityCode:j.literal(M.always)}),Q=j.object({wallVisibility:j.literal(B),wallVisibilityCode:j.literal(M.never)}),X=j.union([Z,K,Q]),ee=j.object({id:j.string(),createdAt:j.string(),trace:j.string(),context:j.string(),inputs:j.string(),outcome:X,searchParams:j.string(),userProperties:j.string(),paywallScore:j.optional(j.pipe(j.number(),j.minValue(0),j.maxValue(100))),contentProperties:j.optional(j.string(),""),experiment:j.union([j.null_(),E])}),te=j.partial(j.object({id:j.string(),createdAt:j.string(),context:j.string(),trace:j.string(),inputs:j.string(),outcome:j.union([j.partial(Z),j.partial(K),j.partial(Q)]),searchParams:j.string(),userProperties:j.string(),paywallScore:j.optional(j.pipe(j.number(),j.minValue(0),j.maxValue(100))),contentProperties:j.optional(j.string(),""),experiment:j.union([j.null_(),E])})),re=new class{constructor(){this.key="demeter"}get(){try{const e=sessionStorage.getItem(this.key);return null===e?e:JSON.parse(atob(e))}catch(e){return null}}set(e){try{return sessionStorage.setItem(this.key,btoa(JSON.stringify(e)))}catch(e){}}},ne=j.union([j.literal("warn"),j.literal("info"),j.literal("debug")]),ie=j.partial(j.object({logLevel:j.optional(ne),override:j.optional(te)}));function oe(e){re.set(Object.assign(Object.assign({},re.get()),{logLevel:e}))}const ae=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logLevel=e.logLevel||function(){const e=new URL(window.location.href).searchParams.get("sophi_log_level");return e&&(j.safeParse(ne,e).success?oe(e):le.warn(`Unknown log level found in URL: ${e}`)),e}()||function(){const e=re.get();if(e)return j.safeParse(ne,e.logLevel).success?e.logLevel:null}()||"warn",this.config=this.config.bind(this)}config(e){j.parse(ie,e),e.logLevel&&(this.logLevel=e.logLevel,oe(e.logLevel)),e.override&&(this.override=e.override),le.info("âï¸ Runtime config",JSON.stringify(e,null,2))}},se={error:0,warn:1,info:2,debug:3},le=new class{constructor(){this.prefix="QuickStart:"}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log(this.prefix,"ð´",...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log(this.prefix,"ð ",...t)}info(){if(se[ae.logLevel]>=se.info){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log(this.prefix,...t)}}debug(){if(se[ae.logLevel]>=se.debug){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log(this.prefix,"ð§",...t)}}},ce=document.currentScript;function ue(e){const t=function(){const e=ce||document.querySelector("script#sophi-loader");if(!e)return le.debug("Loader script element not found"),null;const t=e.getAttribute("src");if(!t)return le.debug("Loader script has no src attribute"),null;try{return new URL(t,document.baseURI).searchParams}catch(e){return le.debug("Unable to parse loader script src URL",e),null}}();return t?t.get(e):null}var pe=Symbol.for("immer-nothing"),de=Symbol.for("immer-draftable"),ye=Symbol.for("immer-state");function fe(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var he=Object.getPrototypeOf;function ge(e){return!!e&&!!e[ye]}function ve(e){return!!e&&(me(e)||Array.isArray(e)||!!e[de]||!!e.constructor?.[de]||Ae(e)||ke(e))}var we=Object.prototype.constructor.toString();function me(e){if(!e||"object"!=typeof e)return!1;const t=he(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===we}function be(e,t){0===xe(e)?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function xe(e){const t=e[ye];return t?t.type_:Array.isArray(e)?1:Ae(e)?2:ke(e)?3:0}function Se(e,t){return 2===xe(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Pe(e,t,r){const n=xe(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function Ae(e){return e instanceof Map}function ke(e){return e instanceof Set}function De(e){return e.copy_||e.base_}function Ve(e,t){if(Ae(e))return new Map(e);if(ke(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=me(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[ye];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const i=r[n],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(he(e),t)}{const t=he(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function Te(e,t=!1){return je(e)||ge(e)||!ve(e)||(xe(e)>1&&Object.defineProperties(e,{set:{value:Le},add:{value:Le},clear:{value:Le},delete:{value:Le}}),Object.freeze(e),t&&Object.values(e).forEach(e=>Te(e,!0))),e}function Le(){fe(2)}function je(e){return Object.isFrozen(e)}var Ee,Oe={};function _e(e){const t=Oe[e];return t||fe(0),t}function Be(){return Ee}function Ce(e,t){t&&(_e("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function $e(e){Ie(e),e.drafts_.forEach(Re),e.drafts_=null}function Ie(e){e===Ee&&(Ee=e.parent_)}function We(e){return Ee={drafts_:[],parent_:Ee,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Re(e){const t=e[ye];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Ue(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[ye].modified_&&($e(t),fe(4)),ve(e)&&(e=Me(t,e),t.parent_||Ge(t,e)),t.patches_&&_e("Patches").generateReplacementPatches_(r[ye].base_,e,t.patches_,t.inversePatches_)):e=Me(t,r,[]),$e(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==pe?e:void 0}function Me(e,t,r){if(je(t))return t;const n=t[ye];if(!n)return be(t,(i,o)=>Ne(e,n,t,i,o,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Ge(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let i=t,o=!1;3===n.type_&&(i=new Set(t),t.clear(),o=!0),be(i,(i,a)=>Ne(e,n,t,i,a,r,o)),Ge(e,t,!1),r&&e.patches_&&_e("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Ne(e,t,r,n,i,o,a){if(ge(i)){const a=Me(e,i,o&&t&&3!==t.type_&&!Se(t.assigned_,n)?o.concat(n):void 0);if(Pe(r,n,a),!ge(a))return;e.canAutoFreeze_=!1}else a&&r.add(i);if(ve(i)&&!je(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Me(e,i),t&&t.scope_.parent_||"symbol"==typeof n||!(Ae(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))||Ge(e,i)}}function Ge(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Te(t,r)}var ze={get(e,t){if(t===ye)return e;const r=De(e);if(!Se(r,t))return function(e,t,r){const n=He(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!ve(n)?n:n===qe(e.base_,t)?(Ye(e),e.copy_[t]=Ze(n,e)):n},has:(e,t)=>t in De(e),ownKeys:e=>Reflect.ownKeys(De(e)),set(e,t,r){const n=He(De(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=qe(De(e),t),a=n?.[ye];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((i=r)===(o=n)?0!==i||1/i==1/o:i!=i&&o!=o)&&(void 0!==r||Se(e.base_,t)))return!0;Ye(e),Je(e)}var i,o;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==qe(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Ye(e),Je(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=De(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){fe(11)},getPrototypeOf:e=>he(e.base_),setPrototypeOf(){fe(12)}},Fe={};function qe(e,t){const r=e[ye];return(r?De(r):e)[t]}function He(e,t){if(!(t in e))return;let r=he(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=he(r)}}function Je(e){e.modified_||(e.modified_=!0,e.parent_&&Je(e.parent_))}function Ye(e){e.copy_||(e.copy_=Ve(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function Ze(e,t){const r=Ae(e)?_e("MapSet").proxyMap_(e,t):ke(e)?_e("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Be(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=ze;r&&(i=[n],o=Fe);const{revoke:a,proxy:s}=Proxy.revocable(i,o);return n.draft_=s,n.revoke_=a,s}(e,t);return(t?t.scope_:Be()).drafts_.push(r),r}function Ke(e){if(!ve(e)||je(e))return e;const t=e[ye];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ve(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Ve(e,!0);return be(r,(e,t)=>{Pe(r,e,Ke(t))}),t&&(t.finalized_=!1),r}be(ze,(e,t)=>{Fe[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Fe.deleteProperty=function(e,t){return Fe.set.call(this,e,t,void 0)},Fe.set=function(e,t,r){return ze.set.call(this,e[0],t,r,e[0])};var Qe=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...i){return n.produce(e,e=>t.call(this,e,...i))}}let n;if("function"!=typeof t&&fe(6),void 0!==r&&"function"!=typeof r&&fe(7),ve(e)){const i=We(this),o=Ze(e,void 0);let a=!0;try{n=t(o),a=!1}finally{a?$e(i):Ie(i)}return Ce(i,r),Ue(n,i)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===pe&&(n=void 0),this.autoFreeze_&&Te(n,!0),r){const t=[],i=[];_e("Patches").generateReplacementPatches_(e,n,t,i),r(t,i)}return n}fe(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,t=>e(t,...r));let r,n;return[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;ve(e)||fe(8),ge(e)&&(ge(t=e)||fe(10),e=Ke(t));const r=We(this),n=Ze(e,void 0);return n[ye].isManual_=!0,Ie(r),n}finishDraft(e,t){const r=e&&e[ye];r&&r.isManual_||fe(9);const{scope_:n}=r;return Ce(n,t),Ue(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=_e("Patches").applyPatches_;return ge(e)?n(e,t):this.produce(e,e=>n(e,t))}},Xe=Qe.produce;const et="sophi_analytics",tt=V([k(),m()]),rt=x({campaignName:tt,referrerDomain:tt,referrerMedium:tt,referrerSource:S(tt,null),referrerChannel:S(tt,null),queryParams:S(A(k(),k()),{}),timestamp:V([L(k(),d(e=>new Date(e)),g()),m()])}),nt=x({session:rt}),it=x({campaignName:tt,referrerDomain:tt,referrerMedium:tt,referrerSource:S(tt,null),referrerChannel:S(tt,null),queryParams:A(k(),k()),timestamp:V([g(),m()])}),ot=x({session:it});class at{constructor(){this.campaignName=null,this.referrerDomain=null,this.referrerMedium=null,this.referrerSource=null,this.referrerChannel=null,this.queryParams={},this.timestamp=null}}const st=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],lt=P([...st,"countryCode"]),ct=x({userProperties:A(lt,V([k(),b(),h()])),visitor:nt}),ut={userProperties:{},visitor:{session:new at}},pt=function(){document.hidden||this.update(()=>dt(this.storage))},dt=function(e){const t=null==e?void 0:e.getItem(et);if(t)try{const e=JSON.parse(t);return T(ct,e)}catch(e){return ut}return ut};class yt{constructor(e){this.update=e=>{this.state=Xe(this.state,e),this.storage&&this.storage.setItem(et,JSON.stringify(this.state))},this.storage=e,this.state=Xe(dt(this.storage),()=>{}),document.addEventListener("visibilitychange",pt.bind(this))}}const ft=[...st,"content.id","content.age","content.section","content.accessCategory"],ht=j.picklist(ft),gt=j.union([j.string(),j.number(),j.boolean()]),vt=(j.record(ht,gt),{gtmDataLayer:{dataLayerName:"dataLayer",listenToPast:!0}}),wt=j.object({name:j.literal("userProperties"),key:lt,path:j.pipe(j.string(),j.minLength(1))}),mt=j.object({name:j.pipe(j.string(),j.minLength(1)),actions:j.array(wt)}),bt=j.object({dataLayerName:j.optional(j.string(),vt.gtmDataLayer.dataLayerName),events:j.array(mt),listenToPast:j.optional(j.boolean(),vt.gtmDataLayer.listenToPast)}),xt=j.object({gtmDataLayer:j.optional(bt)});var St={724(e,t,r){var n;!function(i,o){var a="function",s="undefined",l="object",c="string",u="model",p="name",d="type",y="vendor",f="version",h="architecture",g="console",v="mobile",w="tablet",m="smarttv",b="wearable",x="embedded",S="Amazon",P="Apple",A="ASUS",k="BlackBerry",D="Browser",V="Chrome",T="Firefox",L="Google",j="Huawei",E="LG",O="Microsoft",_="Motorola",B="Opera",C="Samsung",$="Sharp",I="Sony",W="Xiaomi",R="Zebra",U="Facebook",M=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},N=function(e,t){return typeof e===c&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},z=function(e,t){if(typeof e===c)return e=e.replace(/^\s\s*/,""),typeof t===s?e:e.substring(0,350)},F=function(e,t){for(var r,n,i,s,c,u,p=0;p<t.length&&!c;){var d=t[p],y=t[p+1];for(r=n=0;r<d.length&&!c;)if(c=d[r++].exec(e))for(i=0;i<y.length;i++)u=c[++n],typeof(s=y[i])===l&&s.length>0?2===s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,u):this[s[0]]=s[1]:3===s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=u?u.replace(s[1],s[2]):o:this[s[0]]=u?s[1].call(this,u,s[2]):o:4===s.length&&(this[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):o):this[s]=u||o;p+=2}},q=function(e,t){for(var r in t)if(typeof t[r]===l&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(N(t[r][n],e))return"?"===r?o:r}else if(N(t[r],e))return"?"===r?o:r;return e},H={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},J={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,f],[/opios[\/ ]+([\w\.]+)/i],[f,[p,B+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[p,B]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[p,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[p,"UC"+D]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[f,[p,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[p,"IE"]],[/yabrowser\/([\w\.]+)/i],[f,[p,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+D],f],[/\bfocus\/([\w\.]+)/i],[f,[p,T+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[p,B+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[p,B+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[p,"MIUI "+D]],[/fxios\/([-\w\.]+)/i],[f,[p,T]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+D]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+D],f],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,U],f],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[p,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[p,V+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,V+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[p,"Android "+D]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[f,q,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[p,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[p,T+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,f],[/(cobalt)\/([\w\.]+)/i],[p,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,G]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[y,C],[d,w]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[y,C],[d,v]],[/((ipod|iphone)\d+,\d+)/i],[u,[y,P],[d,v]],[/(ipad\d+,\d+)/i],[u,[y,P],[d,w]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[y,P],[d,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[y,P],[d,w]],[/(macintosh);/i],[u,[y,P]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[y,j],[d,w]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[y,j],[d,v]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[y,W],[d,v]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[y,W],[d,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[y,"OPPO"],[d,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[y,"Vivo"],[d,v]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[y,"Realme"],[d,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[y,_],[d,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[y,_],[d,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[y,E],[d,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[y,E],[d,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[y,"Lenovo"],[d,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[y,"Nokia"],[d,v]],[/(pixel c)\b/i],[u,[y,L],[d,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[y,L],[d,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[y,I],[d,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[y,I],[d,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[y,"OnePlus"],[d,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[y,S],[d,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[y,S],[d,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,y,[d,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[y,k],[d,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[y,A],[d,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[y,A],[d,v]],[/(nexus 9)/i],[u,[y,"HTC"],[d,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[y,[u,/_/g," "],[d,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[y,"Acer"],[d,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[y,"Meizu"],[d,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[y,$],[d,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[y,u,[d,v]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[y,u,[d,w]],[/(surface duo)/i],[u,[y,O],[d,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[y,"Fairphone"],[d,v]],[/(u304aa)/i],[u,[y,"AT&T"],[d,v]],[/\bsie-(\w*)/i],[u,[y,"Siemens"],[d,v]],[/\b(rct\w+) b/i],[u,[y,"RCA"],[d,w]],[/\b(venue[\d ]{2,7}) b/i],[u,[y,"Dell"],[d,w]],[/\b(q(?:mv|ta)\w+) b/i],[u,[y,"Verizon"],[d,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[y,"Barnes & Noble"],[d,w]],[/\b(tm\d{3}\w+) b/i],[u,[y,"NuVision"],[d,w]],[/\b(k88) b/i],[u,[y,"ZTE"],[d,w]],[/\b(nx\d{3}j) b/i],[u,[y,"ZTE"],[d,v]],[/\b(gen\d{3}) b.+49h/i],[u,[y,"Swiss"],[d,v]],[/\b(zur\d{3}) b/i],[u,[y,"Swiss"],[d,w]],[/\b((zeki)?tb.*\b) b/i],[u,[y,"Zeki"],[d,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[y,"Dragon Touch"],u,[d,w]],[/\b(ns-?\w{0,9}) b/i],[u,[y,"Insignia"],[d,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[y,"NextBook"],[d,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[y,"Voice"],u,[d,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[y,"LvTel"],u,[d,v]],[/\b(ph-1) /i],[u,[y,"Essential"],[d,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[y,"Envizen"],[d,w]],[/\b(trio[-\w\. ]+) b/i],[u,[y,"MachSpeed"],[d,w]],[/\btu_(1491) b/i],[u,[y,"Rotor"],[d,w]],[/(shield[\w ]+) b/i],[u,[y,"Nvidia"],[d,w]],[/(sprint) (\w+)/i],[y,u,[d,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[y,O],[d,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[y,R],[d,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[y,R],[d,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[y,u,[d,g]],[/droid.+; (shield) bui/i],[u,[y,"Nvidia"],[d,g]],[/(playstation [345portablevi]+)/i],[u,[y,I],[d,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[y,O],[d,g]],[/smart-tv.+(samsung)/i],[y,[d,m]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[y,C],[d,m]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[y,E],[d,m]],[/(apple) ?tv/i],[y,[u,P+" TV"],[d,m]],[/crkey/i],[[u,V+"cast"],[y,L],[d,m]],[/droid.+aft(\w)( bui|\))/i],[u,[y,S],[d,m]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[y,$],[d,m]],[/(bravia[\w ]+)( bui|\))/i],[u,[y,I],[d,m]],[/(mitv-\w{5}) bui/i],[u,[y,W],[d,m]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[y,z],[u,z],[d,m]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,m]],[/((pebble))app/i],[y,u,[d,b]],[/droid.+; (glass) \d/i],[u,[y,L],[d,b]],[/droid.+; (wt63?0{2,3})\)/i],[u,[y,R],[d,b]],[/(quest( 2)?)/i],[u,[y,U],[d,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[y,[d,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[d,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[d,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,w]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[y,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[p,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[p,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[f,q,H]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,"Windows"],[f,q,H]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,"Mac OS"],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,f],[/\(bb(10);/i],[f,[p,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[p,T+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[p,"webOS"]],[/crkey\/([\d\.]+)/i],[f,[p,V+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[p,"Chromium OS"],f],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,f],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[p,f]]},Y=function(e,t){if(typeof e===l&&(t=e,e=o),!(this instanceof Y))return new Y(e,t).getResult();var r=e||(typeof i!==s&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),n=t?function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r}(J,t):J;return this.getBrowser=function(){var e,t={};return t[p]=o,t[f]=o,F.call(t,r,n.browser),t.major=typeof(e=t.version)===c?e.replace(/[^\d\.]/g,"").split(".")[0]:o,t},this.getCPU=function(){var e={};return e[h]=o,F.call(e,r,n.cpu),e},this.getDevice=function(){var e={};return e[y]=o,e[u]=o,e[d]=o,F.call(e,r,n.device),e},this.getEngine=function(){var e={};return e[p]=o,e[f]=o,F.call(e,r,n.engine),e},this.getOS=function(){var e={};return e[p]=o,e[f]=o,F.call(e,r,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===c&&e.length>350?z(e,350):e,this},this.setUA(r),this};Y.VERSION="0.7.33",Y.BROWSER=M([p,f,"major"]),Y.CPU=M([h]),Y.DEVICE=M([u,y,d,g,v,m,w,b,x]),Y.ENGINE=Y.OS=M([p,f]),typeof t!==s?(e.exports&&(t=e.exports=Y),t.UAParser=Y):r.amdO?(n=function(){return Y}.call(t,r,t,e))===o||(e.exports=n):typeof i!==s&&(i.UAParser=Y);var Z=typeof i!==s&&(i.jQuery||i.Zepto);if(Z&&!Z.ua){var K=new Y;Z.ua=K.getResult(),Z.ua.get=function(){return K.getUA()},Z.ua.set=function(e){K.setUA(e);var t=K.getResult();for(var r in t)Z.ua[r]=t[r]}}}("object"==typeof window?window:this)}},Pt={};function At(e){var t=Pt[e];if(void 0!==t)return t.exports;var r=Pt[e]={exports:{}};return St[e].call(r.exports,r,r.exports,At),r.exports}At.amdO={},At.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return At.d(t,{a:t}),t},At.d=(e,t)=>{for(var r in t)At.o(t,r)&&!At.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},At.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var kt={};At.d(kt,{Ay:()=>Et,Hi:()=>Lt,Tc:()=>Tt,vV:()=>jt});var Dt=At(724),Vt=At.n(Dt);const Tt={console:0,mobile:1,tablet:2,smarttv:3,wearable:4,other:5},Lt=["type","os","viewer"],jt=function(e){try{const t=Vt()(e);return{viewer:void 0===t?.browser?.name?"":t.browser.name,type:void 0===t?.device?.type?"":t.device.type,os:void 0===t?.os?.name?"":t.os.name}}catch(e){return{viewer:"",type:"",os:""}}},Et=jt,Ot=kt.Tc,_t=kt.Ay,Bt=kt.Hi,Ct="sophi_demeter",$t=31536e3,It=!1,Wt=12,Rt=!0,Ut={enabled:!1,key:"demeter_tracing"},Mt={visitorType:!1,contentPropensityLevel:!1},Nt=j.union([j.pipe(j.string(),j.check(e=>{try{return new URL("http://"+e).hostname===e}catch(e){return!1}}))]),Gt=j.pipe(j.string(),j.check(e=>{try{return new RegExp(e),!0}catch(e){return!1}},"Invalid regex pattern")),zt=j.object({isEnabled:j.literal(!0),name:j.optional(j.string(),Ct),maxAge:j.optional(j.number(),$t),includeOutcome:j.optional(j.boolean(),It)}),Ft=j.object({isEnabled:j.literal(!1)}),qt=j.optional(j.union([zt,Ft]),{isEnabled:!1}),Ht=j.object({type:j.union([j.literal("client"),j.literal("server")])}),Jt=j.object({isDeviceAndLocationDataAllowed:j.literal(!0),isUserBehaviorDataAllowed:j.literal(!0)}),Yt=j.object({isDeviceAndLocationDataAllowed:j.literal(!1),isUserBehaviorDataAllowed:j.literal(!1)}),Zt=j.optional(j.object({off:j.union([Yt,Jt]),on:Jt}),{off:{isDeviceAndLocationDataAllowed:!1,isUserBehaviorDataAllowed:!1},on:{isDeviceAndLocationDataAllowed:!0,isUserBehaviorDataAllowed:!0}}),Kt=j.object({name:j.union([j.literal("contains"),j.literal("regex"),j.literal("toBoolean"),j.literal("toNumber")]),args:j.optional(j.record(j.string(),j.any()))}),Qt=j.union([j.array(Kt)]),Xt=j.object({source:j.pipe(j.string(),j.toLowerCase(),j.literal("url")),expression:Gt}),er=j.object({source:j.pipe(j.string(),j.toLowerCase(),j.literal("dom")),selector:j.string(),attribute:j.string(),expression:j.optional(Gt)}),tr=j.object({source:j.pipe(j.string(),j.toLowerCase(),j.literal("window")),path:j.pipe(j.string(),j.minLength(1)),expression:j.optional(Gt)}),rr=j.union([Xt,er,tr]),nr=j.object({name:j.union([j.literal("daysSince"),j.literal("toBoolean"),j.literal("map")]),args:j.optional(j.record(j.string(),j.any()))}),ir=j.object({name:j.pipe(j.string(),j.trim(),j.minLength(1)),handler:j.optional(nr),type:j.union([j.literal("string"),j.literal("number"),j.literal("boolean"),j.literal("list")]),tracked:j.optional(j.boolean())}),or=j.intersect([rr,ir,j.object({key:ht})]),ar=j.array(or),sr=j.picklist(Bt),lr=j.picklist(["timeZone","referrer"]),cr=j.object({source:j.literal("device"),key:sr}),ur=j.object({source:j.literal("contentProperties"),key:ht}),pr=j.object({source:j.literal("userProperties"),key:lt}),dr=j.object({source:j.literal("visit"),key:lr}),yr=j.union([cr,ur,pr,dr]),fr=j.object({host:j.pipe(j.string(),j.minLength(1)),url:j.optional(j.string(),"https://paywall.sophi.io"),timeout:j.optional(j.pipe(j.number(),j.check(e=>e>0)),2e3),dataMap:j.pipe(j.record(j.string(),yr),j.check(e=>{const t=e["content.id"];return!!t&&"contentProperties"===t.source&&"content.id"===t.key},'dataMap must include "content.id" with source "contentProperties" and key "content.id"'))}),hr=j.object({selector:j.string()}),gr=j.object({event:j.string()}),vr=j.union([hr,gr]),wr=j.object({key:lt,name:j.string(),type:j.literal("number"),tracked:j.optional(j.boolean(),Rt),handlers:j.optional(Qt)}),mr=j.object({key:lt,name:j.string(),type:j.literal("string"),minLength:j.optional(j.number()),maxLength:j.optional(j.number(),Wt),tracked:j.optional(j.boolean(),Rt),handlers:j.optional(Qt)}),br=j.object({key:lt,name:j.string(),type:j.literal("boolean"),tracked:j.optional(j.boolean(),Rt),handlers:j.optional(Qt)}),xr=j.union([j.literal("string"),j.literal("number"),j.literal("boolean")]),Sr=j.union([j.literal("visitorType"),lt]),Pr=j.object({key:Sr,name:j.string(),type:xr,minLength:j.optional(j.number()),maxLength:j.optional(j.number(),Wt),tracked:j.optional(j.boolean(),Rt),handlers:j.optional(Qt)}),Ar=j.intersect([Pr,j.object({source:j.pipe(j.string(),j.toLowerCase(),j.literal("window")),path:j.pipe(j.string(),j.minLength(1)),expression:j.optional(Gt)})]),kr=j.intersect([Pr,j.object({source:j.pipe(j.string(),j.toLowerCase(),j.literal("dom")),selector:j.string(),attribute:j.string(),expression:j.optional(Gt)})]),Dr=j.intersect([Pr,j.object({source:j.pipe(j.string(),j.toLowerCase(),j.literal("url")),expression:Gt})]),Vr=j.union([Ar,kr,Dr,wr,mr,br]),Tr=j.array(Vr),Lr=j.optional(j.boolean(),!0),jr=j.optional(j.object({enabled:j.optional(j.boolean(),Ut.enabled),key:j.optional(j.string(),Ut.key)}),Ut),Er=j.optional(j.object({contentPropensityLevel:j.optional(j.union([j.literal(!1),er]),Mt.contentPropensityLevel),visitorType:j.optional(j.union([j.literal(!1),er]),Mt.visitorType)}),Mt),Or=j.pipe(j.string(),j.trim(),j.minLength(1)),_r=j.object({hostname:Nt,subMarket:j.optional(j.string()),enableExperiment:j.optional(j.boolean()),cookie:qt,subdomains:j.optional(j.array(j.string()),[]),mode:Zt,paywallApi:j.optional(fr),spa:j.optional(vr),userProperties:j.optional(Tr),contentProperties:j.optional(ar),generatePageviewOnWallHit:Lr,wallGeneration:j.optional(Ht,{type:"client"}),addTracingToLocalStorage:jr,enableWallIndicators:j.optional(j.boolean(),!1),newsletterCampaigns:j.optional(j.array(j.string()),[]),metaValues:Er,showPaywallScore:j.optional(j.boolean(),!1),policy:j.optional(j.object({evaluator:Or,thresholds:Or})),extensions:j.optional(xt),tenant:j.string()}),Br=j.pipe(j.custom(e=>!e||"object"!=typeof e||!("analytics"in e)||"custom"===e.analytics,"Unsupported analytics module"),j.custom(e=>{if(e&&"object"==typeof e&&"contentProperties"in e){if("enableWallIndicators"in e&&e.enableWallIndicators)return!1;if("wallGeneration"in e&&"object"==typeof e.wallGeneration&&null!==e.wallGeneration&&"type"in e.wallGeneration&&"server"===e.wallGeneration.type)return!1}return!0},"Content properties cannot be used with server-side wall generation or wall indicators")),Cr=j.pipe(_r,Br),$r=JSON.parse('{"hostname":"dailymail.co.uk","subMarket":"row","enableExperiment":true,"subdomains":[],"model":"row-dailymail","analytics":"custom","enableWallIndicators":true,"policy":{"evaluator":"dmg","thresholds":"row-dailymail.co.uk.json"},"metaValues":{"contentPropensityLevel":{"source":"dom","selector":"meta[property=\'sophi:content_propensity_level\']","attribute":"content"},"visitorType":{"source":"dom","selector":"meta[name=\'sophi:visitor_type\']","attribute":"content"}},"mode":{"off":{"isDeviceAndLocationDataAllowed":false,"isUserBehaviorDataAllowed":false},"on":{"isDeviceAndLocationDataAllowed":true,"isUserBehaviorDataAllowed":true}},"generatePageviewOnWallHit":false,"tenant":"dailymail"}');var Ir,Wr,Rr,Ur,Mr,Nr,Gr=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},zr=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class Fr{constructor(e){Wr.add(this),Rr.set(this,void 0),Ur.set(this,void 0),Mr.set(this,"isConsented"),this.consentParameterValue=null,Gr(this,Rr,e.off,"f"),Gr(this,Ur,e.on,"f"),this.isDeviceAndLocationDataAllowed=zr(this,Rr,"f").isDeviceAndLocationDataAllowed,this.isUserBehaviorDataAllowed=zr(this,Rr,"f").isUserBehaviorDataAllowed,zr(this,Wr,"m",Nr).call(this)}getDefaultConsentValue(){return!0===zr(this,Rr,"f").isDeviceAndLocationDataAllowed&&!0===zr(this,Rr,"f").isUserBehaviorDataAllowed?"on":"off"}on(){this.isDeviceAndLocationDataAllowed=zr(this,Ur,"f").isDeviceAndLocationDataAllowed,this.isUserBehaviorDataAllowed=zr(this,Ur,"f").isUserBehaviorDataAllowed}off(){this.isDeviceAndLocationDataAllowed=!1,this.isUserBehaviorDataAllowed=!1}}function qr(e){return e?"selector"in e?`yes\n      Â· observed DOM element: ${e.selector}`:`yes\n      Â· listening for event: ${e.event}`:"no"}function Hr(e){return!1===e?"disabled":Jr(e)}function Jr(e){return`enabled\n      Â· selector: ${e.selector}\n      Â· attribute: ${e.attribute}`}function Yr(e){return e&&0!==e.length?e.map(e=>`${e.key} - ${e.name}`).join(", "):"none"}Rr=new WeakMap,Ur=new WeakMap,Mr=new WeakMap,Wr=new WeakSet,Nr=function(){const e=ue(zr(this,Mr,"f"));"true"===e?(this.on(),this.consentParameterValue=!0):"false"===e&&(this.off(),this.consentParameterValue=!1)};const Zr=(sn=null!==(Ir=(()=>{const e=sessionStorage.getItem("sophi_demeter_config");if(null!==e)try{return JSON.parse(e)}catch(e){return null}})())&&void 0!==Ir?Ir:$r,j.parse(Cr,sn)),Kr=new class{constructor(e){this.hostname=e.hostname,this.subMarket=e.subMarket,this.enableExperiment=e.enableExperiment,this.cookie=e.cookie,this.subdomains=e.subdomains,this.mode=new Fr(e.mode),this.paywallApi=e.paywallApi,this.spa=e.spa,this.userProperties=e.userProperties,this.contentProperties=e.contentProperties,this.generatePageviewOnWallHit=e.generatePageviewOnWallHit,this.wallGeneration=e.wallGeneration,this.addTracingToLocalStorage=e.addTracingToLocalStorage,this.enableWallIndicators=e.enableWallIndicators,this.newsletterCampaigns=e.newsletterCampaigns,this.metaValues=e.metaValues,this.showPaywallScore=e.showPaywallScore,le.info(function(e){var t,r,n;let i=`âï¸ Bundle settings\n    Â· Host: ${e.hostname}\n    Â· Subdomains: ${(null===(t=e.subdomains)||void 0===t?void 0:t.join(", "))||"none"}\n    Â· Wall type: ${e.wallGeneration.type} side`;var o;return i="debug"===ae.logLevel?`${i}\n    Â· Experiments: ${e.enableExperiment?"enabled":"disabled"}\n    Â· Cookie: ${(null===(r=e.cookie)||void 0===r?void 0:r.isEnabled)?"enabled":"disabled"}\n    Â· Paywall API: ${e.paywallApi?"enabled":"disabled"}\n    Â· Default consent: ${e.mode.getDefaultConsentValue()}\n    Â· Single Page Application: ${qr(e.spa)}\n    Â· Wallhits generate pageviews: ${e.generatePageviewOnWallHit?"yes":"no"}\n    Â· Wall indicators: ${e.enableWallIndicators?"enabled":"disabled"}\n    Â· Visitor type detection: ${Hr(e.metaValues.visitorType)}\n    Â· Content propensity level detection: ${Hr(e.metaValues.contentPropensityLevel)}\n    Â· User properties: ${Yr(e.userProperties)}\n    Â· Content properties: ${Yr(e.contentProperties)}`:`${i}\n    ${o=[e.enableExperiment&&{label:"Experiments",value:"enabled"},(null===(n=e.cookie)||void 0===n?void 0:n.isEnabled)&&{label:"Cookie",value:"enabled"},e.paywallApi&&{label:"Paywall API",value:"enabled"},e.mode.getDefaultConsentValue()&&{label:"Default consent",value:e.mode.getDefaultConsentValue()},{label:"Single Page Application",value:qr(e.spa)},e.generatePageviewOnWallHit&&{label:"Wallhits generate pageviews",value:"yes"},e.enableWallIndicators&&{label:"Wall indicators",value:"enabled"},e.metaValues.visitorType&&{label:"Visitor type detection",value:Jr(e.metaValues.visitorType)},e.metaValues.contentPropensityLevel&&{label:"Content propensity level detection",value:Hr(e.metaValues.contentPropensityLevel)}],o.filter(e=>Boolean(e)).map(e=>`Â· ${e.label}: ${e.value}\n    `).join("")}`,i}(this))}}(Zr),Qr=Kr,Xr=function(e){var t,r;let n=null;if(Qr.enableExperiment&&(null===(t=window.sophi)||void 0===t?void 0:t.abTests)&&!0===Qr.mode.isDeviceAndLocationDataAllowed&&!0===Qr.mode.isUserBehaviorDataAllowed){const t=null===(r=window.sophi)||void 0===r?void 0:r.abTests.getAllExperimentsSync(e);t.length>0&&(n=t[0])}return n},en=()=>Xr("external"),tn=()=>Xr("internal"),rn=(en(),tn(),"sophiDataLayerReady"),nn={trace:"",context:"",inputs:"",decisionSource:"",experimentsCode:null,assignedGroup:null,userProperties:"",contentProperties:""},on=()=>{window.sophi.dataLayer=Object.assign({},nn)},an=()=>window.sophi.dataLayer;var sn;function ln(e){window.sophi.dataLayer=Object.assign(Object.assign({},window.sophi.dataLayer),function(e){const t={};var r;return"context"in e&&(t.context=e.context),"inputs"in e&&(t.inputs=e.inputs),"trace"in e&&(t.trace=e.trace),"userProperties"in e&&(t.userProperties=e.userProperties),"contentProperties"in e&&(t.contentProperties=e.contentProperties),"experiment"in e&&e.experiment&&(t.experimentsCode=null===(r=e.experiment)?null:`${r.experimentId}=${r.assignedGroup}`,t.assignedGroup=e.experiment.assignedGroup),t}(e))}const cn=function(){window.dispatchEvent(new Event(rn))};var un;!function(e){e.GetDecision="GetDecision",e.GetDecisionForArticleWallIndicators="GetDecisionForArticleWallIndicators",e.Init="Init",e.Pageview="pageview",e.Wall="wall",e.EnableAllFeatures="EnableAllFeatures",e.UserProperties="UserProperties",e.ContentProperties="ContentProperties"}(un||(un={}));const pn=j.union([j.null_(),j.pipe(j.string(),j.trim(),j.toLowerCase())]),dn=j.object({article:j.boolean(),section:j.optional(pn)}),yn=j.union([j.union([j.pipe(j.string(),j.trim(),j.literal("paywall")),j.pipe(j.string(),j.trim(),j.literal("regwall"))]),j.object({wallType:j.union([j.pipe(j.string(),j.trim(),j.literal("paywall")),j.pipe(j.string(),j.trim(),j.literal("regwall"))]),section:j.optional(pn)})]),fn=j.union([j.object({type:j.literal(un.Pageview),payload:dn}),j.object({type:j.literal(un.Wall),payload:yn}),j.object({type:j.literal(un.UserProperties),payload:j.any()})]);j.union([fn,j.object({type:j.literal(un.GetDecision)}),j.object({type:j.literal(un.Init)}),j.object({type:j.literal(un.EnableAllFeatures)})]),r(6211);const hn=(e,t,r)=>{const n=document.querySelector(e);if(null===n)return null;const i=n.getAttribute(t);return null===i?null:r?mn(i,r):i},gn=e=>"__proto__"!==e&&"constructor"!==e&&"prototype"!==e,vn=e=>{try{const t=e.split(".");if(t.length>10)return le.warn(`Window path exceeds maximum depth of 10: "${e}" (depth: ${t.length})`),null;let r=window;for(const n of t){if(null==r)return null;if(!gn(n))return le.warn(`Unsafe path segment detected: "${n}" in path "${e}"`),null;r=r[n]}return void 0===r?null:r}catch(t){return le.warn(`Error extracting window path "${e}":`,t),null}},wn=(e,t,r,n)=>{const i=null==r?void 0:r.minLength,o=null==r?void 0:r.maxLength;return"number"==typeof i&&t.length<i?(le.warn(`${n} ${e} expected to have a minimum length of ${i} but got '${t}' with length ${t.length}, omitting.`),{isValid:!1,processedValue:t}):"number"==typeof o&&t.length>o?(le.warn(`${n} ${e} expected to have maximum length of ${o} but got '${t}' with length ${t.length}, truncating.`),{isValid:!0,processedValue:t.slice(0,o)}):{isValid:!0,processedValue:t}},mn=(e,t)=>{var r;try{const n=new RegExp(t),i=e.match(n);if(null===i)return null;const o=null!==(r=i[1])&&void 0!==r?r:i[0];return void 0===i[1]&&i[0]&&le.debug(`No capture group value, using full match: "${o}".`),o}catch(e){return le.warn(`Regex error "${t}":`,e),null}},bn=e=>null==e?null:String(e).toLowerCase();function xn(e){const t=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r=new Date,n=Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate())-t,i=Math.floor(n/864e5);return i<0?0:i}const Sn={xhigh:5,high:4,medium:3,low:2,xlow:1,null:null},Pn=Array.from(Object.keys(Sn)),An=Array.from(Object.values(Sn)),kn=(j.union([...An.filter(e=>null!==e).map(e=>j.literal(e)),j.null_()]),An.filter(e=>null!==e).reverse()),Dn=`Unknown content propensity level. Expected one of: ${kn.join(", ")}.`,Vn=j.pipe(j.union([j.string(),j.number()]),j.transform(Number),j.number(),j.picklist(kn));function Tn(e){const t=e.find(e=>e.wallType===O.PAYWALL),r={[O.PAYWALL]:null==t?void 0:t.score},n=e.find(e=>e.wallType===O.REGWALL);return void 0!==n&&(r[O.REGWALL]=n.score),r}r(9655);const Ln={0:"free access",1:"subscribers only",2:"metered views",3:"special package"},jn=e=>{try{if("dom"===e.source)return hn(e.selector,e.attribute,e.expression);if("url"===e.source){const t=new URL(location.href);return mn(t.pathname,e.expression)}return null}catch(e){return null}};r(5568);const En=(e,t)=>Boolean(e),On=(e,t)=>{const r=t.args;return"contains"===t.name&&r?((e,t)=>{if(!t||!Array.isArray(e))return null;const{value:r,caseSensitive:n=!0}=t;return(Array.isArray(r)?r:[r]).some(t=>n?e.includes(String(t)):e.some(e=>e.toLowerCase()===String(t).toLowerCase()))})(e,r):"regex"===t.name&&r?((e,t)=>{let{patterns:r}=t;if(!r||!Array.isArray(r))return null;const n="string"==typeof e?e:String(null!=e?e:""),i=r;for(const e of i){const t=mn(n,e);if(t)return t}return null})(e,r):"toBoolean"===t.name?En(e):"toNumber"===t.name?(e=>{if(null==e)return null;const t=Number(e);return Number.isNaN(t)?null:t})(e):null},_n=(e,t)=>{var r;let n=e;if(null==n||!t)return null;for(const e of t)n=On(n,e);return null!==(r=n)&&void 0!==r?r:null},Bn={values:null,analyticsString:null};function Cn(e){return null===Bn.values&&$n(e),Bn.values}function $n(e){let t={values:{},analyticsString:""};try{t=zn(e)}catch(e){le.error("Error computing content properties:",e)}Bn.values=t.values,Bn.analyticsString=t.analyticsString}function In(e,t){if(null==e)return null;if(!t)return e;switch(t.name){case"daysSince":{const r=function(e,t){try{const r=((null==t?void 0:t.dateFormat)||"iso").toLowerCase();let n=null;return n="iso"===r||"iso8601"===r?new Date(e):"unixSeconds"===r?new Date(1e3*parseInt(e,10)):"unixMillis"===r?new Date(parseInt(e,10)):new Date(e),!n||isNaN(n.getTime())?null:xn(n)}catch(e){return null}}(e,t.args);return null===r?null:r}case"toBoolean":return En(e);case"lowercase":return bn(e);case"map":return function(e,t){return t&&"object"==typeof t&&e in t?t[e]:e}(e,t.args);default:return e}}function Wn(e,t,r){let n=r;if("boolean"===t.type&&"dom"===t.source)n=null!==document.querySelector(t.selector);else if("number"===t.type&&"string"==typeof r&&"content.ages"!==e){const e=Number(r.trim());n=isNaN(e)?null:e}else"list"===t.type&&null!==r&&(n=(i=r,i.split(",").map(e=>{var t;return null===(t=bn(e))||void 0===t?void 0:t.replace(/,/g,"").trim()}).filter(Boolean)).join(" ")),t.handler&&(n=In("string"==typeof n?n:String(n),t.handler));var i;return n}function Rn(e,t,r){var n;if("content.accessCategory"===e){const e=In(t,{name:"map",args:null===(n=r.handler)||void 0===n?void 0:n.args});return Number(e)in Ln?Ln[e]:null}return"content.age"===e&&"string"==typeof t?In(t,{name:"daysSince"}):t}function Un(e,t,r){return"string"===r.type&&"string"==typeof t?wn(e,t,r,"Content property"):{isValid:!0,processedValue:t}}function Mn(e){return null==e||""===e}const Nn={"content.age":"A","content.section":"B","content.accessCategory":"C"},Gn=e=>Nn[e]||e,zn=e=>{const t=e.contentProperties||[],r={},n=[],i=[],o=[];for(const e of t){const t=e.key,a=jn(e);let s=null;if(s=t in Nn?Rn(t,a,e):Wn(t,e,a),Mn(s)){i.push(e.name);continue}const{isValid:l,processedValue:c}=Un(t,s,e);l&&(s=c,r[t]=s,o.push({label:e.name||t,value:s}),e.tracked&&n.push(`${Gn(t)}:${s}`))}return t.length>0&&function(e,t){e.length>0&&le.warn(`Some configured content properties were not found on this page: ${e.join(", ")}. Note: This is expected on homepages or section pages without article content.`);const r=t.map(e=>"Content Age"===e.label&&"number"==typeof e.value?`    Â· ${e.label}: ${e.value} days`:"string"==typeof e.value?`    Â· ${e.label}: "${e.value}"`:`    Â· ${e.label}: ${JSON.stringify(e.value)}`);le.info("Content Properties Found\n\n"+r.join("\n"))}(i,o),{values:r,analyticsString:n.join(",")}};function Fn(e){return Object.entries(e)}const qn=new class{constructor(){this.key="demeter"}get(){try{const e=localStorage.getItem(this.key);return null===e?e:JSON.parse(atob(e))}catch(e){return null}}set(e){try{return localStorage.setItem(this.key,btoa(JSON.stringify(e)))}catch(e){}}clear(){try{return localStorage.removeItem(this.key)}catch(e){}}};var Hn,Jn,Yn,Zn,Kn=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},Qn=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};const Xn=j.array(j.string()),ei=j.object({pageViews:j.number(),pageViewsByArticle:j.number(),pageViewsByArticleWithPaywall:j.number(),pageViewsByArticleWithRegwall:j.number(),topLevelSections:Xn,topLevelSectionsByArticle:Xn}),ti=j.object({granted:j.boolean(),timestamp:j.string()});function ri(){return(new Date).toISOString()}class ni{constructor(){this.pageViews=0,this.pageViewsByArticle=0,this.pageViewsByArticleWithPaywall=0,this.pageViewsByArticleWithRegwall=0,this.topLevelSections=[],this.topLevelSectionsByArticle=[]}}const ii=j.optional(j.array(fn),[]),oi=j.object({previous:j.partial(ee),events:ii}),ai=j.object({previous:j.optional(ee),events:ii,outcomes:j.optional(j.array(F),[])}),si=j.pipe(j.any(),j.transform(e=>{const t=j.safeParse(ai,e);if(t.success)return t.output;const r=j.safeParse(oi,e);return r.success?{events:r.output.events,previous:r.output.previous,outcomes:[]}:{events:[],previous:void 0,outcomes:[]}})),li=j.object({today:ei,history:j.array(ei),lastSeen:j.string(),visitor:I,coldDataLayer:si,consent:j.optional(ti)}),ci=j.tuple([j.number(),j.number(),j.number(),j.number(),Xn,Xn]),ui=j.object({lS:j.string(),v:I,t:ci,h:j.array(ci),cDL:si,c:j.optional(j.tuple([j.boolean(),j.string()]))}),pi=e=>[e.pageViews,e.pageViewsByArticle,e.pageViewsByArticleWithPaywall,e.pageViewsByArticleWithRegwall,e.topLevelSections,e.topLevelSectionsByArticle],di=e=>({pageViews:e[0],pageViewsByArticle:e[1],pageViewsByArticleWithPaywall:e[2],pageViewsByArticleWithRegwall:e[3],topLevelSections:e[4],topLevelSectionsByArticle:e[5]});class yi{constructor(){this.today={pageViews:0,pageViewsByArticle:0,pageViewsByArticleWithPaywall:0,pageViewsByArticleWithRegwall:0,topLevelSections:[],topLevelSectionsByArticle:[]},this.history=Array(28).fill(void 0).map(()=>new ni),this.lastSeen="",this.visitor="anonymous",this.coldDataLayer={previous:void 0,events:[],outcomes:[]},this.consent=void 0}}Jn=new WeakMap,Hn=new WeakSet,Yn=function(e){try{const t=j.safeParse(ui,e);return t.success?(e=>{const{lS:t,v:r,t:n,h:i,cDL:o,c:a}=e,s=i.map(di);return{lastSeen:t,visitor:r,today:di(n),history:s,coldDataLayer:o,consent:a?{granted:a[0],timestamp:a[1]}:void 0}})(t.output):j.parse(li,e)}catch(e){return new yi}},Zn=function(e){if(!1===Qr.mode.isUserBehaviorDataAllowed)return e;const t=new Date(e.lastSeen),r=Math.max(0,xn(t));if(r>0){e.history.unshift(e.today);for(let t=0;t<r-1;t++)e.history.unshift((new yi).today);e.history=e.history.slice(0,28),e.today=(new yi).today}return e.lastSeen=ri(),e};const fi=new class{constructor(){Hn.add(this),Jn.set(this,void 0);const e=qn.get();Qn(this,Jn,Kn(this,Hn,"m",Zn).call(this,Kn(this,Hn,"m",Yn).call(this,e)),"f")}getFromStored(){this.updateState(Kn(this,Hn,"m",Yn).call(this,qn.get()))}updateState(e){Qn(this,Jn,Kn(this,Hn,"m",Zn).call(this,e),"f"),qn.set((e=>{const{today:t,history:r,lastSeen:n,visitor:i,coldDataLayer:o,consent:a}=e,s=r.map(pi);return{lS:n,v:i,t:pi(t),h:s,cDL:o,c:a?[a.granted,a.timestamp]:void 0}})(e))}getState(){return JSON.parse(JSON.stringify(Kn(this,Jn,"f")))}clear(){qn.clear(),Qn(this,Jn,Kn(this,Hn,"m",Zn).call(this,Kn(this,Hn,"m",Yn).call(this,null)),"f")}getConsent(){return Kn(this,Jn,"f").consent}setConsent(e){const t=this.getState();t.consent={granted:e,timestamp:ri()},this.updateState(t)}},hi=(e,t)=>{if(null==e)return null;try{switch(t){case"string":{const t=String(e);return""===t.trim()?null:t}case"number":{const t=Number(e);return isNaN(t)?null:t}case"boolean":if("boolean"==typeof e)return e;if("string"==typeof e){const t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1}return Boolean(e);default:return null}}catch(e){return null}},gi=e=>{const t=j.safeParse(I,e);return t.success?{isValid:!0,value:t.output}:(le.warn(`visitorType should be '${C}' or '${$}', got '${e}'.`),{isValid:!1,value:null})},vi={countryCode:"A"},wi=[{key:"visitorType",name:"Visitor type",type:"string"}],mi=(e,t,r)=>"minLength"in r&&void 0!==r.minLength&&t.length<r.minLength?(le.warn(`User property ${e} expected to have a minimum length of ${r.minLength} but got '${t}' with length ${t.length}, omitting.`),{isValid:!1,processedValue:t}):"maxLength"in r&&void 0!==r.maxLength&&t.length>r.maxLength?(le.warn(`User property ${e} expected to have maximum length of ${r.maxLength} but got '${t}' with length ${t.length}, truncating.`),{isValid:!0,processedValue:t.slice(0,r.maxLength)}):{isValid:!0,processedValue:t},bi=(e,t)=>{if(!0!==e.mode.isDeviceAndLocationDataAllowed||!0!==e.mode.isUserBehaviorDataAllowed)return void le.debug("Discarding userProperties event");const{custom:r,reserved:n}=((e,t)=>{const r={},n={};if("object"!=typeof t||null===t)return le.warn("User properties must be in an 'args' object. Received:",t),{custom:r,reserved:n};const i=(e=>{const t=new Map;for(const e of wi)t.set(e.key,e);for(const r of e)t.set(r.key,r);return t})(e.userProperties||[]);for(const e of Fn(t)){let[t,o]=e;const a=i.get(t);if(a){if("handlers"in a&&a.handlers){const e=_n(o,a.handlers);if(void 0===e){le.debug(`User property ${t} handler returned undefined, omitting.`);continue}o=e}if(typeof o===a.type){if("string"==typeof o){const{isValid:e,processedValue:r}=mi(t,o,a);if(!e)continue;o=r}if("visitorType"===a.key){const{isValid:e,value:t}=gi(o);if(!e)continue;n[a.key]=t;continue}r[a.key]=o}else le.warn(`User property ${t} expected to be a ${a.type} but got ${typeof o}, omitting.`)}else le.warn(`User property ${t} is not configured, omitting.`)}return{custom:r,reserved:n}})(e,t);if(Object.keys(r).length>0&&le.debug("Setting user properties",r),Object.keys(n).length>0&&le.debug("Setting reserved properties",n),Object.keys(r).length>0&&ma.update(e=>{Object.assign(e.userProperties,r)}),n.visitorType){const e=fi.getState(),t=n.visitorType;fi.updateState(Object.assign(Object.assign({},e),{visitor:t}))}},xi=bi,Si=["utm_campaign","utm_medium","utm_source"],Pi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;try{const t=new URL(e),r={};return Si.forEach(e=>{const n=t.searchParams.get(e);null!==n&&(r[e]=n.toLowerCase())}),r}catch(e){return le.error("Unable to extract query parameters.",e),{}}};var Ai={d:(e,t)=>{for(var r in t)Ai.o(t,r)&&!Ai.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},ki={};Ai.d(ki,{Ay:()=>Ei,Fo:()=>Ti,LU:()=>ji,Tk:()=>Vi,VS:()=>Di,cr:()=>Li});const Di={campaign:0,direct:1,internal:2,search:3,social:4,other:5},Vi={google:0,yahoo:1,duckduckgo:2,bing:3,facebook:4,instagram:5,x:6,linkedin:7,reddit:8,newsletter:9},Ti={search:0,news:1,discover:2},Li=function(e,t,r,n){return ji(e,t,r,n)?.medium},ji=function(e,t,r,n,i){if("string"!=typeof e)throw new Error("locationHref should be a string");if("string"!=typeof t)throw new Error("documentReferrer should be a string");if("string"!=typeof r)throw new Error("locationHost should be a string");const o=t.toLowerCase().trim(),a=e.toLowerCase().trim(),s=r.toLowerCase().trim();let l;try{l=new URLSearchParams(new URL(a).search).get("utm_campaign")}catch{l=null}if(l){const e=i?.newsletterCampaigns;return{medium:"campaign",source:e?.includes(l)?"newsletter":void 0}}if(!o)return{medium:"direct"};const c=o.match(/^(?:.+:\/\/)?([^/]+)/i),u=c?c[1].replace(/^www\./i,""):"",p=s.replace(/^www\./i,"");if(u===p||u.endsWith(`.${p}`)&&u.length>p.length+1)return{medium:"internal"};if(/^[^\s.][^\s]*\.google\.android\.googlequicksearchbox\b/i.test(u))return{medium:"search",source:"google",channel:"discover"};if("string"==typeof n&&t.includes("google.com")&&n.includes("Safari")&&(n.includes("GSA")||n.includes("GNews"))&&(n.includes("604.1")||n.includes("605.1.15")))return{medium:"search",source:"google",channel:"discover"};if("news.google.com"===u)return{medium:"search",source:"google",channel:"news"};const d=[{source:"google",channel:"search"},{source:"yahoo"},{source:"duckduckgo"},{source:"bing"}],y=e=>{if(e.domains){const t=e.domains.map(e=>`(^|\\.)${e.replace(".","\\.")}$`).join("|");return new RegExp(t,"i")}return new RegExp(String.raw`(^|.*\.)${e.source}\.(?:[a-z]{2,63}|[a-z]{2,63}\.[a-z]{2})$`,"i")};for(const e of d)if(y(e).test(u))return"google"===e.source?{medium:"search",source:e.source,channel:e.channel}:{medium:"search",source:e.source};const f=[{source:"facebook"},{source:"instagram"},{source:"x",domains:["x.com","t.co"]},{source:"linkedin"},{source:"reddit"}];for(const e of f)if(y(e).test(u))return{medium:"social",source:e.source};return{medium:"other",source:u||void 0}},Ei=Li,Oi=ki.Fo,_i=ki.VS,Bi=ki.Tk,Ci=ki.LU,$i=function(){try{return Ci(window.location.href,document.referrer,window.location.host,navigator.userAgent,Qr)}catch(e){return le.error("Unable to determine referrer.",e),{medium:"",source:"",channel:""}}},Ii=()=>{ma.update(e=>{e.visitor.session.timestamp=new Date})},Wi=()=>{null===(null===ma.state.visitor.session.timestamp?null:(e=>new Date(e.getTime()+18e5))(ma.state.visitor.session.timestamp).toISOString()<(new Date).toISOString()?(ma.update(e=>{e.visitor.session=new at}),null):ma.state.visitor.session)?((()=>{const e=/^(?:https?:\/\/)?([^/]+)/i;if("string"==typeof document.referrer){const t=document.referrer.match(e);null!==t&&ma.update(e=>{e.visitor.session.referrerDomain=t[1]})}})(),(()=>{try{const e=new URLSearchParams(window.location.search).get("utm_campaign");null!==e&&ma.update(t=>{t.visitor.session.campaignName=e.toLowerCase()})}catch(e){}})(),(()=>{const{medium:e,source:t,channel:r}=$i();ma.update(n=>{n.visitor.session.referrerMedium=e,n.visitor.session.referrerSource=null!=t?t:null,n.visitor.session.referrerChannel=null!=r?r:null})})(),(()=>{const e=Pi();ma.update(t=>{t.visitor.session.queryParams=e})})(),Ii()):Ii()},Ri="sophiEventQueue",Ui=e=>atob(e),Mi=()=>{const e=Ri+"=",t=decodeURIComponent(document.cookie).split(";");for(let r=0;r<t.length;r++){let n=t[r].trimStart();if(n.startsWith(e)){const t=n.substring(16,n.length);try{return JSON.parse(Ui(t))}catch(e){return[]}}}return[]},Ni=new class{constructor(){this.isSubdomain=e=>{if(!e.subdomains)return le.debug("No subdomains specified in config"),!1;const t=e.subdomains,r=window.location.hostname;for(let e=0;e<t.length;e++)if(r.includes(t[e]))return!0;return!1},this.store=fi}dispatch(e){switch(e.type){case un.Init:this.handleInit();break;case un.EnableAllFeatures:this.handleEnableAllFeatures();break;case un.GetDecision:this.handleGetDecision();break;case un.GetDecisionForArticleWallIndicators:this.handleGetDecisionForArticleWallIndicators();break;case un.Pageview:e.payload=j.parse(dn,e.payload);try{this.handleSubdomainAwareEvent(e,this.handlePageview)}catch(e){le.debug("Error in pageview event handler",e)}break;case un.Wall:j.parse(yn,e.payload);try{this.handleSubdomainAwareEvent(e,this.handleWallHit)}catch(e){le.debug("Error in wall event handler",e)}break;case un.UserProperties:try{this.handleSubdomainAwareEvent(e,this.handleUserProperties)}catch(e){le.debug("Error in userProperties event handler",e)}break;case un.ContentProperties:try{this.handleContentProperties()}catch(e){le.debug("Error in contentProperties event handler",e)}break;default:throw new Error("Invalid event type")}}getDispatch(){return this.dispatch.bind(this)}handleInit(){le.debug("init handler"),this.dispatch({type:un.ContentProperties})}handleEnableAllFeatures(){var e,t;le.info("âï¸ Received enableAllFeatures event"),Qr.mode.on(),this.store.setConsent(!0),null===(t=null===(e=window.sophi)||void 0===e?void 0:e.abTests)||void 0===t||t.enableConsent(),this.isSubdomain(Qr)||(this.store.getFromStored(),this.processStoredEvents(),Wi())}handleGetDecision(){le.debug("getDecision event handler"),!0!==Qr.mode.isUserBehaviorDataAllowed||Wi()}handleGetDecisionForArticleWallIndicators(){le.debug("getDecisionForArticleWallIndicators event handler"),!0!==Qr.mode.isUserBehaviorDataAllowed||Wi()}handlePageview(e){le.info("ð§® Received pageview event",JSON.stringify(e,null,2));const{article:t,section:r}=e,n=this.store.getState();n.today.pageViews++,!0===t&&n.today.pageViewsByArticle++,"string"==typeof r&&r.length>0&&(!1===n.today.topLevelSections.includes(r)&&n.today.topLevelSections.push(r),!0===t&&!1===n.today.topLevelSectionsByArticle.includes(r)&&n.today.topLevelSectionsByArticle.push(r)),this.store.updateState(n)}handleWallHit(e){le.info("ð§® Received wall event",JSON.stringify(e,null,2));const t=this.store.getState(),r="string"==typeof e?e:e.wallType;"paywall"===r?t.today.pageViewsByArticleWithPaywall++:"regwall"===r&&t.today.pageViewsByArticleWithRegwall++,this.store.updateState(t),"object"==typeof e&&!0===Qr.generatePageviewOnWallHit&&(le.debug("Generating pageview from wall event"),this.handlePageview({article:!0,section:e.section}))}handleUserProperties(e){return xi(Qr,e)}handleContentProperties(){$n(Qr),(e=>{if(!e.userProperties||0===e.userProperties.length)return;(e=>{var t;const r=ue("userProperties.countryCode");r&&(null!==(t=e.userProperties)&&void 0!==t?t:[]).some(e=>"countryCode"===e.key)&&bi(e,{countryCode:r})})(e);const t=e.userProperties.filter(e=>"source"in e&&"window"===e.source);if(0===t.length)return;const r=(e=>{const t={},r=[];for(const n of e){const{key:e,path:i,name:o,type:a,handlers:s}=n,l=vn(i);if(null===l){r.push(o);continue}if("visitorType"===e){const{isValid:n,value:i}=gi(l);if(!n||!i){r.push(o);continue}t[e]=i;continue}const c=s?l:hi(l,a);if(null!==c)if("string"==typeof c){const{isValid:i,processedValue:a}=wn(e,c,n,"User property");if(!i){r.push(o);continue}t[e]=a}else t[e]=c;else le.warn(`User property "${o}" could not be converted to type "${a}". Value: "${l}"`),r.push(o)}return r.length>0&&le.warn(`Some configured user properties were not found in window variables: ${r.join(", ")}`),t})(t);Object.keys(r).length>0&&(le.debug("Initializing user properties from window",r),bi(e,r))})(Qr),le.debug("handleContentProperties handler",Cn(Qr))}processSubdomainEvents(){this.isSubdomain(Qr)||(Mi().forEach(e=>{le.debug("Event Processed from cookie",e),e.type===un.Pageview?this.handlePageview(e.payload):e.type===un.Wall&&this.handleWallHit(e.payload)}),document.cookie=`${Ri}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain=.${Qr.hostname}; path=/`)}processPreviousPageEvents(){let e=this.store.getState();e.coldDataLayer.events.forEach(e=>{le.debug("Event processed from storage",e),e.type===un.Pageview&&this.handlePageview(e.payload),e.type===un.Wall&&this.handleWallHit(e.payload),e.type===un.UserProperties&&this.handleUserProperties(e.payload)}),e=this.store.getState(),this.store.updateState(Object.assign(Object.assign({},e),{coldDataLayer:Object.assign(Object.assign({},e.coldDataLayer),{events:[]})}))}processStoredEvents(){if(!1!==Qr.mode.isUserBehaviorDataAllowed&&!1!==Qr.mode.isDeviceAndLocationDataAllowed){this.processPreviousPageEvents();try{this.processSubdomainEvents()}catch(e){le.debug("Error processing subdomain events",e)}}}handleSubdomainAwareEvent(e,t){if(this.isSubdomain(Qr))try{return((e,t)=>{if(!1===Qr.cookie.isEnabled)return;const r=Mi();var n;r.push({type:"pageview",payload:t}),document.cookie=`${Ri}=${n=JSON.stringify(r),btoa(n)}; domain=.${Qr.hostname}; path=/; max-age=${Qr.cookie.maxAge};`})(0,e),void le.debug(`Pushed ${e.type} event to cookie:`,e.payload)}catch(t){le.debug(`Error pushing ${e.type} event to cookie`,t)}else this.processOrStoreInputEvent(e,t)}storeInputEvent(e){const t=this.store.getState();this.store.updateState(Object.assign(Object.assign({},t),{coldDataLayer:Object.assign(Object.assign({},t.coldDataLayer),{events:[...t.coldDataLayer.events,e]})})),le.debug("Stored event",e)}processOrStoreInputEvent(e,t){!0===Qr.mode.isUserBehaviorDataAllowed?(Wi(),"server"===Qr.wallGeneration.type?this.storeInputEvent(e):t.call(this,e.payload)):le.debug(`Discarding ${e.type} event`)}},Gi=Ni,zi=j.object({[O.PAYWALL]:j.number(),[O.REGWALL]:j.optional(j.number())}),Fi=j.object({todayPageViews:j.number(),todayPageViewsByArticle:j.number(),todayPageViewsByArticleWithPaywall:j.number(),todayPageViewsByArticleWithRegwall:j.number(),todayTopLevelSections:j.number(),todayTopLevelSectionsByArticle:j.number(),sevenDayPageViews:j.number(),sevenDayPageViewsByArticle:j.number(),sevenDayPageViewsByArticleWithPaywall:j.number(),sevenDayPageViewsByArticleWithRegwall:j.number(),sevenDayTopLevelSections:j.number(),sevenDayTopLevelSectionsByArticle:j.number(),sevenDayVisitCount:j.number(),twentyEightDayPageViews:j.number(),twentyEightDayPageViewsByArticle:j.number(),twentyEightDayPageViewsByArticleWithPaywall:j.number(),twentyEightDayPageViewsByArticleWithRegwall:j.number(),twentyEightDayTopLevelSections:j.number(),twentyEightDayTopLevelSectionsByArticle:j.number(),twentyEightDayVisitCount:j.number(),daysSinceLastVisit:j.number(),timeZone:j.string(),referrer:j.string(),referrerData:j.object({medium:j.union([j.string(),j.null_()]),source:j.optional(j.union([j.string(),j.null_()])),channel:j.optional(j.union([j.string(),j.null_()])),queryParams:j.record(j.string(),j.string())}),hourOfDay:j.number(),os:j.string(),type:j.string(),viewer:j.string(),visitorType:j.string(),visitor:ot,userProperties:j.any(),contentProperties:j.any()});function qi(e){return j.safeParse(Fi,e).success}const Hi=new class{constructor(){this.fallback={wallVisibility:"never",outcomes:[{wallVisibility:"never",score:0,threshold:0,wallType:"paywall"}]}}evaluate(e){try{const t=function(e){return"todayPageViews"in e?function(e){return"variant"===e.assignedGroup?function(e){let t=0,r=.18,n=0;n=Math.random();let i=Math.round(10*e.todayPageViewsByArticleWithPaywall/e.todayPageViewsByArticle)/10,o=Math.round(10*e.sevenDayPageViewsByArticleWithPaywall/e.sevenDayPageViewsByArticle)/10,a=e.type+e.os;"string"==typeof a&&(a=a.toLowerCase());let s=e.viewer;"string"==typeof s&&(s=s.toLowerCase());let l=e.timeZone;"string"==typeof l&&(l=l.toLowerCase());const c=new URLSearchParams(window.location.search.toLowerCase()).has("forcehp");let u=e.os;"string"==typeof u&&(u=u.toLowerCase()),"mac os"===u&&(t+=.126),"windows"===u&&(t+=.063),"ios"===u&&(t+=.045),"android"===u&&(t+=-.099),"linux"===u&&(t+=-.072),"chromium os"===u&&(t+=-.054),0===e.daysSinceLastVisit&&(t+=-.0252),1===e.daysSinceLastVisit&&(t+=.0234),2===e.daysSinceLastVisit&&(t+=.018),3===e.daysSinceLastVisit&&(t+=.24*r),4===e.daysSinceLastVisit&&(t+=-.0126),5===e.daysSinceLastVisit&&(t+=-.0342),0===e.hourOfDay&&(t+=-.0342),2===e.hourOfDay&&(t+=-.0288),4===e.hourOfDay&&(t+=-.0414),6===e.hourOfDay&&(t+=.0234),8===e.hourOfDay&&(t+=.0144),10===e.hourOfDay&&(t+=.0504),12===e.hourOfDay&&(t+=-.0126),14===e.hourOfDay&&(t+=.17*r),16===e.hourOfDay&&(t+=-.009),18===e.hourOfDay&&(t+=.11*r),20===e.hourOfDay&&(t+=-.0468),22===e.hourOfDay&&(t+=-.0126),"campaign"===e.referrer&&(t+=-.153),"direct"===e.referrer&&(t+=.054),"internal"===e.referrer&&(t+=.027),"other"===e.referrer&&(t+=.018),"search"===e.referrer&&(t+=.65*r),"social"===e.referrer&&(t+=-.126),"anonymous"!==e.visitorType&&(t+=.36),"search"===e.referrerData.medium&&"google"===e.referrerData.source&&"discover"===e.referrerData.channel?t+=-.126:t+=.054,0===e.sevenDayPageViewsByArticle&&(t+=-.0234),1===e.sevenDayPageViewsByArticle&&(t+=.0072),2===e.sevenDayPageViewsByArticle&&(t+=.0126),3===e.sevenDayPageViewsByArticle&&(t+=.24*r),4===e.sevenDayPageViewsByArticle&&(t+=.0504),5===e.sevenDayPageViewsByArticle&&(t+=.0468),6===e.sevenDayPageViewsByArticle&&(t+=.0252),7===e.sevenDayPageViewsByArticle&&(t+=.0468),8===e.sevenDayPageViewsByArticle&&(t+=.1314),9===e.sevenDayPageViewsByArticle&&(t+=.027),e.sevenDayPageViewsByArticle>=10&&e.sevenDayPageViewsByArticle<=14&&(t+=.0684),e.sevenDayPageViewsByArticle>=15&&e.sevenDayPageViewsByArticle<=19&&(t+=-.0018),"africa/accra"===l&&(t+=-.027),"africa/casablanca"===l&&(t+=.41*r),"africa/dar_es_salaam"===l&&(t+=.0126),"africa/gaborone"===l&&(t+=.3222),"africa/johannesburg"===l&&(t+=-.054),"africa/kampala"===l&&(t+=.34*r),"africa/lagos"===l&&(t+=-.0324),"africa/lusaka"===l&&(t+=.1296),"africa/nairobi"===l&&(t+=-.22*r),"america/barbados"===l&&(t+=.1998),"america/bogota"===l&&(t+=-.1152),"america/cayman"===l&&(t+=.3348),"america/chicago"===l&&(t+=.2826),"america/guatemala"===l&&(t+=.3024),"america/jamaica"===l&&(t+=-.0774),"america/la_paz"===l&&(t+=.06*r),"america/lima"===l&&(t+=-.0576),"america/new_york"===l&&(t+=1.19*r),"america/puerto_rico"===l&&(t+=-.59*r),"america/santo_domingo"===l&&(t+=-.0144),"america/tegucigalpa"===l&&(t+=.3294),"asia/almaty"===l&&(t+=.2268),"asia/bahrain"===l&&(t+=-.0234),"asia/bangkok"===l&&(t+=.1368),"asia/brunei"===l&&(t+=.1386),"asia/calcutta"===l&&(t+=.3996),"asia/colombo"===l&&(t+=.1692),"asia/dhaka"===l&&(t+=-.0594),"asia/dubai"===l&&(t+=.2196),"asia/jakarta"===l&&(t+=-.135),"asia/jerusalem"===l&&(t+=.41*r),"asia/karachi"===l&&(t+=-.036),"asia/kuala_lumpur"===l&&(t+=-.0756),"asia/kuwait"===l&&(t+=.0252),"asia/makassar"===l&&(t+=.51*r),"asia/manila"===l&&(t+=-.1458),"asia/muscat"===l&&(t+=1.41*r),"asia/nicosia"===l&&(t+=-.0756),"asia/phnom_penh"===l&&(t+=.0882),"asia/riyadh"===l&&(t+=.37*r),"asia/saigon"===l&&(t+=-.126),"asia/seoul"===l&&(t+=.1674),"asia/singapore"===l&&(t+=-.054),"asia/taipei"===l&&(t+=-.09),"asia/tokyo"===l&&(t+=-.036),"atlantic/bermuda"===l&&(t+=-.0828),"atlantic/canary"===l&&(t+=.1404),"atlantic/cape_verde"===l&&(t+=1.41*r),"atlantic/reykjavik"===l&&(t+=.82*r),"europe/amsterdam"===l&&(t+=-.0648),"europe/athens"===l&&(t+=-.27*r),"europe/belgrade"===l&&(t+=-.29*r),"europe/berlin"===l&&(t+=-.44*r),"europe/bratislava"===l&&(t+=.1134),"europe/brussels"===l&&(t+=-.0504),"europe/bucharest"===l&&(t+=-.0414),"europe/budapest"===l&&(t+=-.018),"europe/copenhagen"===l&&(t+=-.0252),"europe/gibraltar"===l&&(t+=-.0144),"europe/guernsey"===l&&(t+=.58*r),"europe/helsinki"===l&&(t+=.06*r),"europe/isle_of_man"===l&&(t+=.198),"europe/istanbul"===l&&(t+=.3942),"europe/jersey"===l&&(t+=.57*r),"europe/lisbon"===l&&(t+=.83*r),"europe/ljubljana"===l&&(t+=-.1386),"europe/london"===l&&(t+=.1962),"europe/luxembourg"===l&&(t+=.41*r),"europe/madrid"===l&&(t+=.036),"europe/malta"===l&&(t+=-.0882),"europe/monaco"===l&&(t+=.2862),"europe/oslo"===l&&(t+=.0288),"europe/paris"===l&&(t+=.11*r),"europe/prague"===l&&(t+=0),"europe/riga"===l&&(t+=.88*r),"europe/rome"===l&&(t+=.0126),"europe/skopje"===l&&(t+=.59*r),"europe/stockholm"===l&&(t+=-.0072),"europe/tallinn"===l&&(t+=.41*r),"europe/tirane"===l&&(t+=.1206),"europe/vienna"===l&&(t+=.0684),"europe/vilnius"===l&&(t+=.88*r),"europe/warsaw"===l&&(t+=.027),"europe/zagreb"===l&&(t+=.31*r),"europe/zurich"===l&&(t+=.0378),"indian/maldives"===l&&(t+=.036),"indian/mauritius"===l&&(t+=.1818),"pacific/fiji"===l&&(t+=.0018),0===e.todayPageViewsByArticle&&(t+=-.11*r),1===e.todayPageViewsByArticle&&(t+=.0324),2===e.todayPageViewsByArticle&&(t+=.063),3===e.todayPageViewsByArticle&&(t+=.0324),4===e.todayPageViewsByArticle&&(t+=.072),5===e.todayPageViewsByArticle&&(t+=-.0126),6===e.todayPageViewsByArticle&&(t+=-.0234),7===e.todayPageViewsByArticle&&(t+=0),8===e.todayPageViewsByArticle&&(t+=0),9===e.todayPageViewsByArticle&&(t+=-.0036),e.todayPageViewsByArticle>=10&&e.todayPageViewsByArticle<=14&&(t+=-.44*r),0===e.todayTopLevelSections&&(t+=-.48*r),1===e.todayTopLevelSections&&(t+=.063),2===e.todayTopLevelSections&&(t+=.0468),3===e.todayTopLevelSections&&(t+=.0162),4===e.todayTopLevelSections&&(t+=.0144),5===e.todayTopLevelSections&&(t+=.036),6===e.todayTopLevelSections&&(t+=-.054),7===e.todayTopLevelSections&&(t+=-.0324),8===e.todayTopLevelSections&&(t+=-.1404),9===e.todayTopLevelSections&&(t+=-.1008),0===e.todayTopLevelSectionsByArticle&&(t+=-.11*r),1===e.todayTopLevelSectionsByArticle&&(t+=.24*r),2===e.todayTopLevelSectionsByArticle&&(t+=.0072),3===e.todayTopLevelSectionsByArticle&&(t+=-.12*r),4===e.todayTopLevelSectionsByArticle&&(t+=.0162),5===e.todayTopLevelSectionsByArticle&&(t+=-.072),6===e.todayTopLevelSectionsByArticle&&(t+=-.063),7===e.todayTopLevelSectionsByArticle&&(t+=-.0882),"chrome"===s&&(t+=.036),"edge"===s&&(t+=.153),"facebook"===s&&(t+=-.216),"firefox"===s&&(t+=.027),"gsa"===s&&(t+=.027),"instagram"===s&&(t+=.504),"miui browser"===s&&(t+=.603),"mobile safari"===s&&(t+=.054),"safari"===s&&(t+=.144),"samsung browser"===s&&(t+=-.162),"silk"===s&&(t+=.045),"webkit"===s&&(t+=.054),"chrome webview"===s&&(t+=-.027),0===o&&(t+=.03*r),.1===o&&(t+=-.009),.2===o&&(t+=.34*r),.3===o&&(t+=.0018),.4===o&&(t+=.0234),.5===o&&(t+=-.27*r),.6===o&&(t+=-.0684),.7===o&&(t+=-.0684),.8===o&&(t+=-.0468),1===o&&(t+=-.0342),0===i&&(t+=-.11*r),.1===i&&(t+=-.0036),.2===i&&(t+=-.0702),.3===i&&(t+=.0378),.4===i&&(t+=-.0594),.5===i&&(t+=-.0036),.6===i&&(t+=-.22*r),.7===i&&(t+=.44*r),.8===i&&(t+=.1458),1===i&&(t+=1.13*r),"mobileandroid"===a&&(t+=-.65*r),"mobileios"===a&&(t+=-.027),"tabletandroid"===a&&(t+=-.036),"tabletios"===a&&(t+=.099),"desktopwindows"===a&&(t+=.072),"desktopmacos"!==a&&"desktopmac os"!==a||(t+=.135),"desktoplinux"===a&&(t+=-.018),"anonymous"!==e.visitorType&&(t+=.36);let p=.6+t;p+=.03*(n-.5),"subscribed"===e.visitorType&&(p=1),!0===c&&(p=.99);let d=.63,y=.28;return p<=.1?p=.1:p>1&&(p=.99),"anonymous"===e.visitorType?p>d?{wallType:"paywall",wallVisibility:"always",outcomes:[{score:p,threshold:1,wallVisibility:"never",wallType:"regwall"},{score:p,threshold:d,wallVisibility:"always",wallType:"paywall"}]}:p>1?{wallType:"regwall",wallVisibility:"always",outcomes:[{score:p,threshold:1,wallVisibility:"always",wallType:"regwall"},{score:p,threshold:d,wallVisibility:"never",wallType:"paywall"}]}:{wallVisibility:"never",outcomes:[{score:p,threshold:1,wallVisibility:"never",wallType:"regwall"},{score:p,threshold:d,wallVisibility:"never",wallType:"paywall"}]}:p>y?{wallType:"paywall",wallVisibility:"always",outcomes:[{score:p,threshold:y,wallVisibility:"always",wallType:"paywall"}]}:{wallVisibility:"never",outcomes:[{score:p,threshold:y,wallVisibility:"never",wallType:"paywall"}]}}(e):function(e){let t=0,r=.18,n=0;n=Math.random();let i=Math.round(10*e.todayPageViewsByArticleWithPaywall/e.todayPageViewsByArticle)/10,o=Math.round(10*e.sevenDayPageViewsByArticleWithPaywall/e.sevenDayPageViewsByArticle)/10,a=e.type+e.os;"string"==typeof a&&(a=a.toLowerCase());const s=new URLSearchParams(window.location.search.toLowerCase()).has("forcehp");let l=e.viewer;"string"==typeof l&&(l=l.toLowerCase());let c=e.timeZone;"string"==typeof c&&(c=c.toLowerCase()),0===e.daysSinceLastVisit&&(t+=-.0252),1===e.daysSinceLastVisit&&(t+=.0234),2===e.daysSinceLastVisit&&(t+=.018),3===e.daysSinceLastVisit&&(t+=.24*r),4===e.daysSinceLastVisit&&(t+=-.0126),5===e.daysSinceLastVisit&&(t+=-.0342),0===e.hourOfDay&&(t+=-.0342),2===e.hourOfDay&&(t+=-.0288),4===e.hourOfDay&&(t+=-.0414),6===e.hourOfDay&&(t+=.0234),8===e.hourOfDay&&(t+=.0144),10===e.hourOfDay&&(t+=.0504),12===e.hourOfDay&&(t+=-.0126),14===e.hourOfDay&&(t+=.17*r),16===e.hourOfDay&&(t+=-.009),18===e.hourOfDay&&(t+=.11*r),20===e.hourOfDay&&(t+=-.0468),22===e.hourOfDay&&(t+=-.0126),"campaign"===e.referrer&&(t+=-.48*r),"direct"===e.referrer&&(t+=.03*r),"internal"===e.referrer&&(t+=.0252),"other"===e.referrer&&(t+=-.54*r),"search"===e.referrer&&(t+=.063),"social"===e.referrer&&(t+=-.51*r),0===e.sevenDayPageViewsByArticle&&(t+=-.0234),1===e.sevenDayPageViewsByArticle&&(t+=.0072),2===e.sevenDayPageViewsByArticle&&(t+=.0126),3===e.sevenDayPageViewsByArticle&&(t+=.24*r),4===e.sevenDayPageViewsByArticle&&(t+=.0504),5===e.sevenDayPageViewsByArticle&&(t+=.0468),6===e.sevenDayPageViewsByArticle&&(t+=.0252),7===e.sevenDayPageViewsByArticle&&(t+=.0468),8===e.sevenDayPageViewsByArticle&&(t+=.1314),9===e.sevenDayPageViewsByArticle&&(t+=.027),e.sevenDayPageViewsByArticle>=10&&e.sevenDayPageViewsByArticle<=14&&(t+=.0684),e.sevenDayPageViewsByArticle>=15&&e.sevenDayPageViewsByArticle<=19&&(t+=-.0018),"africa/accra"===c&&(t+=-.027),"africa/casablanca"===c&&(t+=.41*r),"africa/dar_es_salaam"===c&&(t+=.0126),"africa/gaborone"===c&&(t+=.3222),"africa/johannesburg"===c&&(t+=-.054),"africa/kampala"===c&&(t+=.34*r),"africa/lagos"===c&&(t+=-.0324),"africa/lusaka"===c&&(t+=.1296),"africa/nairobi"===c&&(t+=-.22*r),"america/barbados"===c&&(t+=.1998),"america/bogota"===c&&(t+=-.1152),"america/cayman"===c&&(t+=.3348),"america/chicago"===c&&(t+=.2826),"america/guatemala"===c&&(t+=.3024),"america/jamaica"===c&&(t+=-.0774),"america/la_paz"===c&&(t+=.06*r),"america/lima"===c&&(t+=-.0576),"america/new_york"===c&&(t+=1.19*r),"america/puerto_rico"===c&&(t+=-.59*r),"america/santo_domingo"===c&&(t+=-.0144),"america/tegucigalpa"===c&&(t+=.3294),"asia/almaty"===c&&(t+=.2268),"asia/bahrain"===c&&(t+=-.0234),"asia/bangkok"===c&&(t+=.1368),"asia/brunei"===c&&(t+=.1386),"asia/calcutta"===c&&(t+=.3996),"asia/colombo"===c&&(t+=.1692),"asia/dhaka"===c&&(t+=-.0594),"asia/dubai"===c&&(t+=.2196),"asia/jakarta"===c&&(t+=-.135),"asia/jerusalem"===c&&(t+=.41*r),"asia/karachi"===c&&(t+=-.036),"asia/kuala_lumpur"===c&&(t+=-.0756),"asia/kuwait"===c&&(t+=.0252),"asia/makassar"===c&&(t+=.51*r),"asia/manila"===c&&(t+=-.1458),"asia/muscat"===c&&(t+=1.41*r),"asia/nicosia"===c&&(t+=-.0756),"asia/phnom_penh"===c&&(t+=.0882),"asia/riyadh"===c&&(t+=.37*r),"asia/saigon"===c&&(t+=-.126),"asia/seoul"===c&&(t+=.1674),"asia/singapore"===c&&(t+=-.054),"asia/taipei"===c&&(t+=-.09),"asia/tokyo"===c&&(t+=-.036),"atlantic/bermuda"===c&&(t+=-.0828),"atlantic/canary"===c&&(t+=.1404),"atlantic/cape_verde"===c&&(t+=1.41*r),"atlantic/reykjavik"===c&&(t+=.82*r),"europe/amsterdam"===c&&(t+=-.0648),"europe/athens"===c&&(t+=-.27*r),"europe/belgrade"===c&&(t+=-.29*r),"europe/berlin"===c&&(t+=-.44*r),"europe/bratislava"===c&&(t+=.1134),"europe/brussels"===c&&(t+=-.0504),"europe/bucharest"===c&&(t+=-.0414),"europe/budapest"===c&&(t+=-.018),"europe/copenhagen"===c&&(t+=-.0252),"europe/gibraltar"===c&&(t+=-.0144),"europe/guernsey"===c&&(t+=.58*r),"europe/helsinki"===c&&(t+=.06*r),"europe/isle_of_man"===c&&(t+=.198),"europe/istanbul"===c&&(t+=.3942),"europe/jersey"===c&&(t+=.57*r),"europe/lisbon"===c&&(t+=.83*r),"europe/ljubljana"===c&&(t+=-.1386),"europe/london"===c&&(t+=.1962),"europe/luxembourg"===c&&(t+=.41*r),"europe/madrid"===c&&(t+=.036),"europe/malta"===c&&(t+=-.0882),"europe/monaco"===c&&(t+=.2862),"europe/oslo"===c&&(t+=.0288),"europe/paris"===c&&(t+=.11*r),"europe/prague"===c&&(t+=0),"europe/riga"===c&&(t+=.88*r),"europe/rome"===c&&(t+=.0126),"europe/skopje"===c&&(t+=.59*r),"europe/stockholm"===c&&(t+=-.0072),"europe/tallinn"===c&&(t+=.41*r),"europe/tirane"===c&&(t+=.1206),"europe/vienna"===c&&(t+=.0684),"europe/vilnius"===c&&(t+=.88*r),"europe/warsaw"===c&&(t+=.027),"europe/zagreb"===c&&(t+=.31*r),"europe/zurich"===c&&(t+=.0378),"indian/maldives"===c&&(t+=.036),"indian/mauritius"===c&&(t+=.1818),"pacific/fiji"===c&&(t+=.0018),0===e.todayPageViewsByArticle&&(t+=-.11*r),1===e.todayPageViewsByArticle&&(t+=.0324),2===e.todayPageViewsByArticle&&(t+=.063),3===e.todayPageViewsByArticle&&(t+=.0324),4===e.todayPageViewsByArticle&&(t+=.072),5===e.todayPageViewsByArticle&&(t+=-.0126),6===e.todayPageViewsByArticle&&(t+=-.0234),7===e.todayPageViewsByArticle&&(t+=0),8===e.todayPageViewsByArticle&&(t+=0),9===e.todayPageViewsByArticle&&(t+=-.0036),e.todayPageViewsByArticle>=10&&e.todayPageViewsByArticle<=14&&(t+=-.44*r),0===e.todayTopLevelSections&&(t+=-.48*r),1===e.todayTopLevelSections&&(t+=.063),2===e.todayTopLevelSections&&(t+=.0468),3===e.todayTopLevelSections&&(t+=.0162),4===e.todayTopLevelSections&&(t+=.0144),5===e.todayTopLevelSections&&(t+=.036),6===e.todayTopLevelSections&&(t+=-.054),7===e.todayTopLevelSections&&(t+=-.0324),8===e.todayTopLevelSections&&(t+=-.1404),9===e.todayTopLevelSections&&(t+=-.1008),0===e.todayTopLevelSectionsByArticle&&(t+=-.11*r),1===e.todayTopLevelSectionsByArticle&&(t+=.24*r),2===e.todayTopLevelSectionsByArticle&&(t+=.0072),3===e.todayTopLevelSectionsByArticle&&(t+=-.12*r),4===e.todayTopLevelSectionsByArticle&&(t+=.0162),5===e.todayTopLevelSectionsByArticle&&(t+=-.072),6===e.todayTopLevelSectionsByArticle&&(t+=-.063),7===e.todayTopLevelSectionsByArticle&&(t+=-.0882),"chrome"===l&&(t+=.11*r),"edge"===l&&(t+=.0126),"facebook"===l&&(t+=-.135),"firefox"===l&&(t+=-.24*r),"gsa"===l&&(t+=-.0126),"instagram"===l&&(t+=.603),"miui browser"===l&&(t+=.603),"mobile safari"===l&&(t+=.081),"safari"===l&&(t+=.95*r),"samsung browser"===l&&(t+=-.0882),"silk"===l&&(t+=.045),"webkit"===l&&(t+=-.58*r),0===o&&(t+=.03*r),.1===o&&(t+=-.009),.2===o&&(t+=.34*r),.3===o&&(t+=.0018),.4===o&&(t+=.0234),.5===o&&(t+=-.27*r),.6===o&&(t+=-.0684),.7===o&&(t+=-.0684),.8===o&&(t+=-.0468),1===o&&(t+=-.0342),0===i&&(t+=-.11*r),.1===i&&(t+=-.0036),.2===i&&(t+=-.0702),.3===i&&(t+=.0378),.4===i&&(t+=-.0594),.5===i&&(t+=-.0036),.6===i&&(t+=-.22*r),.7===i&&(t+=.44*r),.8===i&&(t+=.1458),1===i&&(t+=1.13*r),"mobileandroid"===a&&(t+=-.57*r),"mobileios"===a&&(t+=.0144),"tabletandroid"===a&&(t+=-.0648),"tabletios"===a&&(t+=.44*r),"anonymous"!==e.visitorType&&(t+=.36);let u=.6+t;u+=.03*(n-.5),"subscribed"===e.visitorType&&(u=1),!0===s&&(u=.99);let p=.63,d=.28;return u<=.1?u=.1:u>1&&(u=.99),"anonymous"===e.visitorType?u>p?{wallType:"paywall",wallVisibility:"always",outcomes:[{score:u,threshold:1,wallVisibility:"never",wallType:"regwall"},{score:u,threshold:p,wallVisibility:"always",wallType:"paywall"}]}:u>1?{wallType:"regwall",wallVisibility:"always",outcomes:[{score:u,threshold:1,wallVisibility:"always",wallType:"regwall"},{score:u,threshold:p,wallVisibility:"never",wallType:"paywall"}]}:{wallVisibility:"never",outcomes:[{score:u,threshold:1,wallVisibility:"never",wallType:"regwall"},{score:u,threshold:p,wallVisibility:"never",wallType:"paywall"}]}:u>d?{wallType:"paywall",wallVisibility:"always",outcomes:[{score:u,threshold:d,wallVisibility:"always",wallType:"paywall"}]}:{wallVisibility:"never",outcomes:[{score:u,threshold:d,wallVisibility:"never",wallType:"paywall"}]}}(e)}(e):function(e){let t=Math.random();return"subscribed"===e.visitorType&&(t=1),t<=.1?t=.1:t<=.2?t=.2:t<=.3?t=.3:t>1&&(t=1),"anonymous"===e.visitorType?t>1?{wallType:"paywall",wallVisibility:"always",outcomes:[{score:t,threshold:1,wallVisibility:"never",wallType:"regwall"},{score:t,threshold:1,wallVisibility:"always",wallType:"paywall"}]}:t>1?{wallType:"regwall",wallVisibility:"always",outcomes:[{score:t,threshold:1,wallVisibility:"always",wallType:"regwall"},{score:t,threshold:1,wallVisibility:"never",wallType:"paywall"}]}:{wallVisibility:"never",outcomes:[{score:t,threshold:1,wallVisibility:"never",wallType:"regwall"},{score:t,threshold:1,wallVisibility:"never",wallType:"paywall"}]}:t>1?{wallType:"paywall",wallVisibility:"always",outcomes:[{score:t,threshold:1,wallVisibility:"always",wallType:"paywall"}]}:{wallVisibility:"never",outcomes:[{score:t,threshold:1,wallVisibility:"never",wallType:"paywall"}]}}(e)}(e);return j.parse(j.union([Y,zi]),t)}catch(t){return le.debug("Unknown ModelOutput returned by `Model.infer`, using fallback.",e,t),this.fallback}}},Ji=Hi,Yi=j.object({id:j.string(),outcome:X,createdAt:j.string(),trace:j.string()});function Zi(e){return null!=e&&("string"!=typeof e||""!==e)}function Ki(e,t,r){switch(e.source){case"device":case"visit":return r[e.key];case"contentProperties":return Cn(t)[e.key];case"userProperties":return ma.state.userProperties[e.key];default:return void le.warn(`Unknown dataMap source: ${e.source}`)}}const Qi=e=>Math.min(Math.max(.01,e),1),Xi=e=>Math.round(100*e);function eo(e){const t="wallType"in e?e.wallType:"paywall",r=N[t],n=M[e.wallVisibility];let i=0===n?U.nowall:U[t];const o=Qi(e.score),a=Xi(o);let s=100===a?"xx":a.toString().padStart(2,"0");const l=Xi(e.threshold);return`${r}${n}${i}${s}${100===l?"xx":l.toString().padStart(2,"0")}`}function to(e){if(void 0===e)return"--";const t=Math.round(100*e);return 100===t?"xx":t.toString().padStart(2,"0")}const ro={id:"",createdAt:(new Date).toISOString(),context:"",inputs:"",experiment:null,userProperties:"",searchParams:"",contentProperties:"",trace:"t005000z00------",outcome:{wallVisibility:B,wallVisibilityCode:M.never}};let no;function io(e){const t=e.replace(/\/([\w.]+=[^/&]+)/,"?$1");return t.startsWith("http")?t:`https://${t}`}function oo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"control";if(!(null==no?void 0:no.experiences))return null;const t=e=>e.replace(/^www\./,""),r=Qr.subMarket?`${Qr.subMarket}-${t(Qr.hostname)}`:t(Qr.hostname),n=new Map;let i=null;for(const e of no.experiences){const o=io(e.definition),a=new URL(o);if(t(a.hostname)!==r)continue;const s=a.searchParams.get("experiment.assignedGroup");s?n.set(s,e.policy.thresholds):""===a.search&&(i=e.policy.thresholds)}return e&&n.has(e)?n.get(e)||null:i}class ao extends Error{constructor(e){super(e),this.name="AbortError"}}var so=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})};function lo(e,t){return so(this,void 0,void 0,function*(){const r=function(e){const t=new AbortController,r=t.signal;return setTimeout(()=>{t.abort(new ao(`Request exceeded ${e.toLocaleString()}ms`))},e),r}(e.timeout),n=function(e,t,r){const n=`/hosts/${e.host}/decisions/me`,i=new URL(e.url+n);return i.search=t.toString(),new Request(i,{signal:r})}(e,t,r);try{return function(e){return t=this,n=function*(){!function(e){if(!e.ok)throw le.debug(`Response: ok: ${e.ok}, status: ${e.status}, status text: ${e.statusText}`),e}(e);const t=yield e.json(),r=j.parse(Yi,t);return{id:r.id,createdAt:r.createdAt,trace:r.trace,outcome:r.outcome}},new((r=void 0)||(r=Promise))(function(e,i){function o(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(o,a)}s((n=n.apply(t,[])).next())});var t,r,n}(yield fetch(n))}catch(e){return function(e){throw e instanceof Error&&le.debug("Decision request error",e.name,e.message),le.debug({err:e}),e}(e)}})}r(458),r(1591),r(6237),r(507),r(6993),r(7918),r(2455),r(5281),r(194),r(6913),r(8608),r(1e3),r(7368),r(2822),r(9828),r(5473),r(2477);class co{constructor(){this.pageViews=0,this.pageViewsByArticle=0,this.pageViewsByArticleWithPaywall=0,this.pageViewsByArticleWithRegwall=0,this.topLevelSections=0,this.topLevelSectionsByArticle=0,this.visitCount=0}}function uo(){const e=new Date;return 2*Math.floor(e.getUTCHours()/2)}function po(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return""}}const yo={todayPageViews:10,todayPageViewsByArticle:10,todayPageViewsByArticleWithPaywall:10,todayPageViewsByArticleWithRegwall:10,todayTopLevelSections:10,todayTopLevelSectionsByArticle:10,sevenDayPageViews:15,sevenDayPageViewsByArticle:15,sevenDayPageViewsByArticleWithPaywall:15,sevenDayPageViewsByArticleWithRegwall:15,sevenDayTopLevelSections:15,sevenDayTopLevelSectionsByArticle:15,sevenDayVisitCount:10,twentyEightDayPageViews:99,twentyEightDayPageViewsByArticle:60,twentyEightDayPageViewsByArticleWithPaywall:60,twentyEightDayPageViewsByArticleWithRegwall:60,twentyEightDayTopLevelSections:20,twentyEightDayTopLevelSectionsByArticle:20,twentyEightDayVisitCount:30,daysSinceLastVisit:5};function fo(e,t){return Object.entries(e).reduce((e,r)=>{let[n,i]=r;return Object.assign(Object.assign({},e),{[`${t}${n[0].toUpperCase()}${n.slice(1)}`]:i})},{})}const ho=function(e,t,r){if(!1===Qr.mode.isDeviceAndLocationDataAllowed&&!1===Qr.mode.isDeviceAndLocationDataAllowed)return{visitorType:t.visitor};const{durations:[n,i,o],daysSinceLastVisit:a}=function(e,t){const r=[e.today,...e.history],n=r.length,i=Math.min(n,Math.max(...t));let o=[],a=new co,s=0,l=new Set,c=new Set;for(let e=0;e<i;e++){const n=r[e];a.pageViews=a.pageViews+n.pageViews,a.pageViewsByArticle=a.pageViewsByArticle+n.pageViewsByArticle,a.pageViewsByArticleWithPaywall=a.pageViewsByArticleWithPaywall+n.pageViewsByArticleWithPaywall,a.pageViewsByArticleWithRegwall=a.pageViewsByArticleWithRegwall+n.pageViewsByArticleWithRegwall;for(const e of n.topLevelSections)l.has(e)||l.add(e);a.topLevelSections=l.size;for(const e of n.topLevelSectionsByArticle)c.has(e)||c.add(e);a.topLevelSectionsByArticle=c.size,n.pageViews>0&&(a.visitCount++,e>0&&0===s&&(s=e)),t.includes(e+1)&&(o.push(Object.assign({},a)),a=new co,l=new Set,c=new Set)}if(o.length<t.length)for(let e=o.length;e<t.length;e++)o.push(Object.assign({},a));return{durations:o,daysSinceLastVisit:s}}(t,[1,8,29]),{visitCount:s}=n,l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(n,["visitCount"]),c=(null==r?void 0:r.assignedGroup)||null,u=$i(),p=Pi(),d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fn(e).reduce((e,r)=>{let[n,i]=r;if("number"==typeof i){const r=n in t?t[n]:null;e[n]="number"==typeof r?Math.min(i,r):i}else e[n]=i;return e},{})}(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fo(l,"today")),fo(i,"sevenDay")),fo(o,"twentyEightDay")),_t(navigator.userAgent)),{timeZone:po(),referrer:u.medium,referrerData:Object.assign(Object.assign({},u),{queryParams:p}),daysSinceLastVisit:a,visitorType:t.visitor,hourOfDay:uo(),assignedGroup:c,userProperties:e.userProperties,contentProperties:Cn(Qr)}),yo);return d.visitor=e.visitor,d},go={daysSinceLastVisit:"DA",todayPageViews:"AA",todayPageViewsByArticle:"AB",todayPageViewsByArticleWithPaywall:"AC",sevenDayPageViews:"BA",sevenDayPageViewsByArticle:"BB",sevenDayPageViewsByArticleWithPaywall:"BC",todayTopLevelSections:"AD",todayTopLevelSectionsByArticle:"AE",sevenDayTopLevelSections:"BD",sevenDayTopLevelSectionsByArticle:"BE",sevenDayVisitCount:"BF",todayPageViewsByArticleWithRegwall:"AF",sevenDayPageViewsByArticleWithRegwall:"BG",twentyEightDayPageViews:"CA",twentyEightDayPageViewsByArticle:"CB",twentyEightDayPageViewsByArticleWithPaywall:"CC",twentyEightDayTopLevelSections:"CD",twentyEightDayTopLevelSectionsByArticle:"CE",twentyEightDayVisitCount:"CF",twentyEightDayPageViewsByArticleWithRegwall:"CG"},vo={experimentId:"HA",assignedGroup:"HB",visitorType:"FA",referrer:"DC",pageReferrerMedium:"DE",pageReferrerSource:"DF",pageReferrerChannel:"DG",os:"EA",type:"EB",viewer:"EC",hourOfDay:"DD",timeZone:"DB",campaignName:"GA",referrerDomain:"GB",referrerMedium:"GC",referrerSource:"GD",referrerChannel:"GE"},wo={medium:{alias:vo.pageReferrerMedium,codes:_i},source:{alias:vo.pageReferrerSource,codes:Bi},channel:{alias:vo.pageReferrerChannel,codes:Oi}};function mo(e){if("timeZone"in e){const t=e.timeZone;if(t)return[vo.timeZone+":"+t]}return[]}function bo(e){if("referrer"in e){const t=e.referrer;if(t){const e=_i[t].toString().padStart(2,"0");return[vo.referrer+":"+e]}}return[]}function xo(e,t){return function(e,t,r,n){if("referrerData"in e&&e.referrerData&&t in e.referrerData){const i=e.referrerData[t];if(i&&i in n)return[r+":"+n[i].toString().padStart(2,"0")]}return[]}(e,t,wo[t].alias,wo[t].codes)}function So(e){if("os"in e){const t=e.os;if(t)return[vo.os+":"+t]}return[]}function Po(e){if("type"in e){const t=e.type;if(t&&t in Ot){const e=Ot[t].toString().padStart(2,"0");return[vo.type+":"+e]}}return[]}function Ao(e){if("viewer"in e){const t=e.viewer;if(t)return[vo.viewer+":"+t]}return[]}const ko={anonymous:0,registered:1,subscribed:2};function Do(e){const t=e.visitorType;if(t&&t in ko){const e=ko[t].toString().padStart(2,"0");return[vo.visitorType+":"+e]}return[]}function Vo(e){if("hourOfDay"in e){const t=e.hourOfDay;if(void 0!==t)return[vo.hourOfDay+":"+t]}return[]}function To(e){if("visitor"in e){const t=e.visitor.session,r=["campaignName","referrerDomain","referrerMedium","referrerSource","referrerChannel"],n={referrerSource:Bi,referrerChannel:Oi};return Fn(t).reduce((e,t)=>{let i,[o,a]=t;return i=o in n?function(e,t){return e in t?t[e].toString().padStart(2,"0"):null}(a,n[o]):a,i&&r.includes(o)&&e.push(vo[o]+":"+i),e},[])}return[]}const Lo={aa:"0",ab:"1"},jo={control:"1",variant:"2",holdout:"3"};function Eo(e){if(e){const t=/[a-z:_-\d]*test(\d)_(a(?:a|b))$/,r=e.experimentId.match(t);let n="9",i="9",o=function(e){return jo[e.assignedGroup]||"9"}(e);if(r){i=r[1];const e=r[2];n=Lo[e]}return[vo.experimentId+":"+n+i,vo.assignedGroup+":"+o]}return[]}let Oo;const _o=(e,t)=>{if(null===e)return t.indexOf(null);for(let r=0;r<t.length;r++){const n=t[r];if(null!=n&&e>=n)return r}return t.indexOf(null)},Bo=(e,t,r,n,i)=>{var o;const a=function(e){var t;return null!==e&&e.length>0&&null!==(t=e[0].score)&&void 0!==t?t:null}(r),s=null!==(o=null==i?void 0:i.contentPropensity)&&void 0!==o?o:function(e){if(!1!==e.metaValues.contentPropensityLevel){const t=e.metaValues.contentPropensityLevel,r=hn(t.selector,t.attribute,t.expression),n=j.safeParse(Vn,r);if(n.success)return n.output;le.warn(Dn,"Received:",r)}return null}(n);le.debug("User propensity",a,"content propensity",s);let l=oo(t.assignedGroup);if(!(l&&"userLevels"in l||(le.warn(`No user thresholds found for group ${t.assignedGroup}`),l=oo(),l&&"userLevels"in l)))return le.warn("No user thresholds found, using fallback decision"),Object.assign(Object.assign({},e),{outcome:ro.outcome,trace:ro.trace});const c="subscribed"===t.visitorType?"registered":t.visitorType,u=function(e){const t={};for(const e of Pn){const r=Sn[e];"number"==typeof r&&(t[r]=e)}const r={};if(e)for(const n of e.split(",")){const e=n.indexOf("=");if(-1===e)continue;const i=n.slice(0,e).trim(),o=n.slice(e+1).trim(),a=Number(i),s=Number(o);if(!Number.isFinite(a)||!Number.isFinite(s))continue;const l=t[a];l&&(r[l]=s)}const n={};for(const e of Pn)n[e]=Sn[e]?r[e]:null;return n}(l.userLevels.paywall[c]);Oo=Array.from(Object.values(u));const p=((e,t)=>{const r=_o(e,Oo),n=_o(t,An);if(n>=4)return{wallTypeCode:U.nowall,score:e,threshold:Oo[r]};let i=U.nowall;return(3===n&&0===r||2===n&&r<=2||1===n&&r<=2||0===n&&r<=4)&&(i=U.paywall),{wallTypeCode:i,score:e,threshold:Oo[r]}})(a,s),{wallTypeCode:d}=p,y=G.get(d),f=Object.assign({},e);return f.outcome=function(e){if(e===U.nowall)return{wallVisibility:B,wallVisibilityCode:M.never};if(e===U.paywall)return{wallType:O.PAYWALL,wallTypeCode:U.paywall,wallVisibility:_,wallVisibilityCode:M.always};if(e===U.regwall)return{wallType:O.REGWALL,wallTypeCode:U.regwall,wallVisibility:_,wallVisibilityCode:M.always};throw new Error(`Unknown wallTypeCode: ${e}`)}(d),f.trace=function(e,t){if(null===e)return"";const r="wallType"in e?e.wallType:"paywall",n=M[e.wallVisibility],i=U[r],o=e.score,a=_o(o,Oo),s=Oo[a],l=null==s?"00":Math.round(100*s).toString().padStart(2,"0"),c=_o(t,An);return`${N.finalEnsemble}${n}${i}----${N.onDevicePolicy}${n}${i}----${N.userPropensityTier}--0${a}${l}${N.contentPropensityTier}--0${c}--`}(Object.assign(Object.assign({},p),{wallVisibility:y}),s)+function(e){let t=e.trace;const r=`[${[N.finalEnsemble,N.onDevicePolicy,N.userPropensityTier,N.contentPropensityTier].join("")}][\\d-]{6}`;return t=t.replace(new RegExp(r,"g"),""),t}(f),f},Co={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let $o;const Io=new Uint8Array(16),Wo=[];for(let e=0;e<256;++e)Wo.push((e+256).toString(16).slice(1));var Ro=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})};const Uo=j.optional(j.object({visitor:j.optional(I)}));function Mo(e){if(!Qr.showPaywallScore)return;const t=e.outcomes[0];return t?Xi(Qi(t.score)):void 0}function No(e){if(le.debug("Decision override:",ae.override),ae.override){le.debug("âï¸ Decision override",ae.override);let t=e.outcome;return ae.override.outcome&&(t=Object.assign(Object.assign({},t),ae.override.outcome)),Object.assign(Object.assign(Object.assign({},e),ae.override),{outcome:t})}return e}function Go(e){window.sophi=null===e?Object.assign(Object.assign({},window.sophi),{quickStart:{}}):Object.assign(Object.assign({},window.sophi),{quickStart:{decision:e}})}function zo(e,t){if(t.addTracingToLocalStorage.enabled&&e){const{inputs:r,context:n,trace:i}=e;localStorage.setItem(t.addTracingToLocalStorage.key,JSON.stringify({inputs:r,context:n,trace:i}))}}function Fo(e){return"always"===e.outcome.wallVisibility?"paywall"===e.outcome.wallType?"paywall":"regwall":"no-wall"}const qo=e=>{j.parse(Uo,e);const t=(e=>{var t;try{if(!1===e.metaValues.visitorType)return null;const{selector:r,attribute:n,expression:i}=e.metaValues.visitorType,o=document.querySelector(r);if(!(null===(t=null==o?void 0:o.getAttribute(n))||void 0===t?void 0:t.trim()))return null;const a=hn(r,n,i),s=j.safeParse(I,a);return s.success?s.output:null}catch(e){return null}})(Qr),r=fi.getState().visitor,n=(e=>{let{argsVisitor:t,metaVisitor:r,storedVisitor:n}=e;return t||r||n||"anonymous"})({argsVisitor:null==e?void 0:e.visitor,metaVisitor:t,storedVisitor:r});return fi.updateState(Object.assign(Object.assign({},fi.getState()),{visitor:n})),{visitor:n}};function Ho(e,t){return"registered"===e&&"always"===t.outcome.wallVisibility&&"regwall"===t.outcome.wallType&&(t.outcome={wallVisibility:"never",wallVisibilityCode:0}),t}function Jo(e,t,r){return Ro(this,void 0,void 0,function*(){const{experiment:n,modelInputs:i,internalExperiment:o}=e;n&&le.info("ð§ª Experiment",JSON.stringify(n,null,2)),le.debug("Model inputs",i);const a=function(e){let t="";if(qi(e)){const r={daysSinceLastVisit:e.daysSinceLastVisit,todayPageViews:e.todayPageViews,todayPageViewsByArticle:e.todayPageViewsByArticle,todayPageViewsByArticleWithPaywall:e.todayPageViewsByArticleWithPaywall,sevenDayPageViews:e.sevenDayPageViews,sevenDayPageViewsByArticle:e.sevenDayPageViewsByArticle,sevenDayPageViewsByArticleWithPaywall:e.sevenDayPageViewsByArticleWithPaywall,todayTopLevelSections:e.todayTopLevelSections,todayTopLevelSectionsByArticle:e.todayTopLevelSectionsByArticle,sevenDayTopLevelSections:e.sevenDayTopLevelSections,sevenDayTopLevelSectionsByArticle:e.sevenDayTopLevelSectionsByArticle,sevenDayVisitCount:e.sevenDayVisitCount,todayPageViewsByArticleWithRegwall:e.todayPageViewsByArticleWithRegwall,sevenDayPageViewsByArticleWithRegwall:e.sevenDayPageViewsByArticleWithRegwall,twentyEightDayPageViews:e.twentyEightDayPageViews,twentyEightDayPageViewsByArticle:e.twentyEightDayPageViewsByArticle,twentyEightDayPageViewsByArticleWithPaywall:e.twentyEightDayPageViewsByArticleWithPaywall,twentyEightDayTopLevelSections:e.twentyEightDayTopLevelSections,twentyEightDayTopLevelSectionsByArticle:e.twentyEightDayTopLevelSectionsByArticle,twentyEightDayVisitCount:e.twentyEightDayVisitCount,twentyEightDayPageViewsByArticleWithRegwall:e.twentyEightDayPageViewsByArticleWithRegwall};t=Object.keys(r).reduce((e,t)=>`${e}${go[t]+r[t].toString().padStart(2,"0")}`,"")}return t}(i),s=function(e,t){return[...Eo(t),...Do(e),...bo(e),...xo(e,"medium"),...xo(e,"source"),...xo(e,"channel"),...So(e),...Po(e),...Ao(e),...Vo(e),...mo(e),...To(e)].join("|")}(i,o),l=(e=>{if(!e||0===Object.keys(e).length)return"";const t=(Qr.userProperties||[]).filter(e=>!1!==e.tracked).map(e=>e.key);return 0===t.length?"":Fn(e).filter(e=>{let[r]=e;return t.includes(r)}).map(e=>{let[t,r]=e;return`${(e=>vi[e]||e)(t)}:${r}`}).join(",")})(ma.state.userProperties),c=function(e){return e.contentProperties&&e.contentProperties.length>0?function(e){return null===Bn.analyticsString&&$n(e),Bn.analyticsString}(e):""}(t);r&&r({context:a,inputs:s,userProperties:l,contentProperties:c,experiment:n});const u=Ji.evaluate(i);le.debug("Model output",u);const p=function(e,t){const r=new URLSearchParams;return e&&r.append("modelTrace",e),t&&(r.append("experiment.id",t.experimentId),r.append("experiment.assignedGroup",t.assignedGroup)),r.toString()}(function(e){const t="outcomes"in e?Tn(e.outcomes):e,r="-";let n="";for(const e in t){const i=t[e],o=N[e],a=r,s=r;if(void 0===i)continue;const l=Math.round(100*i);n+=`${o}${a}${s}${100===l?"xx":l.toString().padStart(2,"0")}${r+r}`}return n}(u),o);let d=function(e,t,r){if(Co.randomUUID&&!t&&!e)return Co.randomUUID();const n=(e=e||{}).random??e.rng?.()??function(){if(!$o){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");$o=crypto.getRandomValues.bind(crypto)}return $o(Io)}();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){if((r=r||0)<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return(Wo[e[t+0]]+Wo[e[t+1]]+Wo[e[t+2]]+Wo[e[t+3]]+"-"+Wo[e[t+4]]+Wo[e[t+5]]+"-"+Wo[e[t+6]]+Wo[e[t+7]]+"-"+Wo[e[t+8]]+Wo[e[t+9]]+"-"+Wo[e[t+10]]+Wo[e[t+11]]+Wo[e[t+12]]+Wo[e[t+13]]+Wo[e[t+14]]+Wo[e[t+15]]).toLowerCase()}(n)}(),y=(new Date).toISOString();const f=(g=h=u,j.safeParse(Y,g).success?h:{wallVisibility:"never",outcomes:Object.values(O).filter(e=>e in h&&"number"==typeof h[e]).map(e=>({wallType:e,score:h[e],threshold:0,wallVisibility:"never"}))});var h,g;let v=function(e){return"always"===e.wallVisibility?{wallType:e.wallType,wallTypeCode:U[e.wallType],wallVisibility:e.wallVisibility,wallVisibilityCode:M[e.wallVisibility]}:{wallVisibility:e.wallVisibility,wallVisibilityCode:M[e.wallVisibility]}}(f),w="";if(t.paywallApi){const r=yield function(e,t,r,n){return so(this,void 0,void 0,function*(){try{const n=yield function(e,t,r){return so(this,void 0,void 0,function*(){if(!e.paywallApi)throw new Error("Paywall API configuration is missing");const n=Cn(e)["content.id"];if(!n){const e=new Error("No value for 'content.id', aborting decision call");throw e.name="ContentIdError",e}const i=new URLSearchParams(r);if(i.append("content.id",String(n)),i.append("visitor.type",t.modelInputs.visitorType),qi(t.modelInputs)){const r=function(e,t,r){const n=new URLSearchParams;for(const[i,o]of Object.entries(e)){const e=Ki(o,t,r);Zi(e)?n.append(i,String(e)):le.debug(`Skipping dataMap parameter "${i}", value is: ${e}`)}return n}(e.paywallApi.dataMap,e,t.modelInputs);for(const[e,t]of r.entries())"content.id"!==e&&i.append(e,t)}return yield lo(e.paywallApi,i)})}(e,t,r.searchParams),i={id:n.id,createdAt:n.createdAt,trace:n.trace,outcome:n.outcome};return le.debug("Enhanced with server decision",i),i}catch(i){return function(e,t,r,n,i){var o;let a="No server decision";if(e instanceof Error&&(a+=`: ${e.message}`),le.warn(a),le.debug({err:e}),!t.paywallApi)throw new Error("Paywall API configuration is missing");const s=function(e,t,r,n,i,o){let a,s=oo(t.assignedGroup);if(s&&"userFallback"in s)a=s.userFallback;else{const e=oo();e&&"userFallback"in e&&(a=e.userFallback)}let l="";if(o&&void 0!==i&&(l=((e,t)=>{let r="t";return e instanceof Error&&"AbortError"===e.name?(r+="002",r+=Math.round(t/10)):e instanceof Error&&"TypeError"===e.name?r+="003001":e instanceof Error&&"ContentIdError"===e.name?r+="00401":e&&e instanceof Response?r+="003"+e.status:r+="009000",r=r.substring(0,7).padEnd(7,"0"),r})(o,i)),!a)return le.warn("No userFallback thresholds found, returning original decision with error trace"),Object.assign(Object.assign({},e),{trace:l+e.trace});const c=Tn(r),u="subscribed"===(p=t.visitorType)?"registered":p;var p;const d=function(e,t,r){const n=e[O.PAYWALL],i=e[O.REGWALL],o=t.paywall[r],a=t.regwall;return n>=o?{wallType:O.PAYWALL,wallVisibility:_,wallVisibilityCode:M.always,wallTypeCode:U.paywall}:void 0!==i&&void 0!==a&&i>=a?{wallType:O.REGWALL,wallVisibility:_,wallVisibilityCode:M.always,wallTypeCode:U.regwall}:{wallVisibility:B,wallVisibilityCode:M.never}}(c,a,u),y=[];for(const e of Object.values(O)){const t=c[e];if(void 0!==t){const r=e===O.PAYWALL?a.paywall[u]:a.regwall;if(void 0===r)continue;const n={score:t,threshold:r,wallVisibility:d.wallVisibility===_&&d.wallType===e?_:B,wallType:e};y.push(n)}}const f=function(e){let t="";for(const r of e)t+=eo(r);return t}(y),h=d.wallVisibilityCode,g="wallTypeCode"in d?d.wallTypeCode:U.nowall;let v,w;if("wallType"in d){const e=d.wallType;v=c[e],w=e===O.PAYWALL?a.paywall[u]:a.regwall}const m=function(e,t,r,n){return`v${e}${t}${to(r)}${to(n)}`}(h,g,v,w),b=Object.assign(Object.assign({},e),{trace:l+m+f,outcome:d});return le.debug("API fallback decision:",b),b}(r,{visitorType:n.modelInputs.visitorType,assignedGroup:null===(o=r.experiment)||void 0===o?void 0:o.assignedGroup},i,0,t.paywallApi.timeout,e);return{id:r.id,createdAt:r.createdAt,trace:s.trace,outcome:s.outcome}}(i,e,r,t,n.outcomes)}})}(t,e,Object.assign(Object.assign({id:d,createdAt:y,trace:w,context:a,inputs:s,outcome:v,searchParams:p,userProperties:l,contentProperties:c},void 0!==Mo(f)?{paywallScore:Mo(f)}:{}),{experiment:n}),f);({id:d,createdAt:y,trace:w,outcome:v}=r)}const m=Mo(f),b=Object.assign(Object.assign({id:d,createdAt:y,trace:w,context:a,inputs:s,outcome:v,searchParams:p,userProperties:l,contentProperties:c},void 0!==m?{paywallScore:m}:{}),{experiment:n});return le.debug("Decision made:",b),{decision:b,outcomes:f.outcomes}})}const Yo=new class{constructor(e){let{config:t}=e;this.config=t,this.onDevice=null,this.server=null,this.cold=null}makeParams(){return Ro(this,void 0,void 0,function*(){const e=yield en(),t=yield tn();return{modelInputs:ho(ma.state,fi.getState(),t),experiment:e,internalExperiment:t}})}getCached(){return Ro(this,void 0,void 0,function*(){const e=yield this.makeParams();return null===this.onDevice&&(this.onDevice=Jo(e,this.config)),null===this.server&&(this.server=this.onDevice),(yield this.server).decision})}updateCache(e){return Ro(this,void 0,void 0,function*(){const t=yield this.makeParams();return this.onDevice=Jo(t,this.config,e),this.server=this.onDevice,yield this.server})}}({config:Qr});function Zo(e){var t;if(!Gi.isSubdomain(Qr)){const r=e.getState(),n=r.coldDataLayer,{previous:i,outcomes:o}=n;if(i&&Object.keys(i).length>1){const a=Bo(i,{visitorType:r.visitor,assignedGroup:null===(t=i.experiment)||void 0===t?void 0:t.assignedGroup},o,Qr);return Go(a),zo(a,Qr),ln(a),e.updateState(Object.assign(Object.assign({},r),{coldDataLayer:Object.assign(Object.assign({},r.coldDataLayer),{previous:void 0,outcomes:[]})})),n}}return null}function Ko(e){return e&&(Yo.cold=(()=>Ro(this,void 0,void 0,function*(){return{decision:e.previous,outcomes:e.outcomes||[]}}))()),qo(),Yo.updateCache(Qo).then(ta)}function Qo(e){if("client"===Qr.wallGeneration.type&&!Qr.enableWallIndicators){const{trace:t}=e;ln(function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["trace"]))}return e}function Xo(e,t,r){const n=e.getState();e.updateState(Object.assign(Object.assign({},n),{coldDataLayer:Object.assign(Object.assign({},n.coldDataLayer),{previous:t,outcomes:r})})),function(e){if(!0===Qr.cookie.isEnabled&&!0===Qr.mode.isDeviceAndLocationDataAllowed&&!0===Qr.mode.isUserBehaviorDataAllowed&&!Gi.isSubdomain(Qr)){const t=Qr.cookie.name,r=Qr.hostname,n=Qr.cookie.maxAge,i="/";let o=e.searchParams;Qr.cookie.includeOutcome&&(o.length&&(o+="&"),o+="outcome.wallVisibility="+e.outcome.wallVisibility,"always"===e.outcome.wallVisibility&&(o+="&outcome.wallType="+e.outcome.wallType));const a=`${t}=${o}; domain=${r}; path=${i}; max-age=${n};`;document.cookie=a}}(t)}function ea(e){return Ro(this,void 0,void 0,function*(){window.sophi.quickStart.decision=void 0,on(),Bn.values=null,Bn.analyticsString=null,e.dispatch({type:un.ContentProperties});const t=Zo(fi);t&&cn(),e.processStoredEvents(),yield Ko(t)})}const ta=e=>{var t;const r=e.decision,{visitor:n}=qo(),i=Bo(r,{visitorType:n,assignedGroup:null===(t=r.experiment)||void 0===t?void 0:t.assignedGroup},e.outcomes,Qr);le.debug("Policy outcome",i.outcome),Ho(n,i);const o=No(i);return"client"===Qr.wallGeneration.type&&!1===Qr.enableWallIndicators?(Go(o),zo(o,Qr),ln(o),cn()):"client"===Qr.wallGeneration.type&&!0===Qr.enableWallIndicators?(null===Yo.cold&&(Go(o),zo(o,Qr),ln(o),cn()),Xo(fi,o,e.outcomes)):"server"===Qr.wallGeneration.type&&(null===Yo.cold&&(Yo.cold=Ro(void 0,void 0,void 0,function*(){return{decision:yield Yo.getCached(),outcomes:e.outcomes}}),cn()),Xo(fi,o,e.outcomes)),o},ra=e=>Ro(void 0,void 0,void 0,function*(){var t,r,n,i,o;{le.info("ð§® Received getDecision event",e);const{visitor:a}=qo(e);Gi.dispatch({type:un.GetDecision});const s=(yield null===(t=Yo.cold)||void 0===t?void 0:t.then(e=>e.decision))||(yield Yo.getCached()),l=null!==(n=null===(r=yield Yo.cold)||void 0===r?void 0:r.outcomes)&&void 0!==n?n:null===(i=yield Yo.server)||void 0===i?void 0:i.outcomes,c=Bo(s,{visitorType:a,assignedGroup:null===(o=s.experiment)||void 0===o?void 0:o.assignedGroup},l,Qr);le.debug("Policy decision",c),Ho(a,c);const u=No(c);return le.info("ðª§ Decision:",Fo(u)),u}});function na(e){return t=this,n=function*(){var t;!1===Qr.enableWallIndicators&&le.warn("getDecisionForArticleWallIndicators was called but wall indicators are not enabled. Using current decision."),le.info("ð§® Received getDecisionForArticleWallIndicators event",e),Gi.dispatch({type:un.GetDecisionForArticleWallIndicators});const{visitor:r}=qo(),n=yield Yo.getCached();Ho(r,n);const i=(e=>{if(void 0===e)return null;const t=j.safeParse(Vn,e);return t.success?t.output:(le.warn(Dn,"Received:",e),null)})(null==e?void 0:e.contentPropensityLevel),o=No(Bo(n,{visitorType:r,assignedGroup:null===(t=n.experiment)||void 0===t?void 0:t.assignedGroup},(yield Yo.server).outcomes,Qr,{contentPropensity:i}));return le.info("ðª§ Decision for next page:",Fo(o)),o},new((r=void 0)||(r=Promise))(function(e,i){function o(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(o,a)}s((n=n.apply(t,[])).next())});var t,r,n}const ia=function(){const{context:e,inputs:t,trace:r,experimentsCode:n,assignedGroup:i}=an(),o={context:e,inputs:t,trace:r,decisionSource:"",experimentsCode:n,assignedGroup:i};return le.debug("Sophi context",o),o},oa=function(){const{context:e,inputs:t,trace:r,userProperties:n}=an(),i={context:e,inputs:t,trace:r,userProperties:n};return le.info("ðª§ Received getWallContext event",JSON.stringify(i,null,2)),i};var aa=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})};const sa=j.pipe(j.string(),j.trim(),j.string(),j.trim(),j.picklist(["pageview","wall","config","getDecision","getWallContext","getSophiContext","enableAllFeatures","userProperties","getDecisionForArticleWallIndicators"])),la=["pageview","wall","userProperties"],ca=["getDecision","getDecisionForArticleWallIndicators","getWallContext","getSophiContext"],ua=["config"],pa=["enableAllFeatures"];function da(e){let t,r,n;return"object"==typeof e&&null!==e&&("args"in e&&void 0!==e.args&&(t=e.args),"onSuccess"in e&&"function"==typeof e.onSuccess&&(r=e.onSuccess),"onError"in e&&"function"==typeof e.onError&&(n=e.onError)),{args:t,onSuccess:r,onError:n}}const ya=(e,t)=>{"function"==typeof e&&e(t)};function fa(e,t){return aa(this,arguments,void 0,function(e,t){var r=this;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){const{args:i,onSuccess:o,onError:a}=da(t),{resolve:s,reject:l}=n;try{const t=function(e){return j.parse(sa,e)}(e),n=yield ha.call(r,t,i);return ya(o,n),ya(s,n),n}catch(e){const t=function(e){try{if(e instanceof j.ValiError){const{root:t,nested:r}=j.flatten(e.issues),n=t||r;return le.error("InputError",JSON.stringify(n,null,2)),new Error("InputError",{cause:e})}throw e}catch(t){return le.debug("Error while formatting error",e),new Error("DecisionError",{cause:t})}}(e);throw le.debug("Error",t),ya(a,t),ya(l,t),t}}()})}function ha(e,t){return this[e](t)}function ga(e,t){const[[r,n]]=e[t],{resolve:i,reject:o}=function(e){let t,r;if(Array.isArray(e)){const[n,i,o]=e;"function"==typeof i&&(t=i),"function"==typeof o&&(r=o)}return{resolve:t,reject:r}}(e[t]);fa.call(this,r,da(n),{resolve:i,reject:o}),e.splice(t,1)}function va(e,t){for(let r=0;r<e.length;r++){const[[n]]=e[r];t.includes(n)&&(ga.call(this,e,r),r--)}}const wa=function(e){return aa(this,void 0,void 0,function*(){var t,r,n;(r=Qr.hostname)===(n=null===(t=window.location)||void 0===t?void 0:t.hostname)||new RegExp(`^(.*\\.)?${r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}$`).test(n)||le.warn(`Bundle hostname mismatch: bundle is for "${Qr.hostname}", but loaded on "${window.location.hostname}"`),le.debug("Initializing"),function(e,t){var r,n,i,o;if(null!==t.mode.consentParameterValue)!0===t.mode.consentParameterValue?(t.mode.on(),e.setConsent(!0),null===(n=null===(r=window.sophi)||void 0===r?void 0:r.abTests)||void 0===n||n.enableConsent()):!1===t.mode.consentParameterValue&&(t.mode.off(),e.setConsent(!1));else{const r=e.getConsent();void 0!==r&&(!0===r.granted&&(t.mode.on(),null===(o=null===(i=window.sophi)||void 0===i?void 0:i.abTests)||void 0===o||o.enableConsent()),!1===r.granted&&t.mode.off())}}(this.store,Qr),va.call(this,e,ua),va.call(this,e,pa);const i=Zo(this.store);i&&cn(),function(e){if(e&&("event"in e&&window.addEventListener(e.event,()=>{ea(Gi)}),"selector"in e)){const t=function(e){let t=null;try{t=document.querySelector(e)}catch(t){le.warn(`Invalid selector ${e}.`)}return null===t?(le.warn(`No node found using selector ${e}. Using document.body instead.`),document.body):t}(e.selector);let r=location.href;const n={subtree:!0,childList:!0};new MutationObserver(function(){location.href!==r&&(r=location.href,ea(Gi)),le.debug("MutationObserver callback checked for page change")}).observe(t,n)}}(Qr.spa),Qr.mode.isUserBehaviorDataAllowed&&Wi(),Gi.processStoredEvents(),Gi.dispatch({type:un.Init}),"server"===Qr.wallGeneration.type&&va.call(this,e,la),yield Ko(i),va.call(this,e,ca),"client"===Qr.wallGeneration.type&&va.call(this,e,la),this.ready=!0,window.demeter=fa.bind(this);for(let t=0;t<e.length;t++)ga.call(this,e,t),t--})},ma=function(e){return new yt(e.storage)}({storage:localStorage}),ba=class{constructor(){this.ready=!1,this.store=fi;const e=Gi.getDispatch();return this.init=wa.bind(this),this.pageview=t=>e({type:un.Pageview,payload:t}),this.wall=t=>e({type:un.Wall,payload:t}),this.enableAllFeatures=()=>e({type:un.EnableAllFeatures}),this.userProperties=t=>{e({type:un.UserProperties,payload:t})},this.config=ae.config.bind(ae),this.getDecision=ra,this.getWallContext=oa,this.getDecisionForArticleWallIndicators=na,this.getSophiContext=ia,new Proxy(this,{get:function(e,t){var r=this;return"function"==typeof e[t]&&"init"!==t?function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return a=r,l=function*(){if(!e.ready)throw new Error(`InitError: ${String(t)}() was called before init(). Please initialize before using this function.`);return e[t](...i)},new((s=void 0)||(s=Promise))(function(e,t){function r(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s(function(e){e(i)})).then(r,n)}i((l=l.apply(a,[])).next())});var a,s,l}:e[t]}})}};let xa=null,Sa=!1;const Pa=function(e){return t=this,n=function*(){return xa||(xa=new ba),Sa||(e||le.debug("Error loading 'thresholds' value."),function(e){e&&(no=e)}(e),yield function(e){return t=this,n=function*(){window.sophi=window.sophi||{},window.sophi.demeter=window.sophi.demeter||{actions:[]},window.sophi.quickStart=window.sophi.quickStart||{},window.sophi.dataLayer||on(),e.init(window.sophi.demeter.actions)},new((r=void 0)||(r=Promise))(function(e,i){function o(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(o,a)}s((n=n.apply(t,[])).next())});var t,r,n}(xa),Sa=!0),xa},new((r=void 0)||(r=Promise))(function(e,i){function o(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(o,a)}s((n=n.apply(t,[])).next())});var t,r,n};return n.default})(),"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.createDemeter=t():e.createDemeter=t(),function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:this,t=e&&e.createDemeter;if("function"==typeof t){try{delete e.createDemeter}catch(t){e.createDemeter=void 0}try{var r=t({experiences:[{definition:"www.row-dailymail.co.uk/experiment.assignedGroup=control",policy:{thresholds:{userLevels:{paywall:{anonymous:"5=0.79,3=0.69,1=0.59",registered:"5=0.79,3=0.69,1=0.59"}}}}},{definition:"www.row-dailymail.co.uk/experiment.assignedGroup=variant",policy:{thresholds:{userLevels:{paywall:{anonymous:"5=0.79,3=0.69,1=0.59",registered:"5=0.79,3=0.69,1=0.59"}}}}},{definition:"www.row-dailymail.co.uk/experiment.assignedGroup=holdout",policy:{thresholds:{userLevels:{paywall:{anonymous:"5=0.79,3=0.69,1=0.59",registered:"5=0.79,3=0.69,1=0.59"}}}}}]});r&&"function"==typeof r.then&&r.catch(function(e){console.error("Error init SDK with thresholds",e)})}catch(e){console.error("Error init SDK with thresholds",e)}}else console.error("createDemeter is not defined on window/globalThis")}();