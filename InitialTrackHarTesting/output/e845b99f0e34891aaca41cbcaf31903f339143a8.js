!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("JS Ads for Publishers",[],e):"object"==typeof exports?exports["JS Ads for Publishers"]=e():t["JS Ads for Publishers"]=e()}(self,function(){return function(){var t={215:function(t,e,n){var i,r;!function(s){if(void 0===(r="function"==typeof(i=s)?i.call(e,n,e,t):i)||(t.exports=r),t.exports=s(),!!0){var a=window.Cookies,o=window.Cookies=s();o.noConflict=function(){return window.Cookies=a,o}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function r(){}function s(e,n,s){if("undefined"!=typeof document){"number"==typeof(s=t({path:"/"},r.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(t){}n=i.write?i.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o="";for(var l in s)s[l]&&(o+="; "+l,!0!==s[l]&&(o+="="+s[l].split(";")[0]));return document.cookie=e+"="+n+o}}function a(t,n){if("undefined"!=typeof document){for(var r={},s=document.cookie?document.cookie.split("; "):[],a=0;a<s.length;a++){var o=s[a].split("="),l=o.slice(1).join("=");n||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var d=e(o[0]);if(l=(i.read||i)(l,d)||e(l),n)try{l=JSON.parse(l)}catch(t){}if(r[d]=l,t===d)break}catch(t){}}return t?r[t]:r}}return r.set=s,r.get=function(t){return a(t,!1)},r.getJSON=function(t){return a(t,!0)},r.remove=function(e,n){s(e,"",t(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}(function(){})})}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};return function(){"use strict";var t,e,i,r;!function(t){t.popunderTriggered="popunderTriggered",t.embeddedAdsLoaded="embeddedAdsLoaded",t.embeddedAdsError="embeddedAdsError",t.embeddedAdsSpotLoaded="embeddedAdsSpotLoaded",t.embeddedAdsSpotFailed="embeddedAdsSpotFailed",t.embeddedAdsSpotDefaultLoaded="embeddedAdsSpotDefaultLoaded",t.embeddedAdsDebuggerUpdate="embeddedAdsDebuggerUpdate"}(t||(t={})),function(t){t[t.Low=99]="Low",t[t.Medium=550]="Medium",t[t.High=720]="High",t[t.VeryHight=1080]="VeryHight"}(e||(e={})),function(t){t.site_id="site_id",t.hb_guid="hc",t.version="t_version",t.platform="device_type",t.client_ip="clientIP",t.segment="segment",t.custom_param="",t.delivery_server="",t.refresh_times="",t.refresh_delay="",t.retry="",t.bg_color="",t.default_image="",t.default_url="",t.domain_rewrite="",t.fail_url="",t.spot_ssp="",t.spot_new=""}(i||(i={})),function(t){t.context_pornstar="context_pornstar",t.context_category="context_category",t.context_tag="context_tag",t.context_page_type="context_page_type",t.info="info",t.category="category",t.search="search",t.site="site"}(r||(r={}));const s={adBaseURL:`${location.protocol}//{ENV}/{METHOD}`,adClassNameContext:"adsbytrafficjunkycontext",cookies:{deliveryServer:{name:"TJDeliveryServer"},env:{name:"TJAdsUrl"}},videoFormats:["video/mp4","video/webm","video/ogg"]};var a,o=n(215),l=n.n(o);class d{}d.getEnv=t=>{const e=o.get(s.cookies.env.name),n=".trafficjunky.net";return e?`${e}${n}`:t||`ads${n}`},d.getDeliveryServer=()=>o.get(s.cookies.deliveryServer.name);class c{static isHBZone(t){return c.HB_ZONES.has(t)}static initHBZones(){(null===window||void 0===window?void 0:window.tjPreloadAds)&&Object.keys(window.tjPreloadAds).forEach(t=>{const e=Number(t.split("_")[0]);c.HB_ZONES.add(e)})}createURL(t,e=!1){const n=t.specificParams.domain_rewrite;let i=s.adBaseURL;i=i.replace("{ENV}",d.getEnv(n)),i=i.replace("{METHOD}",this.getMethod(t,e)),e?(i+=`?zone_id=${t.spotId}&redirect=1&format=popunder`,i+=`&clientType=${encodeURIComponent(String(t.specificParams.platform))}`):(i+=`?data=${encodeURIComponent(`[{"spots":[{"zone":${t.spotId}}]}]`)}`,i+="&clientType=mobile"),i+=this.getScreenSizeParams(),i+=this.getChannelsParameters(t.channelParams);const r=c.isHBZone(t.spotId);i+=this.getSpecificParameters(t.specificParams,e,r);const a=d.getDeliveryServer();return a&&(i+=`&delivery-server=${a}`),n&&(i+=`&dm=${encodeURIComponent(n)}`),i+=`&_=${Date.now()}`,t.specificParams.custom_param&&(i+=t.specificParams.custom_param),e||(i+=`&v=${String(Math.random()).substring(2,12)}`),i}getScreenSizeParams(){let t="Unknown",e="Unknown";return window&&window.screen&&window.screen.width&&window.screen.height&&(t=`${window.screen.width}`,e=`${window.screen.height}`),`&width=${t}&height=${e}`}getSpecificParams(t,e){const n=Object.assign(Object.assign({},e),t),r={};for(const t in n)t in i&&(r[t]=n[t]);return r}getChannelParams(t,e){const n=Object.assign(Object.assign({},e),t),i={};for(const t in n)t in r&&(i[t]=n[t]);return i}getAdContextAttributes(){const t=document.querySelector(`meta[name="${s.adClassNameContext}"]`);return t?h.getDataAttributes(t):null}getChannelsParameters(t){let e="";if(!t)return e;for(const n in t)r[n]&&t[n]&&(e+=`&channel[${n}]=${encodeURIComponent(t[n])}`);return e}getSpecificParameters(t,e,n=!0){let r="";for(const s in t){if(!i[s]||!t[s])continue;if("hb_guid"===s&&!n)continue;const a=this.getSpecificParameterValue(t,e,s);r+=`&${i[s]}=${encodeURIComponent(a)}`}return r}getSpecificParameterValue(t,e,n){return"platform"!==n||e||"pc"!==t[n]?t[n]:"tablet"}getMethod(t,e){return"true"===t.specificParams.spot_ssp?"deep-ssp":e?"ads":"ads_batch"}}c.HB_ZONES=new Set;class u{static log(e,n){u.logs[e]||(u.logs[e]=[]),n&&(n.logTime=new Date(Date.now())),u.logs[e].push(n);const i=JSON.parse(JSON.stringify(this.debug()));window.postMessage({debug:i,name:e,type:t.embeddedAdsDebuggerUpdate},"*")}static getSpots(){const e={};for(const n in u.logs){-1!==[t.embeddedAdsSpotDefaultLoaded,t.embeddedAdsSpotFailed,t.embeddedAdsSpotLoaded].indexOf(n)&&u.populateMapForEvent(n,e)}return u.populateSpots(e)}static populateSpots(e){const n={};for(const i in e){n[i]||(n[i]={});const r=e[i][t.embeddedAdsSpotFailed];this.populateSpotsPerRefreshed(n[i],r,"failed");const s=e[i][t.embeddedAdsSpotDefaultLoaded];this.populateSpotsPerRefreshed(n[i],s,"default_loaded");const a=e[i][t.embeddedAdsSpotLoaded];this.populateSpotsPerRefreshed(n[i],a,"loaded")}return this.formatSpots(n)}static formatSpots(t){const e={};for(const n in t){e[n]=[];for(const i in t[n])e[n].push(t[n][i])}return e}static populateMapForEvent(t,e){for(let n=0;n<u.logs[t].length;n++){const i=u.logs[t][n].ad;e[i.refreshed]||(e[i.refreshed]={}),e[i.refreshed][t]||(e[i.refreshed][t]={}),e[i.refreshed][t][i.uuid]={container:u.logs[t][n].container,spotId:i.spotId}}}static populateSpotsPerRefreshed(t,e,n){if(e)for(const i in e)t[i]={container:e[i].container,spotId:e[i].spotId,status:n}}static getHBSpots(){const t=document.querySelectorAll("script[src*='/ads_batch']");for(let e=0;e<t.length;e++){const n=String(t[e].getAttribute("src")),i=u.getHBSpotsFromScript(n);if(i)return i}return null}static getHBSpotsFromScript(t){try{if(!t||-1===t.indexOf("?"))return null;t=t.substring(t.indexOf("?"));const e=new URLSearchParams(t);if(!e.get("hb"))return null;const n=JSON.parse(e.get("data"))[0].spots,i=[];for(let t=0;t<n.length;t++)i.push(n[t].zone);return i}catch(t){return null}}}u.logs={},u.debug=()=>({context:u.adContextAttributes,events:u.logs,hbSpots:u.getHBSpots(),spots:u.getSpots(),version:"1.0.7"});class h{static connectionInfo(){return navigator.connection||navigator.mozConnection||navigator.webkitConnection}static truncateText(t,e){return t.length>e?`${t.slice(0,e)}...`:t}}h.createDOMElement=(t,e={})=>{const n=document.createElement(t);for(const t in e)n.setAttribute(t,e[t]);return n},h.getDataAttributes=t=>{var e,n;const i=[].filter.call(t.attributes,t=>/^data-/.test(t.name)),r={};for(const t in i){const s=null===(e=i[t].name)||void 0===e?void 0:e.replace("data-","").replace(/-/g,"_"),a=null===(n=i[t].value)||void 0===n?void 0:n.trim();a&&s&&(r[s]=h.sanitize(a))}return r},h.isLeftButton=t=>1===(t.which||t.button),h.isAdBlock=()=>{const t=document.createElement("div");t.innerHTML="&nbsp;",t.className="adsbox";let e=!1;try{document.body.appendChild(t),e=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(t)}catch(t){e=!0}return e||!window.tjEmbeddedAdsLoaded},h.dispatchTjEvent=(e,n)=>{const i=document.createEvent("Event");i.initEvent(e,!1,!0),n&&(i.detail=n),document.dispatchEvent(i),u.log(e,n),e===t.embeddedAdsSpotFailed&&h.sendFailEvent(n)},h.sendFailEvent=t=>{var e;const n=(new c).getAdContextAttributes();if(!n||!n.fail_url)return;if(0===t.status)return;const i=new XMLHttpRequest;i.open("POST",n.fail_url),i.send(JSON.stringify({pageUrl:window.location.href,retryCounter:t.retried,tjAdData:null!==(e=t.request.response)&&void 0!==e?e:"",tjAdRequestUrl:t.request.url,tjResponseCode:t.request.status,tjResponseTime:t.request.duration,tjZoneID:t.ad.spotId}))},h.getQuality=()=>{const t=h.connectionInfo();return t?t.downlink<.3?e.Low:t.downlink<.7?e.Medium:e.High:e.Medium},h.sanitize=t=>{const e={"<":"&lt;",">":"&gt;"};return t.replace(/[<>]/gi,t=>e[t])},h.getNearestAvailableQuality=(t,e)=>{const n=Number(e);let i=Object.keys(t);if(0===i.length)return null;i=i.filter(e=>"progressive"===t[e].delivery),i=i.filter(e=>{const n=t[e];return!!n.type&&["video/mp4","video/webm","video/ogg"].includes(n.type)});return i.sort((t,e)=>{const i=Number(t),r=Number(e);return isNaN(i)?1:isNaN(r)?-1:Math.abs(n-i)-Math.abs(n-r)})[0]},function(t){t.EN="EN"}(a||(a={}));var p=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class g{static dispatchError(e){g.dispatch(t.embeddedAdsError,null,{error:JSON.stringify(e,Object.getOwnPropertyNames(e))})}static sendEvent(t){if(!t)return;const e=new XMLHttpRequest;e.open("GET",t),e.send()}static getNavigatorLang(){const t=g.getDefaultNavigatorLang().split("-")[0].toUpperCase();return a[t]?a[t]:a.EN}static getDefaultNavigatorLang(){let t="en";return t=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en",t}}g.calculateHeightRatio=t=>g.getClientWidth()*t/580,g.calculateWidthRatio=t=>g.getClientWidth()*t,g.createInlineStyle=(t,e=!1)=>{let n="";for(const e in t){let i="";";"!==t[e].substr(t[e].length-1)&&(i=";"),n+=`${e}:${t[e]}${i}`}return e&&(n=n.replace(/!important/g,"").replace(/;/g,"!important;")),n},g.getElementByTag=(t,e)=>t.tagName===e.toUpperCase()?t:t.querySelector(e),g.getElementBySpotId=(t,e)=>p(void 0,void 0,void 0,function*(){const n=`.${t}[data-source-id="${e}"], .${t}[data-spot-id="${e}"]`;let i=0;for(;!document.querySelector(n);){if(i++>20)return null;yield new Promise(t=>requestAnimationFrame(t))}return document.querySelector(n)}),g.dispatch=(t,e=null,n={})=>{h.dispatchTjEvent(t,g.getEventParams(e,n))},g.getEventParams=(t=null,e={})=>(t&&(e=Object.assign({ad:Object.assign({},t.params),channelParams:t.channelParams,container:t.containerElement,request:Object.assign(Object.assign({},t.request),{duration:Date.now()-Number(t.request.duration)}),specificParams:t.specificParams},e)),e),g.getUUID=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}),g.getClientWidth=()=>document.documentElement.clientWidth,g.getWindowYPosition=()=>{let t=0;return pageYOffset?t=pageYOffset:document.documentElement.clientHeight?t=document.documentElement.scrollTop:document.body&&(t=document.body.scrollTop),t},g.getBrowserInfo=()=>{var t;let e=null,n=!1,i=0;if(navigator.userAgent.search("YaBrowser/")>=0||navigator.userAgent.indexOf("Yowser/")>=0)e="YANDEX";else if(navigator.userAgent.search("Vivaldi/")>=0)e="VIVALDI";else if(navigator.userAgent.search("SamsungBrowser/")>=0||navigator.userAgent.toLowerCase().search("samsung")>=0)e="SAMSUNG BROWSER";else if(navigator.userAgent.search("Opera")>=0||navigator.userAgent.indexOf(" OPR/")>=0)e="OPERA";else if(navigator.userAgent.search("Edge/")>=0||navigator.userAgent.indexOf("Edg/")>=0||navigator.userAgent.search("EdgA/")>=0)e="EDGE";else if(navigator.userAgent.search("EdgiOS/")>=0)e="EDGE",n=!0;else if(navigator.userAgent.search("MSIE")>=0)e="IE";else if(navigator.userAgent.search("Chrome")>=0)e="CHROME";else if(navigator.userAgent.search("CriOS/")>=0)e="CHROME",n=!0;else if(navigator.userAgent.search("Firefox")>=0){const t=navigator.userAgent.match(/Firefox\/([0-9]+)\./);i=t?parseInt(t[1]):0,e="FIREFOX"}else navigator.userAgent.search("FxiOS")>=0?(e="FIREFOX",n=!0):navigator.userAgent.search("Safari")>=0&&-1===navigator.userAgent.search("Chrome")&&(e="SAFARI");return{flags:{isAnIOSVariantUsingWebkit:n},mobileDevice:null===(t=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].find(t=>navigator.userAgent.match(t)?t:null))||void 0===t?void 0:t.source,name:e,version:i}};const m={adClassName:"adsbytrafficjunky",bottomAdName:"tjBottomAd",closeImageURL:`${location.protocol}//static.trafficjunky.com/delivery/img/close.png`,cookies:{bottom:{expiry:48e4,name:"TJBottomClose"},fail:{name:"TJAdsFail"},server:{expiry:36e5,name:"RLBNSERVERID"}},defaults:{bg_color:"transparent",platform:"mobile"},idSync:{scriptUrl:"https://static.trafficjunky.com/invocation/idsync/production/idsync.min.js",sites:["tube8","pornhub","youporn","redtube","xtube"]},inBanLabels:{actionButtonId:"tj-inbanlabel-action-button",buttonsContainerL1Id:"tj-inbanlabel-buttons-l1",buttonsContainerL2Id:"tj-inbanlabel-buttons-l2",buttonsList:[{childButtons:[{id:"i_cont"},{id:"u_cont"},{id:"c_inf"}],id:"reportThisAd"},{id:"advertisingInquiries",link:"https://www.trafficjunky.com/contact-us?category=advertising_inquiries*"}],containerId:"tj-inbanlabel-container-v2",copyrightInfringementUrls:{pornhub:"/information/dmca",youporn:"/information/#dmca",redtube:"/information#dmca",tube8:"/info.html#dmca"},defaultReportUrl:"https://www.trafficjunky.com/contact-us",defaultTargetUrl:"https://www.pornhub.com/information/advertising",filter:{availableWebsites:["pornhub","redtube","tube8","youporn"],websites:["pornhub","redtube","tube8","youporn"],zoneIds:[]},locales:{EN:{adLabel:"Ad By TrafficJunky",buttons:{advertisingInquiries:"Advertising inquiries",c_inf:"Copyright infringement",i_cont:"Inappropriate content",reportThisAd:"Report this ad",u_cont:"Underage content"},successMessage:"Thank you, this ad has been reported."}},reportingCookieName:"adsReported",reportsCookieExpirationTime:43200,reportsNumberThreshold:10,successMessage:"Thank you, this ad has been reported.",successMessageContainerId:"tj-inbanlabel-success-message",targetUrls:{pornhub:"/information/advertising",redtube:"/information#advertising",tube8:"/info.html#advertising",youporn:"/information/#advertise"}},refreshFrequency:{default:240,pornhub:120,redtube:60,tube8:60,youporn:60},reloadHeaderbidding:{aheadTime:600,enableWhitelist:!1,enabled:!0,preloadWhiteList:[5,2501332,2184351,981,2501352],waitingIntialPreload:!0},videoDriveBy:{cookieExpiry:288e5,cookieName:"videoSliderShown",position:"bottom",skipDelay:5e3,vastProvider:"tj"},viewabilityOn:!0};class b{static createURL(t,e=!1){return b.adService.createURL(t,e)}static getSpecificParams(t,e){return b.adService.getSpecificParams(t,e)}static getChannelParams(t,e){return b.adService.getChannelParams(t,e)}static getAdContextAttributes(){const t=b.adService.getAdContextAttributes();return u.adContextAttributes=t,t}}b.adService=new c;class v{constructor(t,e){this.channelParams={},this.specificParams={},this.request={},this.refreshed=!1,this.bootstrapIndex=null,this.getParams=(t,e)=>({adMargin:t.ad_margin,adWidth:t.ad_width,height:String(t.height),horizontal:"true"===t.horizontal,inbanlabel:"true"===t.inbanlabel_v2||this.isInBanLabelRequested(t,e),inbanlabelV2:"true"===t.inbanlabel_v2,mobile:"true"===t.mobile,refreshed:0,spotId:Number(t.source_id||t.spot_id),type:String(t.type),uuid:g.getUUID(),width:String(t.width),windowHeight:t.window_height,windowWidth:t.window_width}),this.setChannelAndSpecificParams=(t,e)=>{this.specificParams=b.getSpecificParams(t,e),this.channelParams=b.getChannelParams(t,e);for(const t in m.defaults)this.specificParams[t]||(this.specificParams[t]=m.defaults[t])},this.isInBanLabelRequested=(t,e)=>{var n;const i=void 0===t.inbanlabel?null:"true"===t.inbanlabel;if(null!==i)return i;const r=t.type;let s;return(!r||(s=null===(n=null==e?void 0:e.hide_inbanlabels_for)||void 0===n?void 0:n.split(",").includes(r),!s))&&null},this.params=this.getParams(t,e),this.setChannelAndSpecificParams(t,e)}}const f={"background-color":"#000000",border:"none",display:"block",margin:"0 auto",overflow:"hidden"},A={border:"none",display:"block",height:"100%",left:"0","margin-left":"auto","margin-right":"auto",position:"absolute",right:"0",top:"0","vertical-align":"middle",width:"100%"},y={overflow:"hidden",position:"relative"},w={background:"transparent",margin:"0 auto",overflow:"hidden",position:"relative","z-index":"9"},C={"background-color":"black",color:"#fff",display:"block","font-size":"12px","line-height":"1",padding:"5px 0 5px 0",position:"absolute","text-align":"center",width:"100%","z-index":"1"},x={"align-items":"center",display:"flex",height:"100%","transform-style":"preserve-3d",width:"100%"},S={height:"100vh",left:"0",position:"fixed",right:"0",width:"100%"},I=t=>{const e="Android"===t.mobileDevice&&"FIREFOX"===t.name||("iPhone"===t.mobileDevice||"iPad"===t.mobileDevice)&&("SAFARI"===t.name||"CHROME"===t.name)?{top:"0"}:{bottom:"0"};return Object.assign(Object.assign({},S),e)},k={bottom:"0",left:"0",position:"absolute",top:"0",width:"100%"},E=t=>{const e="iPhone"===t.mobileDevice||"iPad"===t.mobileDevice||"SAFARI"===t.name?{"clip-path":"inset(0 0)"}:{clip:"rect(0px, auto, auto, 0px)"};return Object.assign(Object.assign({},k),e)},j={"-ms-transform":"translateX(-50%)",bottom:"0px",display:"block",left:"50%",position:"fixed",transform:"translateX(-50%)","z-index":"9999"},L={background:`url(${m.closeImageURL})`,"background-repeat":"no-repeat",cursor:"pointer",height:"20px",position:"absolute",right:"-16px",top:"-16px",width:"20px"},T={overflow:"hidden",position:"relative"},B={left:"0",position:"absolute",top:"0",width:"100%"},M={display:"block",position:"fixed",right:"0",top:"0"},N={"align-items":"center",background:"#299cb2","border-radius":"3px","box-shadow":"2px 2px 3px 0px rgba(0, 0, 0, 0.35)","box-sizing":"border-box",cursor:"pointer",display:"flex",height:"15px",overflow:"hidden","padding-left":"4px",position:"absolute",right:"0",top:"0",transition:"0.6s"},O={color:"#fff","font-family":"sans-serif","font-size":"10px","white-space":"nowrap"},P={"border-radius":"3px","box-shadow":"0 0 3px #333",cursor:"pointer","font-family":"sans-serif","font-size":"12px",height:"15px",position:"absolute",right:"0","text-align":"center",top:"0",transition:"0.2s",width:"18px"},D={"align-items":"center",background:"rgba(0, 0, 0, 0.85)",bottom:"0","box-sizing":"border-box","flex-direction":"column","font-family":"sans-serif","justify-content":"center",left:"0",padding:"30px 0",position:"absolute",right:"0",top:"0"},_={order:"2"},R={"align-items":"center","flex-direction":"column",height:"100%","justify-content":"center",order:"1",width:"100%"},F={"flex-direction":"row"},H={"align-items":"center",color:"#fff","font-size":"12px",height:"100%","justify-content":"center","max-width":"190px","text-align":"center",width:"100%"},$={"max-width":"auto"},z={"align-items":"center","border-radius":"5px",display:"flex","font-family":"sans-serif","font-size":"12px",height:"43px","justify-content":"center","text-decoration":"none",width:"138px"},U=Object.assign(Object.assign({},z),{"font-size":"10px",height:"29px",width:"100px"}),V={width:"90px"},W={"background-image":'url("data:image/png;base64,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")',"background-repeat":"no-repeat","background-size":"contain",height:"27px","margin-bottom":"8px","min-height":"27px",order:"1",width:"140px"},q=Object.assign(Object.assign({},W),{"margin-bottom":"30px"}),Y={height:"21px",width:"107px"},Q="\n    .tj-inban-icon {\n        width: 19px;\n    }\n    .tj-inban-icon:hover {\n      width: 90px;\n    }\n    \n    .tj-inban-button {\n        background-color: #f2f2f2;\n        color: #333;\n    }\n    \n    .tj-inban-button:hover {\n        cursor: pointer;\n        background-color: #299bb2;\n        color: #f2f2f2;\n    }\n    \n    .tj-inban-close {\n        background-color: #299bb2;\n        color: #fff;\n    }\n    \n    .tj-inban-close:before {\n        content: '+';\n        display: block;\n        transform: rotate(45deg);\n        font-size: 22px;\n        position: absolute;\n        top: -7px;\n        left: 4px;\n    }\n    \n    .tj-inban-close:hover {\n        background-color: #2db8d5;\n    }\n    \n    #tj-inban-report {\n        display: none;\n    }\n    #tj-inban-report.visible {\n        display: flex;\n    }\n    \n    .tj-inban-container {\n      width: 20px;\n      height: 15px;\n      transition: box-shadow .3s;\n    }\n    \n    .tj-inban-container.extended {\n        width: 100%;\n        height: 100%;\n    }\n    \n    .tj-inban-actions-container {\n      display: none;\n    }\n   \n    .tj-inban-actions-container.visible {\n      display: flex;\n    }\n    .tj-inban-actions-container .tj-inban-button {\n      margin-bottom: 8px;\n    }\n    .tj-inban-actions-container .tj-inban-button.tj-inban-button-mob {\n      margin-bottom: 0;\n      margin-right: 10px;\n    }\n    .tj-inban-actions-container .tj-inban-button.tj-inban-button-mob:last-child {\n      margin: 0;\n    }\n    .tj-inban-actions-container .tj-inban-button.tj-inban-button-horizontal {\n      margin: 0;\n      margin-right: 30px;\n    }\n    .tj-inban-actions-container .tj-inban-button.tj-inban-button-horizontal:last-child {\n      margin: 0;\n    }\n    .grow {\n      flex-grow: 1;\n    }\n    .horizontal-banner-logo {\n      margin-bottom: 30px;\n    }\n";class J{}J.fixSrcDoc=t=>{var e,n,i;if("srcdoc"in document.createElement("iframe"))return;if("IFRAME"!==t.tagName&&(t=t.querySelector("iframe")),!t)return;const r=t,s=null==r?void 0:r.getAttribute("srcdoc");s&&(null===(e=r.contentWindow)||void 0===e||e.document.open(),null===(n=r.contentWindow)||void 0===n||n.document.write(s),null===(i=r.contentWindow)||void 0===i||i.document.close())},J.fixMobileVideoAd=t=>{if(!t)return t;const e=t.indexOf('<div class="adtool_video_ad"');return-1!==e&&(t=`${t.substr(0,e)}\n\t\t\t<script src='//cdn11.contentabc.com/delivery/mobile_video/adtool_mobile_video_player_min.js'><\/script>\n\t\t\t${t.substr(e)}`),t};class X{static wasClosed(){return Boolean(o.get(m.cookies.bottom.name))}static isTestFail(){return Boolean(o.get(m.cookies.fail.name))}static close(t){const e=new Date(Date.now()+m.cookies.bottom.expiry);t||o.set(m.cookies.bottom.name,"1",{expires:e,secure:!0})}}X.setDeliveryServer=t=>{if(!t)return;const e=new Date(Date.now()+m.cookies.server.expiry);o.set(m.cookies.server.name,t,{expires:e,secure:!0})};var G=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})},K=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n};class Z{static makeRequest(t){return G(this,void 0,void 0,function*(){return m.reloadHeaderbidding.waitingIntialPreload&&nt.shouldCheckPreload(t.params.spotId)&&(yield nt.isPreloaded(t.params.spotId))||Z.isPreloaded(t)?Z.getHBAd(t):new Promise(e=>{const n=window.XDomainRequest?new window.XDomainRequest:new XMLHttpRequest;let i=t.specificParams;if(t.refreshed){const e=t.specificParams,{hb_guid:n}=e;i=K(e,["hb_guid"])}const r=b.createURL({channelParams:t.channelParams,specificParams:i,spotId:t.params.spotId});n.onload=n.onerror=n.ontimeout=()=>{e(Z.verifyResponse(n,t,r))},n.open("GET",r),n.timeout=1e4,n.send()})})}static isPreloaded(t){if(void 0!==window.tjPreloadAds){const e=String(t.params.spotId),n=Object.keys(window.tjPreloadAds).find(t=>t.split("_",1)[0]===e);return void 0!==n&&void 0!==window.tjPreloadAds[n]}return!1}static getHBAd(t){const e=String(t.params.spotId),n=Object.keys(window.tjPreloadAds).find(t=>t.split("_",1)[0]===e),i=n?window.tjPreloadAds[n]:void 0,r=X.isTestFail()?null:i.response;return t.request.duration=Date.now()-Number(i.duration),t.request.url=i.url,t.request.status=i.status,t.request.response=i.response,delete window.tjPreloadAds[n],(new Ae).load(),new Promise(t=>t(r))}static verifyResponse(t,e,n){return e.request.url=n,e.request.status=t.status,e.request.response=t.responseText,!window.XDomainRequest&&200!==t.status||!t.responseText||X.isTestFail()?null:t.responseText}}Z.makeXMLRequest=t=>new Promise(e=>{const n=window.XDomainRequest?new window.XDomainRequest:new XMLHttpRequest;n.onload=n.onerror=n.ontimeout=()=>{e(200===n.status?n.responseText:null)},n.open("GET",t),n.timeout=1e4,n.send()});var tt=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};function et(t,e){return(Math.floor(Math.random()*(e-t+1))+t).toString(16).padStart(4,"0").toUpperCase()}class nt{static isInWhiteList(t){return!m.reloadHeaderbidding.enableWhitelist||m.reloadHeaderbidding.preloadWhiteList.includes(t)}static shouldCheckPreload(t){return!!m.reloadHeaderbidding.enabled&&(!!nt.initialCall||this.isInWhiteList(t))}static isPreloaded(t){return tt(this,void 0,void 0,function*(){if(!nt.initialCall)return Promise.resolve(!1);if(!window.tjPreloadAds||0===Object.keys(window.tjPreloadAds).length)return nt.initialCall=!1,Promise.resolve(!1);yield nt.waitIntialPreload();const e=void 0!==Object.keys(window.tjPreloadAds).find(e=>e.split("_")[0]===String(t)&&void 0!==window.tjPreloadAds[e].response);return Promise.resolve(e)})}static waitIntialPreload(){return tt(this,void 0,void 0,function*(){const t=()=>Object.values(window.tjPreloadAds).every(t=>t.url&&t.response);return t()?Promise.resolve(!0):new Promise(e=>{setTimeout(()=>{e(t())},1e3)})})}static initPreloadAdUrls(){window.tjPreloadAds&&(Object.keys(window.tjPreloadAds).forEach(t=>{const e=Number(t.split("_")[0]);this.preloadAdsUrls[e]=window.tjPreloadAds[t].url,this.isInWhiteList(e)&&this.totalCalls++}),this.hbUrlTemplate=window.initialHBUrl)}static shouldPreload(t){return m.reloadHeaderbidding.enabled&&Object.keys(this.preloadAdsUrls).length>0&&this.isInWhiteList(t)}static makeHBCall(){return tt(this,void 0,void 0,function*(){if(!this.makingHBCall){this.makingHBCall=!0;const t=window&&window.screen&&window.screen.width?window.screen.width:"Unknown",e=window&&window.screen&&window.screen.height?window.screen.height:"Unknown";this.guid=`${et(0,65535)}${et(0,65535)}-${et(0,65535)}-${et(0,65535)}-${et(0,65535)}-${et(0,65535)}${et(0,65535)}${et(0,65535)}`,this.hbUrlTemplate&&Z.makeXMLRequest(`${this.hbUrlTemplate.replace(/hb=[^&]*/g,`hb=${this.guid}`)}&width=${t}&height=${e}`)}return new Promise(t=>{setTimeout(()=>{this.makingHBCall=!1,t()},300)})})}static preload(t){return tt(this,void 0,void 0,function*(){0===this.currentCalls&&(yield this.makeHBCall());try{const e=this.preloadAdsUrls[t.params.spotId];if(!e)return;const n=window&&window.screen&&window.screen.width?window.screen.width:"Unknown",i=window&&window.screen&&window.screen.height?window.screen.height:"Unknown";this.currentCalls++,this.currentCalls===this.totalCalls&&(this.currentCalls=0);const r=`${e.replace(/hc=[^&]*/g,`hc=${this.guid}`)}&width=${n}&height=${i}&v=${String(Math.random()).substring(2,12)}`,s=(new Date).getTime();return Z.makeXMLRequest(r).then(e=>{if(!e)return;const n=`${t.params.spotId}_${Object.keys(window.tjPreloadAds).length+1}`;window.tjPreloadAds[n]={duration:(new Date).getTime()-s,loaded:!0,response:e,status:200,url:this.preloadAdsUrls[t.params.spotId]}})}catch(t){console.warn(t)}})}}nt.initialCall=!0,nt.preloadAdsUrls={},nt.hbUrlTemplate=null,nt.guid=null,nt.totalCalls=0,nt.currentCalls=0,nt.makingHBCall=!1;var it=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class rt extends v{constructor(e,n,i,r=!0){super(n,i),this.createWithDefaultIfFail=(e,n)=>it(this,void 0,void 0,function*(){const i=Number(this.specificParams.retry)||0;this.request.defaultAd=!1;for(let n=0;n<i+1;n++){const i=yield e();if(i)return i;g.dispatch(t.embeddedAdsSpotFailed,this,{retried:n})}return this.createDefaultAd(n)}),this.createDefaultAd=t=>{if(!this.specificParams.default_image||!this.specificParams.default_url)return null;(t=t||Object.assign({height:this.params.height,width:this.params.width},f))["background-color"]=this.specificParams.bg_color;const e=h.createDOMElement("img",{src:this.specificParams.default_image,style:g.createInlineStyle(t)}),n=h.createDOMElement("a",{"data-embeddedadsfallback":"true","data-height":this.params.height,"data-spot-id":this.params.spotId,"data-width":this.params.width,href:this.specificParams.default_url,target:"_blank"});return n.appendChild(e),this.request.defaultAd=!0,n},this.containerElement=e,r&&this.refresh()}refresh(){const t=Number(this.specificParams.refresh_times);if(!t)return;this.refreshDelay||(this.refreshDelay=this.getRefreshDelay());const e=nt.shouldPreload(this.params.spotId);let n=0;this.interval=window.setInterval(()=>{++n>=t&&window.clearInterval(this.interval),e?nt.preload(this).then(()=>{this.runRefreshAd()}):this.runRefreshAd()},1e3*this.refreshDelay)}runRefreshAd(){this.params.refreshed++,"function"==typeof this.revert&&this.revert(),this.refreshed=!0,this.run()}getRefreshDelay(){var t;const e=null===(t=this.channelParams)||void 0===t?void 0:t.site,n=void 0!==e?m.refreshFrequency[e]:null;return null==n||isNaN(n)?m.refreshFrequency.default?m.refreshFrequency.default:Number(this.specificParams.refresh_delay):n}reload(){window.clearInterval(this.interval),"function"==typeof this.revert&&this.revert(),this.run(),this.refresh()}run(){return it(this,void 0,void 0,function*(){if(!this.checkIfCreatable())return!1;this.request.duration=Date.now();const e=yield this.create();if(this.updateSequence(),!e||!document.body.contains(this.containerElement))return"function"==typeof this.revert&&this.revert(),!1;this.insertIntoDOM(e);const n=h.createDOMElement("span");n.textContent=`${this.bootstrapIndex} (${this.params.spotId})`,n.style.display="none",n.style.float="right",e.appendChild(n),this.removeInvocationCode(),this.containerElement=e,this.updateElementBootstrapIndex(),J.fixSrcDoc(e);const i=this.request.defaultAd?t.embeddedAdsSpotDefaultLoaded:t.embeddedAdsSpotLoaded;return g.dispatch(i,this),!0})}checkIfCreatable(){return!(!this.containerElement||!this.containerElement.parentNode)&&document.body.contains(this.containerElement)}insertIntoDOM(t){this.containerElement&&this.containerElement.parentNode&&this.containerElement.parentNode.insertBefore(t,this.containerElement.nextSibling)}isInvocationCode(){var t,e;return null!==(e=null===(t=this.containerElement)||void 0===t?void 0:t.classList.contains(m.adClassName))&&void 0!==e&&e}updateSequence(){var t;if(null===this.bootstrapIndex||isNaN(this.bootstrapIndex)){const t=`[data-refreshed="${this.params.refreshed}"][data-source-id="${this.params.spotId}"], [data-refreshed="${this.params.refreshed}"][data-spot-id="${this.params.spotId}"]`,e=document.querySelectorAll(t);this.containerElement=e.length?e[e.length-1]:this.containerElement}else{const e=this.bootstrapIndex-1,n=`[data-source-id="${this.params.spotId}"][data-spot-occurrence-index="${e}"], [data-spot-id="${this.params.spotId}"][data-spot-occurrence-index="${e}"]`;this.containerElement=null!==(t=document.querySelector(n))&&void 0!==t?t:this.containerElement}}updateElementBootstrapIndex(){var t,e,n,i;null===(t=this.containerElement)||void 0===t||t.setAttribute("data-spot-occurrence-index",""+(this.bootstrapIndex?this.bootstrapIndex-1:-1)),null===(e=this.containerElement)||void 0===e||e.setAttribute("data-spot-id",`${this.params.spotId}`),null===(n=this.containerElement)||void 0===n||n.setAttribute("data-source-id",`${this.params.spotId}`),null===(i=this.containerElement)||void 0===i||i.setAttribute("data-refreshed",`${this.params.refreshed+1}`)}removeInvocationCode(){this.containerElement&&this.containerElement.parentNode&&this.containerElement.parentNode.removeChild(this.containerElement)}}const st=Object.freeze({debugMode:!0,videoViewedTimeThreshold:2e3,viewedSizeThreshold:.5,viewedTimeThreshold:1e3});class at{static getElementId(t){if(t.id)return t.setAttribute("data-avm-id",t.id),t.id;if(null!==t.getAttribute("data-avm-id"))return t.getAttribute("data-avm-id");let e=Math.random().toString(36).substring(7);return e=`${t.tagName}-${e}`,t.setAttribute("data-avm-id",e),e}static getConfig(){return st}}class ot{constructor(){this.config=at.getConfig()}}class lt{constructor(t,e,n,i){this.timer={elapsedTime:0,startTime:0},this.locked=!1,this.element=t,this.url=e,this.config=at.getConfig(),this.id=at.getElementId(t),this.isVideo=i,this.params=n}sendAdsViewedEvent(t){const e=`${t}?${this.getUrlParams()}`,n=h.createDOMElement("iframe",{src:e,style:"display: none"});document.body.appendChild(n),this.unObserve()}sendEvent(){this.locked?this.unObserve():this.url&&(this.sendAdsViewedEvent(this.url),this.locked=!0)}getUrlParams(){const t=Object.assign({action:"ad_view"},this.params);return Object.keys(t).map(e=>`${e}=${t[e]}`).join("&")}}class dt extends lt{constructor(t,e,n,i,r){super(t,e,n,i),this.isIntersecting=!1,this.onUnobserve=r,this.viewedThreshold=this.isVideo?this.config.videoViewedTimeThreshold:this.config.viewedTimeThreshold}unObserve(){var t;null===(t=this.onUnobserve)||void 0===t||t.call(this,this.id)}onIntersectingChanged(t,e){!this.isIntersecting&&t?this.monitor(this.viewedThreshold-this.timer.elapsedTime):this.isIntersecting&&!t&&(this.timer.elapsedTime+=e-this.timer.startTime),this.timer.startTime=e,this.isIntersecting=t}monitor(t){setTimeout(()=>{this.isIntersecting&&this.sendEvent()},t)}}class ct extends ot{constructor(){super(),this.register=(t,e,n,i=!1)=>{if(!e)return;const r=at.getElementId(t);if(!this.adObservers.has(r)){t.setAttribute("avm-id",r);const s=new dt(t,e,n,i,()=>{this.observer.unobserve(t),this.adObservers.delete(r)});this.adObservers.set(r,s),this.observer.observe(t)}},this.onAdsIntersected=t=>{t.forEach(t=>{const e=t.target.getAttribute("avm-id"),n=e?this.adObservers.get(e):null;null==n||n.onIntersectingChanged(t.isIntersecting,t.time)})},this.observer=new IntersectionObserver(this.onAdsIntersected,{threshold:this.config.viewedSizeThreshold}),this.adObservers=new Map}}var ut;!function(t){t[t.IN_VIEW=0]="IN_VIEW",t[t.ABOVE_VIEW=1]="ABOVE_VIEW",t[t.BELOW_VIEW=2]="BELOW_VIEW",t[t.TOP_BOTTOM_TRUNCATED=3]="TOP_BOTTOM_TRUNCATED",t[t.TOP_TRUNCATED=4]="TOP_TRUNCATED",t[t.BOTTOM_TRUNCATED=5]="BOTTOM_TRUNCATED",t[t.NOT_IN_VIEW=6]="NOT_IN_VIEW"}(ut||(ut={}));class ht extends lt{constructor(t,e,n,i,r){super(t,e,n,i),this.check=()=>{const t=this.determineVisibility(this.element);this.isViewing(t)?(0===this.timer.elapsedTime&&-1===this.timer.startTime&&(this.timer.startTime=Date.now()),this.timer.elapsedTime=Date.now()-this.timer.startTime):(this.timer.elapsedTime=0,this.timer.startTime=-1),this.timer.elapsedTime>this.viewedThreshold&&this.sendEvent()},this.viewedThreshold=this.isVideo?this.config.videoViewedTimeThreshold:this.config.viewedTimeThreshold,this.onUnobserve=r}unObserve(){var t;null===(t=this.onUnobserve)||void 0===t||t.call(this,this.id)}isViewing(t){return[ut.TOP_TRUNCATED,ut.BOTTOM_TRUNCATED].includes(t.state)?t.value<=-this.config.viewedSizeThreshold:t.state===ut.IN_VIEW&&t.value>=this.config.viewedSizeThreshold}determineVisibility(t){const e=t.getBoundingClientRect().top,n=t.getBoundingClientRect().bottom,i=e-n;return e>=0&&n<=window.innerHeight?{state:ut.IN_VIEW,value:1}:e<0&&n<=window.innerHeight?{state:ut.TOP_TRUNCATED,value:n/i}:e>=0&&n>window.innerHeight?{state:ut.BOTTOM_TRUNCATED,value:(window.innerHeight-e)/i}:{state:ut.NOT_IN_VIEW,value:0}}}class pt extends ot{constructor(){super(),this.interval=null,this.monitor=()=>{this.observers.forEach(t=>{t.check()})},this.removeObserver=t=>{this.observers.delete(t),0===this.observers.size&&null!==this.interval&&(window.clearInterval(this.interval),this.interval=null)},this.startMonitoring=()=>{null===this.interval&&(this.interval=window.setInterval(this.monitor,89))},this.observers=new Map}register(t,e,n,i){if(!e)return;const r=at.getElementId(t);this.observers.has(r)||(this.observers.set(r,new ht(t,e,n,i,()=>{this.removeObserver(r)})),this.startMonitoring())}}class gt{static getInstance(){return gt.instance||(gt.instance="IntersectionObserver"in window?new ct:new pt),gt.instance}}var mt=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class bt{static create(t,e,n,i=!0){return mt(this,void 0,void 0,function*(){let r=n;return r||(r=yield bt.getJSONFromContent(t)),bt.createSync(t,e,r,i)})}static createSync(t,e,n,i=!0){const r=(null==n?void 0:n.width)&&(null==n?void 0:n.height)?{height:n.height,width:n.width}:void 0,s=bt.createIframe(t,e,r);return bt.inject(s,t,n,i)}static getSpotId(t){if("SAFARI"===g.getBrowserInfo().name){return`${`${Math.random()}`.substring(2,8)}-${t.params.spotId}`}return`${t.params.spotId}`}static inject(t,e,n,i=!0){const r=n;if(!r)return null;let s=bt.getHTMLFromJSON(r);if(!s)return null;e.request.data=r;const a=g.getBrowserInfo();return"CHROME"===a.name&&a.flags.isAnIOSVariantUsingWebkit&&(s=this.applyIOSChromeFixToHtmlString(s)),t.setAttribute("srcdoc",s),i&&this.attachViewabilityListener(t,r,e),t}static applyIOSChromeFixToHtmlString(t){var e,n;const i=(new DOMParser).parseFromString(t,"text/html");return i.querySelectorAll("a").forEach(t=>{"_blank"===t.getAttribute("target")&&t.getAttribute("href")&&(t.removeAttribute("target"),t.setAttribute("onclick",`event.preventDefault(); window.open('${t.getAttribute("href")}')`))}),null!==(n=null===(e=i.querySelector("html"))||void 0===e?void 0:e.outerHTML)&&void 0!==n?n:t}static attachViewabilityListener(t,e,n){var i,r;const s=Object.assign({},e);s.viewEventUrl=(null===(i=n.specificParams)||void 0===i?void 0:i.domain_rewrite)?`https://${n.specificParams.domain_rewrite}/fla/log`:"https://ads.trafficjunky.net/fla/log",m.viewabilityOn&&gt.getInstance().register(t,s.viewEventUrl,{ad_id:null==s?void 0:s.ad_id,campaign_id:null==s?void 0:s.campaign_id,initial_zone_id:null===(r=n.params)||void 0===r?void 0:r.spotId,member_id:null==s?void 0:s.member_id,zone_id:null==s?void 0:s.zone_id})}}bt.wrap=(t,e,n)=>{const i=bt.createIframe(t,n);return i.setAttribute("srcdoc",e.outerHTML),i},bt.createIframe=(t,e,n)=>{(e=e||Object.assign({},f))["background-color"]=t.specificParams.bg_color;return h.createDOMElement("iframe",{allowtransparency:"true","data-spot-id":bt.getSpotId(t),height:(null==n?void 0:n.height)?n.height:t.params.height,marginheight:"0",marginwidth:"0",scrolling:"no",style:g.createInlineStyle(e,!0),width:(null==n?void 0:n.width)?n.width:t.params.width})},bt.getJSONFromContent=t=>mt(void 0,void 0,void 0,function*(){var e;yield(e=300,new Promise(t=>setTimeout(t,e)));const n=yield Z.makeRequest(t);if(!n)return null;try{return JSON.parse(n)[0]}catch(t){return null}}),bt.getAdContent=t=>mt(void 0,void 0,void 0,function*(){const e=yield Z.makeRequest(t);if(!e)return null;try{return JSON.parse(e)}catch(t){return null}}),bt.getHTMLFromJSON=t=>{let e="";return t.full_html?e=t.full_html:t.html&&(e=t.html),J.fixMobileVideoAd(e)};class vt{constructor(t,e){this.lastPlayPos=0,this.currentPlayPos=0,this.bufferingDetected=!1,this.video="VIDEO"===t.tagName?t:t.firstChild,this.mediaFiles=e,this.setQuality(h.getQuality()),Object.keys(this.mediaFiles).length>1&&setInterval(this.checkBuffering,50)}checkBuffering(){if(!this.video)return;this.currentPlayPos=this.video.currentTime;this.isBuffering(.03)&&(this.bufferingDetected=!0),this.isBuffering(.03,!0)&&(this.bufferingDetected=!1),this.lastPlayPos=this.currentPlayPos}isBuffering(t,e=!1){return!!this.video.paused&&(e?this.bufferingDetected&&this.currentPlayPos>this.lastPlayPos+t:!this.bufferingDetected&&this.currentPlayPos<this.lastPlayPos+t)}setQuality(t){let e=this.mediaFiles[t];if(!e){const n=h.getNearestAvailableQuality(this.mediaFiles,t);if(!n)return;e=this.mediaFiles[n]}e&&(this.video.src=e.url)}}class ft{}var At;ft.skipButton=(t,e)=>g.createInlineStyle({"align-items":"center","background-color":"rgba(0, 0, 0, 0.5)",color:"white",cursor:"default",display:"flex","font-family":"sans-serif","font-size":"14px","font-weight":"normal",height:`${t}`,"justify-content":"center","min-width":`${e}`,padding:"0 10px 0",position:"absolute",right:"0","text-align":"center",top:"0",transition:"opacity .3s","user-select":"none"}),ft.video=g.createInlineStyle({height:"100%",position:"absolute",right:"0"}),ft.expandButton=g.createInlineStyle({"background-color":"rgba(0, 0, 0, 0.3)",bottom:"0",cursor:"pointer",display:"none",height:"20px",padding:"8px",position:"absolute",width:"20px"}),ft.wrapper=g.createInlineStyle({"background-color":"#e91e62",height:"100%"}),ft.adBanner=g.createInlineStyle({float:"right",height:"100%",position:"relative"}),ft.adBannerImg=(t,e,n)=>g.createInlineStyle({"background-image":`url('${t}')`,"background-repeat":"no-repeat","background-size":"contain",height:`${e}px`,position:"absolute",right:"0",top:"0",width:`${n}px`}),ft.adContainer=(t,e)=>{const n={"background-color":"#3b3b3b",height:"240px",left:`${t+2}px`,position:"fixed",width:"426px","z-index":"99"};return window.innerWidth<430&&(n.height="180px",n.width="320px"),"top"===e?n.top="20px":n.bottom="20px",g.createInlineStyle(n)},function(t){t.AdaptiveVideo="adaptive_video",t.Video="video",t.Iframe="iframe",t.Image="image",t.VideoBanner="video_banner",t.Static="static",t.PrerollVideo="preroll_video",t.Native="native"}(At||(At={}));class yt{constructor(t){this.registerEvents=(t,e)=>{this.events.push({callback:e,time:t}),this.events.sort((t,e)=>t.time>e.time?1:t.time<e.time?-1:0)},this.registerFirstQuartile=t=>(this.registerEvents(.25,t),this),this.registerMidpoint=t=>(this.registerEvents(.5,t),this),this.registerThirdQuartile=t=>(this.registerEvents(.75,t),this),this.startListening=()=>{this.video.addEventListener("timeupdate",()=>{if(this.events.length<=0)return;const t=this.video.currentTime/this.video.duration,e=this.events[0];t>e.time&&(e.callback(),this.events.shift())})},this.video=t,this.events=[]}}var wt=null!==l()&&void 0!==l()?l():class{static set(t,e,n){const i=[`${t}=${null!=e?e:""}`];if(null==n?void 0:n.expires){const t=n.expires instanceof Date?n.expires.getTime()-(new Date).getTime():n.expires;i.push("; max-age="+t/1e3)}(null==n?void 0:n.secure)&&i.push("; secure"),document.cookie=i.join("")}static get(t){const e=`${t}=`;if(document.cookie.length>0){let t=document.cookie.indexOf(e);if(-1!==t){t+=e.length;const n=document.cookie.indexOf(";",t);return document.cookie.substring(t,-1===n?document.cookie.length:n)}}return null}};const Ct={cancelAnimationFrame:()=>{},requestAnimationFrame:()=>0};if(window){const t=["ms","moz","webkit","o"],e=window;Ct.requestAnimationFrame=t.map(t=>e[`${t}RequestAnimationFrame`]).reduce((t,e)=>t||e,window.requestAnimationFrame),Ct.cancelAnimationFrame=t.map(t=>e[`${t}CancelAnimationFrame`]||e[`${t}CancelRequestAnimationFrame`]).reduce((t,e)=>t||e,window.cancelAnimationFrame)}if(!Ct.requestAnimationFrame){let t=0;Ct.requestAnimationFrame=e=>{const n=(new Date).getTime(),i=Math.max(0,16-(n-t)),r=window.setTimeout(()=>{e(n+i)},i);return t=n+i,r},Ct.cancelAnimationFrame||(Ct.cancelAnimationFrame=t=>clearTimeout(t))}const xt=Ct.requestAnimationFrame;Ct.cancelAnimationFrame;class St{getValue(t,e,n=null){let i=null;const r=t.querySelectorAll(e);for(let t=0;t<r.length;t++){const e=r[t],s=this.strip(e.textContent);if(s&&(!n||n&&s!==n)){i=s;break}}return i}strip(t){return t?t.replace("<![CDATA[","").replace("]]>","").trim():null}}var It;!function(t){t.Start="start",t.FirstQuartile="firstQuartile",t.Midpoint="midpoint",t.ThirdQuartile="thirdQuartile",t.Complete="complete",t.Mute="mute",t.Unmute="unmute",t.Pause="pause",t.Resume="resume",t.Fullscreen="fullscreen",t.Skip="skip",t.Click="click",t.Impression="impression"}(It||(It={}));class kt extends St{get(t){const e={},n=t.querySelectorAll("TrackingEvents Tracking");for(let t=0;t<n.length;t++){const i=n[t],r=i.getAttribute("event"),s=i,a=this.strip(s.textContent);this.addEventUrl(e,r,a)}return 0!==Object.keys(e).length?e:null}addEventUrl(t,e,n){e&&n&&It[e.charAt(0).toUpperCase()+e.slice(1)]&&(t[e]||(t[e]=[]),t[e].push(n))}}class Et extends St{get(t){if(!(t=t.querySelectorAll("VideoClicks")[0]))return null;const e=this.getValue(t,"VideoClicks ClickThrough");if(!e)return null;const n=[],i=t.querySelectorAll("VideoClicks ClickTracking");for(let t=0;t<i.length;t++){const e=i[t],r=this.strip(e.textContent);r&&n.push(r)}return{clickThrough:e,clickTracking:n}}}class jt extends St{get(t){const e={},n=t.querySelectorAll("MediaFiles MediaFile");for(let t=0;t<n.length;t++){const i=n[t],r=i,a=this.strip(r.textContent),o=Number(i.getAttribute("height")),l=i.getAttribute("type"),d=l&&s.videoFormats.includes(l);a&&d&&(e[o]={bitrate:Number(i.getAttribute("bitrate")),delivery:i.getAttribute("delivery"),height:o,type:l,url:a,width:Number(i.getAttribute("width"))})}return e}}class Lt extends St{constructor(){super(...arguments),this.getWithVideoClicksEvents=t=>{t.events||(t.events={});let e=t.events[It.Click]||[];return e=[...e,...t.videoClicks.clickTracking],t.events[It.Click]=e,t}}get(t){const e=[],n=t.querySelectorAll("Creatives Creative");for(let t=0;t<n.length;t++){let i=n[t];const r=i.getAttribute("AdID");if(i=i.querySelectorAll("Linear")[0],!i)continue;const s=this.getCreative(i,r);s&&e.push(this.getWithVideoClicksEvents(s))}return e.length?e:null}getCompanion(t){if(!t.querySelector("Creatives Creative CompanionAds Companion"))return null;const e=this.getValue(t,"StaticResource");return e?{clickThrough:this.getValue(t,"CompanionClickThrough"),clickTracking:this.getValue(t,"CompanionClickTracking"),staticResource:e}:null}getCreative(t,e){const n=(new Et).get(t),i=(new jt).get(t);return n&&Object.keys(i).length?{duration:this.getValue(t,"Duration"),events:(new kt).get(t),id:e,mediaFiles:i,videoClicks:n}:null}}class Tt extends St{get(t){const e=new Lt,n=e.get(t),i=e.getCompanion(t);return n?{adSystem:this.getValue(t,"AdSystem"),companion:i,creatives:n}:null}}var Bt=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class Mt{}Mt.getVAST=(t,e)=>null==e?Promise.resolve(null):"adtool"===t.provider&&t.url?Mt.getAdtoolVAST(t.url):Promise.resolve(Mt.getTJVAST(null==e?void 0:e.full_html)),Mt.getTJVAST=t=>{if(!t)return null;const e=(new DOMParser).parseFromString(t,"application/xml").querySelectorAll("InLine")[0];return e?(new Tt).get(e):null},Mt.getAdtoolVAST=t=>Bt(void 0,void 0,void 0,function*(){if(!t)return null;const e=yield Z.makeXMLRequest(t);if(null==e)return null;const n=(new DOMParser).parseFromString(e,"application/xml").querySelectorAll("InLine")[0];return n?(new Tt).get(n):null}),Mt.getOptions=(t,e)=>{const n=g.calculateHeightRatio,i=g.calculateWidthRatio;return Object.assign(Object.assign({},e),{canSkip:!0,imageDivisionAt:i(.75),initSkipAd:!1,initialAdPosition:t,playAdVideo:!1,reachedBanner:!1,skipAd:!0,skipButtonHeight:"36px",skipButtonWidth:"28%",smallBannerHeight:n(99),smallBannerWidth:i(.25)})},Mt.dispatchEvents=t=>{t&&t.forEach(t=>g.sendEvent(t))},Mt.hideVolumeControl=t=>{const e=document.createElement("STYLE");e.innerHTML=`\n\t\t\tvideo#${t}::-webkit-media-controls-volume-slider {\n\t\t\t\tdisplay:none;\n\t\t\t}\n\t\t\t\n\t\t\tvideo#${t}::-webkit-media-controls-mute-button {\n\t\t\t\tdisplay:none;\n\t\t\t}\n\t\t`,document.head.appendChild(e)},Mt.triggerFullScreen=t=>{(t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen||t.msRequestFullscreen).call(t)},Mt.getNewPosition=(t,e)=>t>e?t-10<e?t-(e+t):t-10:t+10>e?t+(e-t):t+10,Mt.getExpandButton=()=>{const t=h.createDOMElement("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDQ2OS4zMzMgNDY5LjMzMyIgZmlsbD0iI0ZGRiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDY5LjMzMyA0NjkuMzMzOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xNjAsMEgxMC42NjdDNC43NzEsMCwwLDQuNzcxLDAsMTAuNjY3VjE2MGMwLDUuODk2LDQuNzcxLDEwLjY2NywxMC42NjcsMTAuNjY3SDMyYzUuODk2LDAsMTAuNjY3LTQuNzcxLDEwLjY2Ny0xMC42NjcKCQkJCVY0Mi42NjdIMTYwYzUuODk2LDAsMTAuNjY3LTQuNzcxLDEwLjY2Ny0xMC42NjdWMTAuNjY3QzE3MC42NjcsNC43NzEsMTY1Ljg5NiwwLDE2MCwweiIvPgoJCQk8cGF0aCBmaWxsPSIjRkZGIiBkPSJNNDU4LjY2NywwSDMwOS4zMzNjLTUuODk2LDAtMTAuNjY3LDQuNzcxLTEwLjY2NywxMC42NjdWMzJjMCw1Ljg5Niw0Ljc3MSwxMC42NjcsMTAuNjY3LDEwLjY2N2gxMTcuMzMzVjE2MAoJCQkJYzAsNS44OTYsNC43NzEsMTAuNjY3LDEwLjY2NywxMC42NjdoMjEuMzMzYzUuODk2LDAsMTAuNjY3LTQuNzcxLDEwLjY2Ny0xMC42NjdWMTAuNjY3QzQ2OS4zMzMsNC43NzEsNDY0LjU2MywwLDQ1OC42NjcsMHoiLz4KCQkJPHBhdGggZmlsbD0iI0ZGRiIgZD0iTTQ1OC42NjcsMjk4LjY2N2gtMjEuMzMzYy01Ljg5NiwwLTEwLjY2Nyw0Ljc3MS0xMC42NjcsMTAuNjY3djExNy4zMzNIMzA5LjMzM2MtNS44OTYsMC0xMC42NjcsNC43NzEtMTAuNjY3LDEwLjY2NwoJCQkJdjIxLjMzM2MwLDUuODk2LDQuNzcxLDEwLjY2NywxMC42NjcsMTAuNjY3aDE0OS4zMzNjNS44OTYsMCwxMC42NjctNC43NzEsMTAuNjY3LTEwLjY2N1YzMDkuMzMzCgkJCQlDNDY5LjMzMywzMDMuNDM3LDQ2NC41NjMsMjk4LjY2Nyw0NTguNjY3LDI5OC42Njd6Ii8+CgkJCTxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xNjAsNDI2LjY2N0g0Mi42NjdWMzA5LjMzM2MwLTUuODk2LTQuNzcxLTEwLjY2Ny0xMC42NjctMTAuNjY3SDEwLjY2N0M0Ljc3MSwyOTguNjY3LDAsMzAzLjQzNywwLDMwOS4zMzN2MTQ5LjMzMwoJCQkJYzAsNS44OTYsNC43NzEsMTAuNjY3LDEwLjY2NywxMC42NjdIMTYwYzUuODk2LDAsMTAuNjY3LTQuNzcxLDEwLjY2Ny0xMC42Njd2LTIxLjMzMwoJCQkJQzE3MC42NjcsNDMxLjQzOCwxNjUuODk2LDQyNi42NjcsMTYwLDQyNi42Njd6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=",style:g.createInlineStyle({fill:"#FFFFFF"}),width:"100%"}),e=h.createDOMElement("div",{style:ft.expandButton});return e.appendChild(t),e};var Nt,Ot=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class Pt{}Nt=Pt,Pt.getVAST=(t,e)=>null==e?Promise.resolve(null):"adtool"===t.provider&&t.url&&Nt.isValidAdtool(t.url)?Nt.getAdtoolVAST(t.url):Promise.resolve(Nt.getTJVAST(null==e?void 0:e.full_html)),Pt.isValidAdtool=t=>{const e=t.split("/")[2];return void 0!==e&&null!==e.match(/adtng.com/i)},Pt.getTJVAST=t=>{if(!t)return null;const e=(new DOMParser).parseFromString(t,"application/xml").querySelectorAll("InLine")[0];return e?(new Tt).get(e):null},Pt.getAdtoolVAST=t=>Ot(void 0,void 0,void 0,function*(){if(!t)return null;const e=yield Z.makeXMLRequest(t);if(null==e)return null;const n=(new DOMParser).parseFromString(e,"application/xml").querySelectorAll("InLine")[0];return n?(new Tt).get(n):null});class Dt{}Dt.handleClose=()=>`\n\t   const bannerContainer = document.getElementById('${m.inBanLabels.containerId}');\n      const reportContainer = document.getElementById('tj-inban-report');\n      const buttonsContainer = document.getElementsByClassName('tj-inban-actions-container');\n      reportContainer.className = '';\n      bannerContainer.className = bannerContainer.className.replace(" extended", '');\n      Array.prototype.forEach.call(buttonsContainer, (elem) => {\n          elem.className = 'tj-inban-actions-container';\n      })\n\t`,Dt.handleOnReportClick=()=>`\n    const buttonsContainerL1 = document.getElementById('${m.inBanLabels.buttonsContainerL1Id}');\n    const buttonsContainerL2 = document.getElementById('${m.inBanLabels.buttonsContainerL2Id}');\n    buttonsContainerL1.className = 'tj-inban-actions-container';\n    buttonsContainerL2.className = 'tj-inban-actions-container visible';\n  `,Dt.handleReportCategorySelect=()=>`\n      const buttonsContainerL1 = document.getElementById('${m.inBanLabels.buttonsContainerL1Id}');\n      const buttonsContainerL2 = document.getElementById('${m.inBanLabels.buttonsContainerL2Id}');\n      const messageContainer = document.getElementById('${m.inBanLabels.successMessageContainerId}');\n      buttonsContainerL1.className = 'tj-inban-actions-container';\n      buttonsContainerL2.className = 'tj-inban-actions-container';\n      messageContainer.className = 'tj-inban-actions-container visible';\n    `,Dt.getSuccessMessageContainer=(t,e)=>{const n=h.createDOMElement("div",{class:"tj-inban-actions-container",id:m.inBanLabels.successMessageContainerId,style:g.createInlineStyle(t?Object.assign(Object.assign({},H),$):H)});return n.innerText=e.successMessage,n},Dt.setReport=t=>{const e=wt.get(m.inBanLabels.reportingCookieName),n={expires:m.inBanLabels.reportsCookieExpirationTime},i=e?""+(+e+1):"1";Number(i)>=m.inBanLabels.reportsNumberThreshold&&Dt.disableTjReport(t),wt.set(m.inBanLabels.reportingCookieName,i,n)},Dt.disableTjReport=t=>{const e=null==t?void 0:t.document.getElementById(m.inBanLabels.actionButtonId);null==e||e.removeAttribute("onclick")},Dt.handleActionButtonClick=()=>`\n      const currentContainer = document.getElementById('${m.inBanLabels.containerId}');\n      const reportContainer = document.getElementById('tj-inban-report');\n      const buttonsContainerL1 = document.getElementById('${m.inBanLabels.buttonsContainerL1Id}');\n      currentContainer.className = currentContainer.className + ' extended';\n      reportContainer.className = 'visible';\n      buttonsContainerL1.className = buttonsContainerL1.className + ' visible';\n    `,Dt.createCloseButton=()=>{const t=h.createDOMElement("div",{style:g.createInlineStyle(P)});return t.className="tj-inban-close",t.setAttribute("onclick",`${Dt.handleClose()}`),t},Dt.getBannerOverflow=(t,e)=>{const n=!!t.mobile,i=!!t.horizontal,r=n?U:z,s=i?Object.assign(Object.assign({},R),F):R,a=h.createDOMElement("div",{class:""+(i?"":"grow"),style:g.createInlineStyle(_)}),o=h.createDOMElement("div",{class:"tj-inban-actions-container",id:m.inBanLabels.buttonsContainerL1Id,style:g.createInlineStyle(s)}),l=h.createDOMElement("div",{class:"tj-inban-actions-container",id:m.inBanLabels.buttonsContainerL2Id,style:g.createInlineStyle(s)}),d=Dt.getSuccessMessageContainer(i,e);return m.inBanLabels.buttonsList.forEach(s=>{var a,d;let c;s.childButtons?(c=h.createDOMElement("div",{style:g.createInlineStyle(r)}),c.setAttribute("onclick",Dt.handleOnReportClick()),s.childButtons.forEach(s=>{const a=n?Object.assign(Object.assign({},r),V):r,o="tj-inban-button tj-inban-button-report "+(n?"tj-inban-button-mob":""),d=h.createDOMElement("a",{class:`${o} ${i&&!n?"tj-inban-button-horizontal":""}`,href:Dt.getReportUrl(t,s.id),style:g.createInlineStyle(a),target:"_blank"});d.innerText=e.buttons[s.id],d.setAttribute("onclick",Dt.handleReportCategorySelect()),l.appendChild(d)})):(c=h.createDOMElement("a",{href:null===(d=null===(a=m.inBanLabels.buttonsList)||void 0===a?void 0:a.find(t=>t.id===s.id))||void 0===d?void 0:d.link,style:g.createInlineStyle(r),target:"_blank"}),c.setAttribute("onclick",Dt.handleReportCategorySelect()));const u="tj-inban-button "+(n?"tj-inban-button-mob":"");c.className=`${u} ${i&&!n?"tj-inban-button-horizontal":""}`,c.innerText=e.buttons[s.id],o.appendChild(c)}),a.appendChild(o),a.appendChild(l),a.appendChild(d),a},Dt.handleReportingThreshold=t=>{t.addEventListener("load",function(){const t=this.contentWindow,e=null==t?void 0:t.document.getElementById(m.inBanLabels.successMessageContainerId),n=wt.get(m.inBanLabels.reportingCookieName);Number(n)>=m.inBanLabels.reportsNumberThreshold&&t&&Dt.disableTjReport(t);const i=new MutationObserver(()=>{(null==e?void 0:e.className.split(" ").includes("visible"))&&t&&(Dt.setReport(t),Dt.disableTjReport(t))});e&&i.observe(e,{attributes:!0,childList:!0})})},Dt.getReportUrl=(t,e)=>{var n,i;const r=null==t?void 0:t.site,s=`?ref=10047411428&ref_time=1697567746&category=${e}`,a=`${m.inBanLabels.defaultReportUrl}${s}`;return"c_inf"===e&&null!==(i=null===(n=m.inBanLabels.copyrightInfringementUrls)||void 0===n?void 0:n[r])&&void 0!==i?i:a},Dt.getReportContainer=t=>{const e=t.mobile,n=!!t.horizontal,i=g.getNavigatorLang(),r=m.inBanLabels.locales[i],s=h.createDOMElement("style");s.innerHTML=Q;const a=e?Object.assign(Object.assign({},W),Y):W,o=h.createDOMElement("div",{id:"tj-inban-report",style:g.createInlineStyle(D)}),l=Dt.createCloseButton(),d=h.createDOMElement("div",{style:g.createInlineStyle(!e&&n?q:a)});return o.appendChild(s),o.appendChild(d),o.appendChild(l),o.appendChild(Dt.getBannerOverflow(t,r)),o};class _t{}_t.shouldShowLabel=t=>{var e,n,i,r,s,a,o,l;if(!1===t.params.inbanlabel)return!1;if(!0===t.params.inbanlabel||!m.inBanLabels.filter||!(null===(e=m.inBanLabels.filter)||void 0===e?void 0:e.websites)||!(null===(n=t.channelParams)||void 0===n?void 0:n.site))return!0;const d=null===(i=t.channelParams)||void 0===i?void 0:i.site;if(!(null===(r=m.inBanLabels.filter)||void 0===r?void 0:r.websites.find(t=>t===d)))return!0;let c=!1;return(null===(s=m.inBanLabels.filter)||void 0===s?void 0:s.availableWebsites)&&(c=Boolean(null===(a=m.inBanLabels.filter)||void 0===a?void 0:a.availableWebsites.find(t=>t===d))),(null===(o=m.inBanLabels.filter)||void 0===o?void 0:o.zoneIds)&&(c=c||Boolean(null===(l=m.inBanLabels.filter)||void 0===l?void 0:l.zoneIds.find(e=>e===t.params.spotId))),c},_t.getLabel=t=>{const e=h.createDOMElement("div",{style:g.createInlineStyle(O)});e.innerText=t.adLabel;const n=h.createDOMElement("div",{style:g.createInlineStyle(N)});return n.appendChild(e),n.className="tj-inban-icon",n},_t.getInBanLabelsContainer=(t,e)=>{var n,i;const r=g.getNavigatorLang(),s=m.inBanLabels.locales[r],a=h.createDOMElement("div",{style:g.createInlineStyle(O)});a.innerText="Ads by TrafficJunky",a.className="tj-inban-tooltip";const o=_t.getLabel(s),l=h.createDOMElement("style");l.innerHTML=Q;const d=(null===(i=null===(n=null==t?void 0:t.request)||void 0===n?void 0:n.data)||void 0===i?void 0:i.ad_info_url)||_t.getTargetUrl(t),c=h.createDOMElement("a",{href:d,target:"_blank"});c.appendChild(o);const u=h.createDOMElement("div",{style:g.createInlineStyle(e?Object.assign(Object.assign({},M),e):M)});return u.appendChild(c),u.appendChild(l),u},_t.getInBanLabelsV2Container=(t,e,n)=>{const i=g.getNavigatorLang(),r=m.inBanLabels.locales[i],s=_t.getLabel(r),a=h.createDOMElement("div",{class:"tj-inban-container",id:m.inBanLabels.containerId,style:g.createInlineStyle(n?Object.assign(Object.assign({},M),n):M)}),o=Dt.getReportContainer(null==t?void 0:t.params),l=h.createDOMElement("div",{id:m.inBanLabels.actionButtonId});return l.setAttribute("onclick",Dt.handleActionButtonClick()),l.appendChild(s),a.appendChild(l),a.appendChild(o),Dt.handleReportingThreshold(e),a},_t.getTargetUrl=t=>{var e,n,i;const r=null===(e=t.channelParams)||void 0===e?void 0:e.site;return r&&null!==(i=null===(n=m.inBanLabels.targetUrls)||void 0===n?void 0:n[r])&&void 0!==i?i:m.inBanLabels.defaultTargetUrl},_t.wrapWithInBanLabel=(t,e,n)=>{var i;if(!t||!_t.shouldShowLabel(e))return t;let r;return r=e.params.inbanlabelV2?_t.getInBanLabelsV2Container(e,t,n):_t.getInBanLabelsContainer(e,n),t.setAttribute("srcdoc",`${null===(i=t.getAttribute("srcdoc"))||void 0===i?void 0:i.split("</body>")[0]}${r.outerHTML}</body></html>`),t};var Rt=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class Ft extends rt{constructor(t,e,n){super(t,e,n),this.screenWidth=document.documentElement.clientWidth,this.skipButtonCountingStarted=!1,this.createAd=()=>Rt(this,void 0,void 0,function*(){try{if(wt.get(m.videoDriveBy.cookieName))return null;const t=yield bt.getJSONFromContent(this);if(!t||t.media_type!==At.PrerollVideo)return null;const e=yield Pt.getVAST(this.vastProvider,t);return e?(this.vast=e,this.initAdParameters(t),setTimeout(()=>this.initBindings(),1e3),this.buildAd()):null}catch(t){return null}}),this.create=()=>Rt(this,void 0,void 0,function*(){if(!this.hasShown())return new Promise(t=>{const e=()=>{window.removeEventListener("scroll",e),this.createAd().then(e=>{t(e)})};window.addEventListener("scroll",e)})}),this.closeAd=t=>{var e;this.slide(this.elements.adContainer,!1),this.elements.videoEl.pause(),Mt.dispatchEvents(null===(e=this.vast.creatives[0].events)||void 0===e?void 0:e[t?"skip":"complete"]),this.setCookie()},this.setCookie=()=>{wt.set(m.videoDriveBy.cookieName,`${(new Date).getTime()}`,Ft.getCookieOptions())},this.hasShown=()=>{this.currentExpirationTime=this.specificAttrs.cookie_expiry||m.videoDriveBy.cookieExpiry;const t=wt.get(m.videoDriveBy.cookieName);if(void 0===t||""===t||null===t)return!1;const e=(new Date).getTime()-Number(t);return!(isNaN(e)||e>Number(this.currentExpirationTime))},this.initAdParameters=t=>{this.options=Mt.getOptions(this.screenWidth,m.videoDriveBy),this.overrideAttributes(),this.request.data=Object.assign(Object.assign({},this.request.data),{ad_id:t.ad_id,ad_info_url:t.ad_info_url,campaign_id:t.campaign_id,media_type:t.media_type,member_id:t.member_id})},this.initBindings=()=>{const{videoEl:t,expandButton:e}=this.elements;window.addEventListener("resize",this.handleResize),this.addVideoEvents(t),e.addEventListener("click",()=>Mt.triggerFullScreen(this.elements.videoEl)),this.handleScroll(),window.addEventListener("scroll",()=>this.handleScroll()),window.addEventListener("touchemove",()=>this.handleScroll())},this.addVideoEvents=t=>{new yt(t).registerFirstQuartile(()=>{var t;Mt.dispatchEvents(null===(t=this.vast.creatives[0].events)||void 0===t?void 0:t.firstQuartile)}).registerMidpoint(()=>{var t;Mt.dispatchEvents(null===(t=this.vast.creatives[0].events)||void 0===t?void 0:t.midpoint)}).registerThirdQuartile(()=>{var t;Mt.dispatchEvents(null===(t=this.vast.creatives[0].events)||void 0===t?void 0:t.thirdQuartile)}).startListening(),t.addEventListener("ended",()=>this.closeAd(!1))},this.handleResize=()=>{this.justResized=!0;let t=document.documentElement.clientWidth;this.isVisible&&(t-=this.elements.adContainer.clientWidth),this.elements.adContainer.style.left=`${t}px`,setTimeout(()=>{this.justResized=!1},200)},this.slide=(t,e)=>{this.options.reachedBanner=!0;let n=t.offsetLeft;window.requestAnimationFrame=xt;const i=e?document.documentElement.clientWidth-t.clientWidth:document.documentElement.clientWidth+t.clientWidth,r=()=>{const s=t.offsetLeft;if(e?s<=i:s>=i)this.isVisible=e,t.style.left=`${i}px`,this.options.playAdVideo||(this.options.playAdVideo=!0,this.setCookie());else{const i=e?t.offsetLeft-t.clientWidth:t.offsetLeft+t.clientWidth;n=Mt.getNewPosition(n,i),t.style.left=`${n}px`,xt(r)}};xt(r),this.startSkipButtonCounting()},this.handleScroll=()=>{if(this.justResized)return;g.getWindowYPosition()>5&&!this.options.reachedBanner&&this.slide(this.elements.adContainer,!0)},this.getSkipButtonContainer=t=>{const{skipButtonHeight:e,skipButtonWidth:n}=this.options,i=h.createDOMElement("div",{style:ft.skipButton(e,n)}),r=h.createDOMElement("span",{style:"display: inline-block;vertical-align: middle;height: 100%;"});return i.appendChild(r),i.appendChild(t),i},this.getSkipButton=()=>h.createDOMElement("span"),this.createInBanLabelButton=t=>{var e,n;const i=g.getNavigatorLang(),r=m.inBanLabels.locales[i],s=h.createDOMElement("style");s.innerHTML=Q;const a=(null===(n=null===(e=null==this?void 0:this.request)||void 0===e?void 0:e.data)||void 0===n?void 0:n.ad_info_url)||_t.getTargetUrl(this),o=_t.getLabel(r);o.style.top="auto",o.style.bottom="0";const l=h.createDOMElement("a",{href:a,target:"_blank"});return l.appendChild(o),t.appendChild(l),t.appendChild(s),t},this.startSkipButtonCounting=()=>{if(this.elements.skipButton&&!this.skipButtonCountingStarted&&this.options.canSkip&&this.options.skipDelay>0){let t=Math.round(this.options.skipDelay/1e3);const e=setInterval(()=>{this.elements.skipButton?(this.elements.skipButton.innerHTML=` Skip Ad in ${--t}s`,t<1&&(this.elements.skipButton.innerHTML=" Skip Ad",this.elements.skipButton.addEventListener("click",()=>this.closeAd(!0)),this.elements.skipButton.style.cursor="pointer",clearInterval(e))):clearInterval(e)},1e3)}},this.getVideoContainer=()=>{const t="vdb-player",e=h.createDOMElement("a",{href:this.vast.creatives[0].videoClicks.clickThrough,style:ft.wrapper,target:"_blank"});e.onclick=()=>{var t;return Mt.dispatchEvents(null===(t=this.vast.creatives[0].events)||void 0===t?void 0:t.click)};const n=h.createDOMElement("video",Object.assign({style:ft.video},{autoplay:!0,disableRemotePlayback:!0,muted:!0,playsInline:!0,"webkit-playsinline":""}));n.id=t,n.onplaying=()=>{var t;return Mt.dispatchEvents(null===(t=this.vast.creatives[0].events)||void 0===t?void 0:t.start)},n.onfullscreenchange=()=>{var t;document.fullscreenElement&&Mt.dispatchEvents(null===(t=this.vast.creatives[0].events)||void 0===t?void 0:t.fullscreen)},Mt.hideVolumeControl(t);const i=this.vast.creatives[0].mediaFiles;for(const t in i){const e=i[t];n.appendChild(h.createDOMElement("source",{src:e.url,type:e.type}))}return new vt(n,this.vast.creatives[0].mediaFiles),n.load(),n.muted=!0,e.appendChild(n),e},this.getAdBanner=()=>{var t,e;const n=h.createDOMElement("div",{style:ft.adBanner}),{smallBannerHeight:i,smallBannerWidth:r}=this.options,s=null===(t=this.vast.companion)||void 0===t?void 0:t.staticResource;if(!s)return null;const a=h.createDOMElement("img",{style:ft.adBannerImg(s,i,r)}),o=h.createDOMElement("a",{href:null===(e=this.vast.companion)||void 0===e?void 0:e.clickThrough,target:"_blank"});return o.appendChild(a),n.appendChild(o),n},this.buildAd=()=>{const t=h.createDOMElement("div",{style:ft.adContainer(++this.screenWidth,this.options.position)}),e=this.getVideoContainer(),n=e.firstChild;t.appendChild(e);const i=this.getAdBanner();i&&t.appendChild(i);const r=g.createInlineStyle({height:`${this.params.height}`,width:`${this.params.width}`}),s=h.createDOMElement("div",{style:r}),a=this.createInBanLabelButton(s);let o;if(t.appendChild(a),this.options.canSkip){o=this.getSkipButton();const e=this.getSkipButtonContainer(o);t.appendChild(e)}const l=Mt.getExpandButton();return t.appendChild(l),this.elements={adContainer:t,expandButton:l,inBanLabel:a,skipButton:o,videoEl:n},t},this.specificAttrs=e,this.vastProvider={provider:"adtool"===this.specificAttrs.vast_provider?"adtool":"tj",url:this.specificAttrs.vast_url}}overrideAttributes(){this.options.canSkip="false"!==this.specificAttrs.can_skip,this.specificAttrs.position&&(this.options.position=this.specificAttrs.position);const t=Number(this.specificAttrs.skip_delay);isNaN(t)||(this.options.skipDelay=t)}static getCookieOptions(){return{secure:!0}}}class Ht{constructor(t,e){this.create=(t,e)=>{const n=bt.createSync(this.baseAd,t,this.json);return this.youpornFixFrame(n),!1!==e?_t.wrapWithInBanLabel(n,this.baseAd):n},this.baseAd=t,this.json=e}youpornFixFrame(t){t&&"youporn"===this.baseAd.channelParams.site&&"auto"===this.baseAd.params.height&&t.addEventListener("load",()=>{var e,n;const i=null===(e=t.contentWindow)||void 0===e?void 0:e.document.body.scrollWidth,r=null===(n=t.contentWindow)||void 0===n?void 0:n.document.body.scrollHeight;i&&r&&(t.style.aspectRatio=`${i}/${r}`,t.style.maxHeight="none")})}}class $t extends Ht{constructor(){super(...arguments),this.create=()=>{try{const t=this.stringToVAST();if(!t)return null;this.vast=t,this.baseAd.request.data=this.json;const e=this.createVideo(),n=this.createOverlay(),i=this.createWrapper(e,n);return new vt(e,this.vast.creatives[0].mediaFiles),_t.wrapWithInBanLabel(bt.wrap(this.baseAd,i),this.baseAd)}catch(t){return null}},this.getEventScript=(t,e)=>{if(!e)return null;const n=h.createDOMElement("script");return n.innerHTML=`document.getElementById('${t}').onclick = function() { \n\t\t\t\t\t\t\t\tvar xhr = new XMLHttpRequest(); \n\t\t\t\t\t\t\t\txhr.open('GET', '${e}'); \n\t\t\t\t\t\t\t\txhr.send(); \n\t\t\t\t\t\t    };`,n}}createWrapper(t,e){const{width:n,height:i}=this.baseAd.params,r=g.createInlineStyle(Object.assign(Object.assign({},T),{height:i,width:n})),s=h.createDOMElement("div",{style:r});return s.appendChild(t),e&&s.appendChild(e),s}createOverlay(){if(!this.vast.companion)return null;const{staticResource:t,clickThrough:e,clickTracking:n}=this.vast.companion,i=h.createDOMElement("img",{src:t,style:g.createInlineStyle(B)});if(!e)return i;const r=h.createDOMElement("a",{href:e,id:"overlay",target:"_blank"}),s=this.getEventScript("overlay",n);return r.appendChild(i),s&&r.appendChild(s),r}createVideo(){const t=h.createDOMElement("video",{autoplay:!0,disableRemotePlayback:!0,loop:!0,muted:"muted",playsinline:"",preload:"auto",style:"width: 100%","webkit-playsinline":""});t.muted=!0,t.volume=0;const{clickThrough:e,clickTracking:n}=this.vast.creatives[0].videoClicks,i=h.createDOMElement("a",{href:e,id:"video",target:"_blank"}),r=this.getEventScript("video",n[0]);return i.appendChild(t),r&&i.appendChild(r),i}stringToVAST(){const t=(new DOMParser).parseFromString(this.json.full_html,"application/xml").querySelectorAll("InLine")[0];return t?(new Tt).get(t):null}}class zt{constructor(){this.create=(t,e)=>e.media_type===At.VideoBanner?new $t(t,e):new Ht(t,e)}}var Ut=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class Vt extends rt{constructor(){super(...arguments),this.getIframeAd=(t,e)=>Ut(this,void 0,void 0,function*(){const n=t||(yield bt.getJSONFromContent(this));if(!n)return null;const i=(new zt).create(this,n);return i?i.create(e):null})}create(){return Ut(this,void 0,void 0,function*(){return yield this.createWithDefaultIfFail(this.getIframeAd)})}}var Wt=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class qt extends Vt{constructor(){super(...arguments),this.style=Object.assign(Object.assign({},A),{"min-height":`${this.params.height}`}),this.create=()=>Wt(this,void 0,void 0,function*(){const t=yield bt.getJSONFromContent(this);if((null==t?void 0:t.media_type)===At.VideoBanner)return this.createWithDefaultIfFail(()=>this.getIframeAd(t));const e=yield this.createWithDefaultIfFail(()=>Wt(this,void 0,void 0,function*(){const e=yield bt.create(this,this.style,t);return _t.wrapWithInBanLabel(e,this)}),this.style);return e?this.createResponsiveWrapper(e):null}),this.createResponsiveWrapper=t=>{const e=Number(this.params.width.slice(0,-2)),n=Number(this.params.height.slice(0,-2)),i=Math.floor(n/e*100),r=g.createInlineStyle(Object.assign(Object.assign({},y),{"padding-top":`${i}%`}),!0),s=h.createDOMElement("div",{style:r});return s.appendChild(t),s}}}var Yt=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class Qt extends rt{constructor(){super(...arguments),this.createBottomAdElement=()=>Yt(this,void 0,void 0,function*(){const t=yield this.createWithDefaultIfFail(()=>bt.create(this,void 0,void 0,!1));if(!t)return null;const e=this.createContainer(),n=g.createInlineStyle({height:`${this.params.height}`,width:`${this.params.width}`}),i=h.createDOMElement("div",{style:n});i.appendChild(this.createCloseButton(e)),i.appendChild(t);const r=this.createInBanLabelButton(i);return e.appendChild(r),e}),this.createCloseButton=t=>{const e=h.createDOMElement("div"),n=this.checkIsEssentialsCookiesSelectedEU();return e.setAttribute("style",g.createInlineStyle(L)),e.onclick=()=>{document.body.removeChild(t),X.close(n)},e},this.checkIsEssentialsCookiesSelectedEU=()=>{var t;return"1"===new URLSearchParams(null===(t=null==this?void 0:this.specificParams)||void 0===t?void 0:t.custom_param).get("noc")},this.createContainer=()=>{const t=m.bottomAdName,e=h.createDOMElement("div",{id:t});return e.setAttribute("style",g.createInlineStyle(j)),e},this.createInBanLabelButton=t=>{var e,n;const i=g.getNavigatorLang(),r=m.inBanLabels.locales[i],s=h.createDOMElement("style");s.innerHTML=Q;const a=(null===(n=null===(e=null==this?void 0:this.request)||void 0===e?void 0:e.data)||void 0===n?void 0:n.ad_info_url)||_t.getTargetUrl(this),o=_t.getLabel(r),l=h.createDOMElement("a",{href:a,target:"_blank"});return l.appendChild(o),t.appendChild(l),t.appendChild(s),t}}create(){return Yt(this,void 0,void 0,function*(){return window.tjBottomAdLoaded=!0,yield this.createBottomAdElement()})}insertIntoDOM(t){document.body.appendChild(t)}checkIfCreatable(){return!X.wasClosed()&&!window.tjBottomAdLoaded&&super.checkIfCreatable()}revert(){delete window.tjBottomAdLoaded}}var Jt=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class Xt extends Vt{constructor(){super(...arguments),this.create=()=>Jt(this,void 0,void 0,function*(){const t=yield bt.getJSONFromContent(this);return t?(this.jsonContent=t,yield this.createWithDefaultIfFail(this.createParallaxAd)):null}),this.createParallaxAd=()=>Jt(this,void 0,void 0,function*(){const t=yield this.createContainer(),e=g.createInlineStyle({height:`${this.params.height}`,width:`${this.params.width}`}),n=h.createDOMElement("div",{style:e});return t.appendChild(n),t}),this.createContainer=()=>Jt(this,void 0,void 0,function*(){var t,e;const n=h.createDOMElement("div"),i=h.createDOMElement("span",{style:g.createInlineStyle(C)});i.innerText="Ad by TrafficJunky";const r=h.createDOMElement("a",{href:"https://trafficjunky.com",style:"display: block",target:"_blank"});r.appendChild(i),n.setAttribute("style",g.createInlineStyle(Object.assign(Object.assign({},w),{height:null!==(t=this.params.windowHeight)&&void 0!==t?t:"300px",width:null!==(e=this.params.windowWidth)&&void 0!==e?e:"300px"}))),n.insertAdjacentElement("afterbegin",r);const s=yield this.createContent();return n.insertAdjacentElement("beforeend",s),n}),this.createContent=()=>Jt(this,void 0,void 0,function*(){const t=g.getBrowserInfo(),e=h.createDOMElement("div",{style:g.createInlineStyle(E(t))}),n=h.createDOMElement("div",{style:g.createInlineStyle(I(t))}),i=h.createDOMElement("div",{style:g.createInlineStyle(x)}),r=yield this.getIframeAd(this.jsonContent);return r&&(i.insertAdjacentElement("beforeend",r),n.insertAdjacentElement("afterbegin",i),e.insertAdjacentElement("afterbegin",n)),e.className="parallax-content",e})}}class Gt{constructor(){const t=document.createElement("style");this.element=t}insertRule(t){this.element.innerHTML+=t}}class Kt extends Error{}var Zt=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class te extends rt{constructor(t,e,n){super(t,e,n),this.style=Object.assign(Object.assign({},A),{"min-height":`${this.params.height}`}),this.create=()=>Zt(this,void 0,void 0,function*(){return yield this.createWithDefaultIfFail(this.createNativeAd)}),this.parseNativeAdJson=t=>{try{const e=JSON.parse(t.full_html);if(!function(t){const e=Object.keys(t);return e.includes("title")&&e.includes("brandName")&&e.includes("url")&&e.includes("creative_url")&&e.includes("tracking_image_url")}(e))throw new Kt("Native Ad content does not match interface");return Object.assign(Object.assign({},t),e)}catch(t){throw new Kt("Native Ad content is not valid JSON")}},this.createNativeAd=()=>Zt(this,void 0,void 0,function*(){var t,e;try{const n=yield bt.getJSONFromContent(this);if(!n||(e=n).media_type!==At.Native&&e.media_type!==At.Image)return null;this.jsonContent=this.parseNativeAdJson(n),this.request.data=this.jsonContent,this.bootstrapIndex=null===(t=this.jsonContent)||void 0===t?void 0:t.bootstrap_index}catch(t){return null}const n=h.createDOMElement("div",{style:this.getWrapperStyle()}),i=this.createIframe(this.buildIframeContent());return this.params.inbanlabelV2&&Dt.handleReportingThreshold(i),n.appendChild(i),this.adjustIFrameHeight(n,i),n}),this.createThumbnailHTMLString=()=>`\n            <div class="thumbnail__container">\n              <a href="${this.jsonContent.url}" target="_blank" class="thumbnail__link" rel="nofollow noopener">\n                ${this.createCreativeImageHTMLString()}\n                ${this.createThumbnailPreviewVideoHTMLString()}\n              </a>\n              ${this.createThumbnailScriptHTMLString()}\n            </div>\n        `,this.createCreativeImageHTMLString=()=>`<img src="${this.jsonContent.creative_url}" class="thumbnail__creative-image"/>`,this.createTrackingImageHTMLString=()=>`<img src="${this.jsonContent.tracking_image_url}" class="tracking-pixel"/>`,this.createThumbnailPreviewVideoHTMLString=()=>this.shouldShowVideoPreview?`\n            <div class="thumbnail__loading-bar"></div>\n            <video\n                class="thumbnail__preview-video"\n                src="${this.jsonContent.preview_video_url}"\n                preload="none"\n                playsinline\n                webkit-playsinline\n\t\t\t\tloop\n                muted>\n            </video>\n        `:"",this.createThumbnailScriptHTMLString=()=>{if(!this.shouldShowVideoPreview)return"";const t=h.createDOMElement("script");return t.innerHTML=`\n            (${function(){const t=document.querySelector(".thumbnail__container"),e=document.querySelector("video"),n=document.querySelector(".thumbnail__loading-bar");if(!t||!e||!n)return;const i="ontouchstart"in window,r=()=>{e.currentTime=0,n.style.width="2%",e.play(),e.style.zIndex="1"};if(i){e.removeAttribute("loop");let n=!1;t.addEventListener("touchstart",()=>{n=!0,r()}),t.addEventListener("touchend",()=>{n=!1}),e.addEventListener("ended",()=>{n?e.play():e.style.zIndex="-1"}),new IntersectionObserver(t=>{const n=t.length?t[0]:null;!n||n.isIntersecting||e.paused||(e.pause(),e.style.zIndex="-1")},{threshold:.5}).observe(t)}else t.addEventListener("mouseover",()=>{r()}),t.addEventListener("mouseout",()=>{e.pause(),e.style.zIndex="-1"});e.addEventListener("progress",()=>{const t=e.buffered,i=e.duration,r=t.end(0);r&&(n.style.width=r/i*100+"%")}),e.addEventListener("canplaythrough",()=>{n.style.display="none"})}.toString()})()\n        `,t.outerHTML},this.createTitleContainerHTMLString=()=>`\n            <h3 class="title">\n                <a href="${this.jsonContent.url}" target="_blank" title="${this.jsonContent.title}" rel="nofollow noopener">\n                    ${"SAFARI"===g.getBrowserInfo().name?this.injectBlankSpace(this.jsonContent.title):this.jsonContent.title}\n                </a>\n            </h3>\n        `,this.createBrandNameContainerHTMLString=()=>{var t;const e=g.getBrowserInfo(),n=Dt.getReportContainer(this.params),i=this.params.inbanlabelV2?`\n           <span\n              id="${m.inBanLabels.actionButtonId}"\n              class="brand__badge"\n              onclick="${Dt.handleActionButtonClick()}"\n            >\n              Ad\n            </span>\n            `:`\n          <a href="${(null===(t=this.jsonContent)||void 0===t?void 0:t.ad_info_url)||_t.getTargetUrl(this)}" target="_blank">\n            <span\n              id="${m.inBanLabels.actionButtonId}"\n              class="brand__badge"\n              title="Ad By TrafficJunky"\n            >\n              Ad\n            </span>\n           </a>\n        `,r=h.truncateText(this.jsonContent.brandName,25);return`\n        <div>\n            <div class="brand__container">\n                ${i}\n                <a href="${this.jsonContent.url}" target="_blank" title="${this.jsonContent.brandName}" rel="nofollow noopener">\n                    <span class="brand">\n\t\t\t\t\t\t${"SAFARI"===e.name?this.injectBlankSpace(r):r}\n\t\t\t\t\t</span>\n                </a>\n            </div> \n            ${this.params.inbanlabelV2?`<div>${n.outerHTML}</div>`:""}\n        </div>\n        `},this.findTheme=t=>{const e=Object.freeze({adBadgeBackground:"#3A87E8",adBadgeColor:"#000000",adBadgeFont:"bold 11px sans-serif",brandNameColor:"#767678",brandNameFont:"14px sans-serif",brandNameHoverColor:"#bfc5d1",loadingBarColor:"#368cf3",titleColor:"#a8aeb6",titleFont:"15px sans-serif",titleHoverColor:"#bfc5d1"});switch(t){case"pornhub":return{adBadgeBackground:"#3A87E8",adBadgeColor:"#000000",adBadgeFont:"bold 11px sans-serif",brandNameColor:"#767678",brandNameFont:"14px sans-serif",brandNameHoverColor:"#f90",loadingBarColor:"#368cf3",titleColor:"#c6c6c6",titleFont:"15px sans-serif",titleHoverColor:"#f90"};case"youporn":return{adBadgeBackground:"#ec567c",adBadgeColor:"#ffffff",adBadgeFont:"bold 11px sans-serif",brandNameColor:"#ec567c",brandNameFont:".9em Arial,Helvetica,sans-serif",brandNameHoverColor:"#ec567c",loadingBarColor:"#ec567c",titleColor:"#bbbbbb",titleFont:"700 .8em Arial,Helvetica,sans-serif",titleHoverColor:"#bbbbbb"};case"redtube":return{adBadgeBackground:"#af1820",adBadgeColor:"#ffffff",adBadgeFont:"bold 11px sans-serif",brandNameColor:"#f4f4f4",brandNameFont:"12px Arial,Helvetica,sans-serif",brandNameHoverColor:"#f4f4f4",loadingBarColor:"#af1820",titleColor:"#f4f4f4",titleFont:"12px Arial,Helvetica,sans-serif",titleHoverColor:"#f4f4f4"};case"tube8":return Object.assign(Object.assign({},e),{adBadgeBackground:"#C01B27",adBadgeColor:"#ffffff",adBadgeFont:"bold 11px sans-serif",brandNameColor:"#C01B27",brandNameHoverColor:"#C01B27",loadingBarColor:"#C01B27",titleColor:"#ffffff",titleFont:"700 .8em Arial,Helvetica,sans-serif",titleHoverColor:"#ffffff"});default:return e}},this.params=this.getNativeParams(e,n),this.buildStyle()}get shouldShowVideoPreview(){var t;return null===(t=this.jsonContent)||void 0===t?void 0:t.preview_video_url}getNativeParams(t,e){var n,i,r,s,a,o,l,d,c,u;const h=null==e?void 0:e.site,p=this.findTheme(null!=h?h:null);return Object.assign(Object.assign({},this.getParams(t,null!=e?e:null)),{adBadgeBackground:null!==(n=t.ad_badge_background)&&void 0!==n?n:p.adBadgeBackground,adBadgeColor:null!==(i=t.ad_badge_color)&&void 0!==i?i:p.adBadgeColor,adBadgeFont:null!==(r=t.ad_badge_font)&&void 0!==r?r:p.adBadgeFont,brandNameColor:null!==(s=t.brand_name_color)&&void 0!==s?s:p.brandNameColor,brandNameFont:null!==(a=t.brand_name_font)&&void 0!==a?a:p.brandNameFont,brandNameHoverColor:null!==(o=t.brand_name_hover_color)&&void 0!==o?o:p.brandNameHoverColor,loadingBarColor:null!==(l=t.loading_bar_color)&&void 0!==l?l:p.loadingBarColor,site:h,thumbnailPadding:(null==t?void 0:t.thumbnail_padding)||"0",titleContainerPadding:(null==t?void 0:t.title_container_padding)||"0",titlePadding:(null==t?void 0:t.title_padding)||"0",brandContainerPadding:(null==t?void 0:t.brand_container_padding)||"0",brandBadgePadding:(null==t?void 0:t.brand_badge_padding)||"0",brandNamePadding:(null==t?void 0:t.brand_name_padding)||"0",titleColor:null!==(d=t.title_color)&&void 0!==d?d:p.titleColor,titleFont:null!==(c=t.title_font)&&void 0!==c?c:p.titleFont,titleHoverColor:null!==(u=t.title_hover_color)&&void 0!==u?u:p.titleHoverColor})}adjustIFrameHeight(t,e){g.getBrowserInfo().mobileDevice&&e.addEventListener("load",()=>{e.contentDocument&&e.contentDocument.body.scrollHeight>t.offsetHeight&&(t.style.height=`${e.contentDocument.body.scrollHeight}px`)})}buildIframeContent(){var t;const e=this.createTrackingImageHTMLString(),n=this.createThumbnailHTMLString(),i=this.createTitleContainerHTMLString(),r=this.createBrandNameContainerHTMLString();return`\n            <html>\n                <head>\n                    ${null===(t=this.stylesheet)||void 0===t?void 0:t.element.outerHTML}\n                </head>\n                <body>\n                  <div id="${m.inBanLabels.containerId}">\n                    ${e}\n                    ${n}\n\t\t\t\t\t<div class="title__container">\n\t\t\t\t\t\t${i}\n\t\t\t\t\t\t${r}\n\t\t\t\t\t</div>\n                  </div>\n                </body>\n            </html>\n        `}buildStyle(){this.stylesheet=new Gt,this.stylesheet.insertRule("\n            a {\n                text-decoration: none;\n                color: inherit;\n            }\n        "),this.buildContainerStyle(),this.buildTitleContainerStyle(),this.buildThumbnailStyle(),this.buildCreativeImageStyle(),this.buildTrackingImageStyle(),this.buildThumbnailPreviewVideoStyle(),this.buildBrandNameContainerStyle()}buildContainerStyle(){}getWrapperStyle(){const t=(parseInt(this.params.height,10)-70)/parseInt(this.params.width,10)*100;return g.createInlineStyle({"box-sizing":"border-box",height:"100%","max-width":this.params.width,"padding-bottom":"70px","padding-top":`${t}%`,position:"relative"})}buildThumbnailStyle(){this.stylesheet.insertRule(`\n            .thumbnail__container {\n                position: relative;\n                padding: ${this.params.thumbnailPadding};\n            }\n            .thumbnail__container video {\n                z-index: -1;\n            }\n            .thumbnail__container:hover video {\n                z-index: 100;\n            }\n            .thumbnail__container:hover .thumbnail__loading-bar {\n                display: block;\n            }\n            .thumbnail__link {\n                display: block;\n            }\n            .thumbnail__loading-bar {\n                background-color: ${this.params.loadingBarColor};\n                position: absolute;\n                top: 0;\n                left: 0;\n                height: 4px;\n                width: 0%;\n                z-index: 105;\n                display: none;\n                transition: width 0.1s linear;\n            }\n        `)}buildCreativeImageStyle(){this.stylesheet.insertRule("\n            .thumbnail__creative-image {\n                display: block;\n                width: 100%; \n            }\n        ")}buildTrackingImageStyle(){this.stylesheet.insertRule("\n            .tracking-pixel {\n                position: absolute;\n                visibility: hidden;\n                z-index: -1000;\n            }\n        ")}buildThumbnailPreviewVideoStyle(){this.stylesheet.insertRule(`\n            .thumbnail__preview-video {\n                width: 100%;\n                height: 100%;\n                position: absolute;\n                top: 0;\n                left: 0;\n                object-fit: cover;\n                box-sizing: border-box;\n                padding: ${this.params.thumbnailPadding};\n            }\n        `)}buildTitleContainerStyle(){var t,e,n;this.stylesheet.insertRule(`\n\t\t\t.title__container {\n\t\t\t\tmargin-top: 7px;\n\t\t\t\theight: 60px;\n\t\t\t\tpadding: ${this.params.titleContainerPadding};\n\t\t\t}\n\t\t\t\n            .title {\n                color: ${null!==(t=this.params.titleColor)&&void 0!==t?t:""};\n                font: ${null!==(e=this.params.titleFont)&&void 0!==e?e:""};\n                margin: 0 0 0.2rem;\n                padding: ${this.params.titlePadding};\n            }\n            \n            .title:hover {\n                color: ${null!==(n=this.params.titleHoverColor)&&void 0!==n?n:""};\n            }\n        `)}getBlankSpace(){const t=Math.floor(10*Math.random())+2;return`<span style="display: inline-block; width: 0;">${Array.from({length:t}).map(()=>"&nbsp;").join("")}</span>`}injectBlankSpace(t){const e=Math.floor(Math.random()*(t.length-1))+1;return`${t.substring(0,e)}${this.getBlankSpace()}${t.substring(e)}`}buildBrandNameContainerStyle(){var t,e,n,i,r,s,a;this.stylesheet.insertRule(`\n            .brand__container {\n                display: flex;\n                align-items: center;\n                padding: ${this.params.brandContainerPadding};\n            }            \n            \n            .brand {\n                color: ${null!==(t=this.params.brandNameColor)&&void 0!==t?t:""};\n                font: ${null!==(e=this.params.brandNameFont)&&void 0!==e?e:""};\n                padding: ${this.params.brandNamePadding};\n            }\n            \n            .brand:hover {\n                color: ${null!==(n=this.params.brandNameHoverColor)&&void 0!==n?n:""};\n            }\n            \n            .brand__badge {\n                border-radius: 2px;\n                border: 1px solid ${null!==(i=this.params.adBadgeBackground)&&void 0!==i?i:""}; \n                background-color: ${null!==(r=this.params.adBadgeBackground)&&void 0!==r?r:""};\n                color: ${null!==(s=this.params.adBadgeColor)&&void 0!==s?s:""};\n                font: ${null!==(a=this.params.adBadgeFont)&&void 0!==a?a:""};\n                margin: 0 0.5em 0 0;\n                height: 14px;\n                width: 17px;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                padding: ${this.params.brandBadgePadding};\n            }\n            .brand__badge:hover {\n              cursor: pointer;\n            }\n        `)}createIframe(t){const e=bt.createIframe(this,{border:"none",height:"100%",left:"0","max-height":this.params.height,position:"absolute",top:"0",width:"100%"});return bt.attachViewabilityListener(e,this.jsonContent,this),e.srcdoc=t,e}}var ee=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class ne extends Vt{create(){const t=Object.create(null,{create:{get:()=>super.create}});return ee(this,void 0,void 0,function*(){const e=yield t.create.call(this);return e&&(e.style.setProperty("position","absolute"),e.style.setProperty("left","-9999px"),e.style.setProperty("right","-9999px")),e})}}const ie="56px";class re extends te{constructor(){super(...arguments),this.createTitleContainerHTMLString=()=>`\n            <div class="title">\n\t\t\t\t<a href="${this.jsonContent.url}" target="_blank" rel="nofollow noopener">\n\t\t\t\t\t${"SAFARI"===g.getBrowserInfo().name?this.injectBlankSpace(this.jsonContent.title):this.jsonContent.title}\n\t\t\t\t</a>\n            </div>\n        `,this.createBrandNameContainerHTMLString=()=>{var t;const e=g.getBrowserInfo(),n=Dt.getReportContainer(this.params),i=this.params.inbanlabelV2?`\n           <span\n              id="${m.inBanLabels.actionButtonId}"\n              class="brand__badge"\n              onclick="${Dt.handleActionButtonClick()}"\n            >\n              Ad\n            </span>\n            `:`\n          <a href="${(null===(t=this.jsonContent)||void 0===t?void 0:t.ad_info_url)||_t.getTargetUrl(this)}" target="_blank">\n            <span\n              id="${m.inBanLabels.actionButtonId}"\n              class="brand__badge"\n              title="Ad By TrafficJunky"\n            >\n              Ad\n            </span>\n           </a>\n        `,r=h.truncateText(this.jsonContent.brandName,25);return`\n        <div>\n            <div class="brand__container">\n                <a href="${this.jsonContent.url}" target="_blank" title="${this.jsonContent.brandName}" rel="nofollow noopener">\n                    <span class="brand">\n\t\t\t\t\t\t${"SAFARI"===e.name?this.injectBlankSpace(r):r}\n\t\t\t\t\t</span>\n                </a>\n\t\t\t\t${i}\n            </div> \n            ${this.params.inbanlabelV2?`<div>${n.outerHTML}</div>`:""}\n        </div>\n        `}}buildStyle(){super.buildStyle(),this.buildSocialHandleStyle()}buildIframeContent(){var t;return`\n            <html>\n                <head>\n                    ${null===(t=this.stylesheet)||void 0===t?void 0:t.element.outerHTML}\n                </head>\n                <body>\n                  <div id="${m.inBanLabels.containerId}">\n                    ${this.createTrackingImageHTMLString()}\n                    ${this.createThumbnailHTMLString()}\n\t\t\t\t\t<div class="title__container">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t${this.createBrandNameContainerHTMLString()}\n\t\t\t\t\t\t\t${this.createSocialHandleHTMLString()}\n\t\t\t\t\t\t\t${this.createTitleContainerHTMLString()}\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n                  </div>\n                </body>\n            </html>\n        `}buildSocialHandleStyle(){this.stylesheet.insertRule("\n\t\t\t.social_handle {\n\t\t\t\tcolor: #9ca3af;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tline-height: 20px;\n\t\t\t\tmargin-top: 4px;\n\t\t\t}\n\t\t")}createSocialHandleHTMLString(){return this.jsonContent.social_handle?`<div class="social_handle">${this.jsonContent.social_handle}</div>`:""}getWrapperStyle(){return g.createInlineStyle({"box-sizing":"border-box","padding-top":this.params.height,position:"relative"})}buildContainerStyle(){const t=m.inBanLabels.containerId;this.stylesheet.insertRule(`\n            #${t} {\n\t\t\t\tdisplay: flex;\n\t\t\t\tgap: 16px;\n\t\t\t\tmin-height: ${this.params.height};\n\t\t\t\tpadding: 16px;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tbackground-color: rgb(17 24 39);\n\t\t\t\tborder-radius: 8px;\n    \t\t\tborder: 1px solid rgb(31 41 55);\n\t\t\t\tfont-family: sans-serif;\n\t\t\t\tmin-width: 300px;\n\t\t\t}\n        `)}buildCreativeImageStyle(){this.stylesheet.insertRule(`\n            .thumbnail__creative-image {\n                display: block;\n\t\t\t\tobject-fit: cover;\n                max-width: ${ie};\n\t\t\t\twidth: 100%;\n\t\t\t\theight: ${ie};\n\t\t\t\tborder-radius: 5px;\n            }\n        `)}buildThumbnailStyle(){this.stylesheet.insertRule(`\n            .thumbnail__container {\n\t\t\t\talign-items: flex-start;\n    \t\t\tdisplay: flex;\n                position: relative;\n                padding: ${this.params.thumbnailPadding};\n\t\t\t\t\n            }\n            .thumbnail__container video {\n                z-index: -1;\n            }\n            .thumbnail__container:hover video {\n                z-index: 100;\n            }\n            .thumbnail__container:hover .thumbnail__loading-bar {\n                display: block;\n            }\n            .thumbnail__link {\n                display: block;\n            }\n            .thumbnail__loading-bar {\n                background-color: ${this.params.loadingBarColor};\n                position: absolute;\n                top: 0;\n                left: 0;\n                height: 4px;\n                width: 0%;\n                z-index: 105;\n                display: none;\n                transition: width 0.1s linear;\n            }\n        `)}buildTitleContainerStyle(){this.stylesheet.insertRule("\n\t\t\t.title__container {\n\t\t\t\tmargin-top: 0;\n\t\t\t\tdisplay: flex;\n\t\t\t\theight: 100%;\n\t\t\t\talign-items: center;\n\t\t\t\tflex: 1;\n\t\t\t\theight: 100%;\n\t\t\t\tmin-width: 245px;\n\t\t\t}\n\n\t\t\t.title__container > div:first-child {\n\t\t\t\tflex: 1;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 200px;\n    \t\t\ttext-overflow: ellipsis;\n    \t\t\toverflow: hidden;\n\t\t\t}\n\t\t\t\n\t\t\t.title {\n\t\t\t\tmargin: 4px 0 0 0;\n\t\t\t\tline-height: 20px;\n\t\t\t\tcolor: #9ca3af;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tfont-weight: normal;\n\t\t\t\tword-break: break-all;\n\t\t\t}\n        ")}buildBrandNameContainerStyle(){this.stylesheet.insertRule("\n\t\t\t.brand__container {\n                display: flex;\n                align-items: center;\n            }\n\t\t\t\n            .brand__badge {\n                margin: 0 0 0 10px;\n\t\t\t\tcolor: #FFFFFF;\n\t\t\t\tbackground-color: rgb(55 65 81);\n\t\t\t\tfont-size: 12px;\n\t\t\t\twidth: 32px;\n\t\t\t\theight: 22px;\n\t\t\t\tborder-radius: 5px;\n\t\t\t\tdisplay: flex;\n    \t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n            }\n\n\t\t\t.brand__badge:hover {\n\t\t\t\tbackground-color: rgb(75 85 99);\n\t\t\t}\n\n\t\t\t.brand {\n\t\t\t\tfont-size: 16px;\n\t\t\t\tfont-weight: 600;\n    \t\t\tcolor: white;\n\t\t\t\tdisplay: block;\n            }\n\n\t\t\t.brand:hover {\n                text-decoration: underline;\n            }\n        ")}adjustIFrameHeight(t,e){const n=()=>{e.contentDocument&&e.contentDocument.body.scrollHeight>t.offsetHeight&&(t.style.height=`${e.contentDocument.body.scrollHeight}px`,e.style.maxHeight=`${e.contentDocument.body.scrollHeight}px`)};e.addEventListener("load",()=>{var t;n(),null===(t=e.contentWindow)||void 0===t||t.addEventListener("resize",n)})}}class se extends te{constructor(){super(...arguments),this.createTitleContainerHTMLString=()=>{var t;if(!(null===(t=this.jsonContent)||void 0===t?void 0:t.title))return"";const e=h.truncateText(this.jsonContent.title,120);return`\n            <div class="title">\n\t\t\t\t${"SAFARI"===g.getBrowserInfo().name?this.injectBlankSpace(e):e}\n            </div>\n        `},this.createBrandNameContainerHTMLString=()=>{var t;if(!(null===(t=this.jsonContent)||void 0===t?void 0:t.brandName))return"";const e=g.getBrowserInfo(),n=h.truncateText(this.jsonContent.brandName,25);return`\n            <div class="brand__container">\n                <span class="brand">\n\t\t\t\t\t${"SAFARI"===e.name?this.injectBlankSpace(n):n}\n\t\t\t\t</span>\n            </div>\n        `}}buildStyle(){this.stylesheet=new Gt,this.stylesheet.insertRule("\n\t\t\ta {\n\t\t\t\ttext-decoration: none;\n\t\t\t\tcolor: inherit;\n\t\t\t}\n\t\t"),this.buildContainerStyle(),this.buildTitleContainerStyle(),this.buildTrackingImageStyle(),this.buildBrandNameContainerStyle(),this.buildSocialHandleStyle()}buildIframeContent(){var t;return`\n            <html>\n                <head>\n                    ${null===(t=this.stylesheet)||void 0===t?void 0:t.element.outerHTML}\n                </head>\n                <body>\n\t\t\t\t\t<div id="${m.inBanLabels.containerId}" style="background-image: url('${this.jsonContent.creative_url}');">\n\t\t\t\t\t\t<div class="gradient"></div>\n\t\t\t\t\t\t${this.createTrackingImageHTMLString()}\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="title__container">\n\t\t\t\t\t\t\t${this.createBrandNameContainerHTMLString()}\t\t\t\t\t\t\n\t\t\t\t\t\t\t${this.createSocialHandleHTMLString()}\n\t\t\t\t\t\t\t${this.createTitleContainerHTMLString()}\n\t\t\t\t\t\t</div>\n                \t</div>\n\t\t\t\t\t${this.createContainerScript()}\n                </body>\n            </html>\n        `}createContainerScript(){var t;const e=h.createDOMElement("script"),n=(null===(t=this.jsonContent)||void 0===t?void 0:t.ad_info_url)||_t.getTargetUrl(this);return e.innerHTML=`\n            (${function(t,e,n){var i,r;null===(i=document.querySelector(`#${t}`))||void 0===i||i.addEventListener("click",()=>{window.open(e,"_blank")}),null===(r=document.querySelector(`#${t} .brand__badge`))||void 0===r||r.addEventListener("click",t=>{window.open(n,"_blank"),t.stopPropagation()})}.toString()})('${m.inBanLabels.containerId}', '${this.jsonContent.url}', '${n}');\n        `,e.outerHTML}buildSocialHandleStyle(){this.stylesheet.insertRule("\n\t\t\t.social_handle {\n\t\t\t\tcolor: #E5E7EB;\n\t\t\t\tfont-size: 0.875rem;\n\t\t\t\tline-height: 18px;\n\t\t\t\tmargin-top: 2px;\n\t\t\t}\n\t\t")}createSocialHandleHTMLString(){var t;if(!(null===(t=this.jsonContent)||void 0===t?void 0:t.social_handle))return"";const e=h.truncateText(this.jsonContent.social_handle,16);return this.jsonContent.social_handle?`<div class="social_handle">${e}</div>`:""}getWrapperStyle(){return g.createInlineStyle({"box-sizing":"border-box","padding-top":this.params.height,position:"relative"})}buildContainerStyle(){const t=m.inBanLabels.containerId;this.stylesheet.insertRule(`\n            #${t} {\n\t\t\t\tposition: relative;\n\t\t\t\twidth: ${this.params.width};\n\t\t\t\theight: ${this.params.height};\t\t\n\t\t\t\tpadding: 16px;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tborder-radius: 1em;\n\t\t\t\tfont-family: sans-serif;\n\t\t\t\tbackground-size: cover;\n\t\t\t\tbackground-position: center;\n\t\t\t\tcursor: pointer;\n\t\t\t\toverflow: hidden;\n\t\t\t\t${this.params.width.indexOf("%")>0?"aspect-ratio: 1;":""}\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t}\n\n\t\t\t#${t} .gradient {\n\t\t\t\tposition: absolute;\n\t\t\t\tbottom: 0;\n\t\t\t\twidth: 100%;\n\t\t\t\tleft: 0;\n\t\t\t\ttop: 50%;\n\t\t\t\tbackground: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.8) 62.4%);\n\t\t\t}\n        `)}buildTitleContainerStyle(){this.stylesheet.insertRule("\n\t\t\t.title__container {\n\t\t\t\tflex-direction: column;\n    \t\t\tjustify-content: flex-end;\t\t\t\t\n\t\t\t\tdisplay: flex;\n\t\t\t\theight: 100%;\n\t\t\t\tflex: 1;\n\t\t\t\theight: 100%;\n\t\t\t\tline-height: 22px;\n\t\t\t\tposition: relative;\n\t\t\t}\n\n\t\t\t.title__container .brand__container {\t\t\t\n    \t\t\ttext-overflow: ellipsis;\n    \t\t\toverflow: hidden;\n\t\t\t}\n\t\t\t\n\t\t\t.title {\n\t\t\t\tmargin: 8px 0 0 0;\n\t\t\t\tcolor: #E5E7EB;\n\t\t\t\tfont-size: 0.875rem;\n\t\t\t\tfont-weight: normal;\n\t\t\t\tline-height: 23px;\n\t\t\t\tword-break: break-all;\n\t\t\t\tmax-height: 68px;\n\t\t\t\toverflow: hidden;\n\t\t\t}\n        ")}buildBrandNameContainerStyle(){this.stylesheet.insertRule("\n            .brand__badge {\n\t\t\t\tposition: absolute;\n    \t\t\ttop: 6px;\n    \t\t\tright: 6px;\n                margin: 0;\n\t\t\t\tcolor: #FFFFFF;\n\t\t\t\tbackground: #299CB2;\n\t\t\t\tbox-shadow: 2px 2px 3px rgba(0, 0, 0, 0.35);\n\t\t\t\tborder-radius: 3px;\n\t\t\t\tfont-size: 10px;\n\t\t\t\tline-height: 10px;\n\t\t\t\tpadding: 3px;\n\t\t\t\tdisplay: flex;\n    \t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\t\t\t\t\n            }\n\n\t\t\t.brand {\n\t\t\t\tfont-size: 1.125rem;\n\t\t\t\tfont-weight: 700;\n    \t\t\tcolor: white;\n\t\t\t\tdisplay: block;\n            }\n        ")}adjustIFrameHeight(t,e){const n=()=>{e.contentDocument&&e.contentDocument.body.scrollHeight>t.offsetHeight&&(t.style.height=`${e.contentDocument.body.scrollHeight}px`,e.style.maxHeight=`${e.contentDocument.body.scrollHeight}px`)};e.addEventListener("load",()=>{var t;n(),null===(t=e.contentWindow)||void 0===t||t.addEventListener("resize",n)})}createIframe(t){const e=bt.createIframe(this,{border:"none",height:this.params.height,left:"0",position:"absolute",top:"0",width:this.params.width});return bt.attachViewabilityListener(e,this.jsonContent,this),e.srcdoc=t,_t.wrapWithInBanLabel(e,this,{right:"6px",top:"6px"})}}const ae={"background-position":"center","background-repeat":"no-repeat","background-size":"16px auto",bottom:"0",cursor:"pointer",height:"50%",position:"absolute",top:"25%",width:"24px","z-index":"2"},oe=Object.assign(Object.assign({},ae),{"-webkit-tap-highlight-color":"transparent","background-image":'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgBAMAAADtUjXCAAAALVBMVEUAAAC4uLgAAAAAAAAAAAAAAAAAAAAAAAD///8AAAD+/v6bm5sAAAD6+vr///8jfHTZAAAADnRSTlMAszQCWzVeNgMB/aBh+Ig/H2kAAABNSURBVBiVY2CAgAkNUIapSzCUpfhuO4TBJPduGUzo3TOY0DtxmNBDZZiQEFxIgSIhhrMwISQWQhahgxqCymg+QvgSyeeI0EAKIYYJDQAcf0hxS56p0wAAAABJRU5ErkJggg==")',left:"0","user-select":"none"}),le={carousel:{margin:"0 auto",overflow:"hidden",position:"relative"},nextButton:Object.assign(Object.assign({},ae),{"-webkit-tap-highlight-color":"transparent","background-image":'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgBAMAAADtUjXCAAAALVBMVEUAAAC4uLgAAAAAAAAAAAAAAAAAAAAAAAAAAACbm5v////+/v76+voAAAD///8kR0K/AAAADnRSTlMAszQCWzY1XgGgA/34Ya9oTCoAAABISURBVBhXY+DiYIACM5dkKCvynRCUVf3uoQKEVfcOJhj4DiZoJAcXVIQLMlFT8CwaCyEL10G2EML1CB8hfInwOSI0ECEEDzUAe5xHCTmTIkAAAAAASUVORK5CYII=")',right:"0","user-select":"none"}),prevButton:oe,scrollable:{display:"flex",left:"0",position:"relative",transition:".5s left",width:"auto"}};var de=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class ce extends Vt{constructor(t,e,n,i,r,s=!0){super(e,n,i,!1),this.onSwipeLeftCallback=()=>{},this.onSwipeRightCallback=()=>{},this.getCard=()=>de(this,void 0,void 0,function*(){if(!this.jsonContent)return null;const t=(new zt).create(this,this.jsonContent);if(!t)return null;const e=h.createDOMElement("div",{style:g.createInlineStyle(Object.assign(Object.assign({},this.style),{cursor:"pointer",position:"relative"}))});return this.frame=t.create(this.style,this.inbanLabel),e.appendChild(this.frame),this.mask=this.getMask(),e.appendChild(this.mask),this.initialSwipe(this.mask,this.frame),e}),this.jsonContent=t,this.style=r,this.inbanLabel=s}create(){return de(this,void 0,void 0,function*(){return yield this.createWithDefaultIfFail(this.getCard)})}onSwipeLeft(t){return this.onSwipeLeftCallback=t,this}onSwipeRight(t){return this.onSwipeRightCallback=t,this}getMask(){return h.createDOMElement("div",{style:g.createInlineStyle({bottom:"0",left:"0",position:"absolute",right:"0",top:this.inbanLabel?"15px":"0","z-index":"1"})})}initialSwipe(t,e){((t,e,n,i,r)=>{var s;let a=null;const o=null!==(s=null==r?void 0:r.threshold)&&void 0!==s?s:30,l=t=>{a=t},d=(t,r)=>{if(null===a||null===t)return;const s=t-a;Math.abs(s)<o?null==i||i(t,r):s<0?e():n(),a=null};"ontouchstart"in window?(t.addEventListener("touchstart",t=>{var e;const n=t.touches[0];l(null!==(e=null==n?void 0:n.clientX)&&void 0!==e?e:null)},{passive:!0}),t.addEventListener("touchend",t=>{var e;const n=t.changedTouches[0];d(null!==(e=null==n?void 0:n.clientX)&&void 0!==e?e:null,null==n?void 0:n.clientY)})):(t.addEventListener("mousedown",t=>{var e;l(null!==(e=t.clientX)&&void 0!==e?e:null)}),t.addEventListener("mouseup",t=>{var e,n;d(null!==(e=t.clientX)&&void 0!==e?e:null,null!==(n=t.clientY)&&void 0!==n?n:null)}))})(t,this.onSwipeLeftCallback,this.onSwipeRightCallback,(t,n)=>{var i;if(!t||!n)return;const r=e.getBoundingClientRect(),s=t-r.left,a=n-r.top,o=null===(i=e.contentWindow)||void 0===i?void 0:i.document.elementFromPoint(s,a),l=window.MouseEvent||window.TouchEvent;null==o||o.dispatchEvent(new l("click",{bubbles:!0,cancelable:!0,clientX:s,clientY:a,view:e.contentWindow}))})}}class ue{constructor(t){var e;this.timeoutId=null,this.resetTimeoutId=null,this.getCurrentPage=t.getCurrentPage,this.getPageCount=t.getPageCount,this.slide=t.slide,this.intervalMs=null!==(e=t.intervalMs)&&void 0!==e?e:2e3}start(){this.clear(),this.getCurrentPage()!==this.getPageCount()&&(this.timeoutId=window.setTimeout(()=>{this.getCurrentPage()<this.getPageCount()?(this.slide(),this.start()):this.clear()},this.intervalMs))}reset(){this.clear(),this.resetTimeoutId&&window.clearTimeout(this.resetTimeoutId),this.resetTimeoutId=window.setTimeout(()=>{this.start()},5e3)}clear(){null!==this.timeoutId&&(window.clearTimeout(this.timeoutId),this.timeoutId=null)}}var he=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};const pe=500;class ge extends rt{constructor(t,e,n){var i,r,s,a;super(t,e,n),this.currentPage=1,this.isTransitioning=!1,this.adWidth=null!==(i=this.params.adWidth)&&void 0!==i?i:"280px";const o=null!==(r=this.params.adMargin)&&void 0!==r?r:"5px";this.adMargin=this.getNumSize(o),this.height=null!==(s=this.params.height)&&void 0!==s?s:"250px",this.containerWidth=null!==(a=this.params.width)&&void 0!==a?a:"320px",this.frameWidth=(this.getNumSize(this.containerWidth)-this.getNumSize(this.adWidth))/2,this.adAttributes=e,this.adContextAttributes=n,this.cardStyle={border:"none",height:this.height,width:this.adWidth}}create(){return he(this,void 0,void 0,function*(){const t=yield bt.getAdContent(this);if(!t||!t.length)return null;try{this.pageCount=t.length-1,this.pageCount<=1&&(this.currentPage=0);return yield this.createCarousel(t)}catch(t){return null}})}handleUserInteraction(){var t;null===(t=this.autoRotation)||void 0===t||t.reset()}startRotation(){this.autoRotation=new ue({getCurrentPage:()=>this.currentPage,getPageCount:()=>this.pageCount,intervalMs:3e3,slide:()=>this.slideLeft()}),this.autoRotation.start()}stopRotation(){var t;null===(t=this.autoRotation)||void 0===t||t.clear()}createCard(t,e){return he(this,void 0,void 0,function*(){return this.stopRotation(),new ce(t,e,this.adAttributes,this.adContextAttributes,this.cardStyle,true).onSwipeLeft(()=>{this.handleUserInteraction(),this.slideLeft()}).onSwipeRight(()=>{this.handleUserInteraction(),this.slideRight()}).create()})}createButtons(){this.prevButton=h.createDOMElement("div",{class:"prev",style:g.createInlineStyle(le.prevButton)}),this.nextButton=h.createDOMElement("div",{class:"next",style:g.createInlineStyle(le.nextButton)}),this.refreshButtonStatus()}refreshButtonStatus(){0===this.pageCount?(this.nextButton.style.display="none",this.prevButton.style.display="none"):this.currentPage===this.pageCount?(this.nextButton.style.display="none",this.prevButton.style.display="block"):0===this.currentPage?(this.nextButton.style.display="block",this.prevButton.style.display="none"):(this.nextButton.style.display="block",this.prevButton.style.display="block")}createCarousel(t){return he(this,void 0,void 0,function*(){let e=`-${this.getNumSize(this.adWidth)+this.adMargin-this.frameWidth}px`;0===this.pageCount?e=`${this.frameWidth}px`:1===this.pageCount&&(e="0"),this.carousel=h.createDOMElement("div",{style:g.createInlineStyle(Object.assign(Object.assign(Object.assign({},le.scrollable),{gap:`${this.adMargin}px`}),{left:e}))});const n=h.createDOMElement("div",{class:"carousel-wrapper"}),i=h.createDOMElement("div",{class:"carousel",style:g.createInlineStyle(Object.assign({height:`${this.height}`,width:`${this.containerWidth}`},le.carousel))}),r=[];if(yield Promise.all(t.map(t=>this.createCard(t,this.carousel).then(t=>t&&r.push(t)))),r.length){const t=r.pop();t.style.order="1",this.carousel.appendChild(t)}return r.forEach((t,e)=>{t.style.order=`${e+2}`,this.carousel.appendChild(t)}),i.appendChild(this.carousel),this.createButtons(),this.prevButton.addEventListener("click",()=>{this.handleUserInteraction(),this.slideRight()}),i.appendChild(this.prevButton),this.nextButton.addEventListener("click",()=>{this.handleUserInteraction(),this.slideLeft()}),i.appendChild(this.nextButton),n.appendChild(i),this.pageCount>1&&setTimeout(()=>this.startRotation(),1),n})}slideLeft(){if(this.isTransitioning)return;this.isTransitioning=!0;let t=2*(this.getNumSize(this.adWidth)+this.adMargin)-this.frameWidth;1===this.pageCount&&(t=this.getNumSize(this.adWidth)-this.adMargin-this.frameWidth),this.carousel.style.left=`-${t}px`,setTimeout(()=>{if(this.pageCount>1){this.disableTransition(),this.moveFirstCardToLast();const t=this.getNumSize(this.adWidth)+this.adMargin-this.frameWidth;this.carousel.style.left=`-${t}px`,setTimeout(()=>{this.enableTransition(),this.isTransitioning=!1},100)}else this.currentPage=1,this.refreshButtonStatus(),this.isTransitioning=!1},pe)}slideRight(){if(!this.isTransitioning)if(this.isTransitioning=!0,this.pageCount>1){this.disableTransition(),this.moveLastCardToFirst();const t=2*(this.getNumSize(this.adWidth)+this.adMargin)-this.frameWidth;this.carousel.style.left=`-${t}px`,setTimeout(()=>{this.enableTransition();const t=this.getNumSize(this.adWidth)+this.adMargin-this.frameWidth;this.carousel.style.left=`-${t}px`,setTimeout(()=>{this.isTransitioning=!1},pe)},1)}else this.carousel.style.left="0",setTimeout(()=>{this.currentPage=0,this.refreshButtonStatus(),this.isTransitioning=!1},pe)}moveFirstCardToLast(){const t=Array.from(this.carousel.children);t.sort((t,e)=>Number(t.style.order)-Number(e.style.order)),t.forEach((e,n)=>{e.style.order=0===n?`${t.length}`:`${n}`})}moveLastCardToFirst(){const t=Array.from(this.carousel.children);t.sort((t,e)=>Number(t.style.order)-Number(e.style.order)),t.forEach((e,n)=>{n===t.length-1?e.style.order="1":e.style.order=`${n+2}`})}disableTransition(){this.carousel.style.transition="none"}enableTransition(){this.carousel.style.transition="0.5s left"}getNumSize(t){return t.indexOf("px")>0?parseInt(t.substring(0,t.indexOf("px"))):parseInt(t)}}class me{constructor(){this.create=(t,e,n)=>"bottom"===e.type?new Qt(t,e,n):"skin"===e.type?new ne(t,e,n):"native"===e.type?new te(t,e,n):"native_social"===e.type?new re(t,e,n):"native_social_large"===e.type?new se(t,e,n):this.isResponsive(e,n)?new qt(t,e,n):"video-drive-by"===e.type?new Ft(t,e,n):"scrollable"===e.type?new Xt(t,e,n):"carousel"===e.type?new ge(t,e,n):new Vt(t,e,n),this.isResponsive=(t,e)=>{if("responsive"!==t.type)return!1;const n=t.info||(null==e?void 0:e.info);if(!n)return!0;let i=!0;try{i="partner"!==JSON.parse(n).content_type}catch(t){}return i}}}var be=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class ve{constructor(){this.sync=t=>be(this,void 0,void 0,function*(){if(this.verify(t)&&!window.tjIdSyncSynced&&!this.checkIsContextForbidsCookies(t)){window.tjIdSyncSynced=!0;try{const t=yield this.get();if(!t)return;t.set_TJ_uid().fp_get().sync()}catch(t){}}}),this.get=()=>be(this,void 0,void 0,function*(){return new Promise(t=>{if(window.idsync)return t(window.idsync);const e=document.createElement("script");e.defer=!0,e.src=`${m.idSync.scriptUrl}?v=${this.getCacheVersion()}`,e.onload=e.onerror=()=>t(window.idsync),document.body.insertAdjacentElement("beforeend",e)})}),this.getCacheVersion=()=>{const t=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0).getTime()},this.verify=t=>{if(!t)return!1;const e=t.site,n="publisher"===t.invocation_type;return!(-1===m.idSync.sites.indexOf(e)&&!n)&&-1===window.navigator.userAgent.indexOf("MSIE")}}checkIsContextForbidsCookies(t){return"1"===new URLSearchParams(null==t?void 0:t.custom_param).get("noc")}}var fe=function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})};class Ae{constructor(){this.idSyncService=new ve,this.preload=()=>{if(!window.tjPreloadAds)return;const t=b.getAdContextAttributes();for(const e in window.tjPreloadAds)"response"in window.tjPreloadAds[e]&&(window.tjPreloadAds[e].loaded||(window.tjPreloadAds[e].loaded=!0,new Promise(()=>fe(this,void 0,void 0,function*(){const n=yield g.getElementBySpotId(m.adClassName,e);n&&this.run(n,t)}))))},this.load=()=>{const t=document.getElementsByClassName(m.adClassName),e=b.getAdContextAttributes(),n=[];this.markAdsIndex(t),this.idSyncService.sync(e);for(let i=0;i<t.length;i++){const r=this.run(t[i],e);r&&n.push(r)}return Promise.all(n)},this.reload=t=>{const e=Ae.ads[t];if(e)for(let t=0;t<e.length;t++)e[t].reload()},this.run=(t,e)=>{const n=h.getDataAttributes(t);if(!this.canCreate(n))return null;t.setAttribute("data-loading","true");const i=(new me).create(t,n,e);return Ae.ads[i.params.spotId]||(Ae.ads[i.params.spotId]=[]),Ae.ads[i.params.spotId].push(i),i.run()},this.verifyAttributes=t=>!(!this.verify(t,["source_id"])&&!this.verify(t,["spot_id"]))&&("video-drive-by"===t.type||this.verify(t,["height","width"])),this.verify=(t,e)=>{let n=!0;for(let i=0;i<e.length;i++)t[e[i]]||(n=!1);return n},this.setDeliveryServer=()=>{const t=b.getAdContextAttributes();X.setDeliveryServer(null==t?void 0:t.delivery_server)}}init(){window.tjLoadEmbeddedAds=this.load,window.tjPreloadEmbeddedAds=this.preload,window.tjReloadEmbeddedAdsSpot=this.reload,window.tjDebug=u.debug,this.setDeliveryServer(),c.initHBZones(),nt.initPreloadAdUrls()}markAdsIndex(t){const e={};for(let n=0;n<t.length;n++){const i=t[n];if(i.hasAttribute("data-spot-occurrence-index"))continue;const r=i.getAttribute("data-spot-id")||i.getAttribute("data-source-id")||""||"__missing_spot_id__",s=e[r]||0;i.setAttribute("data-spot-occurrence-index",String(s)),i.setAttribute("data-refreshed","0"),e[r]=s+1}}canCreate(t){if(t.loading)return!1;if(!this.verifyAttributes(t))return!1;const e=t.spot_id;return!(window.tjPreloadAds&&window.tjPreloadAds[e]&&!window.tjPreloadAds[e].loaded)}}function ye(){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t){for(let e=0;e<this.length;e++)if(this[e]===t)return!0;return!1}}),window.Map||Object.defineProperty(window,"Map",{value:function(){const t={};this.has=function(e){return void 0!==t[e]},this.get=function(e){return t[e]},this.set=function(e,n){t[e]=n},this.delete=function(e){delete t[e]}}})}Ae.ads={},Ae.hbZones=[];class we{constructor(){this.embeddedAdsService=new Ae}init(){if(window.tjEmbeddedAdsLoaded)return!1;ye();try{window.tjEmbeddedAdsLoaded=!0,this.sendLoadedEvent(),this.launch()}catch(t){return g.dispatchError(t),!1}return!0}launch(){this.embeddedAdsService.init(),this.embeddedAdsService.preload(),"loading"!==document.readyState?this.embeddedAdsService.load():document.addEventListener("DOMContentLoaded",()=>{try{this.embeddedAdsService.load()}catch(t){g.dispatchError(t)}})}sendLoadedEvent(){let e={};if(void 0!==window.tjEmbeddedAdsDuration){const t=void 0!==window.tjPreloadAds?Object.assign({},window.tjPreloadAds):null;e={duration:Date.now()-window.tjEmbeddedAdsDuration,tjPreloadAds:t}}h.dispatchTjEvent(t.embeddedAdsLoaded,e)}}(new we).init()}(),{}}()});