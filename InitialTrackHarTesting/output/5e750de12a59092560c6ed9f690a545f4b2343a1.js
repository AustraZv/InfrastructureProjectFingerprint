(function(){self.getServiceWorkerGlobalClientConfigData=function(){try{return JSON.parse(decodeURIComponent("%7B%22amazonApiProperties%22:%7B%22endpoint%22:%22https://data.amazon.com%22%7D,%22customerProperties%22:%7B%22currencyOfPreference%22:%22EUR%22,%22languageOfPreference%22:%22en-US%22,%22sessionId%22:%22139-3399780-8907046%22%7D,%22deviceProperties%22:%7B%22appType%22:%22web%22,%22deviceType%22:%22desktop%22%7D,%22marketplaceProperties%22:%7B%22countryCode%22:%22us%22,%22marketplaceName%22:%22Amazon.com%22,%22obfuscatedMarketplaceId%22:%22ATVPDKIKX0DER%22%7D,%22namespaces%22:%7B%22in-latency%22:%7B%22lightsaber-mshop-rendering-hints-aapi-csrf%22:%7B%22data%22:%7B%22featureEnabled%22:true%7D%7D,%22lightsaber-desktop-web-rendering-hints-aapi-csrf%22:%7B%22data%22:%7B%22featureEnabled%22:true%7D%7D,%22lightsaber-web%22:%7B%22data%22:%7B%22clientEnabled%22:true%7D%7D,%22lightsaber-mweb-rendering-hints-remote-operations%22:%7B%22data%22:%7B%22featureEnabled%22:true%7D%7D,%22lightsaber-mweb-rendering-hints-aapi-csrf%22:%7B%22data%22:%7B%22featureEnabled%22:true%7D%7D,%22lightsaber-mshop%22:%7B%22data%22:%7B%22clientEnabled%22:true%7D%7D,%22lightsaber-desktop-web-rendering-hints-remote-operations%22:%7B%22data%22:%7B%22featureEnabled%22:true%7D%7D,%22lightsaber-mshop-rendering-hints-remote-operations%22:%7B%22data%22:%7B%22featureEnabled%22:true%7D%7D%7D,%22lightsaber-rule-levers%22:%7B%22buyagain-mshop-android%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22bazaar-gateway-mshop-web%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22cart-mobile-web%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22search-mshop-android%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22browsepage-mobile-web%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22detail-mobile-web%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22detail-mshop-android%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22homepage-mobile-web%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22checkout-mshop-android%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22cart-mshop-android%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22browsepage-mshop-android%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22buyagain-mobile-web%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22detail-desktop-web%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22amazonpayhome-mshop-android%22:%7B%22data%22:%7B%22ruleEnabled%22:false%7D%7D,%22homepage-mshop-android%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22checkout-mobile-web%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22amazonpayhome-mobile-web%22:%7B%22data%22:%7B%22ruleEnabled%22:false%7D%7D,%22bazaar-gateway-mshop-android%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D,%22search-mobile-web%22:%7B%22data%22:%7B%22ruleEnabled%22:true%7D%7D%7D%7D,%22weblabProperties%22:%7B%22weblabProperties%22:%5B%7B%22weblabName%22:%22LIGHTSABER_BROWSE_PAGE_1070111%22,%22weblabTreatment%22:%22C%22%7D,%7B%22weblabName%22:%22A2I_LATENCY_DUMMY_WEBLAB_1169596%22,%22weblabTreatment%22:%22C%22%7D,%7B%22weblabName%22:%22A2I_LIGHTSABER_RHV3_HINTS_COLLECTOR_MWEB_CHROME_1279464%22,%22weblabTreatment%22:%22T1%22%7D,%7B%22weblabName%22:%22A2I_LIGHTSABER_PAGEASSET_DESKTOP_RHV3_1323783%22,%22weblabTreatment%22:%22C%22%7D%5D%7D%7D"))}catch(e){}}})();
;;;
var AUI_JS_DEBUG=!1;
(function(){var n=this&&this.__extends||function(){var a=function(b,d){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d])};return a(b,d)};return function(b,d){function e(){this.constructor=b}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");a(b,d);b.prototype=null===d?Object.create(d):(e.prototype=d.prototype,
new e)}}(),k=function(a){function b(b,e,c,f){e=a.call(this,e||b)||this;e.name="RuntimeConfig".concat(b,"Error");e.attribution=c||"AmazonServiceWorkerRuntimeConfigClientLib";e.logLevel=f;return e}n(b,a);return b}(Error),p=function(){function a(a){this._amazonApiPropertiesData=a}a.prototype.getAmazonApiEndpoint=function(){return this._amazonApiPropertiesData.endpoint};return a}(),q=function(){function a(a){this._customerPropertiesData=a}a.prototype.getSessionId=function(){return this._customerPropertiesData.sessionId};
a.prototype.getLanguageOfPreference=function(){return this._customerPropertiesData.languageOfPreference};a.prototype.getCurrencyOfPreference=function(){return this._customerPropertiesData.currencyOfPreference};a.prototype.getDirectedCustomerId=function(){return this._customerPropertiesData.directedCustomerId};a.prototype.getDirectedCustomerIdVersion=function(){return this._customerPropertiesData.directedCustomerIdVersion};return a}(),l=[],f,m=function(a){self.$TM&&"function"===typeof self.$TM.error?
self.$TM.error(a):(l.push(a),f||(f=setInterval(function(){self.$TM&&"function"===typeof self.$TM.error&&(l.forEach(function(a){self.$TM.error(a)}),clearInterval(f),f=void 0)},50)))},c=function(a,b){for(var d=0;d<b.length;d++){var e=b[d];if("object"===typeof a&&null!==a&&void 0!==a[e])a=a[e];else return}return a},r=function(a){a=c(a,["namespaces"]);if(!a||"object"!==typeof a)return!1;for(var b in a){var d=c(a,[b]);if(!d||"object"!==typeof d)return!1;for(var e in d){var h=c(d,[e]);if(!h||"object"!==
typeof h)return!1}}return!0},t={android:/^\d+(\.\d+){3}$/,ios:/^\d+(\.\d+){2}$/},g=function(a,b){return a&&"string"===typeof a&&b&&"string"===typeof b&&(b=t[b.toLowerCase()])&&b.test(a)?!0:!1},u=function(a,b){if("mshop"===b){a=c(a,["mshopProperties"]);if(!a||"object"!==typeof a)return!1;b=c(a,["appStage"]);if(!b||"string"!==typeof b)return!1;b=c(a,["appVersion"]);if(!b||"string"!==typeof b)return!1;a=c(a,["osName"]);if(!a||"string"!==typeof a||!g(b,a))return!1}return!0},v=function(a){a=c(a,["marketplaceProperties"]);
if(!a||"object"!==typeof a)return!1;var b=c(a,["obfuscatedMarketplaceId"]);if(!b||"string"!==typeof b)return!1;b=c(a,["marketplaceName"]);if(!b||"string"!==typeof b)return!1;a=c(a,["countryCode"]);return!!a&&"string"===typeof a},w=function(a){if(!a||"object"!==typeof a)return!1;var b=c(a,["weblabName"]);return b&&"string"===typeof b?(a=c(a,["weblabTreatment"]))&&"string"===typeof a?!0:!1:!1},x=function(a){a=c(a,["customerProperties"]);if(!a||"object"!==typeof a)return!1;var b=c(a,["sessionId"]);if(!b||
"string"!==typeof b)return!1;b=c(a,["languageOfPreference"]);if(!b||"string"!==typeof b)return!1;b=c(a,["currencyOfPreference"]);if(!b||"string"!==typeof b)return!1;b=c(a,["directedCustomerId"]);a=c(a,["directedCustomerIdVersion"]);return!!b&&"string"===typeof b&&!!a&&"string"===typeof a||!b&&!a},y=function(){function a(a){this._mShopPropertiesData=a}a.prototype.getAppStage=function(){return this._mShopPropertiesData.appStage};a.prototype.getAppVersion=function(){return this._mShopPropertiesData.appVersion};
a.prototype.getOsName=function(){return this._mShopPropertiesData.osName};a.prototype.compareVersion=function(a){var b=this.getAppVersion(),e=this.getOsName();a:{if(!g(b,e)||!g(a,e))throw b=new k("InvalidAppVersionComparison","Error: version [".concat(b,"] or [").concat(a,"] for OS [").concat(e,"] is invalid")),m(b),b;b=b.split(".").map(Number).slice(0,3);a=a.split(".").map(Number).slice(0,3);for(e=0;3>e;e++){var c=b[e]-a[e];if(0!==c){b=c;break a}}b=0}return b};return a}(),z=function(){function a(a){this._devicePropertiesData=
a;this._mShopProperties=this._createMShopProperties()}a.prototype.getAppType=function(){return this._devicePropertiesData.appType};a.prototype.getDeviceType=function(){return this._devicePropertiesData.deviceType};a.prototype.getMShopProperties=function(){return this._mShopProperties};a.prototype._createMShopProperties=function(){if("mshop"===this.getAppType()){var a=this._devicePropertiesData.mshopProperties;return a?new y(a):void 0}};return a}(),A=function(){function a(a){this.featurePropertiesConfig=
a}a.prototype.getData=function(){return this.featurePropertiesConfig.data};return a}(),B=function(){function a(a){this._marketplacePropertiesData=a}a.prototype.getCountryCode=function(){return this._marketplacePropertiesData.countryCode};a.prototype.getMarketplaceId=function(){return this._marketplacePropertiesData.obfuscatedMarketplaceId};a.prototype.getMarketplaceName=function(){return this._marketplacePropertiesData.marketplaceName};return a}(),C=function(){function a(a){this._weblabDataMap=null!==
a&&void 0!==a&&a.weblabProperties?new Map(a.weblabProperties.filter(function(a){return null!=(null===a||void 0===a?void 0:a.weblabName)&&null!=(null===a||void 0===a?void 0:a.weblabTreatment)}).map(function(a){return[a.weblabName,a.weblabTreatment]})):new Map}a.prototype.getWeblabTreatment=function(a){return this._weblabDataMap.get(a)};return a}(),D=function(){function a(a){this.deviceProperties=new z(a.deviceProperties);this.marketplaceProperties=new B(a.marketplaceProperties);this.customerProperties=
new q(a.customerProperties);this.amazonApiProperties=new p(a.amazonApiProperties);a.weblabProperties&&(this.weblabProperties=new C(a.weblabProperties));this.namespacesData=a.namespaces}a.prototype.getDeviceProperties=function(){return this.deviceProperties};a.prototype.getMarketplaceProperties=function(){return this.marketplaceProperties};a.prototype.getCustomerProperties=function(){return this.customerProperties};a.prototype.getWeblabProperties=function(){return this.weblabProperties};a.prototype.getAmazonApiProperties=
function(){return this.amazonApiProperties};a.prototype.getFeatureProperties=function(a,c){var b,d;return(a=null===(d=null===(b=this.namespacesData)||void 0===b?void 0:b[a])||void 0===d?void 0:d[c])?new A(a):void 0};return a}();self.$RuntimeConfig=new D(function(){if(self.getServiceWorkerGlobalClientConfigData&&"function"===typeof self.getServiceWorkerGlobalClientConfigData){var a=self.getServiceWorkerGlobalClientConfigData(),b;if(b=!!a)if((b=c(a,["deviceProperties"]))&&"object"===typeof b){var d=
c(b,["appType"]);if(d&&"string"===typeof d){var e=c(b,["deviceType"]);b=e&&"string"===typeof e?u(b,d):!1}else b=!1}else b=!1;if(b=b&&v(a)&&x(a)&&r(a))b=(b=c(a,["weblabProperties"]))&&"object"===typeof b?(b=c(b,["weblabProperties"]))&&Array.isArray(b)?b.every(w):!1:!1;if(b)return a}a=new k("InvalidConfigDataReceived","Missing runtime config data");m(a);throw a;}())})();var AUI_JS_DEBUG=!1;(function(){var c=[],f=0,d=function(a){return function(){var b=f++;c.push([a,[].slice.call(arguments,0),b,{time:Date.now()}]);return d(b)}},e=function(a,b){a=d(a);b&&(a=a("instance",b));return a};e._s=c;this.csa=e})();var AUI_JS_DEBUG=!1;
(function(){var a=this&&this.__assign||function(){a=Object.assign||function(e){for(var b,c=1,a=arguments.length;c<a;c++){b=arguments[c];for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(e[d]=b[d])}return e};return a.apply(this,arguments)},g=a(a({},{lob:"1","Events.SushiEndpointPattern":"https://%s/1/events/%s","Events.SushiCsaSourceGroup":"com.amazon.csm.csa.prod","Events.SushiCsaCustomSourceGroup":"com.amazon.csm.customsg.prod"}),{Application:"Retail:Prod:www.amazon.com","Events.SushiEndpoint":"https://unagi.amazon.com/1/events/com.amazon.csm.csa.prod",
"Events.SushiCsaVIP":"unagi.amazon.com"}),f=this&&this.__assign||function(){f=Object.assign||function(e){for(var b,c=1,a=arguments.length;c<a;c++){b=arguments[c];for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(e[d]=b[d])}return e};return f.apply(this,arguments)};(function(){if(!g)throw Error("Could not initialize CSA config");var a=self.$RuntimeConfig.getMarketplaceProperties().getMarketplaceId();csa("Config",f(f({},g),{ObfuscatedMarketplaceId:a}))})()})();var AUI_JS_DEBUG=!1;
(function(){var I=self;(function(a){function c(a,b){return x(a,b)}function k(a,e){var G=t[a]||{};y(G,e);t[a]=G;d++;b(q,0)}function h(a,b,e){var d=!0;b=f(b);e&&e.buffered&&(d=(D[a]||[]).every(function(a){return!1!==b(a)}));return d?(r[a]||(r[a]=[]),r[a].push(b),function(){var e=r[a];e&&e.splice(e.indexOf(b),1)}):E}function g(a,b){b=f(b);return a in z?(b(z[a]),E):h(a,function(a){b(a);return!1})}function l(a,b){x("Errors")("logError",a);if(u.DEBUG)throw b||a;}function n(){return Math.abs(4294967295*Math.random()|
0).toString(36)}function f(a,b){return function(){try{return a.apply(this,arguments)}catch(F){l(F.message||F,F)}}}function b(b,e){return a.setTimeout(f(b),e)}function q(){for(var a=0;a<m.length;){var b=m[a],f=b[0]in t;if(!f&&!A){v=m.length;return}f?(v=a,m.splice(a,1),C(b)):a++}e=d}function C(a){var b=t[a[0]],e=a[1],d=e[0];if(!b||!b[d])return l("Undefined function: "+b+"/"+d);B=a[3];t[a[2]]=b[d].apply(b,e.slice(1))||{};B=0}function w(){A=1;q()}function y(a,b){p(b).forEach(function(e){a[e]=b[e]})}var x=
a.csa,u={},t={},m=a.csa._s,v=0,d=0,e=-1,B,A,r={},z={},D={},p=Object.keys,E=function(){};g("$beforeunload",w);k("Config",{instance:function(a){y(u,a)}});x.plugin=f(function(a){a(c)});c.config=u;c.register=k;c.on=h;c.once=g;c.blank=E;c.emit=function(a,b,e){for(var d=r[a]||[],f=0;f<d.length;)!1===d[f](b)?d.splice(f,1):f++;z[a]=b||{};e&&e.buffered&&(D[a]||(D[a]=[]),100<=D[a].length&&D[a].shift(),D[a].push(b||{}))};c.UUID=function(){return[n(),n(),n(),n()].join("-")};c.time=function(a){var b=B?new Date(B.time):
new Date;return"ISO"===a?b.toISOString():b.getTime()};c.error=l;c.warn=function(a,b){x("Errors")("logWarn",a);if(u.DEBUG)throw b||a;};c.exec=f;c.timeout=b;c.interval=function(b,e){return a.setInterval(f(b),e)};c.global=a;a.csa._s.push=function(a){a[0]in t&&(!m.length||A)?(C(a),m.length&&e!==d&&q()):m.splice(v++,0,a)};q();u["StubCalls.Cleanup.Onload"]&&g("$load",w);b(function(){b(w,u.SkipMissingPluginsTimeout||5E3)},1)})("undefined"!==typeof I?I:global);csa.plugin(function(a){var c=a.exec,k=a.global,
h=a.on;a.raf=function(a){if(k.requestAnimationFrame)return k.requestAnimationFrame(c(a))};a.on=function(c,l,k,f){if(c&&"function"===typeof c.addEventListener){var b=a.exec(k);c.addEventListener(l,b,f);return function(){c.removeEventListener(l,b,f)}}return"string"===typeof c?h(c,l,k,f):a.blank}});csa.plugin(function(a){function c(f,b){try{var c=a.global[f];l[b]=!!c;c=c||{}}catch(C){c={},l[b]=!1}return c}function k(){h||(h=c("localStorage","local"));g||(g=c("sessionStorage","session"))}var h,g,l={},
n=a.exec;a.store=n(function(a,b,c){k();c=c&&c.session?g:h;if(!a)return Object.keys(c);if(!b)return c[a];c[a]=b});a.storageSupport=n(function(){k();return l});a.deleteStored=n(function(a,b){k();b=b&&b.session?g:h;if("function"===typeof a)for(var c in b)b.hasOwnProperty(c)&&a(c,b[c])&&delete b[c];else delete b[a]})});csa.plugin(function(a){a.types={ovl:function(a){var c=[];if(a)for(var h in a)a.hasOwnProperty(h)&&c.push(a[h]);return c}}});csa.plugin(function(a){function c(c){return function(g){a("Metrics",
{producerId:"csa",dimensions:{message:g}})("recordMetric",c,1)}}function k(c){function l(g){f=a.UUID();b={messageId:f,schemaId:c.schemaId||"\x3cns\x3e.Error.6",errorMessage:g.m||null,attribution:g.attribution||null,logLevel:"FATAL",url:null,file:null,line:null,column:null,stack:g.s||[],context:g.cinfo||{},metadata:{}};g.logLevel&&(b.logLevel=""+g.logLevel);C.forEach(function(a){g[a]&&(b.metadata[a]=g[a])});"fcsmln"in g&&(b.metadata.fcsmln=g.fcsmln+"");if("INFO"===g.logLevel)return b;Object.keys(w).forEach(function(a){if("number"===
typeof g[w[a]]||"string"===typeof g[w[a]])b[a]=""+g[w[a]]});return b}var f,b,k=a("Events",{producerId:c.producerId,lob:h.lob||"0"}),C=["name","type","csm","adb"],w={url:"pageURL",file:"f",line:"l",column:"c"};this.log=function(a){var b;if(!(b=g))a:{if(a)for(var f in a){b=!1;break a}b=!0}b||(b=c.logOptions||{ent:{page:["pageType","subPageType","requestId"]}},k("log",l(a),b))}}var h=a.config,g=h["KillSwitch.Errors"];a.register("Errors",{instance:function(a){return new k(a||{})},logError:c("jsError"),
logWarn:c("jsWarn")})});csa.plugin(function(a){function c(b,e,c){v(e,function(d){var g="all"===c||(c||{})[d];d in b||(b[d]={version:1,id:e[d].id||a.UUID()});k(b[d],e[d],g)})}function k(b,e,c){v(e,function(d){var g="string"!==typeof e[d]&&"version"!==d?a.error("Attribute is not of type string: "+d):!0===c||1===c?!0:"id"===d||-1!==(c||[]).indexOf(d);g&&(b[d]=e[d])})}function h(a,b,c){v(b,function(b){var e=a[b];if(e.schemaId){var d={},f={};d.id=e.id;d.producerId=e.producerId||c.producerId;d.schemaId=
e.schemaId;d.version=e.version++;d.attributes=f;g(d,c);k(f,e,1);l(f);"page"===b&&(d.__backfill=function(a){if(a&&a.schemaId&&a.schemaId!==d.schemaId&&0===a.schemaId.indexOf(y)&&(a=a.entities)&&a[b]&&a[b].id===f.id){a=a[b];var e=C(a);e.push("requestId");e.push("pageType");e.push("subPageType");k(a,f,e)}});t("log",d)}})}function g(c,e){var d=c.timestamp;"number"===typeof d&&(d=(new Date(d)).toISOString());d=d||a.time("ISO");c.timestamp=d;c.messageId=c.messageId||a.UUID();c.application=x;c.obfuscatedMarketplaceId=
b.ObfuscatedMarketplaceId||"UNKNOWN";"schemaId"in c&&(c.schemaId=c.schemaId.replace("\x3cns\x3e",w));e&&e.lob&&(c.lob=e.lob)}function l(a){delete a.version;delete a.schemaId;delete a.producerId}function n(b){var e={},d=!!b.sushiSourceGroup&&b.sushiSourceGroup!==f,k=!!b.copyBaseMetadata,r=!!b.copyEntities;this.log=function(h,A){var p={},z=(A||{}).ent;if(!h)return a.error("The event cannot be undefined");var B=h.entities;if(d)k&&g(h,b),r&&(c(p,m,z),c(p,e,z));else{if("string"!==typeof h.schemaId)return a.error("A valid schema id is required for the event");
g(h,b);c(p,m,z);c(p,e,z)}h.producerId=b.producerId;if(d){if(B||r&&0<Object.keys(p).length)h.entities={},B&&v(B,function(a){var b=z&&z[a];h.entities[a]={};v(B[a],function(c){if(!b||!0===b||Array.isArray(b)&&-1!==b.indexOf(c))h.entities[a][c]=B[a][c]})}),r&&0<Object.keys(p).length&&v(p,function(a){h.entities[a]||(h.entities[a]={});v(p[a],function(b){b in h.entities[a]||(h.entities[a][b]=p[a][b])});l(h.entities[a])})}else d||(c(p,B||{},z),v(p,function(a){l(p[a])}),h.entities=p);A&&A.lob&&(h.lob=A.lob);
A=A||{};A.sushiSourceGroup||(A.sushiSourceGroup=b.sushiSourceGroup||f);t("log",h,A)};this.setEntity=function(a){u&&delete a.session;c(e,a,"all");h(e,a,b)}}var f=a.config["Events.SushiCsaSourceGroup"],b=a.config,q=a.global,C=q.Object.keys;q=(q.location||{}).host;var w=b["Events.Namespace"]||"csa_other",y=w+".",x=b.Application||"Other"+(q?":"+q:""),u=b["Transport.AnonymizeRequests"]||!1,t=a("Transport"),m={},v=function(a,b){Object.keys(a).forEach(b)};!b["KillSwitch.Events"]&&C&&a.register("Events",
{setEntity:function(d){u&&delete d.session;a.emit("$entities.set",d,{buffered:1});c(m,d,"all");h(m,d,{producerId:"csa",lob:b.lob||"0"})},removeEntity:function(a){delete m[a]},instance:function(a){return new n(a)}})});csa.plugin(function(a){function c(a){return"function"===typeof a}function k(a){return a&&"object"===typeof a}function h(a){return"string"===typeof a||a instanceof String}function g(a,g,h,m){var e=v&&v[f[a]||"log"];b&&b.TRACE&&c(e)&&e("[CSA:ServiceWorker] "+g,h,m);"le"===a?d("logError",
g+" "+h+" "+m):"lw"===a&&d("logWarn",g+" "+h+" "+m)}function l(a,b,d){var e=a.clientId||(a.source||{}).id,f;g("i","Got fetch-check message from clientId: ",e);e&&m.clients&&(f=m.clients.get(e).then(function(a){a&&c(a.postMessage)&&(g("i","Sending fetch-check success message back to clientId: ",e),a.postMessage({client:e,message:{_messageType:d,success:!0}}))}));return f}function n(a){var b=a.body&&(h(a.body)?a.body:JSON.stringify(a.body)),e=a.url,d=a.headers||u||{"Content-Type":a.type||x||"application/json; charset\x3dUTF-8"};
g("i","Got fetch message: ",e,b);if(b&&e&&c(m.fetch)){if(q)try{var f=JSON.parse(b);f.events&&f.events.length&&c(f.events.forEach)&&f.events.forEach(function(a){k(a)&&k(a.data)&&(a=a.data,"entities"in a&&k(a.entities)?a.entities.transport={type:"ServiceWorker"}:"attributes"in a&&k(a.attributes)&&(a.attributes.transportType="ServiceWorker"))});b=JSON.stringify(f)}catch(p){g("e","Failed to tag entities for fetch request payload: ",p)}a={method:a.httpMethod||C||"POST",body:b,headers:d,credentials:a.credentials||
w||"include",mode:a.mode||y||"cors"};var l=m.fetch(e,a).catch(function(a){g("e","Failed to send fetch request: ",a)});g("i","Sending fetch message: ",e,a)}return l}var f={e:"error",le:"error",w:"warn",lw:"warn",i:"log"},b=a.config||{},q=b["ServiceWorker.Entities.Tag"],C=b["ServiceWorker.HTTP.Method"],w=b["ServiceWorker.HTTP.Credentials"],y=b["ServiceWorker.HTTP.Mode"],x=b["ServiceWorker.HTTP.Content-Type"],u=b["ServiceWorker.HTTP.AllHeaders"],t=a.global||{},m=t.self,v=t.console;t=a.on;var d=a("Errors");
m&&(a.isSW=!0,t(m,"message",function(a){if(a){var e=a.data||{},d=e._messageType;if("fetch"===d)var f=n(e);else if("fetch-check"===d)f=l(a,e,d);else if("config"===d){d=e.config;e=e.replace;if(d){if(e)b=d;else for(var h in d)d.hasOwnProperty(h)&&(b[h]=d[h]);g("i","Config updated: ",b)}f=void 0}else d&&g("le","Unknown event type:",d);f&&c(a.waitUntil)&&a.waitUntil(f)}}),t(m,"install",function(a){a&&c(a.waitUntil)&&c(m.skipWaiting)&&a.waitUntil(m.skipWaiting)}),t(m,"activate",function(a){a&&c(a.waitUntil)&&
m.clients&&c(m.clients.claim)&&a.waitUntil(m.clients.claim())}),a.register("ServiceWorker",{fetch:n}))});csa.plugin(function(a){function c(a){N=function(b,c,d,e){if(b.post&&(B||a)&&(b=b.post(c,d)))return b._messageType="fetch",B?A("fetch",b):a&&a.postMessage(b),e(),1}}function k(a,b){J(a,"message",function(a){(a=((a||{}).data||{}).message)&&"fetch-check"===a._messageType&&a.success&&c(b)});b.postMessage({_messageType:"fetch-check"})}function h(){var a=G&&G.serviceWorker;if(a){var b=a.controller;b?
k(a,b):(J(a,"controllerchange",function(){var b=a.controller;b&&k(a,b)}),d&&a.register(d))}}function g(b){(a.store()||[]).forEach(function(c){if(0===c.indexOf("csa.cajun."))try{var d=a.store(c);a.deleteStored(c);var e=JSON.parse(d);if(e&&"object"===typeof e&&!Array.isArray(e))try{if(e.events&&e.sourceGroup){var f=e.sourceGroup;e.events.forEach(function(a){b(a,{sushiSourceGroup:f})})}}catch(H){a.error("Error processing backup object format: "+H.message)}else if(Array.isArray(e))try{e.forEach(b)}catch(H){a.error("Error processing array format backup: "+
H.message)}}catch(H){a.error(H)}})}function l(){var a=L;L=Math.min(a*T,U);return a}function n(c,d){if(864E5<a.time()-+new Date(c.timestamp))return a.warn("Event is too old: "+c);d=d||{};if(d.forceSend&&v&&v===c.schemaId)D.forEach(function(a){if(a.accepts(c,d)){var b=d.sushiSourceGroup||y;(a=a.post?a:null)&&q(a,[c],b)}});else if(z<u){"function"===typeof c.__backfill&&(O||P||K(r).forEach(function(a){c.__backfill(r[a].event)}),delete c.__backfill);var e=c.messageId||a.UUID();e in r||(r[e]={event:c,options:d},
z++);var f=d.sushiSourceGroup||y,g=((r[e]||{}).options||{}).sushiSourceGroup||y;"function"===typeof c.__merge&&f===g&&c.__merge(r[e].event);!M&&x&&(M=F(b,l()))}}function f(a,b){D.forEach(function(c){var d=b.filter(function(b){return c.accepts(b,{sushiSourceGroup:a})});0<d.length&&(c.chunks?c.chunks(d,a):[d]).forEach(function(b){c.post&&q(c,b,a)})})}function b(){var a={};K(r).forEach(function(b){b=r[b];var c=b.options&&b.options.sushiSourceGroup||y;a[c]||(a[c]=[]);a[c].push(b.event)});K(a).forEach(function(b){f(b,
a[b])});r={};M=0;O+=1;S("$transport.flushed")}function q(b,c,d,e){var f=a.UUID(),g=function(){a.deleteStored("csa.cajun."+f)};a.store("csa.cajun."+f,JSON.stringify({events:c,sourceGroup:d}));[N,C,w].some(function(a){try{return a(b,c,d,g)}catch(V){}})}function C(a,b,c,d){var e=E.navigator||{},f=E.cordova||{};if(m||!e.sendBeacon||!a.post)return 0;a.preflight&&f&&"ios"===f.platformId&&!p&&((new Image).src=a.preflight().url,p=1);a=a.post(b,c);if(!a.type&&e.sendBeacon(a.url,a.body))return d(),1}function w(b,
c,d,e){function f(a,b,c,d){a.open("POST",b);a.withCredentials=!m;d&&a.setRequestHeader("Content-Type",d);a.send(c)}if(b.post){b=b.post(c,d);var g=b.url,h=b.body,k=b.type,l=new XMLHttpRequest,q=0;l.onload=function(){299>l.status?e():a.config["Transport.XHRRetries"]&&3>q&&(q++,F(function(){f(l,g,h,k)},q*t))};f(l,g,h,k);return 1}}var y=a.config["Events.SushiCsaSourceGroup"],x=0,u=a.config["Transport.BufferSize"]||2E3,t=a.config["Transport.RetryDelay"]||1500,m=a.config["Transport.AnonymizeRequests"]||
!1,v=a.config["Transport.nonBatchSchema"]||"",d=a.config["Transport.ServiceWorker.JSCodePath"],e=a.config["Transport.ServiceWorker.Enabled"],B=a.isSW,A=a("ServiceWorker"),r={},z=0,D=[],p,E=a.global,G=E.navigator,I=E.document,F=a.timeout,S=a.emit,J=a.on,Q=a.once,K=E.Object.keys,R=a.config["Transport.FlushInterval"]||5E3,L=R,T=a.config["Transport.FlushInterval.BackoffFactor"]||1,U=a.config["Transport.FlushInterval.BackoffLimit"]||3E4,M=0,O=0,P=0,N=a.blank;K&&(B?c():e&&h(),Q("$afterload",function(){P=
x=1;g(n);J(I,"visibilitychange",b,!1);b()}),Q("$afterunload",function(){x=1;b()}),J("$afterPageTransition",function(){z=0;L=R}),a.register("Transport",{log:n,register:function(a){D.push(a)}}))});csa.plugin(function(a){var c=a.config["Events.SushiEndpoint"],k=a.config["Events.SushiCsaSourceGroup"];a("Transport")("register",{accepts:function(a,c){return a&&c?a.schemaId&&(!c.sushiSourceGroup||c.sushiSourceGroup===k):!1},post:function(a){a=a.map(function(a){return{data:a}});return{url:c,body:JSON.stringify({events:a})}},
preflight:function(){var a=/\/\/(.*?)\//.exec(c),g;a&&a[1]&&(g="https://"+a[1]+"/ping");return{url:g}},chunks:function(a){for(var c=[];500<a.length;)c.push(a.splice(0,500));c.push(a);return c}})});csa.plugin(function(a){function c(a){var b=h;a&&(b=k(n,l,a));return b}function k(c){var b=Array.prototype.slice.call(arguments,1),f=(c.match(/%s/g)||[]).length;f>b.length&&a.warn("Warning: More placeholders ("+f+") than arguments ("+b.length+")");var g=0;return c.replace(/%s/g,function(){return g<b.length?
b[g++]:""})}var h=a.config["Events.SushiEndpoint"],g=a.config["Events.SushiCsaSourceGroup"],l=a.config["Events.SushiCsaVIP"],n=a.config["Events.SushiEndpointPattern"];a("Transport")("register",{accepts:function(a,b){return a&&b&&b.sushiSourceGroup?b.sushiSourceGroup!==g:!1},post:function(a,b){a=a.map(function(a){return{data:a}});return{url:c(b),body:JSON.stringify({events:a})}},preflight:function(){var a=/\/\/(.*?)\//.exec(h),b;a&&a[1]&&(b="https://"+a[1]+"/ping");return{url:b}},chunks:function(a){for(var b=
[];500<a.length;)b.push(a.splice(0,500));b.push(a);return b}})});csa.plugin(function(a){function c(c){function k(){w=a.UUID();y=a.UUID();x={}}var f=c.producerId,b=c.logger,l=b||a("Events",{producerId:f,lob:h.lob||"0"}),C=(c||{}).dimensions||{},w,y,x={},u=-1;if(!f&&!b)return a.error("Either a producer id or custom logger must be defined");this.recordMetric=function(a,b){var f=c.logOptions||{ent:{page:["pageType","subPageType","requestId"]}};f.debugMetric=c.debugMetric;u!==g&&(k(),u=g);l("log",{messageId:w,
schemaId:c.schemaId||"\x3cns\x3e.Metric.4",metrics:{},dimensions:C,__merge:function(c){c.metrics[a]=b}},f)};this.recordCounter=function(b,f){var h=c.logOptions||{ent:{page:["pageType","subPageType","requestId"]}};if("string"!=typeof b||"number"!=typeof f||!isFinite(f))return a.error("Invalid type given for counter name or counter value: "+b+"/"+f);u!==g&&(k(),u=g);b in x||(x[b]={});var d=x[b];"f"in d||(d.f=f);d.c=(d.c||0)+1;d.s=(d.s||0)+f;d.l=f;l("log",{messageId:y,schemaId:c.schemaId||"\x3cns\x3e.InternalCounters.3",
c:{},__merge:function(a){b in a.c||(a.c[b]={});d.fs||(d.fs=1,a.c[b].f=d.f);1<d.c&&(a.c[b].s=d.s,a.c[b].l=d.l,a.c[b].c=d.c)}},h)}}var k=a.config["Events.SushiCsaCustomSourceGroup"],h=a.config,g=0;h["KillSwitch.Metrics"]||((new c({producerId:"csa"})).recordMetric("baselineMetricEvent",1),k&&(new c({logger:a("Events",{producerId:"csa",lob:h.lob||"0",sushiSourceGroup:k,copyBaseMetadata:!0,copyEntities:!0})})).recordCounter("csa.customsg.baselineMetric",1),a.on("$beforePageTransition",function(){g++}),
a.register("Metrics",{instance:function(a){return new c(a||{})}}))});csa.plugin(function(a){function c(){n+=1}function k(c){c=c||{};var b=a.UUID(),f=n,g=c.producerId,k=c.logger,y=k||a("Events",{producerId:g,lob:h.lob||"0"});if(!g&&!k)return a.error("Either a producer id or custom logger must be defined");this.mark=function(g,h){var k=("undefined"===typeof h?a.time():h)-l;f!==n&&(f=n,b=a.UUID());y("log",{messageId:b,schemaId:c.schemaId||"\x3cns\x3e.Timer.1",markers:{},__merge:function(a){a.markers[g]=
k}},c.logOptions)}}var h=a.config,g=(a.global.performance||{}).timing,l=(g||{}).navigationStart||a.time(),n=0;g&&(c(),a.on("$beforePageTransition",c),a.register("Timers",{instance:function(a){return new k(a||{})}}))});csa.plugin(function(a){a.emit("$afterload")})})();var AUI_JS_DEBUG=!1;
(function(N){var O=this&&this.__spreadArray||function(d,b,a){if(a||2===arguments.length)for(var c=0,e=b.length,h;c<e;c++)!h&&c in b||(h||(h=Array.prototype.slice.call(b,0,c)),h[c]=b[c]);return d.concat(h||Array.prototype.slice.call(b))},P=function(d,b,a){for(var c=[],e=3;e<arguments.length;e++)c[e-3]=arguments[e];B.isDebugVerbose&&console.debug.apply(console,O(["%cServiceWorkerMetric%c%c".concat(d,"%c%c").concat(b,"%c ").concat(a),"background-color: #3333ff; color: #FFFFFF; padding: 5px","color: auto",
"background-color: #77ACA2; color: #FFFFFF; padding: 5px","color: auto","background-color: #F5F3BB; padding: 5px","color: auto"],c,!1))},Q=Date.now(),l=function(d){setTimeout(d,0)},x=function(d,b,a,c){d.push(b);b="function"===typeof c;for(a=Math.max(a,0);d.length>a;){var e=d.shift();b&&c(e)}},v;(function(d){d.format=function(b){return"".concat("Telemetry",":SW:").concat(b).toLowerCase()}})(v||(v={}));var m;(function(d){d.isObject=function(b){return!!b&&"object"===typeof b&&!Array.isArray(b)};d.isNonEmptyString=
function(b){return"string"===typeof b&&0<b.length};d.matchesPattern=function(b,a){return"string"===typeof b&&a.test(b)};d.isAsciiString=function(b){return"string"===typeof b&&/^[\x00-\x7F]*$/.test(b)}})(m||(m={}));var R=this&&this.__spreadArray||function(d,b,a){if(a||2===arguments.length)for(var c=0,e=b.length,h;c<e;c++)!h&&c in b||(h||(h=Array.prototype.slice.call(b,0,c)),h[c]=b[c]);return d.concat(h||Array.prototype.slice.call(b))},n=function(){function d(){}d.prototype.print=function(b,a){for(var c=
[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];P.apply(void 0,R([this.constructor.name,b,a],c,!1))};d.prototype.printCtor=function(b){this.print("constructor","\x3c\x3c\x3c %o",b)};return d}(),S=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==
typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),E=function(d){function b(a,b,e,h){b=d.call(this,b||a)||this;b.name="Telemetry".concat(a,"Error");b.attribution=e||"AmazonServiceWorkerTelemetryClientLib";b.logLevel=h;return b}S(b,d);return b}(Error),p;(function(d){d.create=function(b,a,c,e){return new E(b.toString(),a,c,e)}})(p||(p={}));var z;(function(d){d.USER_DENIED_PERMISSION=
/The user denied permission to use Service Worker/i;d.SERVICE_WORKER_FETCH_API_FAILED=/^Failed to fetch$/i;d.NETWORK_ERROR=/network error/i})(z||(z={}));var C;(function(d){d.isNonCustomerImpactingError=function(b){var a;if(a=b instanceof Error||b instanceof ErrorEvent)b=b.message,a=m.matchesPattern(b,z.USER_DENIED_PERMISSION)||m.matchesPattern(b,z.SERVICE_WORKER_FETCH_API_FAILED)||m.matchesPattern(b,z.NETWORK_ERROR);return a}})(C||(C={}));var T=this&&this.__extends||function(){var d=function(b,a){d=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),U=this&&this.__awaiter||function(d,b,a,c){function e(b){return b instanceof
a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,g){function h(a){try{q(c.next(a))}catch(r){g(r)}}function k(a){try{q(c["throw"](a))}catch(r){g(r)}}function q(b){b.done?a(b.value):e(b.value).then(h,k)}q((c=c.apply(d,b||[])).next())})},V=this&&this.__generator||function(d,b){function a(a){return function(b){return c([a,b])}}function c(a){if(h)throw new TypeError("Generator is already executing.");for(;e;)try{if(h=1,g&&(f=a[0]&2?g["return"]:a[0]?g["throw"]||((f=g["return"])&&f.call(g),
0):g.next)&&!(f=f.call(g,a[1])).done)return f;if(g=0,f)a=[a[0]&2,f.value];switch(a[0]){case 0:case 1:f=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++;g=a[1];a=[0];continue;case 7:a=e.ops.pop();e.trys.pop();continue;default:if(!(f=e.trys,f=0<f.length&&f[f.length-1])&&(6===a[0]||2===a[0])){e=0;continue}if(3===a[0]&&(!f||a[1]>f[0]&&a[1]<f[3]))e.label=a[1];else if(6===a[0]&&e.label<f[1])e.label=f[1],f=a;else if(f&&e.label<f[2])e.label=f[2],e.ops.push(a);else{f[2]&&e.ops.pop();e.trys.pop();
continue}}a=b.call(d,e)}catch(A){a=[6,A],g=0}finally{h=f=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var e={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},h,g,f,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},W=function(d){function b(a,b,e){var c=d.call(this)||this;c._logQueue=[];c._retryCount=0;c.printCtor(arguments);c._config=a;c._requestContextProvider=b;c._foresterRequest=
e;return c}T(b,d);b.prototype.log=function(a,b){var c=this._requestContextProvider.getRequestID(b),h=this._requestContextProvider.getSessionID(b);a={r:c,s:h,m:this._config.marketplaceID,sn:this._config.siteName,c:this._config.channel,data:a};this.print("log","Forester log created",a);this._send([a],b)};b.prototype._send=function(a,b){var c=this,h=this._groupLogs(a);Object.keys(h).forEach(function(a){c.print("send","Sending data for group ".concat(a));void c._sendGroupedLog(h[a],b)})};b.prototype._groupLogs=
function(a){var b={};a.forEach(function(a){var c=a.r+a.s+a.m;b[c]||(b[c]=[]);b[c].push(a)});return b};b.prototype._sendGroupedLog=function(a,b){return U(this,void 0,void 0,function(){var c,h,d,f;return V(this,function(e){switch(e.label){case 0:c=this._createPayload(a),h=this._requestContextProvider.getForesterEndpoint(b),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._foresterRequest.postLogs(h,c)];case 2:return e.sent(),this._clearLogQueue(),[3,4];case 3:return d=e.sent(),this.print("sendGroupLog",
"error log posting failed",d),(f=this._logQueue).push.apply(f,a),void 0===this._flushTimeoutID&&this._scheduleRetry(),[3,4];case 4:return[2]}})})};b.prototype._createPayload=function(a){a=this._buildPostBodyLog(a);try{var b=JSON.stringify(a);if(a.reqs){var e={csmCount:{counter:"foresterPayloadSize",t:0,value:b.length}};e.csmCount.value+=JSON.stringify(e).length;a.reqs.push(e);this.print("createPayload","Payload generated",b);b=JSON.stringify(a)}return b}catch(h){throw new E("ForesterPayloadConversion",
"Error while converting forester log to payload: ".concat(h));}};b.prototype._buildPostBodyLog=function(a){var b=[],e=a[0];a.forEach(function(a){var c={};c[a.c]=a.data;b.push(c)});return{rid:e.r,sid:e.s,mid:e.m,sn:e.sn,reqs:b}};b.prototype._clearLogQueue=function(){this._logQueue.length&&this._flushLogs();this._retryCount=0;this._clearFlushTimeout()};b.prototype._scheduleRetry=function(){var a=this;this._retryCount>=b.MAX_RETRY_COUNT||(this._flushTimeoutID=setTimeout(function(){a._flushLogs();a._clearFlushTimeout()},
b.DEFAULT_FLUSH_TIMEOUT_MS*Math.pow(2,this._retryCount)),this._retryCount++)};b.prototype._flushLogs=function(){var a=this;l(function(){a._logQueue.length&&a._send(a._logQueue.splice(0))})};b.prototype._clearFlushTimeout=function(){"number"===typeof this._flushTimeoutID&&clearTimeout(this._flushTimeoutID);this._flushTimeoutID=void 0};b.MAX_RETRY_COUNT=5;b.DEFAULT_FLUSH_TIMEOUT_MS=1E3;return b}(n),X=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),F=this&&this.__awaiter||function(d,b,a,c){function e(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||
(a=Promise))(function(a,g){function h(a){try{q(c.next(a))}catch(r){g(r)}}function k(a){try{q(c["throw"](a))}catch(r){g(r)}}function q(b){b.done?a(b.value):e(b.value).then(h,k)}q((c=c.apply(d,b||[])).next())})},G=this&&this.__generator||function(d,b){function a(a){return function(b){return c([a,b])}}function c(a){if(h)throw new TypeError("Generator is already executing.");for(;e;)try{if(h=1,g&&(f=a[0]&2?g["return"]:a[0]?g["throw"]||((f=g["return"])&&f.call(g),0):g.next)&&!(f=f.call(g,a[1])).done)return f;
if(g=0,f)a=[a[0]&2,f.value];switch(a[0]){case 0:case 1:f=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++;g=a[1];a=[0];continue;case 7:a=e.ops.pop();e.trys.pop();continue;default:if(!(f=e.trys,f=0<f.length&&f[f.length-1])&&(6===a[0]||2===a[0])){e=0;continue}if(3===a[0]&&(!f||a[1]>f[0]&&a[1]<f[3]))e.label=a[1];else if(6===a[0]&&e.label<f[1])e.label=f[1],f=a;else if(f&&e.label<f[2])e.label=f[2],e.ops.push(a);else{f[2]&&e.ops.pop();e.trys.pop();continue}}a=b.call(d,e)}catch(A){a=
[6,A],g=0}finally{h=f=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var e={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},h,g,f,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},Y=function(d){function b(){var a=d.call(this)||this;a.printCtor(arguments);return a}X(b,d);b.prototype.triggerWeblab=function(a){return F(this,void 0,void 0,function(){var b,e;return G(this,function(c){switch(c.label){case 0:b=
this._getWeblabTriggerOptions(),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,fetch(a,b)];case 2:return c.sent(),this.print("triggerWeblab","Weblab triggered successfully"),[3,4];case 3:throw e=c.sent(),this.print("triggerWeblab","Weblab trigger failed",e),e;case 4:return[2]}})})};b.prototype.postLogs=function(a,b){return F(this,void 0,void 0,function(){var c,d,g;return G(this,function(e){switch(e.label){case 0:c=this._getPostbackURL(a),d=this._getRequestOptions(b),e.label=1;case 1:return e.trys.push([1,
3,,4]),[4,fetch(c,d)];case 2:return e.sent(),this.print("postLogs","Forester logs posted successfully"),[3,4];case 3:throw g=e.sent(),this.print("postMetrics","Forester log request failed",g),g;case 4:return[2]}})})};b.prototype._getPostbackURL=function(a){return b.URL_ENDPOINT.replace("{{endpoint}}",a)};b.prototype._getRequestOptions=function(a){return{method:"POST",mode:"no-cors",credentials:"include",body:a}};b.prototype._getWeblabTriggerOptions=function(){return{method:"GET",mode:"no-cors",credentials:"include"}};
b.URL_ENDPOINT="//{{endpoint}}/1/batch/1/OE/";return b}(n),Z=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(b,a);b.prototype=null===
a?Object.create(a):(c.prototype=a.prototype,new c)}}(),H=function(d){function b(){var a=d.call(this)||this;a._syntheticRequestID=b._generateRequestID();return a}Z(b,d);b._generateRequestID=function(){for(var a="RSW";20>a.length;)a+=Math.floor(9007199254740991*Math.random()).toString();return a.substring(0,20)};b.prototype.getSyntheticRequestID=function(){return this._syntheticRequestID};return b}(n),D;(function(d){d.getCustomerProperties=function(b){var a;if("function"===typeof(null===(a=b.$RuntimeConfig)||
void 0===a?void 0:a.getCustomerProperties))return b.$RuntimeConfig.getCustomerProperties()}})(D||(D={}));var aa=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");
d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),I=function(d){function b(a){var c=d.call(this)||this;c.printCtor(arguments);c._swGlobal=a;c._getAndCacheSessionID();c._syntheticSessionID=b._generateSyntheticSessionID();return c}aa(b,d);b._generateSyntheticSessionID=function(){for(var a="";14>a.length;)a+=Math.floor(9007199254740991*Math.random()).toString();return"000-".concat(a.substring(0,7),"-").concat(a.substring(7,14))};b.prototype.getSessionID=function(){return this._cachedSessionID||
this._syntheticSessionID};b.prototype._getAndCacheSessionID=function(){var a=this._getSessionIDFromRuntimeConfig();a?(this._cacheSessionID(a),this.print("retrieveSessionIDFromRuntimeConfig","Retrieved session id from RuntimeConfig ".concat(this._cachedSessionID))):this.print("retrieveSessionIDFromRuntimeConfig","Unable to retrieve session id from RuntimeConfig")};b.prototype._cacheSessionID=function(a){a&&(this._cachedSessionID=a)};b.prototype._getSessionIDFromRuntimeConfig=function(){var a=D.getCustomerProperties(this._swGlobal);
if("function"===typeof(null===a||void 0===a?void 0:a.getSessionId))return a.getSessionId()};return b}(n),ba=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");
d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),ca=function(d){function b(a,b){var c=d.call(this)||this;c.printCtor(arguments);c._swGlobal=a;c._config=b;c._requestIDGenerator=new H;c._sessionIDProvider=new I(c._swGlobal);return c}ba(b,d);b.prototype.getRequestID=function(a){return a&&a.requestID?a.requestID:this._requestIDGenerator.getSyntheticRequestID()};b.prototype.getSessionID=function(a){return a&&a.sessionID?a.sessionID:this._sessionIDProvider.getSessionID()};
b.prototype.getForesterEndpoint=function(a){return a&&a.foresterURL?a.foresterURL:this._config.foresterEndpoint};return b}(n),da=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+
" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),ea=function(d){function b(a,b,e,h){var c=d.call(this)||this;c._callCount=0;c.printCtor(arguments);c._swGlobal=a;c._config=b;c._requestContextProvider=e;c._foresterRequest=h;c._startCallCounterResetTimer();return c}da(b,d);b.prototype.trigger=function(a,c){a=this._getValidWeblab(a);!a.length||this._callCount>=b.MAX_CALLS_COUNT||(this._callCount++,this._recordTrigger(a,c),this._logThresholdReached())};
b.prototype._logThresholdReached=function(){this._callCount===b.MAX_CALLS_COUNT&&this._swGlobal.$TM.error(p.create("WeblabTriggerThresholdReached"))};b.prototype._recordTrigger=function(a,c){var e=this,d="",g="";a.forEach(function(a){g+=e._encodeTrigger(a);d=e._getForesterWeblabEndpoint(g,c);d.length>b.MAX_FORESTER_URL_LENGTH&&(e._flush(d),d=g="")});d&&this._flush(d)};b.prototype._flush=function(a){try{this._foresterRequest.triggerWeblab(a),this._swGlobal.$TM.count(v.format("".concat(b.FORESTER_CLIENT_MODULE,
":SUCCESS")))}catch(c){this._swGlobal.$TM.count(v.format("".concat(b.FORESTER_CLIENT_MODULE,":FAILED")))}};b.prototype._getValidWeblab=function(a){return a.filter(function(a){var b=a.treatment;return m.isNonEmptyString(a.name)&&m.isNonEmptyString(b)})};b.prototype._startCallCounterResetTimer=function(){var a=this;setInterval(function(){a._callCount=0},1E3*b.RESET_CALL_COUNT_SECONDS)};b.prototype._encodeTrigger=function(a){var b=a.treatment;return encodeURIComponent(",wl\x3d".concat(a.name,"/").concat(b))};
b.prototype._getForesterWeblabEndpoint=function(a,c){var e=this._config.foresterEndpoint,d=this._config.marketplaceID,g=this._requestContextProvider.getSessionID();return"//".concat(e,"/1/remote-weblab-triggers/1/OE/")+"".concat(d,":").concat(g,":").concat(c,"$s:")+"wl-client-id\x3d".concat(b.FORESTER_CLIENT_ID)+"".concat(a,":1234")};b.MAX_CALLS_COUNT=200;b.RESET_CALL_COUNT_SECONDS=60;b.MAX_FORESTER_URL_LENGTH=2E3;b.FORESTER_CLIENT_ID="CSMTrigger";b.FORESTER_CLIENT_MODULE="FORESTER-WEBLAB";return b}(n),
fa=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),ha=
function(d){function b(a,b){var c=d.call(this)||this;c.printCtor(arguments);var h=new ca(a,b),g=new Y;c._foresterLogClient=new W(b,h,g);c._foresterWeblabClient=new ea(a,b,h,g);return c}fa(b,d);b.prototype.log=function(a,b){this._foresterLogClient.log(a,b)};b.prototype.trigger=function(a,b){this._foresterWeblabClient.trigger(a,b)};return b}(n),ia=function(){function d(){this._timingFilterSignatures=[":arrived:",":flushed:",":pageshellstaleness","respond:before","respond:after"]}d.prototype.getFilterSignatures=
function(){return this._timingFilterSignatures};return d}(),ja=function(){function d(){this._filterSignatures=[]}d.prototype.addFilter=function(b){var a;(a=this._filterSignatures).push.apply(a,b.getFilterSignatures())};d.prototype.filter=function(b){return this._filterSignatures.some(function(a){return-1!==b.indexOf(a)})};return d}(),y;(function(d){d.Mshop="mshop";d.Mweb="mweb";d.Desktop="desktop"})(y||(y={}));var w;(function(d){d.INLatency="in-latency";d.INMobX="reachvideos_in";d.CSA="csa"})(w||
(w={}));var ka={producerId:w.INLatency,schemaId:"ServiceWorkerTelemetry.Counter.3"},la={producerId:w.INMobX,schemaId:"WebPushNotification.Counter.1"},ma={logOptions:{ent:"all"},producerId:w.CSA,schemaId:"csa.Error.6"},J=function(){function d(b,a,c){this._swGlobal=b;this._clientConfig=a;this._metricFilter=c;this._deviceType=this._resolveDeviceType();this._configureMetricFilter();this._requestIDGenerator=new H;this._sessionIDProvider=new I(this._swGlobal)}d.prototype.logJSError=function(b,a){csa("Events")("setEntity",
this._getEntityValueForJSError(a));csa("Errors",ma)("log",b)};d.prototype.count=function(b,a){this._metricFilter.filter(b)||(b={schemaId:this._clientConfig.counterConfig.schemaId,deviceType:this._deviceType,counterName:b,counterValue:a.toString()},csa("Events",{producerId:this._clientConfig.counterConfig.producerId})("log",b))};d.prototype._resolveDeviceType=function(){if(!this._swGlobal.$RuntimeConfig)return y.Desktop;var b=this._swGlobal.$RuntimeConfig.getDeviceProperties();return"mshop"===b.getAppType()?
y.Mshop:"desktop"!==b.getDeviceType()?y.Mweb:y.Desktop};d.prototype._configureMetricFilter=function(){this._metricFilter.addFilter(new ia)};d.prototype._getEntityValueForJSError=function(b){var a={requestId:this._getRequestID(b)};b={id:this._getSessionID(b)};return{page:a,session:b}};d.prototype._getRequestID=function(b){return b&&b.requestID?b.requestID:this._requestIDGenerator.getSyntheticRequestID()};d.prototype._getSessionID=function(b){return b&&b.sessionID?b.sessionID:this._sessionIDProvider.getSessionID()};
return d}(),na={counterConfig:ka},oa={counterConfig:la},K=function(){function d(){}d.initialize=function(b,a){if(!this.initialized){var c=new J(b,na,a);b="T1"===pa.treatment?new J(b,oa,a):c;this.clients={DEFAULT:c,WEB_PUSH_NOTIFICATION:b};this.initialized=!0}};d.getClient=function(b){void 0===b&&(b="DEFAULT");if(!this.initialized||!this.clients)throw Error("CSAClientFactory must be initialized before getting clients");var a=this.clients[b];if(!a)throw Error("CSA client not found for type: ".concat(b));
return a};d.initialized=!1;return d}(),qa=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):
(c.prototype=a.prototype,new c)}}();w=function(d){function b(){return null!==d&&d.apply(this,arguments)||this}qa(b,d);b.prototype.getCSAClient=function(a){return K.getClient(a)};return b}(n);var B;(function(d){d.isDebug=AUI_JS_DEBUG;d.isDebugVerbose=d.isDebug&&!1})(B||(B={}));var pa={name:"WPN_METRICS_MIGRATION_1316114",treatment:"C"},ra=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),L=function(d){function b(a,b,e){var c=d.call(this)||this;c._swGlobal=a;c._messageCommand=b;c._clientMessageHandler=e;c._addClientMessageListener();return c}ra(b,d);b.prototype._addClientMessageListener=function(){var a=
this;this._swGlobal.addEventListener("message",function(b){a._onMessageReceived(b)})};b.prototype._onMessageReceived=function(a){if(a.origin===this._swGlobal.location.origin){var b=a.source;b instanceof WindowClient&&(a=a.data,m.isObject(a)&&"retail_service_worker_messaging"===a.feature&&a.command===this._messageCommand&&this._clientMessageHandler(a,b))}};return b}(n),sa=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=
b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),ta=function(d){function b(a){var b=d.call(this)||this;b._clientDataList=[];new L(a,"page_loaded",b._onClientLoaded.bind(b));return b}sa(b,d);b.prototype.getRequestIDForClient=
function(a){return(a=this.getClientDataForClient(a))?a.requestID:void 0};b.prototype.getSessionIDForClient=function(a){return(a=this.getClientDataForClient(a))?a.sessionID:void 0};b.prototype.getForesterURLForClient=function(a){return(a=this.getClientDataForClient(a))?a.foresterURL:void 0};b.prototype.getClientDataForClient=function(a){for(var b,e=0;e<this._clientDataList.length;e++){var d=this._clientDataList[e];if(d.clientID===a){b=d;break}}return b};b.prototype._onClientLoaded=function(a,b){if(!a.data||
!m.isNonEmptyString(a.data.rid))throw p.create("InvalidPostbackDataOnPageLoad","Incorrect postback data received on page load",void 0,"ERROR");this.print("processMessage","Page loaded message received from client ".concat(b.id),a);this._saveClientData(a.data,b.id)};b.prototype._saveClientData=function(a,c){x(this._clientDataList,{clientID:c,requestID:a.rid,sessionID:a.sid,marketplaceID:a.mid,foresterURL:a.furl,pageType:a.pty,subPageType:a.spty},b._MAX_CLIENTS)};b._MAX_CLIENTS=50;return b}(n),ua=this&&
this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),t=this&&this.__awaiter||
function(d,b,a,c){function e(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,g){function h(a){try{q(c.next(a))}catch(r){g(r)}}function k(a){try{q(c["throw"](a))}catch(r){g(r)}}function q(b){b.done?a(b.value):e(b.value).then(h,k)}q((c=c.apply(d,b||[])).next())})},u=this&&this.__generator||function(d,b){function a(a){return function(b){return c([a,b])}}function c(a){if(h)throw new TypeError("Generator is already executing.");for(;e;)try{if(h=1,g&&(f=a[0]&2?
g["return"]:a[0]?g["throw"]||((f=g["return"])&&f.call(g),0):g.next)&&!(f=f.call(g,a[1])).done)return f;if(g=0,f)a=[a[0]&2,f.value];switch(a[0]){case 0:case 1:f=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++;g=a[1];a=[0];continue;case 7:a=e.ops.pop();e.trys.pop();continue;default:if(!(f=e.trys,f=0<f.length&&f[f.length-1])&&(6===a[0]||2===a[0])){e=0;continue}if(3===a[0]&&(!f||a[1]>f[0]&&a[1]<f[3]))e.label=a[1];else if(6===a[0]&&e.label<f[1])e.label=f[1],f=a;else if(f&&e.label<
f[2])e.label=f[2],e.ops.push(a);else{f[2]&&e.ops.pop();e.trys.pop();continue}}a=b.call(d,e)}catch(A){a=[6,A],g=0}finally{h=f=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var e={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},h,g,f,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},va=function(d){function b(a){var c=d.call(this)||this;c._swGlobal=a;c._clientReadyList=[];c._bufferedCounters=
[];c._bufferedTags=[];c._bufferedWeblabTriggers=[];c._bufferedInternalCounters=[];new L(a,b._POSTBACK_MESSAGE_COMMAND,c._onClientReady.bind(c));return c}ua(b,d);b.prototype.count=function(a,c,d){var e=this;void 0===c&&(c=1);l(function(){return t(e,void 0,void 0,function(){var e,h;return u(this,function(f){switch(f.label){case 0:return d?[3,2]:[4,this._logCounterWithoutClient(a,c)];case 1:return f.sent(),[2];case 2:if(!this._isClientReady(d))return this._bufferCounter({clientID:d,name:a,value:c}),
[2];f.label=3;case 3:return f.trys.push([3,5,,6]),[4,this._getClient(d)];case 4:return e=f.sent(),this._postMessage(e,{feature:b._POSTBACK_MESSAGE_FEATURE,command:b._MESSAGING_COMMAND_COUNTER,data:{name:a,value:c}}),[3,6];case 5:return h=f.sent(),this.countInternal(v.format(b._CLIENT_UNAVAILABLE_COUNTER)),this.print("counter",h.message),[3,6];case 6:return[2]}})})})};b.prototype.countInternal=function(a,c){var d=this;void 0===c&&(c=1);l(function(){return t(d,void 0,void 0,function(){var d;return u(this,
function(e){switch(e.label){case 0:return[4,this._getLastAvailableClient()];case 1:if(d=e.sent())return this._postMessage(d,{feature:b._POSTBACK_MESSAGE_FEATURE,command:b._MESSAGING_COMMAND_COUNTER,data:{name:a,value:c}}),[2];x(this._bufferedInternalCounters,{name:a,value:c},b._MAX_INTERNAL_COUNTERS);return[2]}})})})};b.prototype.tag=function(a,c){var d=this;l(function(){return t(d,void 0,void 0,function(){var d,e;return u(this,function(h){switch(h.label){case 0:if(!this._isClientReady(c))return this._bufferTag({clientID:c,
name:a}),[2];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this._getClient(c)];case 2:return d=h.sent(),this._postMessage(d,{feature:b._POSTBACK_MESSAGE_FEATURE,command:b._MESSAGING_COMMAND_TAG,data:{tag:a}}),[3,4];case 3:return e=h.sent(),this.countInternal(v.format(b._CLIENT_UNAVAILABLE_COUNTER),1),this.print("tag",e.message),[3,4];case 4:return[2]}})})})};b.prototype.weblabTrigger=function(a,c,d){var e=this;l(function(){return t(e,void 0,void 0,function(){var e,h;return u(this,function(f){switch(f.label){case 0:if(!this._isClientReady(d))return this._bufferWeblabTrigger({clientID:d,
name:a,treatment:c}),[2];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this._getClient(d)];case 2:return e=f.sent(),this._postMessage(e,{feature:b._POSTBACK_MESSAGE_FEATURE,command:b._MESSAGING_COMMAND_WEBLAB_TRIGGER,data:{weblab:a,treatment:c}}),[3,4];case 3:return h=f.sent(),this.countInternal(v.format(b._CLIENT_UNAVAILABLE_COUNTER)),this.print("weblabtrigger",h.message),[3,4];case 4:return[2]}})})})};b.prototype._isClientReady=function(a){return-1!==this._clientReadyList.indexOf(a)};b.prototype._onClientReady=
function(a,c){this.print("processMessage","message ready event received from ".concat(c.id));x(this._clientReadyList,c.id,b._MAX_CLIENTS);this._flushMetricForClient(c)};b.prototype._flushMetricForClient=function(a){var b=this;l(function(){b._drainBufferedCounter(a)});l(function(){b._drainBufferedTags(a)});l(function(){b._drainBufferedWeblabTriggers(a)});l(function(){b._drainBufferedInternalCounter(a)})};b.prototype._drainBufferedCounter=function(a){for(var c=this,d=[],h=a.id,g=function(e){var g=f._bufferedCounters[e];
if(g.clientID&&h!==g.clientID)return d.push(g),"continue";l(function(){return t(c,void 0,void 0,function(){return u(this,function(c){this._postMessage(a,{feature:b._POSTBACK_MESSAGE_FEATURE,command:b._MESSAGING_COMMAND_COUNTER,data:{name:g.name,value:g.value}});return[2]})})})},f=this,k=0;k<this._bufferedCounters.length;k++)g(k);this._bufferedCounters=d};b.prototype._drainBufferedTags=function(a){for(var c=this,d=[],h=a.id,g=function(e){var g=f._bufferedTags[e];if(h!==g.clientID)return d.push(g),
"continue";l(function(){return t(c,void 0,void 0,function(){return u(this,function(c){this._postMessage(a,{feature:b._POSTBACK_MESSAGE_FEATURE,command:b._MESSAGING_COMMAND_TAG,data:{tag:g.name}});return[2]})})})},f=this,k=0;k<this._bufferedTags.length;k++)g(k);this._bufferedTags=d};b.prototype._drainBufferedWeblabTriggers=function(a){for(var c=this,d=[],h=a.id,g=function(e){var g=f._bufferedWeblabTriggers[e];if(h!==g.clientID)return d.push(g),"continue";l(function(){return t(c,void 0,void 0,function(){return u(this,
function(c){this._postMessage(a,{feature:b._POSTBACK_MESSAGE_FEATURE,command:b._MESSAGING_COMMAND_WEBLAB_TRIGGER,data:{weblab:g.name,treatment:g.treatment}});return[2]})})})},f=this,k=0;k<this._bufferedWeblabTriggers.length;k++)g(k);this._bufferedWeblabTriggers=d};b.prototype._drainBufferedInternalCounter=function(a){for(var c=this,d=function(d){var e=h._bufferedInternalCounters[d];l(function(){return t(c,void 0,void 0,function(){return u(this,function(c){this._postMessage(a,{feature:b._POSTBACK_MESSAGE_FEATURE,
command:b._MESSAGING_COMMAND_COUNTER,data:{name:e.name,value:e.value}});return[2]})})})},h=this,g=0;g<this._bufferedInternalCounters.length;g++)d(g);this._bufferedInternalCounters=[]};b.prototype._bufferCounter=function(a){var c=this;x(this._bufferedCounters,a,b._MAX_COUNTERS,function(){c.countInternal(v.format("counter:buffer:overflow"))})};b.prototype._bufferTag=function(a){var c=this;x(this._bufferedTags,a,b._MAX_TAGS,function(){c.countInternal(v.format("tag:buffer:overflow"))})};b.prototype._bufferWeblabTrigger=
function(a){var c=this;x(this._bufferedWeblabTriggers,a,b._MAX_WEBLAB_TRIGGERS,function(){c.countInternal(v.format("weblabTrigger:buffer:overflow"))})};b.prototype._postMessage=function(a,b){a.postMessage(b)};b.prototype._logCounterWithoutClient=function(a,c){return t(this,void 0,void 0,function(){var d;return u(this,function(e){switch(e.label){case 0:return[4,this._getLastAvailableClient()];case 1:if(d=e.sent())return this._postMessage(d,{feature:b._POSTBACK_MESSAGE_FEATURE,command:b._MESSAGING_COMMAND_COUNTER,
data:{name:a,value:c}}),[2];this._bufferCounter({clientID:void 0,name:a,value:c});return[2]}})})};b.prototype._getLastAvailableClient=function(){return t(this,void 0,void 0,function(){var a,b,d,h;return u(this,function(c){switch(c.label){case 0:b=a=this._clientReadyList.length-1,c.label=1;case 1:if(!(0<=b))return[3,6];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this._getClient(this._clientReadyList[b])];case 3:return(d=c.sent())?[2,d]:[3,5];case 4:return h=c.sent(),this.print("Looking for last available client",
h.message),[3,5];case 5:return b--,[3,1];case 6:return[2]}})})};b.prototype._getClient=function(a){return t(this,void 0,void 0,function(){var b;return u(this,function(c){switch(c.label){case 0:return[4,this._swGlobal.clients.get(a)];case 1:if(b=c.sent())return[2,b];throw p.create("ClientNotFound","Client ".concat(a," not found"));}})})};b._MAX_CLIENTS=50;b._MAX_COUNTERS=400;b._MAX_TAGS=100;b._MAX_WEBLAB_TRIGGERS=100;b._MAX_INTERNAL_COUNTERS=50;b._POSTBACK_MESSAGE_FEATURE="retail_service_worker_messaging";
b._POSTBACK_MESSAGE_COMMAND="client_messaging_ready";b._MESSAGING_COMMAND_COUNTER="log_counter";b._MESSAGING_COMMAND_TAG="log_tag";b._MESSAGING_COMMAND_WEBLAB_TRIGGER="log_weblab_trigger";b._CLIENT_UNAVAILABLE_COUNTER="client:unavailable";return b}(n),wa=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(b,a)};return function(b,
a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),xa=function(d){function b(a){var b=d.call(this)||this;b._clientPostback=new va(a);b._clientDataProvider=new ta(a);return b}wa(b,d);b.prototype.getClientPostback=function(){return this._clientPostback};b.prototype.getClientDataProvider=function(){return this._clientDataProvider};
return b}(n),ya=function(){csa.plugin(function(d){var b=d.config;d=["Application","Events.SushiEndpoint","ObfuscatedMarketplaceId","lob"];if(!b||"object"!==typeof b||!d.every(function(a){return!!b[a]}))throw p.create("InvalidCSAConfiguration");})},za=/\(?([^\s]*):(\d+):(\d+)\)?/,Aa=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=
b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),Ba=function(d){function b(a){var b=d.call(this)||this;b.printCtor(arguments);b._defaultAttribution=a;return b}Aa(b,d);b.prototype.generateErrorRecord=function(a,b,d,h){var c=this._getError(a),e=this._generateStackFrames(c);b=
{m:this._getErrorMessage(c),name:c.name,logLevel:this._getErrorLogLevel(c,b),attribution:this._getErrorAttribution(c,d),s:e,t:Date.now()-Q};if(a=a instanceof ErrorEvent?this._getErrorLocationFromErrorEvent(a):this._getErrorLocationFromStackFrames(e))b.f=a.fileName,b.l=a.lineNumber,b.c=a.colNumber;h&&(b.cinfo=h);return b};b.prototype._getError=function(a){return a instanceof ErrorEvent?a.error:a};b.prototype._generateStackFrames=function(a){var c=[];a=a.stack?a.stack.trim():"";if(!a)return c;a=a.split("\n");
for(var d,h=0;h<a.length&&c.length<b.MAX_STACK_DEPTH;)(d=a[h++].trim())&&c.push(d);return c};b.prototype._getErrorMessage=function(a){return(a=a.message.trim())?a:"Unknown Error"};b.prototype._getErrorLogLevel=function(a,b){return b||a.logLevel||"FATAL"};b.prototype._getErrorAttribution=function(a,b){return b||a.attribution||this._defaultAttribution};b.prototype._getErrorLocationFromErrorEvent=function(a){return{fileName:a.filename,lineNumber:String(a.lineno),colNumber:String(a.colno)}};b.prototype._getErrorLocationFromStackFrames=
function(a){if((a=(1<a.length?a[1]:"").match(za))&&4===a.length)return{fileName:a[1],lineNumber:a[2],colNumber:a[3]}};b.MAX_STACK_DEPTH=20;return b}(n),Ca=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+
String(a)+" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),Da=function(d){function b(a,b,e){var c=d.call(this)||this;c._errorCount=0;c.printCtor(arguments);c._swGlobal=a;c._foresterErrorRecordGenerator=new Ba(b.attribution);c._clientDataProvider=e.getClientDataProvider();c._config=b;c._addGlobalErrorListener();c._startErrorCountResetTimer();return c}Ca(b,d);b.prototype.record=function(a,b,d,h,g){this._isNotError(a)||this._hasErrorCountThresholdBreached()?
this.print("record","ERROR NOT LOGGED. Received error is not valid or error threshold is breached."):(this._errorCount++,!b&&C.isNonCustomerImpactingError(a)&&(b="ERROR"),this._recordErrorForClient(a,b,d,h,g),this._logThresholdReached())};b.prototype._addGlobalErrorListener=function(){var a=this;this._swGlobal.addEventListener("error",function(b){l(function(){a.print("globalErrorListener","error event captured",b);a.record(b)})});this._swGlobal.addEventListener("unhandledrejection",function(b){l(function(){b.reason instanceof
Error&&(a.print("globalErrorListener","promise rejection error captured",b),a.record(b.reason))})})};b.prototype._startErrorCountResetTimer=function(){var a=this;setInterval(function(){a._errorCount=0},1E3*b.RESET_ERROR_COUNT_SECONDS)};b.prototype._recordErrorForClient=function(a,b,d,h,g){if(g&&(g.clientID||g.requestID)){var c;g.clientID&&(c=this._clientDataProvider.getClientDataForClient(g.clientID));g.requestID&&(c?c.requestID=g.requestID:c={clientID:g.clientID||"",requestID:g.requestID});this._recordError(a,
b,d,h,c,g)}else this._recordError(a,b,d,h)};b.prototype._recordError=function(a,b,d,h,g,f){a=this._foresterErrorRecordGenerator.generateErrorRecord(a,b,d,h);this.print("recordError","Generated error record",a);this.getCSAClient(null===f||void 0===f?void 0:f.csaClientType).logJSError(this._generateCSAErrorRecord(a),g);this._logToConsole(a)};b.prototype._logThresholdReached=function(){this._errorCount===b.MAX_ERROR_COUNT&&this._recordError(p.create("ErrorRecordThresholdReached"))};b.prototype._isNotError=
function(a){return!(a instanceof Error||a instanceof ErrorEvent)};b.prototype._hasErrorCountThresholdBreached=function(){return this._errorCount>=b.MAX_ERROR_COUNT};b.prototype._logToConsole=function(a){console.error("SW Telemetry trapped error %o",a)};b.prototype._generateCSAErrorRecord=function(a){var b={attribution:a.attribution,c:a.c,f:a.f,l:a.l,logLevel:a.logLevel,m:a.m,pageURL:this._config.siteName,s:a.s};a.cinfo&&(b.cinfo={ErrorContext:a.cinfo});return b};b.MAX_ERROR_COUNT=50;b.RESET_ERROR_COUNT_SECONDS=
60;return b}(w),Ea=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,
new c)}}(),Fa=function(d){function b(a,b){var c=d.call(this)||this;c._clientPostback=a.getClientPostback();c._foresterClient=b;return c}Ea(b,d);b.prototype.count=function(a,b,d,h){void 0===b&&(b=1);this._clientPostback.count(a,b,d);this.getCSAClient(h).count(a,b)};b.prototype.tag=function(a,b){this._clientPostback.tag(a,b)};b.prototype.mark=function(a,b,d){var c=performance.now();this._clientPostback.count(a,c-b,d)};b.prototype.triggerWeblab=function(a,b){var c=this;if(!m.isNonEmptyString(b))throw p.create("ClientIDMissing",
"Client id missing for triggering weblab via page");a.forEach(function(a){c._clientPostback.weblabTrigger(a.name,a.treatment,b)})};b.prototype.triggerWeblabFromWorker=function(a,b){if(!m.isNonEmptyString(b))throw p.create("RequestIDMissing","Request id missing for triggering weblab via page");this._foresterClient.trigger(a,b)};return b}(w),Ga=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c])};return d(b,a)};return function(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),Ha=function(d){function b(a,b,e){var c=d.call(this)||this;c.printCtor(arguments);c._swGlobal=a;c._errorRecorder=b;c._metricRecorder=e;c._attachTelemetryToGlobalContext();return c}Ga(b,d);b.prototype.count=function(a,
b,d){var c=this;if(!m.isAsciiString(a))throw p.create("NonASCIICharacters","Counter name contains non-ASCII characters ".concat(a));l(function(){var e=d&&m.isNonEmptyString(d.clientID)?d.clientID:void 0;c._metricRecorder.count(a,b,e,null===d||void 0===d?void 0:d.csaClientType)})};b.prototype.tag=function(a,b){var c=this;if(!b||!m.isNonEmptyString(b.clientID))throw p.create("ClientIDMissing","Client id missing for tag ".concat(a));l(function(){c._metricRecorder.tag(a,b.clientID)})};b.prototype.trigger=
function(a,b){var c=this;l(function(){var d=Array.isArray(a)?a:[a];b.requestID?c._metricRecorder.triggerWeblabFromWorker(d,b.requestID):c._metricRecorder.triggerWeblab(d,b.clientID)})};b.prototype.mark=function(a,b,d){var c=this;l(function(){var e=d&&m.isNonEmptyString(d.clientID)?d.clientID:void 0;c._metricRecorder.mark(a,b,e)})};b.prototype.error=function(a,b,d,h,g){var c=this;l(function(){c._errorRecorder.record(a,b,d,h,g)})};b.prototype._attachTelemetryToGlobalContext=function(){this._swGlobal.$TM=
this};return b}(n),M=!1,Ia=function(d){if(!d||"object"!==typeof d)throw p.create("InvalidForesterConfiguration");["channel","foresterEndpoint","marketplaceID","siteName","attribution"].forEach(function(b){b=d[b];if("string"!==typeof b||!b.length)throw p.create("InvalidForesterConfiguration");})};N.init=function(d){if(M)throw p.create("DuplicateLibraryInitialization");Ia(d.foresterConfig);ya();var b=d.swGlobal||self,a=d.foresterConfig;d=new ha(b,a);var c=new xa(b),e=new ja;K.initialize(b,e);a=new Da(b,
a,c);d=new Fa(c,d);new Ha(b,a,d);M=!0}})(this.ServiceWorkerTelemetry=this.ServiceWorkerTelemetry||{});var AUI_JS_DEBUG=!1;
(function(c){var a=this&&this.__assign||function(){a=Object.assign||function(a){for(var b,d=1,c=arguments.length;d<c;d++){b=arguments[d];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return a.apply(this,arguments)},f=a({marketplaceID:"ATVPDKIKX0DER",foresterEndpoint:"fls-na.amazon.com"},{channel:"jserr-rw",attribution:"RetailServiceWorker",siteName:self.location.hostname});c.foresterConfig=f})(this.ServiceWorkerTelemetryConfiguration=this.ServiceWorkerTelemetryConfiguration||{});/*

diff
5.2.0 <https://github.com/kpdecker/jsdiff>
BSD 3-Clause License

Copyright (c) 2009-2015, Kevin Decker <kpdecker@gmail.com>
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.

2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

3. Neither the name of the copyright holder nor the names of its
   contributors may be used to endorse or promote products derived from
   this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


*****************************

diff-match-patch
1.0.5 <https://github.com/JackuB/diff-match-patch>

                                 Apache License
                           Version 2.0, January 2004
                        http://www.apache.org/licenses/

   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

   1. Definitions.

      "License" shall mean the terms and conditions for use, reproduction,
      and distribution as defined by Sections 1 through 9 of this document.

      "Licensor" shall mean the copyright owner or entity authorized by
      the copyright owner that is granting the License.

      "Legal Entity" shall mean the union of the acting entity and all
      other entities that control, are controlled by, or are under common
      control with that entity. For the purposes of this definition,
      "control" means (i) the power, direct or indirect, to cause the
      direction or management of such entity, whether by contract or
      otherwise, or (ii) ownership of fifty percent (50%) or more of the
      outstanding shares, or (iii) beneficial ownership of such entity.

      "You" (or "Your") shall mean an individual or Legal Entity
      exercising permissions granted by this License.

      "Source" form shall mean the preferred form for making modifications,
      including but not limited to software source code, documentation
      source, and configuration files.

      "Object" form shall mean any form resulting from mechanical
      transformation or translation of a Source form, including but
      not limited to compiled object code, generated documentation,
      and conversions to other media types.

      "Work" shall mean the work of authorship, whether in Source or
      Object form, made available under the License, as indicated by a
      copyright notice that is included in or attached to the work
      (an example is provided in the Appendix below).

      "Derivative Works" shall mean any work, whether in Source or Object
      form, that is based on (or derived from) the Work and for which the
      editorial revisions, annotations, elaborations, or other modifications
      represent, as a whole, an original work of authorship. For the purposes
      of this License, Derivative Works shall not include works that remain
      separable from, or merely link (or bind by name) to the interfaces of,
      the Work and Derivative Works thereof.

      "Contribution" shall mean any work of authorship, including
      the original version of the Work and any modifications or additions
      to that Work or Derivative Works thereof, that is intentionally
      submitted to Licensor for inclusion in the Work by the copyright owner
      or by an individual or Legal Entity authorized to submit on behalf of
      the copyright owner. For the purposes of this definition, "submitted"
      means any form of electronic, verbal, or written communication sent
      to the Licensor or its representatives, including but not limited to
      communication on electronic mailing lists, source code control systems,
      and issue tracking systems that are managed by, or on behalf of, the
      Licensor for the purpose of discussing and improving the Work, but
      excluding communication that is conspicuously marked or otherwise
      designated in writing by the copyright owner as "Not a Contribution."

      "Contributor" shall mean Licensor and any individual or Legal Entity
      on behalf of whom a Contribution has been received by Licensor and
      subsequently incorporated within the Work.

   2. Grant of Copyright License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      copyright license to reproduce, prepare Derivative Works of,
      publicly display, publicly perform, sublicense, and distribute the
      Work and such Derivative Works in Source or Object form.

   3. Grant of Patent License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      (except as stated in this section) patent license to make, have made,
      use, offer to sell, sell, import, and otherwise transfer the Work,
      where such license applies only to those patent claims licensable
      by such Contributor that are necessarily infringed by their
      Contribution(s) alone or by combination of their Contribution(s)
      with the Work to which such Contribution(s) was submitted. If You
      institute patent litigation against any entity (including a
      cross-claim or counterclaim in a lawsuit) alleging that the Work
      or a Contribution incorporated within the Work constitutes direct
      or contributory patent infringement, then any patent licenses
      granted to You under this License for that Work shall terminate
      as of the date such litigation is filed.

   4. Redistribution. You may reproduce and distribute copies of the
      Work or Derivative Works thereof in any medium, with or without
      modifications, and in Source or Object form, provided that You
      meet the following conditions:

      (a) You must give any other recipients of the Work or
          Derivative Works a copy of this License; and

      (b) You must cause any modified files to carry prominent notices
          stating that You changed the files; and

      (c) You must retain, in the Source form of any Derivative Works
          that You distribute, all copyright, patent, trademark, and
          attribution notices from the Source form of the Work,
          excluding those notices that do not pertain to any part of
          the Derivative Works; and

      (d) If the Work includes a "NOTICE" text file as part of its
          distribution, then any Derivative Works that You distribute must
          include a readable copy of the attribution notices contained
          within such NOTICE file, excluding those notices that do not
          pertain to any part of the Derivative Works, in at least one
          of the following places: within a NOTICE text file distributed
          as part of the Derivative Works; within the Source form or
          documentation, if provided along with the Derivative Works; or,
          within a display generated by the Derivative Works, if and
          wherever such third-party notices normally appear. The contents
          of the NOTICE file are for informational purposes only and
          do not modify the License. You may add Your own attribution
          notices within Derivative Works that You distribute, alongside
          or as an addendum to the NOTICE text from the Work, provided
          that such additional attribution notices cannot be construed
          as modifying the License.

      You may add Your own copyright statement to Your modifications and
      may provide additional or different license terms and conditions
      for use, reproduction, or distribution of Your modifications, or
      for any such Derivative Works as a whole, provided Your use,
      reproduction, and distribution of the Work otherwise complies with
      the conditions stated in this License.

   5. Submission of Contributions. Unless You explicitly state otherwise,
      any Contribution intentionally submitted for inclusion in the Work
      by You to the Licensor shall be under the terms and conditions of
      this License, without any additional terms or conditions.
      Notwithstanding the above, nothing herein shall supersede or modify
      the terms of any separate license agreement you may have executed
      with Licensor regarding such Contributions.

   6. Trademarks. This License does not grant permission to use the trade
      names, trademarks, service marks, or product names of the Licensor,
      except as required for reasonable and customary use in describing the
      origin of the Work and reproducing the content of the NOTICE file.

   7. Disclaimer of Warranty. Unless required by applicable law or
      agreed to in writing, Licensor provides the Work (and each
      Contributor provides its Contributions) on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
      implied, including, without limitation, any warranties or conditions
      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
      PARTICULAR PURPOSE. You are solely responsible for determining the
      appropriateness of using or redistributing the Work and assume any
      risks associated with Your exercise of permissions under this License.

   8. Limitation of Liability. In no event and under no legal theory,
      whether in tort (including negligence), contract, or otherwise,
      unless required by applicable law (such as deliberate and grossly
      negligent acts) or agreed to in writing, shall any Contributor be
      liable to You for damages, including any direct, indirect, special,
      incidental, or consequential damages of any character arising as a
      result of this License or out of the use or inability to use the
      Work (including but not limited to damages for loss of goodwill,
      work stoppage, computer failure or malfunction, or any and all
      other commercial damages or losses), even if such Contributor
      has been advised of the possibility of such damages.

   9. Accepting Warranty or Additional Liability. While redistributing
      the Work or Derivative Works thereof, You may choose to offer,
      and charge a fee for, acceptance of support, warranty, indemnity,
      or other liability obligations and/or rights consistent with this
      License. However, in accepting such obligations, You may act only
      on Your own behalf and on Your sole responsibility, not on behalf
      of any other Contributor, and only if You agree to indemnify,
      defend, and hold each Contributor harmless for any liability
      incurred by, or claims asserted against, such Contributor by reason
      of your accepting any such warranty or additional liability.

   END OF TERMS AND CONDITIONS

   APPENDIX: How to apply the Apache License to your work.

      To apply the Apache License to your work, attach the following
      boilerplate notice, with the fields enclosed by brackets "[]"
      replaced with your own identifying information. (Don't include
      the brackets!)  The text should be enclosed in the appropriate
      comment syntax for the file format. We also recommend that a
      file or class name and description of purpose be included on the
      same "printed page" as the copyright notice for easier
      identification within third-party archives.

   Copyright [yyyy] [name of copyright owner]

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.*/
var ThirdPartyLibs=function(S){function Y(a){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Y(a)}function T(a,b,c,d,e){var f;b=b||[];c=c||[];d&&(a=d(e,a));for(f=0;f<b.length;f+=1)if(b[f]===a)return c[f];if("[object Array]"===Ga.call(a)){b.push(a);var g=Array(a.length);c.push(g);for(f=0;f<a.length;f+=1)g[f]=T(a[f],b,c,d,e);return b.pop(),
c.pop(),g}if(a&&a.toJSON&&(a=a.toJSON()),"object"===Y(a)&&null!==a){b.push(a);g={};c.push(g);var h;e=[];for(h in a)a.hasOwnProperty(h)&&e.push(h);e.sort();for(f=0;f<e.length;f+=1)g[h=e[f]]=T(a[h],b,c,d,h);b.pop();c.pop()}else g=a;return g}function ma(a,b){function c(a,b){for(var c=0;c<a.lines.length;c++){var d=a.lines[c],e=0<d.length?d[0]:" ";d=0<d.length?d.substr(1):d;if(" "===e||"-"===e){if(!q(b+1,g[b],e,d)&&++m>l)return!1;b++}}return!0}var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
{};if("string"==typeof b&&(b=(0,na.parsePatch)(b)),Array.isArray(b)){if(1<b.length)throw Error("applyPatch only works with a single input.");b=b[0]}for(var e,f,g=a.split(/\r\n|[\n\v\f\r\x85]/),h=a.match(/\r\n|[\n\v\f\r\x85]/g)||[],k=b.hunks,q=d.compareLine||function(a,b,c,d){return b===d},m=0,l=d.fuzzFactor||0,n=0,u=d=0;u<k.length;u++){var r=k[u],v=g.length-r.oldLines,t=0,w=d+r.oldStart-1;for(n=(0,Ha.default)(w,n,v);void 0!==t;t=n())if(c(r,w+t)){r.offset=d+=t;break}if(void 0===t)return!1;n=r.offset+
r.oldStart+r.oldLines}for(u=d=0;u<k.length;u++)for(r=k[u],t=r.oldStart+r.offset+d-1,d+=r.newLines-r.oldLines,w=0;w<r.lines.length;w++){v=r.lines[w];n=0<v.length?v[0]:" ";v=0<v.length?v.substr(1):v;var p=r.linedelimiters&&r.linedelimiters[w]||"\n";" "===n?t++:"-"===n?(g.splice(t,1),h.splice(t,1)):"+"===n?(g.splice(t,0,v),h.splice(t,0,p),t++):"\\"===n&&(n=r.lines[w-1]?r.lines[w-1][0]:null,"+"===n?e=!0:"-"===n&&(f=!0))}if(e)for(;!g[g.length-1];)g.pop(),h.pop();else f&&(g.push(""),h.push("\n"));for(e=
0;e<g.length-1;e++)g[e]+=h[e];return g.join("")}function Z(a){var b;(b=function(a){if(Array.isArray(a))return aa(a)}(a))||(b="undefined"!=typeof Symbol&&Symbol.iterator in Object(a)?Array.from(a):void 0);if(!(a=b||function(a,b){if(a){if("string"==typeof a)return aa(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);"Object"===c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return aa(a,
b)}}(a)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return a}function aa(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function oa(a,b,c,d,e,f,g){function h(a){return a.map(function(a){return" "+a})}g||(g={});void 0===g.context&&(g.context=4);var k=(0,Ia.diffLines)(c,d,g);if(k){k.push({value:"",lines:[]});for(var q=[],m=0,l=0,n=[],u=1,r=1,v=
function(a){var b=k[a],e=b.lines||b.value.replace(/\n$/,"").split("\n");if(b.lines=e,b.added||b.removed){var f;m||(a=k[a-1],m=u,l=r,a&&(n=0<g.context?h(a.lines.slice(-g.context)):[],m-=n.length,l-=n.length));(f=n).push.apply(f,Z(e.map(function(a){return(b.added?"+":"-")+a})));b.added?r+=e.length:u+=e.length}else{if(m)if(e.length<=2*g.context&&a<k.length-2){var x;(x=n).push.apply(x,Z(h(e)))}else{var t;f=Math.min(e.length,g.context);(t=n).push.apply(t,Z(h(e.slice(0,f))));f={oldStart:m,oldLines:u-m+
f,newStart:l,newLines:r-l+f,lines:n};a>=k.length-2&&e.length<=g.context&&(a=/\n$/.test(c),t=/\n$/.test(d),x=0==e.length&&n.length>f.oldLines,!a&&x&&0<c.length&&n.splice(f.oldLines,0,"\\ No newline at end of file"),(a||x)&&t||n.push("\\ No newline at end of file"));q.push(f);l=m=0;n=[]}u+=e.length;r+=e.length}},t=0;t<k.length;t++)v(t);return{oldFileName:a,newFileName:b,oldHeader:e,newHeader:f,hunks:q}}}function ba(a){if(Array.isArray(a))return a.map(ba).join("\n");var b=[];a.oldFileName==a.newFileName&&
b.push("Index: "+a.oldFileName);b.push("\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d");b.push("--- "+a.oldFileName+(void 0===a.oldHeader?"":"\t"+a.oldHeader));b.push("+++ "+a.newFileName+(void 0===a.newHeader?"":"\t"+a.newHeader));for(var c=0;c<a.hunks.length;c++){var d=a.hunks[c];
0===d.oldLines&&--d.oldStart;0===d.newLines&&--d.newStart;b.push("@@ -"+d.oldStart+","+d.oldLines+" +"+d.newStart+","+d.newLines+" @@");b.push.apply(b,d.lines)}return b.join("\n")+"\n"}function pa(a,b,c,d,e,f,g){return ba(oa(a,b,c,d,e,f,g))}function qa(a,b){if(b.length>a.length)return!1;for(var c=0;c<b.length;c++)if(b[c]!==a[c])return!1;return!0}function H(a){var b;(b=function(a){if(Array.isArray(a))return ca(a)}(a))||(b="undefined"!=typeof Symbol&&Symbol.iterator in Object(a)?Array.from(a):void 0);
if(!(a=b||function(a,b){if(a){if("string"==typeof a)return ca(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);"Object"===c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return ca(a,b)}}(a)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return a}function ca(a,b){(null==b||b>
a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function ra(a){var b=da(a.lines),c=b.oldLines;b=b.newLines;void 0!==c?a.oldLines=c:delete a.oldLines;void 0!==b?a.newLines=b:delete a.newLines}function sa(a,b){if("string"==typeof a){if(/^@@/m.test(a)||/^Index:/m.test(a))return(0,Ja.parsePatch)(a)[0];if(!b)throw Error("Must provide a base reference or pass in a patch");return(0,Ka.structuredPatch)(void 0,void 0,b,a)}return a}function U(a,b,c){return b===c?b:(a.conflict=!0,{mine:b,
theirs:c})}function ta(a,b){return{oldStart:a.oldStart,oldLines:a.oldLines,newStart:a.newStart+b,newLines:a.newLines,lines:a.lines}}function ua(a,b,c,d){var e;b=D(b);for(var f=[],g=[],h=0,k=!1,q=!1;h<b.length&&c.index<c.lines.length;){var m=c.lines[c.index],l=b[h];if("+"===l[0])break;if(k=k||" "!==m[0],g.push(l),h++,"+"===m[0])for(q=!0;"+"===m[0];)f.push(m),m=c.lines[++c.index];l.substr(1)===m.substr(1)?(f.push(m),c.index++):q=!0}"+"===(b[h]||"")[0]&&k&&(q=!0);if(q)c=f;else{for(;h<b.length;)g.push(b[h++]);
c={merged:g,changes:f}}c.merged?(e=a.lines).push.apply(e,H(c.merged)):ea(a,d?c:b,d?b:c)}function ea(a,b,c){a.conflict=!0;a.lines.push({conflict:!0,mine:b,theirs:c})}function va(a,b,c){for(;b.offset<c.offset&&b.index<b.lines.length;){var d=b.lines[b.index++];a.lines.push(d);b.offset++}}function wa(a,b){for(;b.index<b.lines.length;){var c=b.lines[b.index++];a.lines.push(c)}}function D(a){for(var b=[],c=a.lines[a.index][0];a.index<a.lines.length;){var d=a.lines[a.index];if("-"===c&&"+"===d[0]&&(c="+"),
c!==d[0])break;b.push(d);a.index++}return b}function xa(a){return a.reduce(function(a,c){return a&&"-"===c[0]},!0)}function ya(a,b,c){for(var d=0;d<c;d++){var e=b[b.length-c+d].substr(1);if(a.lines[a.index+d]!==" "+e)return!1}return a.index+=c,!0}function da(a){var b=0,c=0;return a.forEach(function(a){if("string"!=typeof a){var d=da(a.mine);a=da(a.theirs);void 0!==b&&(d.oldLines===a.oldLines?b+=d.oldLines:b=void 0);void 0!==c&&(d.newLines===a.newLines?c+=d.newLines:c=void 0)}else void 0===c||"+"!==
a[0]&&" "!==a[0]||c++,void 0===b||"-"!==a[0]&&" "!==a[0]||b++}),{oldLines:b,newLines:c}}function za(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,d)}return c}function Aa(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?za(Object(c),!0).forEach(function(b){var d=c[b];b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,
configurable:!0,writable:!0}):a[b]=d}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):za(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var l,I={};(l=function(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=.5;this.Match_Distance=1E3;this.Patch_DeleteThreshold=.5;this.Patch_Margin=4;this.Match_MaxBits=32}).Diff=function(a,b){return[a,b]};l.prototype.diff_main=function(a,b,c,
d){void 0===d&&(d=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1E3*this.Diff_Timeout);if(null==a||null==b)throw Error("Null input. (diff_main)");if(a==b)return a?[new l.Diff(0,a)]:[];void 0===c&&(c=!0);var e=c,f=this.diff_commonPrefix(a,b);c=a.substring(0,f);a=a.substring(f);b=b.substring(f);f=this.diff_commonSuffix(a,b);var g=a.substring(a.length-f);a=a.substring(0,a.length-f);b=b.substring(0,b.length-f);a=this.diff_compute_(a,b,e,d);return c&&a.unshift(new l.Diff(0,c)),g&&a.push(new l.Diff(0,
g)),this.diff_cleanupMerge(a),a};l.prototype.diff_compute_=function(a,b,c,d){var e;if(!a)return[new l.Diff(1,b)];if(!b)return[new l.Diff(-1,a)];var f=a.length>b.length?a:b,g=a.length>b.length?b:a,h=f.indexOf(g);return-1!=h?(e=[new l.Diff(1,f.substring(0,h)),new l.Diff(0,g),new l.Diff(1,f.substring(h+g.length))],a.length>b.length&&(e[0][0]=e[2][0]=-1),e):1==g.length?[new l.Diff(-1,a),new l.Diff(1,b)]:(e=this.diff_halfMatch_(a,b))?(b=e[1],f=e[3],a=e[4],e=this.diff_main(e[0],e[2],c,d),c=this.diff_main(b,
f,c,d),e.concat([new l.Diff(0,a)],c)):c&&100<a.length&&100<b.length?this.diff_lineMode_(a,b,d):this.diff_bisect_(a,b,d)};l.prototype.diff_lineMode_=function(a,b,c){var d=this.diff_linesToChars_(a,b);a=d.chars1;b=d.chars2;d=d.lineArray;a=this.diff_main(a,b,!1,c);this.diff_charsToLines_(a,d);this.diff_cleanupSemantic(a);a.push(new l.Diff(0,""));for(var e=d=b=0,f="",g="";b<a.length;){switch(a[b][0]){case 1:e++;g+=a[b][1];break;case -1:d++;f+=a[b][1];break;case 0:if(1<=d&&1<=e){a.splice(b-d-e,d+e);b=
b-d-e;d=this.diff_main(f,g,!1,c);for(e=d.length-1;0<=e;e--)a.splice(b,0,d[e]);b+=d.length}d=e=0;g=f=""}b++}return a.pop(),a};l.prototype.diff_bisect_=function(a,b,c){for(var d=a.length,e=b.length,f=Math.ceil((d+e)/2),g=2*f,h=Array(g),k=Array(g),q=0;q<g;q++)h[q]=-1,k[q]=-1;h[f+1]=0;k[f+1]=0;q=d-e;for(var m=0!=q%2,x=0,n=0,u=0,r=0,v=0;v<f&&!((new Date).getTime()>c);v++){for(var t=-v+x;t<=v-n;t+=2){for(var w=f+t,p=(B=t==-v||t!=v&&h[w-1]<h[w+1]?h[w+1]:h[w-1]+1)-t;B<d&&p<e&&a.charAt(B)==b.charAt(p);)B++,
p++;if(h[w]=B,B>d)n+=2;else if(p>e)x+=2;else if(m&&0<=(A=f+q-t)&&A<g&&-1!=k[A]&&B>=d-k[A])return this.diff_bisectSplit_(a,b,B,p,c)}for(t=-v+u;t<=v-r;t+=2){for(var y,A=f+t,G=(y=t==-v||t!=v&&k[A-1]<k[A+1]?k[A+1]:k[A-1]+1)-t;y<d&&G<e&&a.charAt(d-y-1)==b.charAt(e-G-1);)y++,G++;if(k[A]=y,y>d)r+=2;else if(G>e)u+=2;else if(!m){var B;if(0<=(w=f+q-t)&&w<g&&-1!=h[w]&&(p=f+(B=h[w])-w,B>=d-y))return this.diff_bisectSplit_(a,b,B,p,c)}}}return[new l.Diff(-1,a),new l.Diff(1,b)]};l.prototype.diff_bisectSplit_=function(a,
b,c,d,e){var f=a.substring(0,c),g=b.substring(0,d);a=a.substring(c);b=b.substring(d);f=this.diff_main(f,g,!1,e);e=this.diff_main(a,b,!1,e);return f.concat(e)};l.prototype.diff_linesToChars_=function(a,b){function c(a){for(var b="",c=0,g=-1,m=d.length;g<a.length-1;){-1==(g=a.indexOf("\n",c))&&(g=a.length-1);var l=a.substring(c,g+1);(e.hasOwnProperty?e.hasOwnProperty(l):void 0!==e[l])?b+=String.fromCharCode(e[l]):(m==f&&(l=a.substring(c),g=a.length),b+=String.fromCharCode(m),e[l]=m,d[m++]=l);c=g+1}return b}
var d=[],e={};d[0]="";var f=4E4;a=c(a);return f=65535,{chars1:a,chars2:c(b),lineArray:d}};l.prototype.diff_charsToLines_=function(a,b){for(var c=0;c<a.length;c++){for(var d=a[c][1],e=[],f=0;f<d.length;f++)e[f]=b[d.charCodeAt(f)];a[c][1]=e.join("")}};l.prototype.diff_commonPrefix=function(a,b){if(!a||!b||a.charAt(0)!=b.charAt(0))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;c<e;)a.substring(f,e)==b.substring(f,e)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e};l.prototype.diff_commonSuffix=
function(a,b){if(!a||!b||a.charAt(a.length-1)!=b.charAt(b.length-1))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;c<e;)a.substring(a.length-e,a.length-f)==b.substring(b.length-e,b.length-f)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e};l.prototype.diff_commonOverlap_=function(a,b){var c=a.length,d=b.length;if(0==c||0==d)return 0;c>d?a=a.substring(c-d):c<d&&(b=b.substring(0,c));c=Math.min(c,d);if(a==b)return c;d=0;for(var e=1;;){var f=a.substring(c-e);f=b.indexOf(f);if(-1==f)return d;e+=
f;0!=f&&a.substring(c-e)!=b.substring(0,e)||(d=e,e++)}};l.prototype.diff_halfMatch_=function(a,b){function c(a,b,c){for(var d,e,g,k,h=a.substring(c,c+Math.floor(a.length/4)),m=-1,l="";-1!=(m=b.indexOf(h,m+1));){var q=f.diff_commonPrefix(a.substring(c),b.substring(m)),n=f.diff_commonSuffix(a.substring(0,c),b.substring(0,m));l.length<n+q&&(l=b.substring(m-n,m)+b.substring(m,m+q),d=a.substring(0,c-n),e=a.substring(c+q),g=b.substring(0,m-n),k=b.substring(m+q))}return 2*l.length>=a.length?[d,e,g,k,l]:
null}if(0>=this.Diff_Timeout)return null;var d=a.length>b.length?a:b,e=a.length>b.length?b:a;if(4>d.length||2*e.length<d.length)return null;var f=this,g,h,k,q,m,l=c(d,e,Math.ceil(d.length/4));d=c(d,e,Math.ceil(d.length/2));return l||d?(g=d?l&&l[4].length>d[4].length?l:d:l,a.length>b.length?(h=g[0],k=g[1],q=g[2],m=g[3]):(q=g[0],m=g[1],h=g[2],k=g[3]),[h,k,q,m,g[4]]):null};l.prototype.diff_cleanupSemantic=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=0,h=0,k=0,q=0;f<a.length;)0==a[f][0]?(c[d++]=f,g=
k,h=q,k=0,q=0,e=a[f][1]):(1==a[f][0]?k+=a[f][1].length:q+=a[f][1].length,e&&e.length<=Math.max(g,h)&&e.length<=Math.max(k,q)&&(a.splice(c[d-1],0,new l.Diff(-1,e)),a[c[d-1]+1][0]=1,d--,f=0<--d?c[d-1]:-1,g=0,h=0,k=0,q=0,e=null,b=!0)),f++;b&&this.diff_cleanupMerge(a);this.diff_cleanupSemanticLossless(a);for(f=1;f<a.length;)-1==a[f-1][0]&&1==a[f][0]&&(b=a[f-1][1],c=a[f][1],d=this.diff_commonOverlap_(b,c),e=this.diff_commonOverlap_(c,b),d>=e?(d>=b.length/2||d>=c.length/2)&&(a.splice(f,0,new l.Diff(0,c.substring(0,
d))),a[f-1][1]=b.substring(0,b.length-d),a[f+1][1]=c.substring(d),f++):(e>=b.length/2||e>=c.length/2)&&(a.splice(f,0,new l.Diff(0,b.substring(0,e))),a[f-1][0]=1,a[f-1][1]=c.substring(0,c.length-e),a[f+1][0]=-1,a[f+1][1]=b.substring(e),f++),f++),f++};l.prototype.diff_cleanupSemanticLossless=function(a){function b(a,b){if(!a||!b)return 6;var c=a.charAt(a.length-1),d=b.charAt(0),e=c.match(l.nonAlphaNumericRegex_),f=d.match(l.nonAlphaNumericRegex_),g=e&&c.match(l.whitespaceRegex_),k=f&&d.match(l.whitespaceRegex_);
c=g&&c.match(l.linebreakRegex_);d=k&&d.match(l.linebreakRegex_);a=c&&a.match(l.blanklineEndRegex_);b=d&&b.match(l.blanklineStartRegex_);return a||b?5:c||d?4:e&&!g&&k?3:g||k?2:e||f?1:0}for(var c=1;c<a.length-1;){if(0==a[c-1][0]&&0==a[c+1][0]){var d=a[c-1][1],e=a[c][1],f=a[c+1][1],g=this.diff_commonSuffix(d,e);if(g){var h=e.substring(e.length-g);d=d.substring(0,d.length-g);e=h+e.substring(0,e.length-g);f=h+f}g=d;h=e;for(var k=f,q=b(d,e)+b(e,f);e.charAt(0)===f.charAt(0);){d+=e.charAt(0);e=e.substring(1)+
f.charAt(0);f=f.substring(1);var m=b(d,e)+b(e,f);m>=q&&(q=m,g=d,h=e,k=f)}a[c-1][1]!=g&&(g?a[c-1][1]=g:(a.splice(c-1,1),c--),a[c][1]=h,k?a[c+1][1]=k:(a.splice(c+1,1),c--))}c++}};l.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;l.whitespaceRegex_=/\s/;l.linebreakRegex_=/[\r\n]/;l.blanklineEndRegex_=/\n\r?\n$/;l.blanklineStartRegex_=/^\r?\n\r?\n/;l.prototype.diff_cleanupEfficiency=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=!1,h=!1,k=!1,q=!1;f<a.length;)0==a[f][0]?(a[f][1].length<this.Diff_EditCost&&(k||q)?
(c[d++]=f,g=k,h=q,e=a[f][1]):(d=0,e=null),k=q=!1):(-1==a[f][0]?q=!0:k=!0,e&&(g&&h&&k&&q||e.length<this.Diff_EditCost/2&&3==g+h+k+q)&&(a.splice(c[d-1],0,new l.Diff(-1,e)),a[c[d-1]+1][0]=1,d--,e=null,g&&h?(k=q=!0,d=0):(f=0<--d?c[d-1]:-1,k=q=!1),b=!0)),f++;b&&this.diff_cleanupMerge(a)};l.prototype.diff_cleanupMerge=function(a){a.push(new l.Diff(0,""));for(var b,c=0,d=0,e=0,f="",g="";c<a.length;)switch(a[c][0]){case 1:e++;g+=a[c][1];c++;break;case -1:d++;f+=a[c][1];c++;break;case 0:1<d+e?(0!==d&&0!==
e&&(0!==(b=this.diff_commonPrefix(g,f))&&(0<c-d-e&&0==a[c-d-e-1][0]?a[c-d-e-1][1]+=g.substring(0,b):(a.splice(0,0,new l.Diff(0,g.substring(0,b))),c++),g=g.substring(b),f=f.substring(b)),0!==(b=this.diff_commonSuffix(g,f))&&(a[c][1]=g.substring(g.length-b)+a[c][1],g=g.substring(0,g.length-b),f=f.substring(0,f.length-b))),c-=d+e,a.splice(c,d+e),f.length&&(a.splice(c,0,new l.Diff(-1,f)),c++),g.length&&(a.splice(c,0,new l.Diff(1,g)),c++),c++):0!==c&&0==a[c-1][0]?(a[c-1][1]+=a[c][1],a.splice(c,1)):c++,
d=e=0,g=f=""}""===a[a.length-1][1]&&a.pop();b=!1;for(c=1;c<a.length-1;)0==a[c-1][0]&&0==a[c+1][0]&&(a[c][1].substring(a[c][1].length-a[c-1][1].length)==a[c-1][1]?(a[c][1]=a[c-1][1]+a[c][1].substring(0,a[c][1].length-a[c-1][1].length),a[c+1][1]=a[c-1][1]+a[c+1][1],a.splice(c-1,1),b=!0):a[c][1].substring(0,a[c+1][1].length)==a[c+1][1]&&(a[c-1][1]+=a[c+1][1],a[c][1]=a[c][1].substring(a[c+1][1].length)+a[c+1][1],a.splice(c+1,1),b=!0)),c++;b&&this.diff_cleanupMerge(a)};l.prototype.diff_xIndex=function(a,
b){var c,d=0,e=0,f=0,g=0;for(c=0;c<a.length&&(1!==a[c][0]&&(d+=a[c][1].length),-1!==a[c][0]&&(e+=a[c][1].length),!(d>b));c++)f=d,g=e;return a.length!=c&&-1===a[c][0]?g:g+(b-f)};l.prototype.diff_prettyHtml=function(a){for(var b=[],c=/&/g,d=/</g,e=/>/g,f=/\n/g,g=0;g<a.length;g++){var h=a[g][0],k=a[g][1].replace(c,"\x26amp;").replace(d,"\x26lt;").replace(e,"\x26gt;").replace(f,"\x26para;\x3cbr\x3e");switch(h){case 1:b[g]='\x3cins style\x3d"background:#e6ffe6;"\x3e'+k+"\x3c/ins\x3e";break;case -1:b[g]=
'\x3cdel style\x3d"background:#ffe6e6;"\x3e'+k+"\x3c/del\x3e";break;case 0:b[g]="\x3cspan\x3e"+k+"\x3c/span\x3e"}}return b.join("")};l.prototype.diff_text1=function(a){for(var b=[],c=0;c<a.length;c++)1!==a[c][0]&&(b[c]=a[c][1]);return b.join("")};l.prototype.diff_text2=function(a){for(var b=[],c=0;c<a.length;c++)-1!==a[c][0]&&(b[c]=a[c][1]);return b.join("")};l.prototype.diff_levenshtein=function(a){for(var b=0,c=0,d=0,e=0;e<a.length;e++){var f=a[e][1];switch(a[e][0]){case 1:c+=f.length;break;case -1:d+=
f.length;break;case 0:b+=Math.max(c,d),d=c=0}}return b+Math.max(c,d)};l.prototype.diff_toDelta=function(a){for(var b=[],c=0;c<a.length;c++)switch(a[c][0]){case 1:b[c]="+"+encodeURI(a[c][1]);break;case -1:b[c]="-"+a[c][1].length;break;case 0:b[c]="\x3d"+a[c][1].length}return b.join("\t").replace(/%20/g," ")};l.prototype.diff_fromDelta=function(a,b){var c=[],d=0,e=0;b=b.split(/\t/g);for(var f=0;f<b.length;f++){var g=b[f].substring(1);switch(b[f].charAt(0)){case "+":try{c[d++]=new l.Diff(1,decodeURI(g))}catch(k){throw Error("Illegal escape in diff_fromDelta: "+
g);}break;case "-":case "\x3d":var h=parseInt(g,10);if(isNaN(h)||0>h)throw Error("Invalid number in diff_fromDelta: "+g);g=a.substring(e,e+=h);"\x3d"==b[f].charAt(0)?c[d++]=new l.Diff(0,g):c[d++]=new l.Diff(-1,g);break;default:if(b[f])throw Error("Invalid diff operation in diff_fromDelta: "+b[f]);}}if(e!=a.length)throw Error("Delta length ("+e+") does not equal source text length ("+a.length+").");return c};l.prototype.match_main=function(a,b,c){if(null==a||null==b||null==c)throw Error("Null input. (match_main)");
return c=Math.max(0,Math.min(c,a.length)),a==b?0:a.length?a.substring(c,c+b.length)==b?c:this.match_bitap_(a,b,c):-1};l.prototype.match_bitap_=function(a,b,c){function d(a,d){a/=b.length;d=Math.abs(c-d);return f.Match_Distance?a+d/f.Match_Distance:d?1:a}if(b.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var e=this.match_alphabet_(b),f=this,g=this.Match_Threshold,h=a.indexOf(b,c);-1!=h&&(g=Math.min(d(0,h),g),-1!=(h=a.lastIndexOf(b,c+b.length))&&(g=Math.min(d(0,h),g)));
var k,l=1<<b.length-1;h=-1;for(var m,x=b.length+a.length,n=0;n<b.length;n++){var u=0;for(k=x;u<k;)d(n,c+k)<=g?u=k:x=k,k=Math.floor((x-u)/2+u);x=k;u=Math.max(1,c-k+1);var r=Math.min(c+k,a.length)+b.length;k=Array(r+2);for(k[r+1]=(1<<n)-1;r>=u;r--){var p=e[a.charAt(r-1)];if(k[r]=0===n?(k[r+1]<<1|1)&p:(k[r+1]<<1|1)&p|(m[r+1]|m[r])<<1|1|m[r+1],k[r]&l)if(p=d(n,r-1),p<=g){if(g=p,!((h=r-1)>c))break;u=Math.max(1,2*c-h)}}if(d(n+1,c)>g)break;m=k}return h};l.prototype.match_alphabet_=function(a){for(var b={},
c=0;c<a.length;c++)b[a.charAt(c)]=0;for(c=0;c<a.length;c++)b[a.charAt(c)]|=1<<a.length-c-1;return b};l.prototype.patch_addContext_=function(a,b){if(0!=b.length){if(null===a.start2)throw Error("patch not initialized");for(var c=b.substring(a.start2,a.start2+a.length1),d=0;b.indexOf(c)!=b.lastIndexOf(c)&&c.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)d+=this.Patch_Margin,c=b.substring(a.start2-d,a.start2+a.length1+d);d+=this.Patch_Margin;(c=b.substring(a.start2-d,a.start2))&&a.diffs.unshift(new l.Diff(0,
c));(b=b.substring(a.start2+a.length1,a.start2+a.length1+d))&&a.diffs.push(new l.Diff(0,b));a.start1-=c.length;a.start2-=c.length;a.length1+=c.length+b.length;a.length2+=c.length+b.length}};l.prototype.patch_make=function(a,b,c){var d;if("string"==typeof a&&"string"==typeof b&&void 0===c){var e=a;2<(d=this.diff_main(e,b,!0)).length&&(this.diff_cleanupSemantic(d),this.diff_cleanupEfficiency(d))}else if(a&&"object"==typeof a&&void 0===b&&void 0===c)d=a,e=this.diff_text1(d);else if("string"==typeof a&&
b&&"object"==typeof b&&void 0===c)e=a,d=b;else{if("string"!=typeof a||"string"!=typeof b||!c||"object"!=typeof c)throw Error("Unknown call format to patch_make.");e=a;d=c}if(0===d.length)return[];b=[];c=new l.patch_obj;for(var f=a=0,g=0,h=e,k=0;k<d.length;k++){var q=d[k][0],m=d[k][1];switch(a||0===q||(c.start1=f,c.start2=g),q){case 1:c.diffs[a++]=d[k];c.length2+=m.length;e=e.substring(0,g)+m+e.substring(g);break;case -1:c.length1+=m.length;c.diffs[a++]=d[k];e=e.substring(0,g)+e.substring(g+m.length);
break;case 0:m.length<=2*this.Patch_Margin&&a&&d.length!=k+1?(c.diffs[a++]=d[k],c.length1+=m.length,c.length2+=m.length):m.length>=2*this.Patch_Margin&&a&&(this.patch_addContext_(c,h),b.push(c),c=new l.patch_obj,a=0,h=e,f=g)}1!==q&&(f+=m.length);-1!==q&&(g+=m.length)}return a&&(this.patch_addContext_(c,h),b.push(c)),b};l.prototype.patch_deepCopy=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=new l.patch_obj;e.diffs=[];for(var f=0;f<d.diffs.length;f++)e.diffs[f]=new l.Diff(d.diffs[f][0],
d.diffs[f][1]);e.start1=d.start1;e.start2=d.start2;e.length1=d.length1;e.length2=d.length2;b[c]=e}return b};l.prototype.patch_apply=function(a,b){if(0==a.length)return[b,[]];a=this.patch_deepCopy(a);var c=this.patch_addPadding(a);b=c+b+c;this.patch_splitMax(a);for(var d=0,e=[],f=0;f<a.length;f++){var g;var h=a[f].start2+d;var k=this.diff_text1(a[f].diffs),l=-1;if(k.length>this.Match_MaxBits?-1!=(g=this.match_main(b,k.substring(0,this.Match_MaxBits),h))&&(-1==(l=this.match_main(b,k.substring(k.length-
this.Match_MaxBits),h+k.length-this.Match_MaxBits))||g>=l)&&(g=-1):g=this.match_main(b,k,h),-1==g)e[f]=!1,d-=a[f].length2-a[f].length1;else if(e[f]=!0,d=g-h,k==(h=-1==l?b.substring(g,g+k.length):b.substring(g,l+this.Match_MaxBits)))b=b.substring(0,g)+this.diff_text2(a[f].diffs)+b.substring(g+k.length);else if(h=this.diff_main(k,h,!1),k.length>this.Match_MaxBits&&this.diff_levenshtein(h)/k.length>this.Patch_DeleteThreshold)e[f]=!1;else{this.diff_cleanupSemanticLossless(h);var m;for(l=k=0;l<a[f].diffs.length;l++){var x=
a[f].diffs[l];0!==x[0]&&(m=this.diff_xIndex(h,k));1===x[0]?b=b.substring(0,g+m)+x[1]+b.substring(g+m):-1===x[0]&&(b=b.substring(0,g+m)+b.substring(g+this.diff_xIndex(h,k+x[1].length)));-1!==x[0]&&(k+=x[1].length)}}}return[b.substring(c.length,b.length-c.length),e]};l.prototype.patch_addPadding=function(a){for(var b=this.Patch_Margin,c="",d=1;d<=b;d++)c+=String.fromCharCode(d);for(d=0;d<a.length;d++)a[d].start1+=b,a[d].start2+=b;d=a[0];var e=d.diffs;if(0==e.length||0!=e[0][0])e.unshift(new l.Diff(0,
c)),d.start1-=b,d.start2-=b,d.length1+=b,d.length2+=b;else if(b>e[0][1].length){var f=b-e[0][1].length;e[0][1]=c.substring(e[0][1].length)+e[0][1];d.start1-=f;d.start2-=f;d.length1+=f;d.length2+=f}return 0==(e=(d=a[a.length-1]).diffs).length||0!=e[e.length-1][0]?(e.push(new l.Diff(0,c)),d.length1+=b,d.length2+=b):b>e[e.length-1][1].length&&(f=b-e[e.length-1][1].length,e[e.length-1][1]+=c.substring(0,f),d.length1+=f,d.length2+=f),c};l.prototype.patch_splitMax=function(a){for(var b=this.Match_MaxBits,
c=0;c<a.length;c++)if(!(a[c].length1<=b)){var d=a[c];a.splice(c--,1);for(var e=d.start1,f=d.start2,g="";0!==d.diffs.length;){var h=new l.patch_obj,k=!0;h.start1=e-g.length;h.start2=f-g.length;for(""!==g&&(h.length1=h.length2=g.length,h.diffs.push(new l.Diff(0,g)));0!==d.diffs.length&&h.length1<b-this.Patch_Margin;){var q=d.diffs[0][0],m=d.diffs[0][1];1===q?(h.length2+=m.length,f+=m.length,h.diffs.push(d.diffs.shift()),k=!1):-1===q&&1==h.diffs.length&&0==h.diffs[0][0]&&m.length>2*b?(h.length1+=m.length,
e+=m.length,k=!1,h.diffs.push(new l.Diff(q,m)),d.diffs.shift()):(m=m.substring(0,b-h.length1-this.Patch_Margin),h.length1+=m.length,e+=m.length,0===q?(h.length2+=m.length,f+=m.length):k=!1,h.diffs.push(new l.Diff(q,m)),m==d.diffs[0][1]?d.diffs.shift():d.diffs[0][1]=d.diffs[0][1].substring(m.length))}g=(g=this.diff_text2(h.diffs)).substring(g.length-this.Patch_Margin);q=this.diff_text1(d.diffs).substring(0,this.Patch_Margin);""!==q&&(h.length1+=q.length,h.length2+=q.length,0!==h.diffs.length&&0===
h.diffs[h.diffs.length-1][0]?h.diffs[h.diffs.length-1][1]+=q:h.diffs.push(new l.Diff(0,q)));k||a.splice(++c,0,h)}}};l.prototype.patch_toText=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b.join("")};l.prototype.patch_fromText=function(a){var b=[];if(!a)return b;a=a.split("\n");for(var c=0,d=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;c<a.length;){var e=a[c].match(d);if(!e)throw Error("Invalid patch string: "+a[c]);var f=new l.patch_obj;b.push(f);f.start1=parseInt(e[1],10);""===e[2]?(f.start1--,
f.length1=1):"0"==e[2]?f.length1=0:(f.start1--,f.length1=parseInt(e[2],10));f.start2=parseInt(e[3],10);""===e[4]?(f.start2--,f.length2=1):"0"==e[4]?f.length2=0:(f.start2--,f.length2=parseInt(e[4],10));for(c++;c<a.length;){e=a[c].charAt(0);try{var g=decodeURI(a[c].substring(1))}catch(h){throw Error("Illegal escape in patch_fromText: "+g);}if("-"==e)f.diffs.push(new l.Diff(-1,g));else if("+"==e)f.diffs.push(new l.Diff(1,g));else if(" "==e)f.diffs.push(new l.Diff(0,g));else{if("@"==e)break;if(""!==e)throw Error('Invalid patch mode "'+
e+'" in: '+g);}c++}}return b};(l.patch_obj=function(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0}).prototype.toString=function(){for(var a,b=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],c=0;c<this.diffs.length;c++){switch(this.diffs[c][0]){case 1:a="+";break;case -1:a="-";break;case 0:a=" "}b[c+1]=a+encodeURI(this.diffs[c][1])+
"\n"}return b.join("").replace(/%20/g," ")};I=l;I.diff_match_patch=l;I.DIFF_DELETE=-1;I.DIFF_INSERT=1;I.DIFF_EQUAL=0;var Ba={},p={};!function(a){function b(){}function c(a,b,c,g,h){for(var d,e=[];b;)e.push(b),d=b.previousComponent,delete b.previousComponent,b=d;e.reverse();d=0;b=e.length;for(var f=0,l=0;d<b;d++){var n=e[d];if(n.removed){if(n.value=a.join(g.slice(l,l+n.count)),l+=n.count,d&&e[d-1].added)n=e[d-1],e[d-1]=e[d],e[d]=n}else{if(!n.added&&h){var p=c.slice(f,f+n.count);p=p.map(function(a,
b){b=g[l+b];return b.length>a.length?b:a});n.value=a.join(p)}else n.value=a.join(c.slice(f,f+n.count));f+=n.count;n.added||(l+=n.count)}}c=e[b-1];return 1<b&&"string"==typeof c.value&&(c.added||c.removed)&&a.equals("",c.value)&&(e[b-2].value+=c.value,e.pop()),e}Object.defineProperty(a,"__esModule",{value:!0});a.default=b;b.prototype={diff:function(a,b){function d(a){return l?(setTimeout(function(){l(void 0,a)},0),!0):a}function e(){for(var e=Math.max(z,-u);e<=Math.min(y,u);e+=2){var f=void 0,g=t[e-
1],h=t[e+1];g&&(t[e-1]=void 0);var k=!1;h&&(k=h.oldPos-e,k=h&&0<=k&&k<p);var l=g&&g.oldPos+1<n;if(k||l){if(f=!l||k&&g.oldPos+1<h.oldPos?m.addToPath(h,!0,void 0,0):m.addToPath(g,void 0,!0,1),w=m.extractCommon(f,b,a,e),f.oldPos+1>=n&&w+1>=p)return d(c(m,f.lastComponent,b,a,m.useLongestToken));t[e]=f;f.oldPos+1>=n&&(y=Math.min(y,e-1));w+1>=p&&(z=Math.max(z,e+1))}else t[e]=void 0}u++}var h,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},l=k.callback;"function"==typeof k&&(l=k,k={});this.options=
k;var m=this;a=this.castInput(a);b=this.castInput(b);a=this.removeEmpty(this.tokenize(a));var p=(b=this.removeEmpty(this.tokenize(b))).length,n=a.length,u=1,r=p+n;k.maxEditLength&&(r=Math.min(r,k.maxEditLength));k=null!==(h=k.timeout)&&void 0!==h?h:1/0;var v=Date.now()+k,t=[{oldPos:-1,lastComponent:void 0}],w=this.extractCommon(t[0],b,a,0);if(t[0].oldPos+1>=n&&w+1>=p)return d([{value:this.join(b),count:b.length}]);var z=-1/0,y=1/0;if(l)!function G(){setTimeout(function(){if(u>r||Date.now()>v)return l();
e()||G()},0)}();else for(;u<=r&&Date.now()<=v;)if(h=e())return h},addToPath:function(a,b,c,g){var d=a.lastComponent;return d&&d.added===b&&d.removed===c?{oldPos:a.oldPos+g,lastComponent:{count:d.count+1,added:b,removed:c,previousComponent:d.previousComponent}}:{oldPos:a.oldPos+g,lastComponent:{count:1,added:b,removed:c,previousComponent:d}}},extractCommon:function(a,b,c,g){var d=b.length,e=c.length,f=a.oldPos;g=f-g;for(var l=0;g+1<d&&f+1<e&&this.equals(b[g+1],c[f+1]);)g++,f++,l++;return l&&(a.lastComponent=
{count:l,previousComponent:a.lastComponent}),a.oldPos=f,g},equals:function(a,b){return this.options.comparator?this.options.comparator(a,b):a===b||this.options.ignoreCase&&a.toLowerCase()===b.toLowerCase()},removeEmpty:function(a){for(var b=[],c=0;c<a.length;c++)a[c]&&b.push(a[c]);return b},castInput:function(a){return a},tokenize:function(a){return a.split("")},join:function(a){return a.join("")}}}(p);var L={};Object.defineProperty(L,"__esModule",{value:!0});L.diffChars=function(a,b,c){return Ca.diff(a,
b,c)};L.characterDiff=void 0;var Ca=new (p&&p.__esModule?p:{default:p}).default;L.characterDiff=Ca;var J={},z={};Object.defineProperty(z,"__esModule",{value:!0});z.generateOptions=function(a,b){if("function"==typeof a)b.callback=a;else if(a)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b};Object.defineProperty(J,"__esModule",{value:!0});J.diffWords=function(a,b,c){return c=(0,La.generateOptions)(c,{ignoreWhitespace:!0}),M.diff(a,b,c)};J.diffWordsWithSpace=function(a,b,c){return M.diff(a,
b,c)};J.wordDiff=void 0;var La=z,Da=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Ea=/\S/,M=new (p&&p.__esModule?p:{default:p}).default;J.wordDiff=M;M.equals=function(a,b){return this.options.ignoreCase&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b||this.options.ignoreWhitespace&&!Ea.test(a)&&!Ea.test(b)};M.tokenize=function(a){a=a.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(var b=0;b<a.length-1;b++)!a[b+1]&&a[b+2]&&Da.test(a[b])&&Da.test(a[b+2])&&(a[b]+=a[b+2],a.splice(b+1,2),b--);
return a};var C={};Object.defineProperty(C,"__esModule",{value:!0});C.diffLines=function(a,b,c){return V.diff(a,b,c)};C.diffTrimmedLines=function(a,b,c){c=(0,Ma.generateOptions)(c,{ignoreWhitespace:!0});return V.diff(a,b,c)};C.lineDiff=void 0;var Ma=z,V=new (p&&p.__esModule?p:{default:p}).default;C.lineDiff=V;V.tokenize=function(a){this.options.stripTrailingCr&&(a=a.replace(/\r\n/g,"\n"));var b=[];a=a.split(/(\n|\r\n)/);a[a.length-1]||a.pop();for(var c=0;c<a.length;c++){var d=a[c];c%2&&!this.options.newlineIsToken?
b[b.length-1]+=d:(this.options.ignoreWhitespace&&(d=d.trim()),b.push(d))}return b};var N={};Object.defineProperty(N,"__esModule",{value:!0});N.diffSentences=function(a,b,c){return fa.diff(a,b,c)};N.sentenceDiff=void 0;var fa=new (p&&p.__esModule?p:{default:p}).default;N.sentenceDiff=fa;fa.tokenize=function(a){return a.split(/(\S.+?[.!?])(?=\s+|$)/)};var O={};Object.defineProperty(O,"__esModule",{value:!0});O.diffCss=function(a,b,c){return ha.diff(a,b,c)};O.cssDiff=void 0;var ha=new (p&&p.__esModule?
p:{default:p}).default;O.cssDiff=ha;ha.tokenize=function(a){return a.split(/([{}:;,]|\s+)/)};var K={};Object.defineProperty(K,"__esModule",{value:!0});K.diffJson=function(a,b,c){return E.diff(a,b,c)};K.canonicalize=T;K.jsonDiff=void 0;var Fa=p&&p.__esModule?p:{default:p},Ga=Object.prototype.toString,E=new Fa.default;K.jsonDiff=E;E.useLongestToken=!0;E.tokenize=C.lineDiff.tokenize;E.castInput=function(a){var b=this.options,c=b.undefinedReplacement;b=b.stringifyReplacer;b=void 0===b?function(a,b){return void 0===
b?c:b}:b;return"string"==typeof a?a:JSON.stringify(T(a,null,null,b),b,"  ")};E.equals=function(a,b){return Fa.default.prototype.equals.call(E,a.replace(/,([\r\n])/g,"$1"),b.replace(/,([\r\n])/g,"$1"))};var P={};Object.defineProperty(P,"__esModule",{value:!0});P.diffArrays=function(a,b,c){return Q.diff(a,b,c)};P.arrayDiff=void 0;var Q=new (p&&p.__esModule?p:{default:p}).default;P.arrayDiff=Q;Q.tokenize=function(a){return a.slice()};Q.join=Q.removeEmpty=function(a){return a};var W={},R={};Object.defineProperty(R,
"__esModule",{value:!0});R.parsePatch=function(a){function b(){var a={};for(h.push(a);k<f.length;){var b=f[k];if(/^(\-\-\-|\+\+\+|@@)\s/.test(b))break;(b=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(b))&&(a.index=b[1]);k++}c(a);c(a);for(a.hunks=[];k<f.length;){b=f[k];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(b))break;if(/^@@/.test(b))a.hunks.push(d());else{if(b&&e.strict)throw Error("Unknown line "+(k+1)+" "+JSON.stringify(b));k++}}}function c(a){var b=/^(---|\+\+\+)\s+(.*)$/.exec(f[k]);if(b){var c=
"---"===b[1]?"old":"new";b=b[2].split("\t",2);var d=b[0].replace(/\\\\/g,"\\");/^".*"$/.test(d)&&(d=d.substr(1,d.length-2));a[c+"FileName"]=d;a[c+"Header"]=(b[1]||"").trim();k++}}function d(){var a=k,b=f[k++].split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/);b={oldStart:+b[1],oldLines:void 0===b[2]?1:+b[2],newStart:+b[3],newLines:void 0===b[4]?1:+b[4],lines:[],linedelimiters:[]};0===b.oldLines&&(b.oldStart+=1);0===b.newLines&&(b.newStart+=1);for(var c=0,d=0;k<f.length&&!(0===f[k].indexOf("--- ")&&
k+2<f.length&&0===f[k+1].indexOf("+++ ")&&0===f[k+2].indexOf("@@"));k++){var h=0==f[k].length&&k!=f.length-1?" ":f[k][0];if("+"!==h&&"-"!==h&&" "!==h&&"\\"!==h)break;b.lines.push(f[k]);b.linedelimiters.push(g[k]||"\n");"+"===h?c++:"-"===h?d++:" "===h&&(c++,d++)}if(c||1!==b.newLines||(b.newLines=0),d||1!==b.oldLines||(b.oldLines=0),e.strict){if(c!==b.newLines)throw Error("Added line count did not match for hunk at line "+(a+1));if(d!==b.oldLines)throw Error("Removed line count did not match for hunk at line "+
(a+1));}return b}for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=a.split(/\r\n|[\n\v\f\r\x85]/),g=a.match(/\r\n|[\n\v\f\r\x85]/g)||[],h=[],k=0;k<f.length;)b();return h};z={};!function(a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,c,d){var b=!0,f=!1,g=!1,h=1;return function q(){if(b&&!g){if(f?h++:b=!1,a+h<=d)return h;g=!0}if(!f)return g||(b=!0),c<=a-h?-h++:(f=!0,q())}}}(z);Object.defineProperty(W,"__esModule",{value:!0});W.applyPatch=ma;W.applyPatches=
function(a,b){"string"==typeof a&&(a=(0,na.parsePatch)(a));var c=0;!function e(){var f=a[c++];if(!f)return b.complete();b.loadFile(f,function(a,c){if(a)return b.complete(a);a=ma(c,f,b);b.patched(f,a,function(a){if(a)return b.complete(a);e()})})}()};var na=R,Ha=z&&z.__esModule?z:{default:z},X={},F={};Object.defineProperty(F,"__esModule",{value:!0});F.structuredPatch=oa;F.formatPatch=ba;F.createTwoFilesPatch=pa;F.createPatch=function(a,b,c,d,e,f){return pa(a,a,b,c,d,e,f)};var Ia=C;z={};Object.defineProperty(z,
"__esModule",{value:!0});z.arrayEqual=function(a,b){return a.length!==b.length?!1:qa(a,b)};z.arrayStartsWith=qa;Object.defineProperty(X,"__esModule",{value:!0});X.calcLineCount=ra;X.merge=function(a,b,c){a=sa(a,c);b=sa(b,c);c={};(a.index||b.index)&&(c.index=a.index||b.index);(a.newFileName||b.newFileName)&&(a.newFileName&&a.newFileName!==a.oldFileName?b.newFileName&&b.newFileName!==b.oldFileName?(c.oldFileName=U(c,a.oldFileName,b.oldFileName),c.newFileName=U(c,a.newFileName,b.newFileName),c.oldHeader=
U(c,a.oldHeader,b.oldHeader),c.newHeader=U(c,a.newHeader,b.newHeader)):(c.oldFileName=a.oldFileName,c.newFileName=a.newFileName,c.oldHeader=a.oldHeader,c.newHeader=a.newHeader):(c.oldFileName=b.oldFileName||a.oldFileName,c.newFileName=b.newFileName||a.newFileName,c.oldHeader=b.oldHeader||a.oldHeader,c.newHeader=b.newHeader||a.newHeader));c.hunks=[];for(var d=0,e=0,f=0,g=0;d<a.hunks.length||e<b.hunks.length;){var h=a.hunks[d]||{oldStart:1/0},k=b.hunks[e]||{oldStart:1/0};if(h.oldStart<k.oldStart&&h.oldStart+
h.oldLines<k.oldStart)c.hunks.push(ta(h,f)),d++,g+=h.newLines-h.oldLines;else if(k.oldStart<h.oldStart&&k.oldStart+k.oldLines<h.oldStart)c.hunks.push(ta(k,g)),e++,f+=k.newLines-k.oldLines;else{var l={oldStart:Math.min(h.oldStart,k.oldStart),oldLines:0,newStart:Math.min(h.newStart+f,k.oldStart+g),newLines:0,lines:[]},m=l;h={offset:h.oldStart,lines:h.lines,index:0};k={offset:k.oldStart,lines:k.lines,index:0};va(m,h,k);for(va(m,k,h);h.index<h.lines.length&&k.index<k.lines.length;){var p=h.lines[h.index],
n=k.lines[k.index];if("-"!==p[0]&&"+"!==p[0]||"-"!==n[0]&&"+"!==n[0])if("+"===p[0]&&" "===n[0]){var u;(u=m.lines).push.apply(u,H(D(h)))}else if("+"===n[0]&&" "===p[0]){var r;(r=m.lines).push.apply(r,H(D(k)))}else"-"===p[0]&&" "===n[0]?ua(m,h,k):"-"===n[0]&&" "===p[0]?ua(m,k,h,!0):p===n?(m.lines.push(p),h.index++,k.index++):ea(m,D(h),D(k));else a:{var v=n=p=void 0,t=m,w=h,z=k,y=D(w),A=D(z);if(xa(y)&&xa(A)){if((0,ia.arrayStartsWith)(y,A)&&ya(z,y,y.length-A.length)){(v=t.lines).push.apply(v,H(y));break a}if((0,
ia.arrayStartsWith)(A,y)&&ya(w,A,A.length-y.length)){(n=t.lines).push.apply(n,H(A));break a}}else if((0,ia.arrayEqual)(y,A)){(p=t.lines).push.apply(p,H(y));break a}ea(t,y,A)}}wa(m,h);wa(m,k);ra(m);e++;d++;c.hunks.push(l)}}return c};var Ka=F,Ja=R,ia=z,ja={};Object.defineProperty(ja,"__esModule",{value:!0});ja.reversePatch=function c(b){return Array.isArray(b)?b.map(c).reverse():Aa(Aa({},b),{},{oldFileName:b.newFileName,oldHeader:b.newHeader,newFileName:b.oldFileName,newHeader:b.oldHeader,hunks:b.hunks.map(function(b){return{oldLines:b.newLines,
oldStart:b.newStart,newLines:b.oldLines,newStart:b.oldStart,linedelimiters:b.linedelimiters,lines:b.lines.map(function(b){return b.startsWith("-")?"+".concat(b.slice(1)):b.startsWith("+")?"-".concat(b.slice(1)):b})}})})};var ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.convertChangesToDMP=function(b){for(var c,d,e=[],f=0;f<b.length;f++)d=(c=b[f]).added?1:c.removed?-1:0,e.push([d,c.value]);return e};var la={};Object.defineProperty(la,"__esModule",{value:!0});la.convertChangesToXML=function(b){for(var c=
[],d=0;d<b.length;d++){var e=b[d];e.added?c.push("\x3cins\x3e"):e.removed&&c.push("\x3cdel\x3e");c.push(e.value.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;"));e.added?c.push("\x3c/ins\x3e"):e.removed&&c.push("\x3c/del\x3e")}return c.join("")};(function(b){Object.defineProperty(b,"__esModule",{value:!0});Object.defineProperty(b,"Diff",{enumerable:!0,get:function(){return c.default}});Object.defineProperty(b,"diffChars",{enumerable:!0,get:function(){return d.diffChars}});
Object.defineProperty(b,"diffWords",{enumerable:!0,get:function(){return e.diffWords}});Object.defineProperty(b,"diffWordsWithSpace",{enumerable:!0,get:function(){return e.diffWordsWithSpace}});Object.defineProperty(b,"diffLines",{enumerable:!0,get:function(){return f.diffLines}});Object.defineProperty(b,"diffTrimmedLines",{enumerable:!0,get:function(){return f.diffTrimmedLines}});Object.defineProperty(b,"diffSentences",{enumerable:!0,get:function(){return g.diffSentences}});Object.defineProperty(b,
"diffCss",{enumerable:!0,get:function(){return h.diffCss}});Object.defineProperty(b,"diffJson",{enumerable:!0,get:function(){return k.diffJson}});Object.defineProperty(b,"canonicalize",{enumerable:!0,get:function(){return k.canonicalize}});Object.defineProperty(b,"diffArrays",{enumerable:!0,get:function(){return l.diffArrays}});Object.defineProperty(b,"applyPatch",{enumerable:!0,get:function(){return m.applyPatch}});Object.defineProperty(b,"applyPatches",{enumerable:!0,get:function(){return m.applyPatches}});
Object.defineProperty(b,"parsePatch",{enumerable:!0,get:function(){return x.parsePatch}});Object.defineProperty(b,"merge",{enumerable:!0,get:function(){return n.merge}});Object.defineProperty(b,"reversePatch",{enumerable:!0,get:function(){return u.reversePatch}});Object.defineProperty(b,"structuredPatch",{enumerable:!0,get:function(){return r.structuredPatch}});Object.defineProperty(b,"createTwoFilesPatch",{enumerable:!0,get:function(){return r.createTwoFilesPatch}});Object.defineProperty(b,"createPatch",
{enumerable:!0,get:function(){return r.createPatch}});Object.defineProperty(b,"formatPatch",{enumerable:!0,get:function(){return r.formatPatch}});Object.defineProperty(b,"convertChangesToDMP",{enumerable:!0,get:function(){return v.convertChangesToDMP}});Object.defineProperty(b,"convertChangesToXML",{enumerable:!0,get:function(){return t.convertChangesToXML}});var c=p&&p.__esModule?p:{default:p},d=L,e=J,f=C,g=N,h=O,k=K,l=P,m=W,x=R,n=X,u=ja,r=F,v=ka,t=la})(Ba);return S.diffMatchPatch=I,S.jsDiff=Ba,
Object.defineProperty(S,"__esModule",{value:!0}),S}({});'use strict';(function(){(function(xd){function yd(f,b,a){if(fa.isDebugVerbose){var e=a.value;a.value=function(){for(var a=[],g=0;g<arguments.length;g++)a[g]=arguments[g];g=this.constructor.name===f.constructor.name?this.constructor.name:"".concat(this.constructor.name," (").concat(f.constructor.name,")");P.print(g,b,"".concat("\x3c\x3c\x3c"," %o"),a);P.rightShift();a=e.apply(this,a);P.leftShift();P.print(g,b,"".concat("\x3e\x3e\x3e"," %o"),a);return a};return a}}function k(){for(var f=[],b=0;b<arguments.length;b++)f[b]=
arguments[b];switch(f.length){case 3:if("number"!==typeof f[2])return yd(f[0],f[1],f[2]);default:throw t.create("UnsupportedLogDecorator");}}var R;(function(f){f.getWeblabProperties=function(b){var a;if("function"===typeof(null===(a=b.$RuntimeConfig)||void 0===a?void 0:a.getWeblabProperties))return b.$RuntimeConfig.getWeblabProperties()};f.getMarketplaceProperties=function(b){var a;if("function"===typeof(null===(a=b.$RuntimeConfig)||void 0===a?void 0:a.getMarketplaceProperties))return b.$RuntimeConfig.getMarketplaceProperties()};
f.getFeaturePropertiesData=function(b,a,e){var c;if("function"===typeof(null===(c=b.$RuntimeConfig)||void 0===c?void 0:c.getFeatureProperties)&&(b=b.$RuntimeConfig.getFeatureProperties(a,e),"function"===typeof(null===b||void 0===b?void 0:b.getData)))return b.getData()};f.getDeviceProperties=function(b){var a;if("function"===typeof(null===(a=b.$RuntimeConfig)||void 0===a?void 0:a.getDeviceProperties))return b.$RuntimeConfig.getDeviceProperties()};f.getCustomerProperties=function(b){var a;if("function"===
typeof(null===(a=b.$RuntimeConfig)||void 0===a?void 0:a.getCustomerProperties))return b.$RuntimeConfig.getCustomerProperties()};f.getAmazonApiProperties=function(b){var a;if("function"===typeof(null===(a=b.$RuntimeConfig)||void 0===a?void 0:a.getAmazonApiProperties))return b.$RuntimeConfig.getAmazonApiProperties()}})(R||(R={}));var y;(function(f){f.getAppType=function(b){var a,e;return null!==(e=null===(a=R.getDeviceProperties(b))||void 0===a?void 0:a.getAppType())&&void 0!==e?e:"web"};f.getDeviceType=
function(b){var a,e;return null!==(e=null===(a=R.getDeviceProperties(b))||void 0===a?void 0:a.getDeviceType())&&void 0!==e?e:"mobile"};f.isMShop=function(b){return"mshop"===f.getAppType(b)};f.isMweb=function(b){return"web"===f.getAppType(b)};f.isMobileWeb=function(b){return"mobile"===f.getDeviceType(b)&&f.isMweb(b)};f.isDesktopWeb=function(b){return"desktop"===f.getDeviceType(b)&&f.isMweb(b)};f.getCountryCode=function(b){b=R.getMarketplaceProperties(b);if("function"===typeof(null===b||void 0===b?
void 0:b.getCountryCode))return b.getCountryCode()};f.getObfuscatedMarketplaceId=function(b){b=R.getMarketplaceProperties(b);if("function"===typeof(null===b||void 0===b?void 0:b.getMarketplaceId))return b.getMarketplaceId()};f.getAmazonApiEndpoint=function(b){b=R.getAmazonApiProperties(b);if("function"===typeof(null===b||void 0===b?void 0:b.getAmazonApiEndpoint))return b.getAmazonApiEndpoint()};f.isClientEnabled=function(b){b=R.getFeaturePropertiesData(b,"in-latency","".concat("lightsaber","-").concat(f.getAppType(b)));
return null===b||void 0===b?void 0:b.clientEnabled};f.getAppVersion=function(b){var a;b=R.getDeviceProperties(b);return null===(a=null===b||void 0===b?void 0:b.getMShopProperties())||void 0===a?void 0:a.getAppVersion()}})(y||(y={}));var zd=this&&this.__read||function(f,b){var a="function"===typeof Symbol&&f[Symbol.iterator];if(!a)return f;f=a.call(f);var e,c=[];try{for(;(void 0===b||0<b--)&&!(e=f.next()).done;)c.push(e.value)}catch(h){var g={error:h}}finally{try{e&&!e.done&&(a=f["return"])&&a.call(f)}finally{if(g)throw g.error;
}}return c},v;(function(f){var b=(b="AmazonLightsaberServiceWorkerClientLib-1.0.2715.0".match(/^([^\-]+)\-((\w+\.\w+)(?:\.\w+)*)$/))&&b[1]&&b[2]&&b[3]?b.slice(1):["unknown","unknown","unknown"];var a=zd(b,3);b=a[0];var e=a[1];a=a[2];f.NAMESPACE="Lightsaber";f.NAMESPACE_UCASE=f.NAMESPACE.toUpperCase();f.NAMESPACE_LCASE=f.NAMESPACE.toLowerCase();f.NAMESPACE_SHORT="lsbr";f.BRAZIL_NAME=b;f.FULL_VERSION=e;f.VERSION=a;f.HELP_LINK="https://tiny.amazon.com/171he0ngb"})(v||(v={}));var ja;(function(f){f.pushClamped=
function(b,a,e,c){b.push(a);a="function"===typeof c;for(e=Math.max(e,0);b.length>e;){var g=b.shift();a&&c(g)}}})(ja||(ja={}));var Sa;(function(f){f.removeHeadersWithPrefix=function(b,a){var e=new Headers(b),c=[];e.forEach(function(b,e){0===e.indexOf(a)&&c.push(e)});c.forEach(function(a){e.delete(a)});return e};f.getCommonHTMLHeaders=function(b){var a=new Headers({"content-type":"text/html; charset\x3dutf-8","x-content-type-options":"nosniff","x-frame-options":"SAMEORIGIN","x-xss-protection":"1"});
b&&b.forEach(function(b,c){a.set(c,b)});return a}})(Sa||(Sa={}));var Ad=this&&this.__awaiter||function(f,b,a,e){function c(c){return c instanceof a?c:new a(function(a){a(c)})}return new (a||(a=Promise))(function(a,h){function g(a){try{l(e.next(a))}catch(m){h(m)}}function n(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(g,n)}l((e=e.apply(f,b||[])).next())})},Bd=this&&this.__generator||function(f,b){function a(a){return function(c){return e([a,c])}}function e(a){if(g)throw new TypeError("Generator is already executing.");
for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=
d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Cd=this&&this.__read||function(f,b){var a="function"===typeof Symbol&&f[Symbol.iterator];
if(!a)return f;f=a.call(f);var e,c=[];try{for(;(void 0===b||0<b--)&&!(e=f.next()).done;)c.push(e.value)}catch(h){var g={error:h}}finally{try{e&&!e.done&&(a=f["return"])&&a.call(f)}finally{if(g)throw g.error;}}return c},Dd=this&&this.__spreadArray||function(f,b,a){if(a||2===arguments.length)for(var e=0,c=b.length,g;e<c;e++)!g&&e in b||(g||(g=Array.prototype.slice.call(b,0,e)),g[e]=b[e]);return f.concat(g||Array.prototype.slice.call(b))},oa;(function(f){var b=this;f.replaceAsync=function(a,e,c){return Ad(b,
void 0,void 0,function(){var b,h;return Bd(this,function(g){switch(g.label){case 0:if("function"!==typeof c)return[2,a.replace(e,c)];b=[];a.replace(e,function(a){for(var e=[],g=1;g<arguments.length;g++)e[g-1]=arguments[g];e=c.call.apply(c,Dd([void 0,a],Cd(e),!1));b.push(e);return""});return[4,Promise.all(b)];case 1:return h=g.sent(),[2,a.replace(e,function(){return h.shift()})]}})})};f.pad=function(a,b,c){a=a.toString();return"function"===typeof a.padStart?a.padStart(b,c):a};f.generateRandomSequence=
function(a,b){for(var c="";c.length<a;)c+=Math.floor(9007199254740991*Math.random()).toString(b);return c.substring(0,a)}})(oa||(oa={}));var Ed=this&&this.__read||function(f,b){var a="function"===typeof Symbol&&f[Symbol.iterator];if(!a)return f;f=a.call(f);var e,c=[];try{for(;(void 0===b||0<b--)&&!(e=f.next()).done;)c.push(e.value)}catch(h){var g={error:h}}finally{try{e&&!e.done&&(a=f["return"])&&a.call(f)}finally{if(g)throw g.error;}}return c},Fd=this&&this.__spreadArray||function(f,b,a){if(a||2===
arguments.length)for(var e=0,c=b.length,g;e<c;e++)!g&&e in b||(g||(g=Array.prototype.slice.call(b,0,e)),g[e]=b[e]);return f.concat(g||Array.prototype.slice.call(b))},P;(function(f){var b=0,a=function(){var a=new Date,c=oa.pad(a.getHours(),2,"0"),b=oa.pad(a.getMinutes(),2,"0"),h=oa.pad(a.getSeconds(),2,"0");a=oa.pad(a.getMilliseconds(),3,"0");return"".concat(c,":").concat(b,":").concat(h,".").concat(a)};f.print=function(e,c,g){for(var h=[],d=3;d<arguments.length;d++)h[d-3]=arguments[d];fa.isDebugVerbose&&
(d="  ".repeat(b||0),console.debug.apply(console,Fd(["%c".concat(a(),"%c%c").concat(v.NAMESPACE,"%c  ").concat(d,"%c").concat(e,"%c%c").concat(c,"%c ").concat(g),"background-color: #e1eaeb; color: #fff; padding: 5px 8px","color: auto; font-weight: normal","background-color: #3498db; color: #fff; padding: 5px 8px","color: auto; font-weight: normal","background-color: #f39c12; color: #fff; padding: 5px 8px","color: auto; font-weight: normal","background-color: #e1eaeb; padding: 5px 8px","color: auto; font-weight: normal"],
Ed(h),!1)))};f.rightShift=function(){return 25>=b?b++:b};f.leftShift=function(){return 1<=b?b--:b}})(P||(P={}));var Gd=function(){function f(){var b=this;this.promise=new Promise(function(a,e){b.resolve=a;b.reject=e})}f.prototype.resolveWith=function(b){this.resolve(b)};f.prototype.rejectWith=function(b){this.reject(b)};return f}(),Ia;(function(f){var b=/^https:\/\/(?:[^\/]+)\/images(?:\/W\/[^\/]+\/images)?\/I\/([\w\+\-]+)\..*$/i;f.getPhysicalId=function(a){if(a=a.match(b))return a[1]};f.replacePhysicalId=
function(a,b){var c=f.getPhysicalId(a);if(c)return a.replace(c,b)}})(Ia||(Ia={}));var Ta;(function(f){var b=function(a){return y.isMShop(a)?"SMA":y.isMobileWeb(a)?"SW":"SWD"};f.format=function(a,e){return"".concat(v.NAMESPACE,":").concat(b(a),":").concat(e).toLowerCase()};f.formatErrorAttribution=function(a,e){a=b(a);return v.BRAZIL_NAME+(e?":".concat(e):"")+("SMA"!==a?":".concat(a):"")}})(Ta||(Ta={}));var Hd=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Id=function(f){function b(a,e,c,g,h){c=f.call(this,b._getMessage(a,g,e,c))||this;c.name="".concat(v.NAMESPACE,
"Error");c.code=a;c.data=e;c.logLevel=h;return c}Hd(b,f);b._getMessage=function(a,b,c,g){b=b?"- ".concat(b,"."):"";if(void 0!==c){var e=I.serialize(c);"{}"===e&&"function"===typeof c.toString&&(e=c.toString());b="".concat(b," Occurred with ").concat(e,".").trim()}g&&(c=g.stack?"".concat(g.stack):"".concat(g),b="".concat(b," Caused by ").concat(c).trim());return"".concat(a," ").concat(b)};return b}(Error),t;(function(f){f.create=function(b,a,e,c,g){return new Id(b.toString(),a,e,c,g)};f.wrap=function(b,
a,e,c,g){return b.hasOwnProperty("code")?b:f.create(a,e,b,c,g)}})(t||(t={}));var w;(function(f){f.matchesCode=function(b,a){return b instanceof Error&&b.hasOwnProperty("code")&&b.code===a};f.matchesSignature=function(b,a){return b instanceof Error&&q.matchesPattern(b.message,a)};f.matchesCodeOrSignature=function(b,a,e){return f.matchesCode(b,a)||f.matchesSignature(b,e)}})(w||(w={}));var z;(function(f){f.NETWORK_ERROR=/network error/i;f.FAILED_TO_FETCH=/failed to fetch/i;f.UNEXPECTED_INTERNAL_ERROR=
/Unexpected internal error/i;f.READABLE_STREAM_DEFAULT_CONTROLLER_ERROR=/(readable stream.*(closed|errored)|(closed|errored).*readable stream)/i})(z||(z={}));var Bc=this&&this.__awaiter||function(f,b,a,e){function c(c){return c instanceof a?c:new a(function(a){a(c)})}return new (a||(a=Promise))(function(a,h){function g(a){try{l(e.next(a))}catch(m){h(m)}}function n(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(g,n)}l((e=e.apply(f,b||[])).next())})},Cc=this&&
this.__generator||function(f,b){function a(a){return function(c){return e([a,c])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,
d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},
"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},ib;(function(f){var b=this;f.getResponseWithRelay=function(a){return Bc(b,void 0,void 0,function(){var b;return Cc(this,function(c){switch(c.label){case 0:if(!a.preloadResponse)return[2,fetch(a.request)];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,a.preloadResponse];case 2:return(b=c.sent())?[2,b]:[2,fetch(a.request)];case 3:return c.sent(),[2,fetch(a.request)];case 4:return[2]}})})};f.getResponseWithoutRelay=function(a){return Bc(b,
void 0,void 0,function(){var b;return Cc(this,function(c){switch(c.label){case 0:if(!a.preloadResponse)throw t.create("PreloadResponseUnsupported");return[4,a.preloadResponse];case 1:b=c.sent();if(!b)throw t.create("PreloadResponseUnexpected");return[2,b]}})})}})(ib||(ib={}));var Fb=this&&this.__assign||function(){Fb=Object.assign||function(f){for(var b,a=1,e=arguments.length;a<e;a++){b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(f[c]=b[c])}return f};return Fb.apply(this,
arguments)},Jd=this&&this.__awaiter||function(f,b,a,e){function c(c){return c instanceof a?c:new a(function(a){a(c)})}return new (a||(a=Promise))(function(a,h){function g(a){try{l(e.next(a))}catch(m){h(m)}}function n(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(g,n)}l((e=e.apply(f,b||[])).next())})},Kd=this&&this.__generator||function(f,b){function a(a){return function(c){return e([a,c])}}function e(a){if(g)throw new TypeError("Generator is already executing.");
for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=
d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},pa;(function(f){f.shallow=function(b){return Fb({},b)};(function(b){var a=
this;b.json=function(a){return JSON.parse(JSON.stringify(a))};b.structuredCloneAsync=function(b){return Jd(a,void 0,void 0,function(){return Kd(this,function(a){return[2,new Promise(function(a){var c=new MessageChannel;c.port1.postMessage(b);c.port2.onmessage=function(c){a(c.data)}})]})})}})(f.deep||(f.deep={}))})(pa||(pa={}));var Ld=this&&this.__awaiter||function(f,b,a,e){function c(c){return c instanceof a?c:new a(function(a){a(c)})}return new (a||(a=Promise))(function(a,h){function g(a){try{l(e.next(a))}catch(m){h(m)}}
function n(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(g,n)}l((e=e.apply(f,b||[])).next())})},Md=this&&this.__generator||function(f,b){function a(a){return function(c){return e([a,c])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;
case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:
void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},ka;(function(f){var b=this;f.validateIsUsable=function(a){if(!(a instanceof Response))throw t.create("ResponseInvalid");if("opaqueredirect"===a.type)throw t.create("ResponseOpaqueRedirect");if(!(a.body instanceof ReadableStream))throw t.create("ResponseBodyInvalid");if(a.bodyUsed||
a.body.locked)throw t.create("ResponseBodyUnusable");};f.validateIsOK=function(a){if(!(a instanceof Response))throw t.create("ResponseInvalid");if(!a.ok||206===a.status)throw t.create("ResponseNotOK");};f.matchPatterns=function(a,e){return Ld(b,void 0,void 0,function(){var c;return Md(this,function(b){switch(b.label){case 0:return f.validateIsUsable(a),f.validateIsOK(a),[4,a.text()];case 1:return c=b.sent(),[2,e.map(function(a){return c.match(a)})]}})})}})(ka||(ka={}));var L;(function(f){f.parse=
function(b,a){try{return new URL(b,a)}catch(e){P.print("SafeURL","parse","URL parse failed, input\x3d".concat(b))}};f.encode=function(b){return(b=f.parse(b))?b.href:void 0}})(L||(L={}));var q;(function(f){f.isObject=function(b){return!!b&&"object"===typeof b&&!Array.isArray(b)};f.isNonEmptyString=function(b){return"string"===typeof b&&0<b.length};f.isPositiveInteger=function(b){return"number"===typeof b&&Math.floor(b)===b&&0<=b&&Infinity!==b};f.isFunction=function(b){return"function"===typeof b};
f.isBoolean=function(b){return!0===b||!1===b};f.isNonEmptyArray=function(b){return Array.isArray(b)&&0<b.length};f.isOneOf=function(b,a){return-1!==a.indexOf(b)};f.isArrayWhereEvery=function(b,a){return Array.isArray(b)&&b.every(a)};f.isUndefinedOr=function(b,a){return void 0===b?!0:f.isFunction(a)?a():a};f.matchesPattern=function(b,a){return"string"===typeof b&&a.test(b)};f.isURL=function(b){return"string"===typeof b&&!!L.parse(b)};f.isRegExp=function(b){return b instanceof RegExp}})(q||(q={}));
var I;(function(f){var b=function(a,c){return q.isRegExp(c)?{safeJsonType:"__LIGHTSABER_SAFE_JSON_REG_EXP__",source:c.source,flags:c.flags}:c},a=function(a,c){if(q.isObject(c)&&q.isNonEmptyString(c.safeJsonType))switch(c.safeJsonType){case "__LIGHTSABER_SAFE_JSON_REG_EXP__":return new RegExp(c.source,c.flags)}return c};f.serialize=function(a,c,b){void 0===c&&(c=!1);void 0===b&&(b="{}");try{return c?JSON.stringify(a,void 0,4):JSON.stringify(a)}catch(h){return P.print("SafeJSON","serialize","JSON stringify failed, input\x3d".concat(a)),
b}};f.replacerSerialize=function(a,c,g){void 0===c&&(c=!1);void 0===g&&(g="{}");try{return c?JSON.stringify(a,b,4):JSON.stringify(a,b)}catch(h){return P.print("SafeJSON","replacerSerialize","JSON stringify failed, input\x3d".concat(a)),g}};f.deserialize=function(a,c){void 0===c&&(c={});try{return JSON.parse(a)}catch(g){return P.print("SafeJSON","deserialize","JSON parse failed, input\x3d".concat(a)),c}};f.reviverDeserialize=function(b,c){void 0===c&&(c={});try{return JSON.parse(b,a)}catch(g){return P.print("SafeJSON",
"reviverDeserialize","JSON parse failed, input\x3d".concat(b)),c}}})(I||(I={}));var J;(function(f){f.encode=function(b){return encodeURIComponent(b)};f.encodeRFC3986=function(b){return f.encode(b).replace(/[!'()*]/g,function(a){return"%".concat(a.charCodeAt(0).toString(16).toUpperCase())})};f.decode=function(b){try{return decodeURIComponent(b)}catch(a){P.print("SafeURIEncode","decode","decodeURIComponent failed, input\x3d".concat(b))}}})(J||(J={}));var Ua;(function(f){f.onlyWordChars=function(b){return b.replace(/[^\w]+/gim,
"")}})(Ua||(Ua={}));var Nd=this&&this.__awaiter||function(f,b,a,e){function c(c){return c instanceof a?c:new a(function(a){a(c)})}return new (a||(a=Promise))(function(a,h){function g(a){try{l(e.next(a))}catch(m){h(m)}}function n(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(g,n)}l((e=e.apply(f,b||[])).next())})},Od=this&&this.__generator||function(f,b){function a(a){return function(c){return e([a,c])}}function e(a){if(g)throw new TypeError("Generator is already executing.");
for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=
d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Ja;(function(f){var b=this;f.drain=function(a,e){return Nd(b,void 0,void 0,
function(){var c,b;return Od(this,function(g){switch(g.label){case 0:return c=a.getReader(),[4,c.read()];case 1:b=g.sent(),g.label=2;case 2:if(b.done)return[3,4];e(b.value);return[4,c.read()];case 3:return b=g.sent(),[3,2];case 4:return[2]}})})}})(Ja||(Ja={}));var Gb=this&&this.__awaiter||function(f,b,a,e){function c(c){return c instanceof a?c:new a(function(a){a(c)})}return new (a||(a=Promise))(function(a,h){function g(a){try{l(e.next(a))}catch(m){h(m)}}function n(a){try{l(e["throw"](a))}catch(m){h(m)}}
function l(b){b.done?a(b.value):c(b.value).then(g,n)}l((e=e.apply(f,b||[])).next())})},Hb=this&&this.__generator||function(f,b){function a(a){return function(c){return e([a,c])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;
h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];
return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},r;(function(f){var b=this;f.queueTask=function(a,b){return setTimeout(a,b||0)};f.wait=function(a){return Gb(b,void 0,void 0,function(){return Hb(this,function(b){return[2,new Promise(function(c){setTimeout(c,a)})]})})};f.nextTask=function(){return Gb(b,void 0,void 0,function(){return Hb(this,function(a){return[2,f.wait(0)]})})};f.queueMicrotask=
function(a){Promise.resolve().then(function(){a()})};f.nextMicrotask=function(){return Gb(b,void 0,void 0,function(){return Hb(this,function(a){return[2,Promise.resolve()]})})}})(r||(r={}));var F;(function(f){f.getEpoch=function(){return Date.now()};f.getEpochSeconds=function(b){void 0===b&&(b=f.getEpoch());return Math.round(b/1E3)};f.getUTCDate=function(b){void 0===b&&(b=f.getEpoch());return(new Date(b)).toUTCString()};f.getPerfNow=function(){return performance.now()}})(F||(F={}));var K;(function(f){var b=
function(a,b,c){return c?"\x3c".concat(b,' id\x3d"').concat(c,'"\x3e').concat(a,"\x3c/").concat(b,"\x3e"):"\x3c".concat(b,"\x3e").concat(a,"\x3c/").concat(b,"\x3e")};f.div=function(a,e){return b(a,"div",e)};f.style=function(a,e){return b(a,"style",e)};f.script=function(a,e,c){if(!e)return b("(function(){".concat(a,";})();"),"script",c);e=I.serialize(e);e=J.encodeRFC3986(e);return b('(function(){var model\x3dJSON.parse(decodeURIComponent("'.concat(e,'"));').concat(a,";})();"),"script",c)};f.ins=function(a){return b(a,
"ins")};f.del=function(a){return b(a,"del")};f.span=function(a){return b(a,"span")}})(K||(K={}));var Ib;(function(f){f.escapeRegExp=function(b){return b.replace(/[.*+?^${}()|[\]\\]/g,"\\$\x26")}})(Ib||(Ib={}));var Va;(function(f){f.stripRefMarkersFromPath=function(b){return b.replace(/\/ref_?=[^\/]*/gi,"")||"/"};f.stripLanguageFolderFromPath=function(b){return b.replace(/^\/\-\/[^\/]+/i,"")||"/"};f.resolveAdsRedirects=function(b){var a=L.parse(b);if(a&&"/sspa/click"===a.pathname){var e=a.searchParams.get("url");
b=e?(new URL(e,a)).href:b}return b};f.getASINFromUrl=function(b){b=f.resolveAdsRedirects(b);if(b=L.parse(b))return(b=f.stripLanguageFolderFromPath(f.stripRefMarkersFromPath(b.pathname)).match(/^\/(?:[^\/]+\/dp|d|dp|gp\/product|gp\/aw\/d|gp\/mobile\/udp)\/([A-Za-z0-9]{10})/))?b[1]:void 0}})(Va||(Va={}));var Ka;(function(f){f.getWeblabTreatment=function(b,a){if(!a||""===a.trim())throw t.create("EmptyOrBlankWeblab");b=R.getWeblabProperties(b);if("function"!==typeof(null===b||void 0===b?void 0:b.getWeblabTreatment))throw t.create("WeblabPropertiesNotInitialized");
a=b.getWeblabTreatment(a);if(void 0===a)throw t.create("WeblabNameNotFound");return a}})(Ka||(Ka={}));var Pd=this&&this.__read||function(f,b){var a="function"===typeof Symbol&&f[Symbol.iterator];if(!a)return f;f=a.call(f);var e,c=[];try{for(;(void 0===b||0<b--)&&!(e=f.next()).done;)c.push(e.value)}catch(h){var g={error:h}}finally{try{e&&!e.done&&(a=f["return"])&&a.call(f)}finally{if(g)throw g.error;}}return c},Qd=this&&this.__spreadArray||function(f,b,a){if(a||2===arguments.length)for(var e=0,c=b.length,
g;e<c;e++)!g&&e in b||(g||(g=Array.prototype.slice.call(b,0,e)),g[e]=b[e]);return f.concat(g||Array.prototype.slice.call(b))},u=function(){function f(){}f.prototype.log=function(b,a){for(var e=[],c=2;c<arguments.length;c++)e[c-2]=arguments[c];P.print.apply(P,Qd([this.constructor.name,b,a],Pd(e),!1))};f.prototype.logCtor=function(b){this.log("constructor","\x3c\x3c\x3c %o",b)};return f}(),fa;(function(f){f.isDebug=!1;f.isDebugVerbose=f.isDebug&&!1})(fa||(fa={}));var Rd=this&&this.__extends||function(){var f=
function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),qa=this&&this.__assign||function(){qa=Object.assign||
function(f){for(var b,a=1,e=arguments.length;a<e;a++){b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(f[c]=b[c])}return f};return qa.apply(this,arguments)},Aa=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,
a,g),g},Sd=function(f){function b(a,b){var c=f.call(this)||this;c.logCtor(arguments);c._swGlobal=a;c._requireNavigationPreloadSupport=b.usePreloadResponseOnlyForServerResponseOnNavigations;c._logToPageProxy();return c}Rd(b,f);b.prototype.validate=function(){if(!this._isBasicOK())throw t.create("UnsupportedBrowserContext");var a=this._getFeatureFailures();if(0!==a.length)throw t.create("APIUnsupported",{failures:a});};b.prototype.supports=function(){return this._isBasicOK()&&this._isFeatureOK()};b.prototype._isBasicOK=
function(){return 0===this._getBasicFailures().length};b.prototype._isFeatureOK=function(){return 0===this._getFeatureFailures().length};b.prototype._getBasicFailures=function(){var a=this._swGlobal,b={Global:!!a,ServiceWorkerGlobalScope:"ServiceWorkerGlobalScope"in a,ServiceWorkerRegistration:"ServiceWorkerRegistration"in a,Promise:"Promise"in a};return Object.keys(b).filter(function(a){return!b[a]})};b.prototype._getFeatureFailures=function(){var a=this._swGlobal,b={URL:"URL"in a,Headers:"Headers"in
a,Request:"Request"in a,Response:"Response"in a,ReadableStream:"ReadableStream"in a,TextDecoder:"TextDecoder"in a,TextEncoder:"TextEncoder"in a,Uint8Array:"Uint8Array"in a,caches:"caches"in a,clients:"clients"in a,WindowClient:"WindowClient"in a,performance:"performance"in a,Map:"Map"in a};b.Request&&(b=qa(qa({},b),{RequestMethod:"method"in Request.prototype,RequestMode:"mode"in Request.prototype,RequestDestination:"destination"in Request.prototype,RequestCredentials:"credentials"in Request.prototype,
RequestRedirect:"redirect"in Request.prototype,RequestHeaders:"headers"in Request.prototype,RequestIsHistoryNavigation:"isHistoryNavigation"in Request.prototype}));b.Response&&(b=qa(qa({},b),{ResponseBody:"body"in Response.prototype,ResponseType:"type"in Response.prototype,ResponseHeaders:"headers"in Response.prototype,ResponseRedirect:"function"===typeof Response.redirect}));this._requireNavigationPreloadSupport&&(b=qa(qa({},b),{NavigationPreload:"NavigationPreloadManager"in a&&"navigationPreload"in
ServiceWorkerRegistration.prototype&&"function"===typeof NavigationPreloadManager.prototype.getState&&a.registration&&a.registration.navigationPreload&&a.registration.navigationPreload.getState()instanceof Promise}));return Object.keys(b).filter(function(a){return!b[a]})};b.prototype._logToPageProxy=function(){var a=this;this._isBasicOK()&&this._swGlobal.addEventListener("aui-sw:page-proxy:feature-tags:request",function(b){b=b.detail.callback;var c=[];c.push("Version:".concat(v.VERSION));c.push("Supported:".concat(a._isFeatureOK()?
"Yes":"No"));b(Promise.resolve(c.map(function(c){return Ta.format(a._swGlobal,"Client:".concat(c))})))})};Aa([k],b.prototype,"validate",null);Aa([k],b.prototype,"supports",null);Aa([k],b.prototype,"_isBasicOK",null);Aa([k],b.prototype,"_isFeatureOK",null);Aa([k],b.prototype,"_getBasicFailures",null);Aa([k],b.prototype,"_getFeatureFailures",null);Aa([k],b.prototype,"_logToPageProxy",null);return b}(u),V;(function(f){f.create=function(b){return{timeOriginEpoch:F.getEpoch(),timeOriginPerfNow:F.getPerfNow(),
clientId:b||"unknown",errorContext:{BuildVersion:v.FULL_VERSION}}}})(V||(V={}));var Jb;(function(f){var b=/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g;f.parseCacheControl=function(a){var e={};a=a.get("cache-control");if(!a)return e;a.replace(b,function(a,b,h,d){a=h||d;e[b]=a?a.toLowerCase():!0;return""});e["max-age"]&&(a=parseInt(e["max-age"],10),isNaN(a)?delete e["max-age"]:e["max-age"]=a);return e};
f.hasLightsaberNoStore=function(a){return f.parseCacheControl(a.headers).hasOwnProperty("lightsaber-no-store")}})(Jb||(Jb={}));var jb;(function(f){var b="x-amz-".concat(v.NAMESPACE_LCASE,"-");f.REQUEST_ID_OPF_HEADER="x-amz-rid";f.getLibHeader=function(a){return"".concat(b).concat(a).trim().toLowerCase()};f.getClientOnlyLibHeader=function(a){return"".concat(b,"clientonly-").concat(a).trim().toLowerCase()};f.removeLibHeaders=function(a){return Sa.removeHeadersWithPrefix(a,b)}})(jb||(jb={}));var Kb;
(function(f){var b=jb.getLibHeader("client-version");f.appendClientVersion=function(a){a.append(b,v.VERSION)}})(Kb||(Kb={}));var Lb;(function(f){f.getSchema=function(b){return b.searchParams.get("schema")};f.getPayload=function(b){return b.searchParams.get("payload")};f.getClient=function(b){return b.searchParams.get("client")};f.getAttribution=function(b){return b.searchParams.get("attribution")}})(Lb||(Lb={}));var Mb;(function(f){var b=new Map([["x-shopping-portal-mode",["site-wide-only"]]]);f.isHeaderAllowed=
function(a,e){return(a=b.get(a))?-1!==a.indexOf(e):!1}})(Mb||(Mb={}));var Nb;(function(f){f.getParamName=function(){return"lsskpint"};f.getParam=function(b){return b.searchParams.get("lsskpint")};f.setParam=function(b,a){b.searchParams.append("lsskpint",a)}})(Nb||(Nb={}));var x;(function(f){f.cacheControl=Jb;f.clientInfo=Kb;f.clientMessageAsFetch=Lb;f.pageShellPrefetch=Mb;f.shared=jb;f.skipIntercept=Nb})(x||(x={}));var Td=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Wa=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?
e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},kb=function(f){function b(a,b){var c=f.call(this)||this;c.logCtor(arguments);c.cacheOperator=a;c.eventBus=b;return c}Td(b,f);b.prototype.getName=function(){return this.NAME};b.prototype.getPrefixedHeaderName=function(a){return x.shared.getClientOnlyLibHeader(a)};
b.prototype.encodeHeaderValue=function(a){return J.encode(I.serialize(a))};b.prototype.decodeHeaderValue=function(a){return(a=J.decode(a))?I.deserialize(a):void 0};b.prototype.updateResponseHeaders=function(a,b){return new Response(a.body,{headers:b,status:a.status,statusText:a.statusText})};Wa([k],b.prototype,"getName",null);Wa([k],b.prototype,"getPrefixedHeaderName",null);Wa([k],b.prototype,"encodeHeaderValue",null);Wa([k],b.prototype,"decodeHeaderValue",null);Wa([k],b.prototype,"updateResponseHeaders",
null);return b}(u),Ud=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,
new e)}}(),Vd=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Wd=this&&this.__awaiter||function(f,b,a,e){function c(c){return c instanceof a?c:new a(function(a){a(c)})}return new (a||(a=Promise))(function(a,
h){function g(a){try{l(e.next(a))}catch(m){h(m)}}function n(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(g,n)}l((e=e.apply(f,b||[])).next())})},Xd=this&&this.__generator||function(f,b){function a(a){return function(c){return e([a,c])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&
2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=
d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Yd=function(f){function b(a,b){var c=f.call(this,a,b)||this;c.NAME="LREEviction";c.logCtor(arguments);return c}Ud(b,f);b.prototype.cacheWillUpdate=function(a,b,c,g){return Wd(this,void 0,void 0,function(){var b,e,f,l,p,k,q,lb,
E=this;return Xd(this,function(d){switch(d.label){case 0:return c?(b=this._getKeyPrefix(g))?[4,this.cacheOperator.entries(a)]:[2]:[2,c];case 1:e=d.sent();f=this._filterEntriesForKeyPrefix(e,b);l=this._getMaxEntriesPerKeyPrefix(g);if(!l)return[2];p=!0;if(!(f.length>=l))return[3,3];k=1===l?f:f.slice(0,-1*(l-1));q=k.map(function(c){return E.cacheOperator.evict(a,c,g)});return[4,Promise.all(q)];case 2:lb=d.sent(),p=lb.every(Boolean),d.label=3;case 3:if(!p)throw t.create("CacheWriteQuotaExceeded");return[2,
c]}})})};b.prototype._getKeyPrefix=function(a){return a&&q.isNonEmptyString(a.keyPrefix)?a.keyPrefix:void 0};b.prototype._getMaxEntriesPerKeyPrefix=function(a){return a&&a.maxEntriesPerKeyPrefix&&q.isPositiveInteger(a.maxEntriesPerKeyPrefix)?a.maxEntriesPerKeyPrefix:void 0};b.prototype._filterEntriesForKeyPrefix=function(a,b){var c=this;return a.filter(function(a){return c._doesRequestBelongToKeyPrefix(a,b)})};b.prototype._doesRequestBelongToKeyPrefix=function(a,b){return 0===("string"===typeof a?
a:a.url).indexOf(b)};Vd([k],b.prototype,"cacheWillUpdate",null);return b}(kb),Zd=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);
b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),mb=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Dc=this&&this.__awaiter||function(f,b,a,e){function c(c){return c instanceof a?
c:new a(function(a){a(c)})}return new (a||(a=Promise))(function(a,h){function g(a){try{l(e.next(a))}catch(m){h(m)}}function n(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(g,n)}l((e=e.apply(f,b||[])).next())})},Ec=this&&this.__generator||function(f,b){function a(a){return function(c){return e([a,c])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),
0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();
continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},$d=function(f){function b(a,b){var c=f.call(this,a,b)||this;c.NAME="MaxAge";c.logCtor(arguments);c._header="".concat(f.prototype.getPrefixedHeaderName.call(c,c.NAME));return c}
Zd(b,f);b.prototype.cacheWillUpdate=function(a,b,c,g){return Dc(this,void 0,void 0,function(){var a,b;return Ec(this,function(e){if(!c)return[2,c];a={startSeconds:this._getRequestStartTimestampSeconds(g),deltaSeconds:this._getMaxAgeSeconds(g)};if(0>a.startSeconds||0>a.deltaSeconds)return[2];b=new Headers(c.headers||{});b.append(this._header,this.encodeHeaderValue(a));return[2,this.updateResponseHeaders(c,b)]})})};b.prototype.responseWillBeUsed=function(a,b,c,g){return Dc(this,void 0,void 0,function(){var e,
d,f,l;return Ec(this,function(h){if(!c)return[2,c];e=c.headers.get(this._header);if(!e)return[2];d=this.decodeHeaderValue(e);if(!d||"number"!==typeof d.startSeconds||"number"!==typeof d.deltaSeconds)return[2];f=d.startSeconds+d.deltaSeconds;l=F.getEpochSeconds();return f<l?(this.eventBus.publish({name:"CacheTTLExpired",detail:{eventOptions:a,request:b,response:c}}),this.cacheOperator.logCounterMetrics(a,"Miss:CacheTTLExpired",g),[2]):[2,c]})})};b.prototype._getRequestStartTimestampSeconds=function(a){return a&&
"number"===typeof a.requestStartTimestampSeconds?a.requestStartTimestampSeconds:-1};b.prototype._getMaxAgeSeconds=function(a){return a&&"number"===typeof a.maxAgeSeconds?a.maxAgeSeconds:-1};mb([k],b.prototype,"cacheWillUpdate",null);mb([k],b.prototype,"responseWillBeUsed",null);mb([k],b.prototype,"_getRequestStartTimestampSeconds",null);mb([k],b.prototype,"_getMaxAgeSeconds",null);return b}(kb),ae=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Ob=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,
a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},be=this&&this.__awaiter||function(f,b,a,e){function c(c){return c instanceof a?c:new a(function(a){a(c)})}return new (a||(a=Promise))(function(a,h){function g(a){try{l(e.next(a))}catch(m){h(m)}}function n(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):
c(b.value).then(g,n)}l((e=e.apply(f,b||[])).next())})},ce=this&&this.__generator||function(f,b){function a(a){return function(c){return e([a,c])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;
case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},
trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},de=function(f){function b(a,b){var c=f.call(this,a,b)||this;c.NAME="Metadata";c.logCtor(arguments);c._header="".concat(f.prototype.getPrefixedHeaderName.call(c,c.NAME));return c}ae(b,f);b.prototype.cacheWillUpdate=function(a,b,c,g){return be(this,void 0,void 0,function(){var a,b;return ce(this,function(e){if(!c)return[2,c];a={requestStartTimestampSeconds:this._getRequestStartTimestampSeconds(g),
attribution:this._getAttribution(g)};b=new Headers(c.headers||{});b.append(this._header,this.encodeHeaderValue(a));return[2,this.updateResponseHeaders(c,b)]})})};b.prototype._getRequestStartTimestampSeconds=function(a){return a&&"number"===typeof a.requestStartTimestampSeconds?a.requestStartTimestampSeconds:F.getEpochSeconds()};b.prototype._getAttribution=function(a){return a&&"string"===typeof a.attribution?a.attribution:"unknown"};Ob([k],b.prototype,"cacheWillUpdate",null);Ob([k],b.prototype,"_getRequestStartTimestampSeconds",
null);Ob([k],b.prototype,"_getAttribution",null);return b}(kb),ee=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===
a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Pb=this&&this.__assign||function(){Pb=Object.assign||function(f){for(var b,a=1,e=arguments.length;a<e;a++){b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(f[c]=b[c])}return f};return Pb.apply(this,arguments)},Ya=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,
b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Fc=this&&this.__awaiter||function(f,b,a,e){function c(c){return c instanceof a?c:new a(function(a){a(c)})}return new (a||(a=Promise))(function(a,h){function g(a){try{l(e.next(a))}catch(m){h(m)}}function n(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(g,n)}l((e=e.apply(f,b||[])).next())})},Gc=this&&this.__generator||function(f,
b){function a(a){return function(c){return e([a,c])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-
1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&
(n[Symbol.iterator]=function(){return this}),n},fe=function(f){function b(a,b){var c=f.call(this,a,b)||this;c.NAME="ValidationKeys";c.logCtor(arguments);c._header="".concat(f.prototype.getPrefixedHeaderName.call(c,c.NAME));return c}ee(b,f);b.prototype.cacheWillUpdate=function(a,b,c,g){return Fc(this,void 0,void 0,function(){var a,b;return Gc(this,function(e){if(!c)return[2,c];a=this._getKeysFromOptions(g);b=new Headers(c.headers||{});b.append(this._header,this.encodeHeaderValue(a));return[2,this.updateResponseHeaders(c,
b)]})})};b.prototype.responseWillBeUsed=function(a,b,c,g){return Fc(this,void 0,void 0,function(){var b,e,f;return Gc(this,function(d){if(!c)return[2,c];try{return b=this._getKeysFromResponse(c),e=this._getKeysFromOptions(g),f=this._doKeysMatch(a,b,e,g),[2,f?c:void 0]}catch(p){}return[2]})})};b.prototype._getKeysFromOptions=function(a){if(!a)return{};var b=a.validationKeys;if("object"!==typeof b||null===b)return{};Object.keys(b).forEach(function(a){var c=b[a];if(!("string"===typeof a&&"string"===
typeof c&&0<a.length))throw t.create("InvalidKeyPair",{key:a,value:c},void 0,"Key:value pairs must all be non-empty string:string");});return Pb({},b)};b.prototype._getKeysFromResponse=function(a){a=a.headers.get(this._header);if(!a)return{};var b=this.decodeHeaderValue(a);if(b)return b;throw t.create("UnreadableHeader",{key:this._header,value:a});};b.prototype._doKeysMatch=function(a,b,c,g){var e=this;return Object.keys(b).every(function(d){if(c.hasOwnProperty(d)&&b[d]===c[d])return!0;e.cacheOperator.logCounterMetrics(a,
"Miss:CacheKeyValidationFailed:".concat(d),g);return!1})};Ya([k],b.prototype,"cacheWillUpdate",null);Ya([k],b.prototype,"responseWillBeUsed",null);Ya([k],b.prototype,"_getKeysFromOptions",null);Ya([k],b.prototype,"_getKeysFromResponse",null);Ya([k],b.prototype,"_doKeysMatch",null);return b}(kb),ge=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,
b)&&(a[b]=c[b])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),B=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,
b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},S=this&&this.__awaiter||function(f,b,a,e){function c(c){return c instanceof a?c:new a(function(a){a(c)})}return new (a||(a=Promise))(function(a,h){function g(a){try{l(e.next(a))}catch(m){h(m)}}function n(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(g,n)}l((e=e.apply(f,b||[])).next())})},T=this&&this.__generator||function(f,
b){function a(a){return function(c){return e([a,c])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-
1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&
(n[Symbol.iterator]=function(){return this}),n},Qb=this&&this.__read||function(f,b){var a="function"===typeof Symbol&&f[Symbol.iterator];if(!a)return f;f=a.call(f);var e,c=[];try{for(;(void 0===b||0<b--)&&!(e=f.next()).done;)c.push(e.value)}catch(h){var g={error:h}}finally{try{e&&!e.done&&(a=f["return"])&&a.call(f)}finally{if(g)throw g.error;}}return c},he=function(f){function b(a,e,c,g,h,d,n,l){void 0===l&&(l=!0);var p=f.call(this)||this;p.logCtor(arguments);p._swGlobal=a;p._metricsService=e;p._cacheFullName=
"".concat(b._CACHE_NAME_PREFIX).concat(h);p._cacheFullNameWithVersion="".concat(p._cacheFullName,"V").concat(d);p._errorLoggingScope="CacheOperator:".concat(h);p._shouldEvictOnCustomerContextChange=l;p._plugins=p._initCachePlugins(c,g);n&&p._cleanupOldCache();r.queueMicrotask(function(){return S(p,void 0,void 0,function(){return T(this,function(a){switch(a.label){case 0:return[4,this._primeCache()];case 1:return a.sent(),[2]}})})});return p}ge(b,f);b.prototype.read=function(a,b,c){return S(this,void 0,
void 0,function(){var e,h,d,f,l,p;return T(this,function(g){switch(g.label){case 0:e=this._toInternalRequest(b),h=pa.shallow(c),d=0,g.label=1;case 1:if(!(d<this._plugins.length))return[3,4];f=this._plugins[d];return"function"!==typeof f.requestWillBeUsed?[3,3]:[4,f.requestWillBeUsed(a,"read",e,h)];case 2:p=Qb.apply(void 0,[g.sent(),2]),e=p[0],h=p[1],g.label=3;case 3:return d++,[3,1];case 4:return[4,this._read(a,e,this._getInternalCacheQueryOptions())];case 5:(l=g.sent())||this._logCounterMetrics(a,
"Miss:CacheNotFound",h),d=this._plugins.length-1,g.label=6;case 6:if(!(0<=d))return[3,9];f=this._plugins[d];return"function"!==typeof f.responseWillBeUsed?[3,8]:[4,f.responseWillBeUsed(a,e,l,h)];case 7:l=g.sent(),g.label=8;case 8:return d--,[3,6];case 9:return[2,l]}})})};b.prototype.write=function(a,b,c,g){return S(this,void 0,void 0,function(){var e,d,f,l,p,k,q;return T(this,function(h){switch(h.label){case 0:e=this._toInternalRequest(b),d=this._cloneResponse(a,c),f=pa.shallow(g),l=0,h.label=1;case 1:if(!(l<
this._plugins.length))return[3,7];p=this._plugins[l];return"function"!==typeof p.requestWillBeUsed?[3,3]:[4,p.requestWillBeUsed(a,"write",e,f)];case 2:q=Qb.apply(void 0,[h.sent(),2]),e=q[0],f=q[1],h.label=3;case 3:return"function"!==typeof p.cacheWillUpdate?[3,5]:[4,p.cacheWillUpdate(a,e,d,f)];case 4:d=h.sent(),h.label=5;case 5:if(void 0===d)return this.log("write","Cancelled by ".concat(p.getName(),' plugin via "cacheWillUpdate" hook')),[2];h.label=6;case 6:return l++,[3,1];case 7:return[4,this._read(a,
e,this._getInternalCacheQueryOptions())];case 8:return k=h.sent(),[4,this._write(a,e,d)];case 9:h.sent(),l=this._plugins.length-1,h.label=10;case 10:if(!(0<=l))return[3,13];p=this._plugins[l];return"function"!==typeof p.cacheDidUpdate?[3,12]:[4,p.cacheDidUpdate(a,e,k,d,f)];case 11:h.sent(),h.label=12;case 12:return l--,[3,10];case 13:return[2]}})})};b.prototype.evict=function(a,b,c){return S(this,void 0,void 0,function(){var e,h,d,f,l,p,k;return T(this,function(g){switch(g.label){case 0:e=this._toInternalRequest(b),
h=pa.shallow(c),d=0,g.label=1;case 1:if(!(d<this._plugins.length))return[3,4];f=this._plugins[d];return"function"!==typeof f.requestWillBeUsed?[3,3]:[4,f.requestWillBeUsed(a,"evict",e,h)];case 2:k=Qb.apply(void 0,[g.sent(),2]),e=k[0],h=k[1],g.label=3;case 3:return d++,[3,1];case 4:return[4,this._read(a,e,this._getInternalCacheQueryOptions())];case 5:return l=g.sent(),[4,this._evict(a,e,this._getInternalCacheQueryOptions())];case 6:p=g.sent();if(!p)return[2,p];d=this._plugins.length-1;g.label=7;case 7:if(!(0<=
d))return[3,10];f=this._plugins[d];return"function"!==typeof f.cacheDidUpdate?[3,9]:[4,f.cacheDidUpdate(a,e,l,void 0,h)];case 8:g.sent(),g.label=9;case 9:return d--,[3,7];case 10:return[2,p]}})})};b.prototype.exists=function(a,b,c){return S(this,void 0,void 0,function(){var e;return T(this,function(g){switch(g.label){case 0:return[4,this.read(a,b,c)];case 1:return e=g.sent(),[2,!!e]}})})};b.prototype.cleanup=function(a){var b=this;this._isCacheTainted||(this._isCacheTainted=!0,r.queueTask(function(){return S(b,
void 0,void 0,function(){var c,b;return T(this,function(e){switch(e.label){case 0:return this._metricsService.count(a,"CacheEviction:Request"),[4,this._cleanupCache(a)];case 1:return b=(c=e.sent())?"Success":"Fail",this._metricsService.count(a,"CacheEviction:".concat(b)),this._metricsService.mark(a,"CacheEviction:".concat(b)),this._isCacheTainted=!1,[4,this._primeCache()];case 2:return e.sent(),[2]}})})}))};b.prototype.entries=function(a){return S(this,void 0,void 0,function(){var b,c,g=this;return T(this,
function(e){switch(e.label){case 0:return[4,this._getCache(a)];case 1:return b=e.sent(),[4,b.keys()];case 2:return c=e.sent().map(function(a){return g._toExternalRequest(a)}),this._metricsService.count(a,"CacheEntryCount:".concat(this._cacheFullName),c.length),[2,c]}})})};b.prototype.shouldEvictOnCustomerContextChange=function(){return this._shouldEvictOnCustomerContextChange};b.prototype.logCounterMetrics=function(a,b,c){this._logCounterMetrics(a,b,c)};b.prototype._initCachePlugins=function(a,b){var c=
this;return b.map(function(b){return c._createPluginInstance(a,b)})};b.prototype._createPluginInstance=function(a,b){switch(b){case "MaxAge":return new $d(this,a);case "ValidationKeys":return new fe(this,a);case "Metadata":return new de(this,a);case "LREEviction":return new Yd(this,a);default:throw t.create("UnrecognizedCachePlugin",{name:b});}};b.prototype._cleanupCache=function(a){return S(this,void 0,void 0,function(){var b,c;return T(this,function(e){switch(e.label){case 0:return e.trys.push([0,
2,,3]),[4,this._swGlobal.caches.has(this._cacheFullNameWithVersion)];case 1:return(b=e.sent())?(this._cache=void 0,[2,this._swGlobal.caches.delete(this._cacheFullNameWithVersion)]):[3,3];case 2:return c=e.sent(),this._metricsService.error(a,c,this._errorLoggingScope,"ERROR"),this._metricsService.countError(a,c,this._errorLoggingScope),[2,!1];case 3:return[2,!0]}})})};b.prototype._read=function(a,e,c){return S(this,void 0,void 0,function(){var g,h,d,f,l,p;return T(this,function(n){switch(n.label){case 0:return n.trys.push([0,
2,,3]),[4,this._getCache(a)];case 1:return g=n.sent(),[2,g.match(e,c)];case 2:h=n.sent();d=w.matchesSignature(h,z.UNEXPECTED_INTERNAL_ERROR);f=w.matchesCodeOrSignature(h,"NetworkError",z.NETWORK_ERROR);l=w.matchesCode(h,"CacheTainted");p=f||l||d;this._metricsService.error(a,h,this._errorLoggingScope,p?"ERROR":void 0);this._metricsService.countError(a,h,f?"".concat("NetworkError",":").concat(this._errorLoggingScope):this._errorLoggingScope);if(d)return this._metricsService.count(a,"CacheOpen:Read"+
b._INTERNAL_STORAGE_ERROR_SUFFIX),this._metricsService.count(a,"CacheOpen:Read:"+this._cacheFullName+b._INTERNAL_STORAGE_ERROR_SUFFIX),[2,void 0];throw h;case 3:return[2]}})})};b.prototype._write=function(a,e,c){return S(this,void 0,void 0,function(){var g,h,d,f,l,p,k,q;return T(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),[4,r.nextTask()];case 1:n.sent();if("GET"!==e.method)throw t.create("RequestMethodNotGet",{method:e.method});g=L.parse(e.url);if(!g)throw t.create("InvalidURL",
{url:e.url});h=g.protocol;if("http:"!==h&&"https:"!==h)throw t.create("RequestURLSchemeNonHTTP",{scheme:h});ka.validateIsUsable(c);ka.validateIsOK(c);return[4,this._getCache(a)];case 2:return d=n.sent(),[4,d.put(e,c)];case 3:return n.sent(),[3,5];case 4:throw f=n.sent(),l=w.matchesSignature(f,z.UNEXPECTED_INTERNAL_ERROR),p=w.matchesCodeOrSignature(f,"NetworkError",z.NETWORK_ERROR),k=w.matchesCode(f,"CacheTainted"),q=p||k||l,this._metricsService.error(a,f,this._errorLoggingScope,q?"ERROR":void 0),
this._metricsService.countError(a,f,p?"".concat("NetworkError",":").concat(this._errorLoggingScope):this._errorLoggingScope),l&&(this._metricsService.count(a,"CacheOpen:Write"+b._INTERNAL_STORAGE_ERROR_SUFFIX),this._metricsService.count(a,"CacheOpen:Write:"+this._cacheFullName+b._INTERNAL_STORAGE_ERROR_SUFFIX)),f;case 5:return[2]}})})};b.prototype._evict=function(a,e,c){return S(this,void 0,void 0,function(){var g,h,d,f,l,p;return T(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,
,4]),[4,r.nextTask()];case 1:return n.sent(),[4,this._getCache(a)];case 2:return g=n.sent(),[2,g.delete(e,c)];case 3:h=n.sent();d=w.matchesSignature(h,z.UNEXPECTED_INTERNAL_ERROR);f=w.matchesCodeOrSignature(h,"NetworkError",z.NETWORK_ERROR);l=w.matchesCode(h,"CacheTainted");p=f||l||d;this._metricsService.error(a,h,this._errorLoggingScope,p?"ERROR":void 0);this._metricsService.countError(a,h,f?"".concat("NetworkError",":").concat(this._errorLoggingScope):this._errorLoggingScope);if(d)return this._metricsService.count(a,
"CacheOpen:Evict"+b._INTERNAL_STORAGE_ERROR_SUFFIX),this._metricsService.count(a,"CacheOpen:Evict:"+this._cacheFullName+b._INTERNAL_STORAGE_ERROR_SUFFIX),[2,!1];throw h;case 4:return[2]}})})};b.prototype._getCache=function(a){return S(this,void 0,void 0,function(){var e,c,g,h,d;return T(this,function(f){switch(f.label){case 0:if(this._isCacheTainted)throw t.create("CacheTainted",{cacheName:this._cacheFullNameWithVersion});if(this._cache)return[2,this._cache];e=F.getPerfNow();this._metricsService.count(a,
"CacheOpen:Request");this._metricsService.count(a,"CacheOpen:"+this._cacheFullName+":Request");f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this._swGlobal.caches.open(this._cacheFullNameWithVersion)];case 2:return c=f.sent(),g="".concat(this._errorLoggingScope,":CacheOpen"),this._metricsService.mark(a,g,e),this._metricsService.tag(a,g),this._metricsService.count(a,"CacheOpen:Success"),this._metricsService.count(a,"CacheOpen:"+this._cacheFullName+":Success"),[3,4];case 3:h=f.sent();this._metricsService.count(a,
"CacheOpen:Failure");this._metricsService.count(a,"CacheOpen:"+this._cacheFullName+":Failure");if(d=w.matchesSignature(h,z.UNEXPECTED_INTERNAL_ERROR))this._metricsService.count(a,"CacheOpen"+b._INTERNAL_STORAGE_ERROR_SUFFIX),this._metricsService.count(a,"CacheOpen:"+this._cacheFullName+b._INTERNAL_STORAGE_ERROR_SUFFIX);throw h;case 4:return this._cache||(this._cache=c),[2,this._cache]}})})};b.prototype._primeCache=function(){return S(this,void 0,void 0,function(){var a,b,c,g,h,d,f;return T(this,function(e){switch(e.label){case 0:a=
V.create(),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._getCache(a)];case 2:return e.sent(),[3,4];case 3:return b=e.sent(),c=t.create("CacheOpen",{cacheName:this._cacheFullNameWithVersion},b),g=w.matchesSignature(b,z.UNEXPECTED_INTERNAL_ERROR),h=w.matchesCode(b,"CacheTainted"),d=w.matchesCodeOrSignature(b,"NetworkError",z.NETWORK_ERROR),f=g||d||h,this._metricsService.error(a,c,this._errorLoggingScope,f?"ERROR":void 0),[3,4];case 4:return[2]}})})};b.prototype._cleanupOldCache=function(){var a=
this,b=function(){return S(a,void 0,void 0,function(){var a,b,e;return T(this,function(c){switch(c.label){case 0:return[4,this._swGlobal.caches.keys()];case 1:a=c.sent(),b=0,c.label=2;case 2:if(!(b<a.length))return[3,5];e=a[b];return 0!==e.indexOf(this._cacheFullName)||e===this._cacheFullNameWithVersion?[3,4]:[4,this._swGlobal.caches.delete(e)];case 3:c.sent(),c.label=4;case 4:return b++,[3,2];case 5:return[2]}})})};this._swGlobal.addEventListener("activate",function(a){a.waitUntil(b())})};b.prototype._toInternalRequest=
function(a){a=J.encode("string"===typeof a?a:a.url);a="https://".concat(v.NAMESPACE_LCASE,"?key\x3d").concat(a);return new Request(a,{method:"GET"})};b.prototype._toExternalRequest=function(a){var b="string"===typeof a?a:a.url,c="https://".concat(v.NAMESPACE_LCASE);a=t.create("InvalidCacheInternalRequestURL",{request:a});b=L.parse(b);if(!b)throw a;if(b.origin!==c)throw a;c=b.searchParams.get("key");if(!c)throw a;c=J.decode(c);if(!c)throw a;return c};b.prototype._cloneResponse=function(a,b){try{return b.clone()}catch(c){throw b=
t.wrap(c,"ResponseClone"),this._metricsService.error(a,b,this._errorLoggingScope),this._metricsService.countError(a,b,this._errorLoggingScope),b;}};b.prototype._getInternalCacheQueryOptions=function(){return{ignoreMethod:!1,ignoreSearch:!1,ignoreVary:!0}};b.prototype._logCounterMetrics=function(a,b,c){var e=this;(c=null===c||void 0===c?void 0:c.metricLoggingPrefixes)&&0!==c.length?c.forEach(function(c){e._metricsService.count(a,"".concat(c,":").concat(b))}):this._metricsService.count(a,b)};b._CACHE_NAME_PREFIX=
v.NAMESPACE;b._INTERNAL_STORAGE_ERROR_SUFFIX=":InternalStorageError";B([k],b.prototype,"read",null);B([k],b.prototype,"write",null);B([k],b.prototype,"evict",null);B([k],b.prototype,"exists",null);B([k],b.prototype,"cleanup",null);B([k],b.prototype,"entries",null);B([k],b.prototype,"shouldEvictOnCustomerContextChange",null);B([k],b.prototype,"logCounterMetrics",null);B([k],b.prototype,"_initCachePlugins",null);B([k],b.prototype,"_createPluginInstance",null);B([k],b.prototype,"_cleanupCache",null);
B([k],b.prototype,"_read",null);B([k],b.prototype,"_write",null);B([k],b.prototype,"_evict",null);B([k],b.prototype,"_getCache",null);B([k],b.prototype,"_primeCache",null);B([k],b.prototype,"_cleanupOldCache",null);B([k],b.prototype,"_toInternalRequest",null);B([k],b.prototype,"_toExternalRequest",null);B([k],b.prototype,"_cloneResponse",null);B([k],b.prototype,"_getInternalCacheQueryOptions",null);B([k],b.prototype,"_logCounterMetrics",null);return b}(u),ie=this&&this.__extends||function(){var f=
function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),ra=this&&this.__decorate||function(f,b,a,e){var c=
arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},nb=this&&this.__awaiter||function(f,b,a,e){function c(c){return c instanceof a?c:new a(function(a){a(c)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}
function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},ob=this&&this.__generator||function(f,b){function a(a){return function(c){return e([a,c])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;
h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];
return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},je=function(f){function b(a,b,c,g){var e=f.call(this)||this;e.logCtor(arguments);e._initCacheOperators(a,b,g,c);g.subscribe("CustomerContextChange",e,"sync");e._metricsService=b;return e}ie(b,f);b.prototype.read=function(a,b,c,g){return nb(this,void 0,void 0,function(){return ob(this,function(e){return[2,this._getCacheOperator(b).read(a,c,
g)]})})};b.prototype.write=function(a,b,c,g,h){return nb(this,void 0,void 0,function(){return ob(this,function(e){return[2,this._getCacheOperator(b).write(a,c,g,h)]})})};b.prototype.evict=function(a,b,c,g){return nb(this,void 0,void 0,function(){return ob(this,function(e){return[2,this._getCacheOperator(b).evict(a,c,g)]})})};b.prototype.exists=function(a,b,c,g){return nb(this,void 0,void 0,function(){return ob(this,function(e){return[2,this._getCacheOperator(b).exists(a,c,g)]})})};b.prototype.notifyEvent=
function(a){var b=this;switch(a.name){case "CustomerContextChange":Object.keys(this._cacheOperators).forEach(function(c){b._cacheOperators[c].shouldEvictOnCustomerContextChange()&&b._cacheOperators[c].cleanup(a.detail.eventOptions)}),this._logCacheEvictionMetricsOnCustomerContextChange(a.detail.options,a.detail.eventOptions)}};b.prototype._getCacheOperator=function(a){if(!this._cacheOperators[a])throw t.create("UnrecognizedCacheName",{name:a});return this._cacheOperators[a]};b.prototype._initCacheOperators=
function(a,b,c,g){var e=this;this._validateNoDuplicateCaches(g);this._cacheOperators={};g.forEach(function(d){var g=d.name,h=d.version,f=d.dontCleanOldVersions,k=d.dontAutoEvictOnCustomerContextChange;e._cacheOperators[d.name]=new he(a,b,c,Array.isArray(d.plugins)?d.plugins:[],g,h,!f,!k)})};b.prototype._validateNoDuplicateCaches=function(a){var b={};a.forEach(function(a){if(b.hasOwnProperty(a.name))throw t.create("DuplicateCacheName",{name:a.name});b[a.name]=!0})};b.prototype._logCacheEvictionMetricsOnCustomerContextChange=
function(a,b){var c=this;a.changes.forEach(function(e){var g,d;c._metricsService.count(b,"CacheService:CacheEvictionOn:".concat(e));"lop"===e&&c._metricsService.count(b,"CacheService:CacheEvictionOn:".concat(e,":").concat(null===(g=a[e])||void 0===g?void 0:g.old,"_").concat(null===(d=a[e])||void 0===d?void 0:d.new))})};ra([k],b.prototype,"read",null);ra([k],b.prototype,"write",null);ra([k],b.prototype,"evict",null);ra([k],b.prototype,"exists",null);ra([k],b.prototype,"notifyEvent",null);ra([k],b.prototype,
"_getCacheOperator",null);ra([k],b.prototype,"_initCacheOperators",null);ra([k],b.prototype,"_validateNoDuplicateCaches",null);return b}(u),ke=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+
String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Rb=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Hc=this&&this.__awaiter||function(f,
b,a,e){function c(c){return c instanceof a?c:new a(function(a){a(c)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},Ic=this&&this.__generator||function(f,b){function a(a){return function(c){return e([a,c])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:
a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=
d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},pb=function(f){function b(a){var b=f.call(this)||this;b._customerContextService=a;return b}ke(b,f);b.prototype.compute=
function(a){return Hc(this,void 0,void 0,function(){var b,c,g,h,d=this;return Ic(this,function(e){switch(e.label){case 0:return b=a.map(function(a){return d._getValueForKey(a)}),[4,Promise.all(b)];case 1:c=e.sent();g={};for(h=0;h<a.length;h++)g[a[h]]=c[h];return[2,g]}})})};b.prototype._getValueForKey=function(a){return Hc(this,void 0,void 0,function(){var b,c,g,h;return Ic(this,function(e){switch(a){case "clientlibversion":return[2,v.VERSION];case "session":return b=this._customerContextService.getSessionId(),
[2,this._getValueOrUnknown(b)];case "recognition":return c=this._customerContextService.getDirectedCustomerId(),[2,this._getValueOrUnknown(c)];case "language":return g=this._customerContextService.getLanguage(),[2,this._getValueOrUnknown(g)];case "appversion":return h=this._customerContextService.getAppVersion(),[2,this._getValueOrUnknown(h)];default:throw t.create("UnrecognizedCacheValidationKey",{key:a});}})})};b.prototype._getValueOrUnknown=function(a){return"string"===typeof a&&0<a.length?a:"unknown"};
Rb([k],b.prototype,"compute",null);Rb([k],b.prototype,"_getValueForKey",null);Rb([k],b.prototype,"_getValueOrUnknown",null);return b}(u),le=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+
String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),me=function(f){function b(){return null!==f&&f.apply(this,arguments)||this}le(b,f);return b}(u),ne=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return f(b,a)};return function(b,a){function e(){this.constructor=
b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Jc=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||
g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Kc=function(f){function b(a,b,c){void 0===b&&(b=!0);void 0===c&&(c=!0);var e=f.call(this)||this;e.logCtor(arguments);e._pattern=a;e._stripRefMarkers=b;e._stripLanguageFolder=c;return e}ne(b,f);b.prototype.match=function(a,b,c){return(a=L.parse(a.url))?this._pattern.test(this._getNormalizedPath(a.pathname)):!1};b.prototype._getNormalizedPath=function(a){this._stripRefMarkers&&(a=Va.stripRefMarkersFromPath(a));this._stripLanguageFolder&&(a=Va.stripLanguageFolderFromPath(a));
return a};Jc([k],b.prototype,"match",null);Jc([k],b.prototype,"_getNormalizedPath",null);return b}(me),oe=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");
f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),qb=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Sb=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof
a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},Tb=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),
0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();
continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Za=function(f){function b(a,b,c){var e=f.call(this)||this;e.logCtor(arguments);e._url=a;e._requestInit=b;e._libVersionHeader=c;return e}oe(b,f);b.prototype.getResponse=function(){return Sb(this,
void 0,void 0,function(){var a,b;return Tb(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,fetch(this._url,this._getRequestInit(this._requestInit))];case 1:return a=c.sent(),[3,3];case 2:throw b=c.sent(),t.wrap(b,"FailedToFetch",{url:this._url,requestInit:this._requestInit});case 3:if("opaqueredirect"===a.type)throw t.create("ResponseOpaqueRedirect",{url:a.url,status:a.status});if(!a.ok)throw t.create("ResponseNotOK",{url:a.url,status:a.status});return[2,a]}})})};b.prototype.getResponseText=
function(){return Sb(this,void 0,void 0,function(){var a;return Tb(this,function(b){switch(b.label){case 0:return[4,this.getResponse()];case 1:return a=b.sent(),[2,a.text()]}})})};b.prototype.getResponseJson=function(){return Sb(this,void 0,void 0,function(){var a,b,c;return Tb(this,function(e){switch(e.label){case 0:return[4,this.getResponse()];case 1:a=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,a.json()];case 3:return b=e.sent(),[3,5];case 4:throw c=e.sent(),t.wrap(c,"ResponseNotJSON",
{url:a.url});case 5:return[2,b]}})})};b.prototype._getRequestInit=function(a){a=a||{};a.method||(a.method="GET");if(this._libVersionHeader){var b=new Headers(a.headers||{});x.clientInfo.appendClientVersion(b);a.headers=b}return a};qb([k],b.prototype,"getResponse",null);qb([k],b.prototype,"getResponseText",null);qb([k],b.prototype,"getResponseJson",null);qb([k],b.prototype,"_getRequestInit",null);return b}(u),pe=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),rb=this&&this.__assign||function(){rb=Object.assign||function(f){for(var b,a=1,e=arguments.length;a<e;a++){b=
arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(f[c]=b[c])}return f};return rb.apply(this,arguments)},sa=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Ub=this&&this.__awaiter||
function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},Vb=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&
2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<
d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},qe=function(f){function b(a,b,c,g){var e=f.call(this)||this;e.logCtor(arguments);e._swGlobal=a;e._customerContextService=
b;e._cacheService=c;e._metricsService=g;e._errorLoggingScope="PrefetchExecutor";return e}pe(b,f);b.prototype.prefetch=function(a,b,c){return Ub(this,void 0,void 0,function(){var e,h,d,f,l,p,k,q,t,E,Xa,u,la,Q,v,Wb,x,y;return Vb(this,function(g){switch(g.label){case 0:return e=b.prefetch,h=e.endpoint,d=e.mode,f=e.delay,l=e.requestHeaders,[4,r.wait(1E3*f)];case 1:g.sent();p=a.storage;k=p.cacheName;q=p.cacheKey;t=p.validationKeys;if("cache-miss"!==d)return[3,5];g.label=2;case 2:return g.trys.push([2,
4,,5]),[4,this._exists(k,q,t,c)];case 3:return(E=g.sent())?[2,{ok:!1,exitCode:"Exists"}]:[3,5];case 4:return g.sent(),[2,{ok:!1,exitCode:"CacheError"}];case 5:return[4,this._hasPrefetchCredit()];case 6:Xa=g.sent();if(!Xa)return[2,{ok:!1,exitCode:"NoCredit"}];u=this._getPrefetchURL(h,a.name,b.label);if(!u)return[2,{ok:!1,exitCode:"InvalidURL"}];la=F.getEpochSeconds();g.label=7;case 7:return g.trys.push([7,9,,10]),[4,(new Za(u,this._getPrefetchRequestInit(l))).getResponse()];case 8:return Q=g.sent(),
[2,{ok:!0,requestStartTimestampSeconds:la,response:Q}];case 9:return v=g.sent(),Wb=w.matchesCode(v,"FailedToFetch"),x=w.matchesCodeOrSignature(v,"NetworkError",z.NETWORK_ERROR),this._metricsService.error(c,v,this._errorLoggingScope,Wb||x?"ERROR":void 0),y=this._errorLoggingScope,x?y="".concat("NetworkError",":").concat(this._errorLoggingScope):Wb&&(y="".concat("FailedToFetch",":").concat(this._errorLoggingScope)),this._metricsService.countError(c,v,y),[2,{ok:!1,exitCode:"NetworkError"}];case 10:return[2]}})})};
b.prototype._exists=function(a,b,c,g){return Ub(this,void 0,void 0,function(){var e,d,f,l;return Vb(this,function(h){switch(h.label){case 0:return d=(e=this._cacheService).exists,f=[g,a,b],l={},[4,(new pb(this._customerContextService)).compute(c)];case 1:return[2,d.apply(e,f.concat([(l.validationKeys=h.sent(),l)]))]}})})};b.prototype._hasPrefetchCredit=function(){return Ub(this,void 0,void 0,function(){return Vb(this,function(a){return[2,!0]})})};b.prototype._getPrefetchURL=function(a,e,c){if(a=L.parse(a,
this._swGlobal.location.href)){var g=this._getPageShellClass(a);this._addQueryParam(a,b._QUERY_PARAM_PAGE_SHELL,g);this._addQueryParam(a,b._QUERY_PARAM_CACHE_POP_RULE,e);this._addQueryParam(a,b._QUERY_PARAM_CACHE_POP_RULE_TRIGGER,c);this._addQueryParam(a,b._QUERY_PARAM_REF_TAG,this._getRefTag(g,e,c),!1);return a.href}};b.prototype._addQueryParam=function(a,b,c,g){void 0===g&&(g=!0);g&&a.searchParams.delete(b);a.searchParams.append(b,c)};b.prototype._getPageShellClass=function(a){a=a.searchParams.get(b._QUERY_PARAM_PAGE_SHELL);
a||(a=b._PAGE_SHELL_TYPE_DEFAULT);return a};b.prototype._getRefTag=function(a,e,c){return"".concat(b._REF_TAG_PREFIX,"_").concat(a.substr(0,16).toLocaleLowerCase(),"_").concat(e.substr(0,16).toLocaleLowerCase(),"_").concat(c.substr(0,16).toLocaleLowerCase())};b.prototype._getPrefetchRequestInit=function(a){void 0===a&&(a={});return{method:"GET",mode:"same-origin",credentials:"same-origin",redirect:"error",headers:rb(rb({},{accept:"text/html,application/xhtml+xml,*/*;q\x3d0.9"}),a)}};b._QUERY_PARAM_PAGE_SHELL=
"ls_pg_sh";b._QUERY_PARAM_CACHE_POP_RULE="ls_cp_rl";b._QUERY_PARAM_CACHE_POP_RULE_TRIGGER="ls_cp_rl_tr";b._QUERY_PARAM_REF_TAG="ref_";b._PAGE_SHELL_TYPE_DEFAULT="default";b._REF_TAG_PREFIX=v.NAMESPACE_SHORT;sa([k],b.prototype,"prefetch",null);sa([k],b.prototype,"_exists",null);sa([k],b.prototype,"_hasPrefetchCredit",null);sa([k],b.prototype,"_getPrefetchURL",null);sa([k],b.prototype,"_addQueryParam",null);sa([k],b.prototype,"_getPageShellClass",null);sa([k],b.prototype,"_getRefTag",null);sa([k],b.prototype,
"_getPrefetchRequestInit",null);return b}(u),re=function(f){return K.div([K.style('body,html{font-family:"Amazon Ember",Arial,sans-serif;background:#fff}.main{position:fixed;bottom:0;left:0;right:0;padding:50px 0;text-align:center}.main-image{width:50%}.subline{font-size:.75rem;color:#999;margin:10px 0}.button{display:block;font-size:1rem;padding:10px;width:80%;margin:10px auto;border:1px solid #ccc;border-radius:5px;box-shadow:0 3px 0 #ccc;background:#fff}.button:active{border-color:#12626d;background-color:#edfcff}.hidden{display:none}'),
'\x3cdiv class\x3d"main hidden" id\x3d"fallback-content-container"\x3e\x3cimg class\x3d"main-image" src\x3d"data:image/jpeg;base64,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"\x3e\x3ch3 class\x3d"headline"\x3eOOPS!\x3c/h3\x3e\x3ch3 class\x3d"headline"\x3eSomething went wrong.\x3c/h3\x3e\x3cbutton class\x3d"button" id\x3d"try-again"\x3eTRY AGAIN\x3c/button\x3e\x3cp class\x3d"subline"\x3eCS2. Error occurred of type S-2.\x3c/div\x3e',
K.script('!function(e,r){"use strict";var t\x3de.failingUrl,n\x3de.referrerUrl,o\x3de.errorCode,a\x3de.description,c\x3de.fallbackContentTimeout;r.setTimeout(function(){var e\x3ddocument.getElementById("fallback-content-container");if(e){var t\x3ddocument.getElementById("try-again");t\x26\x26t.addEventListener("click",function(){r.location.reload()}),e.classList.remove("hidden")}},c),r.appErrorWebAppInterface\x26\x26"function"\x3d\x3dtypeof r.appErrorWebAppInterface.showError\x26\x26(r.appErrorWebAppInterface.called\x3d!0,r.appErrorWebAppInterface.showError(t,o,a,n))}(model,window);',
f)].join("\n"))},se=function(f){return K.script('!function(e,t){"use strict";function n(e){t.ue\x26\x26"function"\x3d\x3dtypeof t.ue.tag\x26\x26t.ue.tag(e)}function a(e){return[o,"Page"].concat(e).join(":").toLowerCase()}var o\x3de.namespace;try{var c\x3de.globalObjectName,r\x3de.contentFragmentName,m\x3de.contentFragmentData;c\x26\x26(t[c]\x3dt[c]||{},t[c].contentFragments\x3dt[c].contentFragments||{},t[c].contentFragments[r]\x3dm);var g\x3d"lightsaber:content-fragment:model:"+r,l\x3d{bubbles:!0,cancelable:!1,detail:m},i\x3dnew CustomEvent(g,l);t.dispatchEvent(i);var u\x3dt.AmazonUIPageJS?t.AmazonUIPageJS:t.P;u\x26\x26"function"\x3d\x3dtypeof u.declare\x26\x26u.declare(g,m)}catch(s){n(a(["ContentFragment","Model","Fail"]))}}(model,window);',
f)},te=function(f){return K.script('!function(t,e){"use strict";function i(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function o(t){for(var e\x3ddocument.cookie?document.cookie.split(";"):[],o\x3d0;o\x3ce.length;o++){var n\x3de[o].trim().split("\x3d"),r\x3di(n[0]);if(t\x3d\x3d\x3dr){var u\x3dn.slice(1).join("\x3d");return i(u)}}}function n(t){return[s,"Page","CsmReset"].concat(t).join(":").toLowerCase()}function r(t){e.ue\x26\x26"function"\x3d\x3dtypeof e.ue.tag\x26\x26e.ue.tag(t)}function u(i,o){return e.csa\x26\x26"function"\x3d\x3dtypeof e.csa?(e.csa("Config",{"CacheDetection.RequestID":i}),e.csa("Events")("setEntity",{page:{requestId:i},session:{id:o}}),void r(n([t.attribution,"OK","CSA"]))):void r(n([t.attribution,"Fail","CSA"]))}function a(i,o){return e.ue\x26\x26"function"\x3d\x3dtypeof e.ue.reset?(e.ue.reset(i,o,s.toLowerCase()),"string"\x3d\x3dtypeof e.ue.oid\x26\x26e.ue.oid!\x3d\x3di\x26\x26(e.ue.oid\x3di),void r("T1"\x3d\x3d\x3dt.treatment?n([t.attribution,"OK","UE"]):n(["OK"]))):void r(n("T1"\x3d\x3d\x3dt.treatment?[t.attribution,"Fail","UE"]:["Fail","API"]))}var s\x3dt.namespace,c\x3dt.requestId;if(!c)return void r(n(["Fail","RID"]));var d\x3do("session-id");return d?(a(c,d),void u(c,d)):void r(n(["Fail","SID"]))}(model,window);',
f)},ue=function(f){return K.div([K.style("#lightsaber-debug-info-container{display:none;padding:10px;background:#cfcfcf;border-top:1px solid #d6d6d6;position:fixed;bottom:0;left:0;right:0;max-height:300px;overflow:scroll;z-index:9999}#lightsaber-debug-info-learn-more{display:block;text-decoration:none}#lightsaber-debug-info-metadata-container{display:block;background:#d6d6d6;border:1px dashed #666;margin:10px 0 0;padding:10px;overflow:scroll}#lightsaber-debug-info-close-btn{position:absolute;top:10px;right:10px;cursor:pointer;color:#900}"),
'\x3cdiv id\x3d"lightsaber-debug-info-container"\x3e\x3ch4 id\x3d"lightsaber-debug-info-title"\x3eLightsaber Debug Info\x3c/h4\x3e\x3ca id\x3d"lightsaber-debug-info-learn-more" href\x3d"#" target\x3d"_blank" rel\x3d"noopener noreferrer"\x3eLearn More\x3c/a\x3e\x3cpre id\x3d"lightsaber-debug-info-metadata-container"\x3e\x3c/pre\x3e\x3cdiv id\x3d"lightsaber-debug-info-close-btn"\x3e[X]\x3c/div\x3e\x3c/div\x3e',K.script('!function(e,t){"use strict";function n(e){console.debug("["+o+" Debug]",e)}var o\x3de.namespace,r\x3ddocument.querySelector("#lightsaber-debug-info-container"),i\x3ddocument.querySelector("#lightsaber-debug-info-metadata-container"),c\x3ddocument.querySelector("#lightsaber-debug-info-close-btn"),u\x3ddocument.querySelector("#lightsaber-debug-info-learn-more");if(!(r\x26\x26i\x26\x26c\x26\x26u))return void n("Encountered unexpected DOM issue for Debug Tool, exiting...");u.setAttribute("href",e.learnMoreLink);var l\x3dt[e.globalObjectName];i.textContent\x3de.globalObjectName+" \x3d "+JSON.stringify(l,void 0,2),c.addEventListener("click",function(){r.remove()}),r.style.display\x3d"block"}(model,window);',
f)].join("\n"))},ve=function(f){return K.style(f.stylesheetContent)},we=function(f){return K.script('!function(e,t){"use strict";function a(e){t.ue\x26\x26"function"\x3d\x3dtypeof t.ue.tag\x26\x26t.ue.tag(e)}function n(e,a){t.ue\x26\x26"function"\x3d\x3dtypeof t.ue.count\x26\x26t.ue.count(e,a)}function i(e){return[r,"Page"].concat(e).join(":").toLowerCase()}var r\x3de.namespace;try{var c\x3d!!e.hit,o\x3de.meta,u\x3de.globalObjectName,m\x3de.pModulePrefix;u\x26\x26(t[u]\x3dt[u]||{},t[u].hit\x3dc,t[u].meta\x3do),t.P\x26\x26t.P.declare\x26\x26(t.P.declare(m+"hit",c),t.P.declare(m+"meta",o));var f\x3do.navigationRule,g\x3do.navigationRuleScope,l\x3do.responseStrategy,p\x3do.fetchEventTimeOrigin,v\x3dt.performance\x26\x26(performance.timeOrigin||performance.timing.navigationStart);if(!(f\x26\x26g\x26\x26l\x26\x26l.name\x26\x26p\x26\x26v))return;a(i(["Hit"]));var h\x3do.fetchEventTimeOrigin-v;n(i([f,l.name,"SWFetchDelta"]),h),n(i([g,l.name,"SWFetchDelta"]),h)}catch(d){a(i(["Metadata","Fail"]))}}(model,window);',
f)},xe=function(f){return K.script('!function(e,a){"use strict";function n(e){try{var a\x3dnew URL(o),n\x3da.searchParams.get(s),r\x3dn?n+"_"+e:e;return a.searchParams.set(s,r),a.href}catch(t){return o}}function r(){m\x3d!0,c?a.location.replace(n("vlr")):a.location.assign(n("vla"))}function t(){var e\x3da.AmazonUIPageJS?a.AmazonUIPageJS:a.P,t\x3de\x26\x26"function"\x3d\x3dtypeof e.when;if(!t)return void r();var o\x3da.setTimeout(r,u);e.when("mash").execute(function(e){m||(a.clearTimeout(o),c?e.navstack.begin().replace({url:n("vmr")}).end():e.navigate({url:n("vmn")}))})}var o\x3de.url,c\x3de.replaceHistory,i\x3de.useMash,u\x3de.mashTimeout,s\x3de.tagParamName,m\x3d!1;i?t():r()}(model,window);',
f)},ye=function(f){return K.script('!function(e,o){"use strict";if(o.performance\x26\x26o.ue\x26\x26"function"\x3d\x3dtypeof o.ue.count){var n\x3do.performance.now(),c\x3d[e.namespace,"Page"].concat(e.counter).join(":").toLowerCase(),t\x3d[e.namespace,"Page"].concat(e.counterScope).join(":").toLowerCase();o.ue.count(c,n),o.ue.count(t,n)}}(model,window);',f)},Lc=function(f){return K.script('!function(e,t){"use strict";function n(e){return[a,"Page","PModule"].concat(e).join(":").toLowerCase()}function o(e,n){t.ue\x26\x26"function"\x3d\x3dtypeof t.ue.count\x26\x26t.ue.count(e,n)}function r(e){return"function"\x3d\x3dtypeof e}var a\x3de.namespace,s\x3dt.AmazonUIPageJS?t.AmazonUIPageJS:t.P;s\x26\x26"function"\x3d\x3dtypeof s.register\x26\x26e.markers.forEach(function(e){try{s.register(e),s.when(e).execute(function(){var n\x3d"lightsaber:page:pmodule:"+e;r(t.uex)\x26\x26t.uex("ld",n,{wb:1})})}catch(a){var u\x3da\x26\x26a.message\x26\x26"string"\x3d\x3dtypeof a.message\x26\x26r(a.message.toLowerCase)\x26\x26r(a.message.indexOf);if(u\x26\x26-1!\x3d\x3da.message.toLowerCase().indexOf("already registered"))return void o(n(["ReRegister",e]),1);throw a}})}(model,window);',
f)},La=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},$a=function(){function f(b,a,e){this._controller=b;this._metricsService=a;this._eventOptions=e;this._readableStreamState=0}f.prototype.close=function(){try{this._controller.close(),
this._readableStreamState=1}catch(b){this._handleControllerError(b,"Close",!0)}};f.prototype.safeClose=function(){try{this._controller.close(),this._readableStreamState=1}catch(b){this._handleControllerError(b,"SafeClose",!1)}};f.prototype.enqueue=function(b){try{this._controller.enqueue(b)}catch(a){this._handleControllerError(a,"Enqueue",!0)}};f.prototype.error=function(b){try{this._controller.error(b),this._readableStreamState=2}catch(a){this._handleControllerError(a,"Error",!0)}};f.prototype.isClosed=
function(){return 0!=this._readableStreamState};f.prototype.isUnexpectedlyClosed=function(){return 3===this._readableStreamState};f.prototype._handleControllerError=function(b,a,e){void 0===e&&(e=!0);w.matchesSignature(b,z.READABLE_STREAM_DEFAULT_CONTROLLER_ERROR)&&(1===this._readableStreamState?this._metricsService.count(this._eventOptions,"ControllerWrapper:LightsaberClosed:".concat(a)):0===this._readableStreamState&&this._metricsService.count(this._eventOptions,"ControllerWrapper:UnexpectedlyClosed:".concat(a)),
this._readableStreamState=3,b=t.wrap(b,"ControllerUnexpectedlyClosed","","","ERROR"));if(e)throw b;};La([k],f.prototype,"close",null);La([k],f.prototype,"safeClose",null);La([k],f.prototype,"enqueue",null);La([k],f.prototype,"error",null);La([k],f.prototype,"isClosed",null);La([k],f.prototype,"isUnexpectedlyClosed",null);return f}(),ze=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),sb=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,
b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Ae=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},Be=this&&this.__generator||function(f,
b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-
1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&
(n[Symbol.iterator]=function(){return this}),n},Ba=function(f){function b(a,b){var c=f.call(this)||this;c.logCtor(arguments);c.eventOptions=a;c.metricsService=b;return c}ze(b,f);b.prototype.getResponse=function(){return Ae(this,void 0,void 0,function(){var a;return Be(this,function(b){try{return this.metricsService.count(this.eventOptions,"Transmog:Use:".concat(this.NAME)),[2,this.transmog()]}catch(c){throw a=t.wrap(c,"Transmog",void 0,'Unexpected error while running "'.concat(this.NAME,'" transmog')),
this.metricsService.error(this.eventOptions,a,this.getErrorLoggingScope()),this.metricsService.countError(this.eventOptions,a,this.getErrorLoggingScope()),a;}})})};b.prototype.getInit=function(a,b,c){void 0===a&&(a=200);return{status:a,statusText:b,headers:Sa.getCommonHTMLHeaders(c)}};b.prototype.renderTemplate=function(a,b){try{var c=a(b).trim()}catch(g){a=t.wrap(g,"TemplateRender",{view:a,model:b},'Template render failed while running "'.concat(this.NAME,'" transmog')),this.metricsService.error(this.eventOptions,
a,this.getErrorLoggingScope()),this.metricsService.countError(this.eventOptions,a,this.getErrorLoggingScope()),c="\x3c!-- ".concat(a," --\x3e")}return fa.isDebug?["","\x3c!-- ".concat(v.NAMESPACE,":Feature:").concat(this.NAME," --\x3e"),c,"\x3c!-- ".concat(v.NAMESPACE,":EndFeature:").concat(this.NAME," --\x3e"),""].join("\n"):c};b.prototype.getErrorLoggingScope=function(){return"".concat(this.NAME,"ResponseTransmog")};sb([k],b.prototype,"getResponse",null);sb([k],b.prototype,"getInit",null);sb([k],
b.prototype,"renderTemplate",null);sb([k],b.prototype,"getErrorLoggingScope",null);return b}(u),Ce=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");
f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),tb=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Xb=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof
a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},Yb=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),
0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();
continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},De=function(f){function b(a,b,c,g,h){var e=f.call(this,a,b)||this;e.NAME="ContentFragment";e.logCtor(arguments);e._name=c;e._serializableData=h;e._predefinedContent=g;e._textEncoder=
new TextEncoder;return e}Ce(b,f);b.prototype.transmog=function(){return Xb(this,void 0,void 0,function(){return Yb(this,function(a){return[2,new Response(this._getOutputStream(),this.getInit())]})})};b.prototype._getOutputStream=function(){var a=this;return new ReadableStream({start:function(b){return Xb(a,void 0,void 0,function(){var a;return Yb(this,function(c){switch(c.label){case 0:return a=new $a(b,this.metricsService,this.eventOptions),[4,this._toOutputStream(this._predefinedContent,a)];case 1:return c.sent(),
[4,this._toOutputStream(this._getWrappedSerializedData(),a)];case 2:return c.sent(),a.close(),[2]}})})}})};b.prototype._toOutputStream=function(a,b){return Xb(this,void 0,void 0,function(){var c;return Yb(this,function(e){switch(e.label){case 0:return"string"===typeof a?(c=this._textEncoder.encode(a),b.enqueue(c),[2]):a.body instanceof ReadableStream?[4,Ja.drain(a.body,function(a){b.enqueue(a)})]:[2];case 1:return e.sent(),[2]}})})};b.prototype._getWrappedSerializedData=function(){try{var a=pa.deep.json(this._serializableData)}catch(e){this.metricsService.countError(this.eventOptions,
t.create("SerializationFailed"),this.getErrorLoggingScope()),a={}}return this.renderTemplate(se,{namespace:v.NAMESPACE,globalObjectName:"$".concat(v.NAMESPACE),contentFragmentName:this._name,contentFragmentData:a})};tb([k],b.prototype,"transmog",null);tb([k],b.prototype,"_getOutputStream",null);tb([k],b.prototype,"_toOutputStream",null);tb([k],b.prototype,"_getWrappedSerializedData",null);return b}(Ba),Ee=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Zb=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,
a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Ca=function(f){function b(a,b,c,g){void 0===g&&(g=!0);var e=f.call(this,a,b)||this;e.logCtor(arguments);ka.validateIsUsable(c);g&&ka.validateIsOK(c);e._source=e._getClonedResponse(c);return e}Ee(b,f);b.prototype.getSource=function(a){void 0===a&&(a=!1);if(!this._source)throw t.create("ResponseInvalid");
return a?this._source:this._getClonedResponse(this._source)};b.prototype.getSourceInit=function(){if(!this._source)throw t.create("ResponseInvalid");return this.getInit(this._source.status,this._source.statusText,this._source.headers)};b.prototype._getClonedResponse=function(a){try{return a.clone()}catch(e){throw a=t.wrap(e,"ResponseClone"),this.metricsService.error(this.eventOptions,a,this.getErrorLoggingScope()),this.metricsService.countError(this.eventOptions,a,this.getErrorLoggingScope()),a;}};
Zb([k],b.prototype,"getSource",null);Zb([k],b.prototype,"getSourceInit",null);Zb([k],b.prototype,"_getClonedResponse",null);return b}(Ba),Fe=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+
String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),$b=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Ge=this&&this.__awaiter||function(f,
b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},He=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:
a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=
d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Mc=function(f){function b(a,b,c,g){var e=f.call(this,a,b,c)||this;e.NAME="EagerLoadJSMarker";e.markers=g;e.logCtor(arguments);
return e}Fe(b,f);b.prototype.transmog=function(){return Ge(this,void 0,void 0,function(){var a,b;return He(this,function(c){switch(c.label){case 0:return a=this.getSource(),[4,a.text()];case 1:return b=c.sent(),[2,new Response(this._getHTML(b),this.getSourceInit())]}})})};b.prototype._getHTML=function(a){a=this._replaceMarkers(a);return a+=this.renderTemplate(Lc,{markers:this.markers.map(function(a){return"".concat(a,".").concat(v.NAMESPACE_LCASE)})})};b.prototype._replaceMarkers=function(a){var b=
this,c=a;this.markers.forEach(function(a){try{var e=new RegExp(Ib.escapeRegExp(b._getAUILoaderWithMarkerString(a)),"g");c=c.replace(e,b._getAUILoaderWithMarkerString("".concat(a,".").concat(v.NAMESPACE_LCASE)))}catch(d){a=t.create("EagerLoadJSMarkerReplacementFailed",a,d),b.metricsService.error(b.eventOptions,a,b.NAME)}});return c};b.prototype._getAUILoaderWithMarkerString=function(a){return b.AUI_JS_LOADER_PREFIX+a+b.AUI_JS_LOADER_SUFFIX};b.AUI_JS_LOADER_PREFIX="(window.AmazonUIPageJS ? AmazonUIPageJS : P).when('";
b.AUI_JS_LOADER_SUFFIX="').execute(function() {";$b([k],b.prototype,"transmog",null);$b([k],b.prototype,"_getHTML",null);$b([k],b.prototype,"_replaceMarkers",null);return b}(Ca),Ie=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==
a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Nc=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,
a,g),g},ac=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},bc=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");
for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=
d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Oc=function(f){function b(a,b,c){var e=f.call(this,a,b,c)||this;e.NAME="InlinedStylesheet";
e.logCtor(arguments);return e}Ie(b,f);b.prototype.transmog=function(){return ac(this,void 0,void 0,function(){var a,e,c,g,h,d=this;return bc(this,function(f){switch(f.label){case 0:return a=this.getSource(),[4,a.text()];case 1:e=f.sent(),f.label=2;case 2:return f.trys.push([2,4,,5]),[4,oa.replaceAsync(e,b.NEEDLE_PATTERN,function(a,b){return ac(d,void 0,void 0,function(){return bc(this,function(a){return[2,this._getInlinedStyles(b)]})})})];case 3:return c=f.sent(),[3,5];case 4:return g=f.sent(),h=
w.matchesCode(g,"FailedToFetch"),this.metricsService.error(this.eventOptions,g,this.getErrorLoggingScope(),h?"ERROR":void 0),this.metricsService.countError(this.eventOptions,g,h?"".concat("FailedToFetch",":").concat(this.getErrorLoggingScope()):this.getErrorLoggingScope()),c=e,[3,5];case 5:return[2,new Response(c,this.getSourceInit())]}})})};b.prototype._getInlinedStyles=function(a){return ac(this,void 0,void 0,function(){var b;return bc(this,function(c){switch(c.label){case 0:return[4,(new Za(a)).getResponseText()];
case 1:return b=c.sent(),[2,this.renderTemplate(ve,{stylesheetUrl:a,stylesheetContent:b})]}})})};b.NEEDLE_PATTERN=/<link.+rel="stylesheet".+href="([^"]+)".*\/>/gi;Nc([k],b.prototype,"transmog",null);Nc([k],b.prototype,"_getInlinedStyles",null);return b}(Ca),Je=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};
return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Ke=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-
1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Le=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},Me=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,
b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&
(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),
n},Ne=function(f){function b(a,b,c,g){var e=f.call(this,a,b,c)||this;e.NAME="PatternReplace";e.patternReplacementList=g;e.logCtor(arguments);return e}Je(b,f);b.prototype.transmog=function(){return Le(this,void 0,void 0,function(){var a,b,c;return Me(this,function(e){switch(e.label){case 0:return a=this.getSource(),[4,a.text()];case 1:return b=e.sent(),c=this._getHTML(b),[2,new Response(c,this.getSourceInit())]}})})};b.prototype._getHTML=function(a){var b=a;this.patternReplacementList.forEach(function(a){b=
b.replace(a.pattern,a.replacement)});return b};Ke([k],b.prototype,"transmog",null);return b}(Ca),Oe=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");
f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Pc=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Pe=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof
a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},Qe=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),
0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();
continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Qc=function(f){function b(a,b,c){var e=f.call(this,a,b,c)||this;e.NAME="ShoppingPortalLoadJSMarker";e.logCtor(arguments);return e}Oe(b,f);b.prototype.transmog=function(){return Pe(this,
void 0,void 0,function(){var a,b;return Qe(this,function(c){switch(c.label){case 0:return a=this.getSource(),[4,a.text()];case 1:return b=c.sent(),[2,new Response(this._getHTML(b),this.getSourceInit())]}})})};b.prototype._getHTML=function(a){a=a.replace(b.LOAD_JS_PATTERN,b.LOAD_JS_REPLACER).replace(b.CRIT_LOAD_JS_PATTERN,b.CRIT_LOAD_JS_REPLACER);return a+=this.renderTemplate(Lc,{markers:[b.LOAD_JS_REPLACER,b.CRIT_LOAD_JS_REPLACER]})};b.LOAD_JS_PATTERN=/\bsp\.load\.js\b/g;b.LOAD_JS_REPLACER="sp.load.js.".concat(v.NAMESPACE_LCASE);
b.CRIT_LOAD_JS_PATTERN=/\bsp\.load\.critical\.js\b/g;b.CRIT_LOAD_JS_REPLACER="sp.load.critical.js.".concat(v.NAMESPACE_LCASE);Pc([k],b.prototype,"transmog",null);Pc([k],b.prototype,"_getHTML",null);return b}(Ca),Re=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=
b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),cc=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||
g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Se=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},Te=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");
for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=
d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Rc=function(f){function b(a,b,c,g){var e=f.call(this,a,b,c)||this;e.NAME=
"SyntheticRequestId";e._useStaticRID=!!g;e.logCtor(arguments);return e}Re(b,f);b.prototype.transmog=function(){return Se(this,void 0,void 0,function(){var a,e,c,g,h,d;return Te(this,function(f){switch(f.label){case 0:a=this.getSource();e=a.headers.get(x.shared.REQUEST_ID_OPF_HEADER);if(!e)return[2,new Response(a.body,this.getSourceInit())];c=this._useStaticRID?b.STATIC_RID:"".concat(b.SYNTHETIC_PREFIX).concat(oa.generateRandomSequence(b.SEQUENCE_LENGTH,b.SEQUENCE_RADIX)).toUpperCase();return[4,a.text()];
case 1:return g=f.sent(),h=this._getHTML(g,e,c),d=this._getResponseInit(e,c),[2,new Response(h,d)]}})})};b.prototype._getHTML=function(a,b,c){b=new RegExp("".concat(b),"g");return a.replace(b,c)};b.prototype._getResponseInit=function(a,b){var c=this.getSourceInit();c.headers instanceof Headers&&(c.headers.append(x.shared.getLibHeader("original-rid"),a),c.headers.delete(x.shared.REQUEST_ID_OPF_HEADER),c.headers.append(x.shared.REQUEST_ID_OPF_HEADER,b));return c};b.SYNTHETIC_PREFIX=v.NAMESPACE_UCASE;
b.SEQUENCE_LENGTH=20-b.SYNTHETIC_PREFIX.length;b.SEQUENCE_RADIX=36;b.STATIC_RID=b.SYNTHETIC_PREFIX+"0".repeat(b.SEQUENCE_LENGTH);cc([k],b.prototype,"transmog",null);cc([k],b.prototype,"_getHTML",null);cc([k],b.prototype,"_getResponseInit",null);return b}(Ca),Ue=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};
return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Ve=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-
1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},We=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},Xe=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,
b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&
(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),
n},Sc=function(f){function b(a,b,c){var e=f.call(this,a,b)||this;e.NAME="DebugInfo";e.logCtor(arguments);e._pageUrl=c;return e}Ue(b,f);b.prototype.transmog=function(){return We(this,void 0,void 0,function(){var a,b,c;return Xe(this,function(e){a=L.parse(this._pageUrl);b="".concat(v.NAMESPACE_LCASE,"Debug");c=!!a&&a.searchParams.has(b)&&fa.isDebug;return[2,new Response(c?this.renderTemplate(ue,{namespace:v.NAMESPACE,globalObjectName:"$".concat(v.NAMESPACE),learnMoreLink:v.HELP_LINK}):"",this.getInit())]})})};
Ve([k],b.prototype,"transmog",null);return b}(Ba),Ye=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):
(e.prototype=a.prototype,new e)}}(),Da=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},dc=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||
(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},ec=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;
if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=
[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Tc=function(f){function b(a,b,c,g,h,d,n){var e=f.call(this,a,b,c)||this;e.logCtor(arguments);e.needle=g;e.needleLength=g.length;e.needleHeaderKey=h;e.inclusive=d;e.needleWasFound=!1;e.buffer="";e._drainBufferAtEnd=
n;e._textEncoder=new TextEncoder;e._textDecoder=new TextDecoder("utf-8",{fatal:!0});return e}Ye(b,f);b.prototype.transmog=function(){return dc(this,void 0,void 0,function(){var a,b;return ec(this,function(c){a=this.getSource();b=a.body;return[2,new Response(this._getOutputStream(b),this._getResponseInit())]})})};b.prototype.decode=function(a){return this._textDecoder.decode(a,{stream:!0})};b.prototype.encode=function(a){return this._textEncoder.encode(a)};b.prototype.scan=function(a){return a.indexOf(this.needle)};
b.prototype._getOutputStream=function(a){var b=this;return new ReadableStream({start:function(c){return dc(b,void 0,void 0,function(){var b;return ec(this,function(e){switch(e.label){case 0:return b=new $a(c,this.metricsService,this.eventOptions),[4,this._toOutputStream(a,b)];case 1:return e.sent(),[2]}})})}})};b.prototype._toOutputStream=function(a,b){return dc(this,void 0,void 0,function(){var c,e,h,d=this;return ec(this,function(g){switch(g.label){case 0:return g.trys.push([0,2,,3]),[4,Ja.drain(a,
function(a){d.processChunk(b,a)})];case 1:g.sent();this._drainBufferAtEnd&&(b.enqueue(this.encode(this.buffer)),this.buffer="");if(!this.needleWasFound)throw t.create("StreamTransformMissingDelimiter");b.close();return[3,3];case 2:return c=g.sent(),e=t.wrap(c,"StreamTransform",void 0,'Stream processing failed while running "'.concat(this.NAME,'" transmog')),h=w.matchesCodeOrSignature(c,"NetworkError",z.NETWORK_ERROR),this.metricsService.error(this.eventOptions,e,this.getErrorLoggingScope(),h?"ERROR":
void 0),this.metricsService.countError(this.eventOptions,e,h?"".concat("NetworkError",":").concat(this.getErrorLoggingScope()):this.getErrorLoggingScope()),b.error(e),[3,3];case 3:return[2]}})})};b.prototype._getResponseInit=function(){var a=this.getSourceInit();if(!this.needleHeaderKey)return a;var b=new Headers(a.headers||{});b.append(x.shared.getClientOnlyLibHeader(this.needleHeaderKey),J.encode(this.needle));a.headers=b;return a};Da([k],b.prototype,"transmog",null);Da([k],b.prototype,"decode",
null);Da([k],b.prototype,"encode",null);Da([k],b.prototype,"scan",null);Da([k],b.prototype,"_getOutputStream",null);Da([k],b.prototype,"_toOutputStream",null);Da([k],b.prototype,"_getResponseInit",null);return b}(Ca),Ze=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=
b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),$e=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||
g;return 3<c&&g&&Object.defineProperty(b,a,g),g},af=function(f){function b(a,b,c,g,h){void 0===h&&(h=!1);var e=f.call(this,a,b,c,g,void 0,h,!1)||this;e.NAME="AfterSingleDelimiter";e.logCtor(arguments);return e}Ze(b,f);b.prototype.processChunk=function(a,b){if(this.needleWasFound)a.enqueue(b);else{b=this.decode(b);b=this.buffer+b;var c=this.scan(b);-1===c?this.buffer=b.slice(-this.needleLength+1):(b=b.slice(this.inclusive?c:c+this.needleLength),a.enqueue(this.encode(b)),this.buffer="",this.needleWasFound=
!0)}};$e([k],b.prototype,"processChunk",null);return b}(Tc),bf=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===
a?Object.create(a):(e.prototype=a.prototype,new e)}}(),cf=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Uc=function(f){function b(a,b,c,g,h,d){void 0===d&&(d=!0);var e=f.call(this,a,b,c,g,h,d,!0)||this;
e.NAME="BeforeSingleDelimiter";e.logCtor(arguments);return e}bf(b,f);b.prototype.processChunk=function(a,b){if(!this.needleWasFound){b=this.decode(b);b=this.buffer+b;var c=this.scan(b);-1===c?(c=b.substring(0,b.length-this.needleLength+1),a.enqueue(this.encode(c)),this.buffer=b.slice(-this.needleLength+1)):(b=b.substring(0,this.inclusive?c+this.needleLength:c),a.enqueue(this.encode(b)),this.buffer="",this.needleWasFound=!0)}};cf([k],b.prototype,"processChunk",null);return b}(Tc),df=this&&this.__extends||
function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Vc=this&&this.__decorate||function(f,
b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},ef=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}
function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},ff=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;
case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:
void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},gf=function(f){function b(a,b,c,g,h,d){var e=f.call(this,a,b)||this;e.NAME="AppError";e.logCtor(arguments);e._failingUrl=c;e._errorCode=g;e._description=h;e._referrerUrl=d;return e}df(b,f);b.prototype.transmog=function(){return ef(this,void 0,void 0,function(){return ff(this,
function(a){return[2,new Response(this.renderTemplate(re,{failingUrl:this._getSafeUrl(this._failingUrl),errorCode:this._errorCode,description:this._description,referrerUrl:this._getSafeUrl(this._referrerUrl),fallbackContentTimeout:b.HTML_FALLBACK_UI_TIMEOUT}),this.getInit())]})})};b.prototype._getSafeUrl=function(a){return a?L.encode(a)||"unknown":""};b.HTML_FALLBACK_UI_TIMEOUT=500;Vc([k],b.prototype,"transmog",null);Vc([k],b.prototype,"_getSafeUrl",null);return b}(Ba),hf=this&&this.__extends||function(){var f=
function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),jf=this&&this.__decorate||function(f,b,a,e){var c=
arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},kf=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}
function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},lf=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;
h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];
return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},mf=function(f){function b(a,b,c,g){var e=f.call(this,a,b,c,!1)||this;e.NAME="CSMTokens";e.logCtor(arguments);e._attribution=g;return e}hf(b,f);b.prototype.transmog=function(){return kf(this,void 0,void 0,function(){var a,b,c;return lf(this,function(e){a=this.getSource();b=a.headers.get(x.shared.REQUEST_ID_OPF_HEADER);b||(c=t.create("RequestIdHeaderMissing"),
this.metricsService.error(this.eventOptions,c,this.getErrorLoggingScope()),this.metricsService.countError(this.eventOptions,c,this.getErrorLoggingScope()));this.eventOptions.errorContext.CSMTokensOPFRequestID=b||"unknown";return[2,new Response(this.renderTemplate(te,{namespace:v.NAMESPACE,requestId:b,attribution:this._attribution,treatment:"C"}),this.getInit())]})})};jf([k],b.prototype,"transmog",null);return b}(Ca),nf=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),of=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?
e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},pf=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}
function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},qf=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;
h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];
return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Wc=function(f){function b(a,b,c,g,h,d){var e=f.call(this,a,b)||this;e.NAME="PageMetadata";e.logCtor(arguments);e._navigationRuleName=c;e._navigationRuleScope=g;e._responseStrategy=h;e._responseStrategyDetails=d;return e}nf(b,f);b.prototype.transmog=function(){return pf(this,void 0,void 0,function(){return qf(this,function(a){return[2,new Response(this.renderTemplate(we,
{namespace:v.NAMESPACE,hit:!0,meta:{fetchEventTimeOrigin:this.eventOptions.timeOriginEpoch,navigationRule:this._navigationRuleName,navigationRuleScope:this._navigationRuleScope,responseStrategy:{name:this._responseStrategy,details:this._responseStrategyDetails},clientLib:{version:v.VERSION}},globalObjectName:"$".concat(v.NAMESPACE),pModulePrefix:"".concat(v.NAMESPACE_LCASE,"-")}),this.getInit())]})})};of([k],b.prototype,"transmog",null);return b}(Ba),rf=this&&this.__extends||function(){var f=function(b,
a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),sf=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,
g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},tf=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}
function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},uf=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;
h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];
return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},vf=function(f){function b(a,b,c,g){var e=f.call(this,a,b)||this;e.NAME="PerformanceCounter";e.logCtor(arguments);e._counter=c;e._counterScope=g;return e}rf(b,f);b.prototype.transmog=function(){return tf(this,void 0,void 0,function(){return uf(this,function(a){return[2,new Response(this.renderTemplate(ye,{namespace:v.NAMESPACE,counter:this._counter,
counterScope:this._counterScope}),this.getInit())]})})};sf([k],b.prototype,"transmog",null);return b}(Ba),wf=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");
f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),fc=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},xf=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof
a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},yf=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),
0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();
continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},zf=function(f){function b(a,b,c,g,h,d,n){var e=f.call(this,b,c)||this;e.NAME="PageNavigate";e.logCtor(arguments);e._swGlobal=a;e._targetUrl=g;e._useHTTPStatusCodesForRedirects=
h;e._replaceHistory=d;e._skipIntercept=n;return e}wf(b,f);b.prototype.transmog=function(){return xf(this,void 0,void 0,function(){return yf(this,function(a){return[2,this._useHTTPStatusCodesForRedirects?Response.redirect(this._getTargetURL(),b.HTTP_REDIRECT_STATUS_CODE):new Response(this.renderTemplate(xe,{useMash:y.isMShop(this._swGlobal),mashTimeout:b.MASH_READY_TIMEOUT,url:this._getTargetURL(),replaceHistory:this._replaceHistory,tagParamName:this._getSkipInterceptParamName()}),this.getInit())]})})};
b.prototype._getTargetURL=function(){var a=L.parse(this._targetUrl);if(!a)throw a=t.create("InvalidURL",{targetUrl:this._targetUrl}),this.metricsService.error(this.eventOptions,a,this.getErrorLoggingScope()),this.metricsService.countError(this.eventOptions,a,this.getErrorLoggingScope()),a;"string"===typeof this._skipIntercept&&this._skipIntercept.length&&x.skipIntercept.setParam(a,this._skipIntercept);return a.href};b.prototype._getSkipInterceptParamName=function(){return x.skipIntercept.getParamName()};
b.HTTP_REDIRECT_STATUS_CODE=302;b.MASH_READY_TIMEOUT=3E3;fc([k],b.prototype,"transmog",null);fc([k],b.prototype,"_getTargetURL",null);fc([k],b.prototype,"_getSkipInterceptParamName",null);return b}(Ba),Af=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==
typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),gc=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&
g&&Object.defineProperty(b,a,g),g},Xc=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},Yc=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");
for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=
d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Bf=this&&this.__read||function(f,b){var a="function"===typeof Symbol&&f[Symbol.iterator];
if(!a)return f;f=a.call(f);var e,c=[];try{for(;(void 0===b||0<b--)&&!(e=f.next()).done;)c.push(e.value)}catch(h){var g={error:h}}finally{try{e&&!e.done&&(a=f["return"])&&a.call(f)}finally{if(g)throw g.error;}}return c},Cf=function(f){function b(a,b,c){var e=f.call(this)||this;e.logCtor(arguments);e._customerContextService=a;e._cacheService=b;e._metricsService=c;e._errorLoggingScope="CacheWriter";return e}Af(b,f);b.prototype.write=function(a,b,c){return Xc(this,void 0,void 0,function(){var e,h,d,f,
l,p,k,q,t,E,r,u,la,Q;return Yc(this,function(g){switch(g.label){case 0:return g.trys.push([0,3,,4]),e=b.storage,h=e.cacheName,d=e.cacheKey,f=e.maxAge,l=e.validationKeys,[4,Promise.all([this._getTransmoggedResponse(a,b.transmogs,c),(new pb(this._customerContextService)).compute(l)])];case 1:return p=Bf.apply(void 0,[g.sent(),2]),k=p[0],q=p[1],t=(new ub(this._metricsService,b.name,b.scope)).decorateResponseWithStorageHeader(c.eventOptions,b,k),[4,this._cacheService.write(c.eventOptions,h,d,t,{maxAgeSeconds:f,
requestStartTimestampSeconds:c.requestStartTimestampSeconds,attribution:c.attribution,validationKeys:q})];case 2:return g.sent(),[3,4];case 3:throw E=g.sent(),r=w.matchesSignature(E,z.FAILED_TO_FETCH),u=w.matchesSignature(E,z.UNEXPECTED_INTERNAL_ERROR),la=w.matchesCodeOrSignature(E,"NetworkError",z.NETWORK_ERROR),Q=r||la||u,this._metricsService.error(c.eventOptions,E,this._errorLoggingScope,Q?"ERROR":void 0),this._metricsService.countError(c.eventOptions,E,r?"".concat("FailedToFetch",":").concat(this._errorLoggingScope):
la?"".concat("NetworkError",":").concat(this._errorLoggingScope):this._errorLoggingScope),u&&this._metricsService.count(c.eventOptions,"CacheWriter:InternalStorageError"),E;case 4:return[2]}})})};b.prototype._getTransmoggedResponse=function(a,b,c){return Xc(this,void 0,void 0,function(){var e,h;return Yc(this,function(d){switch(d.label){case 0:if(!b)return[2,a];e=a;h=0;d.label=1;case 1:return h<b.length?[4,this._getTransmog(e,b[h],c).getResponse()]:[3,4];case 2:e=d.sent(),d.label=3;case 3:return h++,
[3,1];case 4:return[2,e]}})})};b.prototype._getTransmog=function(a,b,c){switch(b.name){case "BeforeSingleDelimiter":return new Uc(c.eventOptions,this._metricsService,a,b.delimiter,b.delimiterKey,b.inclusive);case "EagerLoadJSMarker":return new Mc(c.eventOptions,this._metricsService,a,b.markers);case "InlinedStylesheet":return new Oc(c.eventOptions,this._metricsService,a);case "ShoppingPortalLoadJSMarker":return new Qc(c.eventOptions,this._metricsService,a);case "SyntheticRequestId":return new Rc(c.eventOptions,
this._metricsService,a,b.useStaticRID);default:throw t.create("UnrecognizedTransmog",b);}};gc([k],b.prototype,"write",null);gc([k],b.prototype,"_getTransmoggedResponse",null);gc([k],b.prototype,"_getTransmog",null);return b}(u),Df=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=
b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),hc=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||
g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Zc=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},$c=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");
for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=
d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Ef=function(f){function b(a,b){var c=f.call(this)||this;c.logCtor(arguments);
c._cacheService=a;c._metricsService=b;c._errorLoggingScope="CompareCopyCacheWriter";return c}Df(b,f);b.prototype.write=function(a,b,c){return Zc(this,void 0,void 0,function(){var e,h,d,f,l,p,k,q,r,E,Xa,u,la,Q;return $c(this,function(g){switch(g.label){case 0:g.trys.push([0,3,,4]);if(!b.compareCopy)return[2];e=b.compareCopy;h=e.storage;d=h.cacheName;f=h.cacheKey;l=h.maxAge;p=new ub(this._metricsService,b.name,b.scope);k=p.getFullCacheKeyForCompareCopy(f,c.eventOptions.clientId);if(!k)throw t.create("InvalidCompareCopyCacheKey");
return[4,this.getTransmoggedResponse(a,e.transmogs,c)];case 1:return q=g.sent(),r=p.decorateResponseWithTransmogsHeader(c.eventOptions,b,q),[4,this._cacheService.write(c.eventOptions,d,k,r,{maxAgeSeconds:l,requestStartTimestampSeconds:c.requestStartTimestampSeconds,attribution:c.attribution,keyPrefix:f,maxEntriesPerKeyPrefix:5})];case 2:return g.sent(),[3,4];case 3:throw E=g.sent(),Xa=w.matchesSignature(E,z.FAILED_TO_FETCH),u=w.matchesCodeOrSignature(E,"NetworkError",z.NETWORK_ERROR),la=w.matchesCode(E,
"InvalidCompareCopyCacheKey"),Q=w.matchesCode(E,"CacheWriteQuotaExceeded"),this._metricsService.error(c.eventOptions,E,this._errorLoggingScope,"ERROR"),this._metricsService.countError(c.eventOptions,E,Xa?"".concat("FailedToFetch",":").concat(this._errorLoggingScope):u?"".concat("NetworkError",":").concat(this._errorLoggingScope):la?"".concat("InvalidCompareCopyCacheKey",":").concat(this._errorLoggingScope):Q?"".concat("CacheWriteQuotaExceeded",":").concat(this._errorLoggingScope):this._errorLoggingScope),
E;case 4:return[2]}})})};b.prototype.getTransmoggedResponse=function(a,b,c){return Zc(this,void 0,void 0,function(){var e,h;return $c(this,function(d){switch(d.label){case 0:if(!b)return[2,a];e=a;h=0;d.label=1;case 1:return h<b.length?[4,this._getTransmog(e,b[h],c).getResponse()]:[3,4];case 2:e=d.sent(),d.label=3;case 3:return h++,[3,1];case 4:return[2,e]}})})};b.prototype._getTransmog=function(a,b,c){switch(b.name){case "BeforeSingleDelimiter":return new Uc(c.eventOptions,this._metricsService,a,
b.delimiter,b.delimiterKey,b.inclusive);case "EagerLoadJSMarker":return new Mc(c.eventOptions,this._metricsService,a,b.markers);case "InlinedStylesheet":return new Oc(c.eventOptions,this._metricsService,a);case "ShoppingPortalLoadJSMarker":return new Qc(c.eventOptions,this._metricsService,a);case "SyntheticRequestId":return new Rc(c.eventOptions,this._metricsService,a,b.useStaticRID);case "PatternReplace":return new Ne(c.eventOptions,this._metricsService,a,b.patternReplaceList);default:throw t.create("UnrecognizedTransmog",
b);}};hc([k],b.prototype,"write",null);hc([k],b.prototype,"getTransmoggedResponse",null);hc([k],b.prototype,"_getTransmog",null);return b}(u),Ff=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+
String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Ma=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},ad=this&&this.__awaiter||function(f,
b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},bd=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:
a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=
d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},cd=function(f){function b(a,b,c,g,h){var e=f.call(this)||this;e.logCtor(arguments);e.cacheService=b;e.cacheMismatchDetectionService=
c;e.metricsService=g;e.cachePopulationRules=h;e.cacheWriter=new Cf(a,b,g);return e}Ff(b,f);b.prototype.logTagAndCount=function(a,b,c,g,h){g="CachePop:".concat(this.NAME,":").concat(g);var e="".concat(g,":").concat(a.name,":").concat(b.label);a="".concat(g,":").concat(a.scope,":").concat(b.label);this.metricsService.count(c,g,h);this.metricsService.count(c,e,h);this.metricsService.count(c,a,h);this.metricsService.tag(c,e);this.metricsService.tag(c,a)};b.prototype.logMark=function(a,b,c,g){var e="CachePop:".concat(this.NAME,
":").concat(g);g="".concat(e,":").concat(a.name,":").concat(b.label);a="".concat(e,":").concat(a.scope,":").concat(b.label);this.metricsService.mark(c,g);this.metricsService.mark(c,a)};b.prototype.isResponseValidForCaching=function(a,b){return ad(this,void 0,void 0,function(){var c;return bd(this,function(e){switch(e.label){case 0:try{ka.validateIsUsable(a),ka.validateIsOK(a)}catch(h){return[2,{valid:!1,reason:"Unusable"}]}return x.cacheControl.hasLightsaberNoStore(a)?[2,{valid:!1,reason:"NoStore"}]:
(c=this._skipCachingAXModeContent(b))?[4,this._isAXModeContent(a)]:[3,2];case 1:c=e.sent(),e.label=2;case 2:return c?[2,{valid:!1,reason:"AXModeContent"}]:[2,{valid:!0}]}})})};b.prototype.populateCompareCopyCache=function(a,b,c,g){c.compareCopy&&this.cacheMismatchDetectionService.writeCompareCopyToCache(a,b,c,g.label)};b.prototype._skipCachingAXModeContent=function(a){return!!(a.flags||{}).dontCacheAXModeContent};b.prototype._isAXModeContent=function(a){return ad(this,void 0,void 0,function(){var b,
c;return bd(this,function(e){switch(e.label){case 0:return b=[/ue_sid\s*=\s*['"]000-0000000-8675309['"]/gi,/\/1\/batch\/1\/OP\/[A-Z0-9]+:000-0000000-8675309:/gi],[4,ka.matchPatterns(a.clone(),b)];case 1:return c=e.sent(),[2,!c.every(function(a){return null===a})]}})})};Ma([k],b.prototype,"logTagAndCount",null);Ma([k],b.prototype,"logMark",null);Ma([k],b.prototype,"isResponseValidForCaching",null);Ma([k],b.prototype,"populateCompareCopyCache",null);Ma([k],b.prototype,"_skipCachingAXModeContent",null);
Ma([k],b.prototype,"_isAXModeContent",null);return b}(u),Gf=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?
Object.create(a):(e.prototype=a.prototype,new e)}}(),ic=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Hf=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}
return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},If=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,
a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,
c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Jf=function(f){function b(a,b,c,g,h,d){var e=f.call(this,b,c,g,h,d)||this;e.NAME="Prefetch";e._prefetchStatusMap=new Map;e.logCtor(arguments);e._prefetchExecutor=new qe(a,b,c,h);return e}Gf(b,
f);b.prototype.run=function(a){var b=this,c=a.detail.eventOptions,g=this._getMatchingRulesForTrigger(a);c.errorContext.CachePopulationRulesForPrefetchOnRouteTrigger=I.serialize(g);g.forEach(function(e){var d=e.rule,g=e.trigger;e=d.storage;var h=e.cacheName,f=e.cacheKey;r.queueTask(function(){return Hf(b,void 0,void 0,function(){var b,e,l,n;return If(this,function(p){switch(p.label){case 0:this.logTagAndCount(d,g,c,"Intent");b="".concat(h,":").concat(f);if(this._prefetchStatusMap.get(b))return this.logTagAndCount(d,
g,c,"Fail:PrefetchInProgress:".concat(b)),[2];this._prefetchStatusMap.set(b,!0);return[4,this._prefetchExecutor.prefetch(d,g,a.detail.eventOptions)];case 1:return e=p.sent(),e.ok?[4,this.isResponseValidForCaching(e.response,d)]:(this._prefetchStatusMap.set(b,!1),this.logTagAndCount(d,g,c,"Fail:".concat(e.exitCode)),[2]);case 2:l=p.sent();if(!l.valid)return this._prefetchStatusMap.set(b,!1),this.logTagAndCount(d,g,c,"Fail:Invalid:".concat(l.reason)),[2];this.logTagAndCount(d,g,c,"Write");p.label=3;
case 3:return p.trys.push([3,5,,6]),n=e.response.clone(),[4,this.cacheWriter.write(e.response,d,{eventOptions:a.detail.eventOptions,requestStartTimestampSeconds:e.requestStartTimestampSeconds,attribution:g.label})];case 4:return p.sent(),this.logTagAndCount(d,g,c,"Success"),this.populateCompareCopyCache(c,n,d,g),this._prefetchStatusMap.set(b,!1),[3,6];case 5:return p.sent(),this._prefetchStatusMap.set(b,!1),this.logTagAndCount(d,g,c,"Fail:Write"),[3,6];case 6:return[2]}})})})})};b.prototype._getMatchingRulesForTrigger=
function(a){var b=this,c=[];this.cachePopulationRules.forEach(function(e){for(var g=0;g<e.triggers.length;g++){var d=e.triggers[g];if("PrefetchOnRoute"===d.name&&b._createPrefetchOnRouteMatcher(d).match(a.detail.request)){c.push({rule:e,trigger:d});break}}});return c};b.prototype._createPrefetchOnRouteMatcher=function(a){switch(a.routeMatcher.name){case "URLPathRoute":return a=a.routeMatcher,new Kc(a.pattern,a.stripRefMarkers,a.stripLanguageFolder);default:throw t.create("UnrecognizedRouteMatcher",
a.routeMatcher);}};ic([k],b.prototype,"run",null);ic([k],b.prototype,"_getMatchingRulesForTrigger",null);ic([k],b.prototype,"_createPrefetchOnRouteMatcher",null);return b}(cd),Kf=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==
a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),dd=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,
a,g),g},Lf=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},Mf=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");
for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=
d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Nf=function(f){function b(a,b,c,g,h){var e=f.call(this,a,b,c,g,h)||this;e.NAME=
"ResponseRuleNavigationUpdate";e.logCtor(arguments);return e}Kf(b,f);b.prototype.run=function(a){var b=this,c=a.detail,g=c.eventOptions,h=c.serverResponse;a=this._getMatchingRulesForTrigger(a);g.errorContext.CachePopulationRulesForResponseRuleNavigationUpdateTrigger=I.serialize(a);a.forEach(function(a){var c=a.rule,e=a.trigger;b.logMark(c,e,g,"Trigger:Start");r.queueTask(function(){return Lf(b,void 0,void 0,function(){var a;return Mf(this,function(b){switch(b.label){case 0:return this.logTagAndCount(c,
e,g,"Intent"),[4,this.isResponseValidForCaching(h,c)];case 1:a=b.sent();if(!a.valid)return this.logTagAndCount(c,e,g,"Fail:Invalid:".concat(a.reason)),[2];b.label=2;case 2:return b.trys.push([2,4,,5]),this.logMark(c,e,g,"Write:Start"),[4,this.cacheWriter.write(h.clone(),c,{eventOptions:g,requestStartTimestampSeconds:F.getEpochSeconds(g.timeOriginEpoch),attribution:e.label})];case 3:return b.sent(),this.logMark(c,e,g,"Write:Success"),this.logTagAndCount(c,e,g,"Success"),this.populateCompareCopyCache(g,
h.clone(),c,e),[3,5];case 4:return b.sent(),this.logMark(c,e,g,"Write:Fail"),this.logTagAndCount(c,e,g,"Fail:Write"),[3,5];case 5:return[2]}})})},c.storage.cachingDelay)})};b.prototype._getMatchingRulesForTrigger=function(a){var b=[];this.cachePopulationRules.forEach(function(c){for(var e=0;e<c.triggers.length;e++){var h=c.triggers[e];if("ResponseRuleNavigationUpdate"===h.name&&h.responseRuleName===a.detail.ruleName){b.push({rule:c,trigger:h});break}}});return b};dd([k],b.prototype,"run",null);dd([k],
b.prototype,"_getMatchingRulesForTrigger",null);return b}(cd),Of=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===
a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Pf=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Qf=function(f){function b(a,b,c,g,h,d,n){var e=f.call(this)||this;e.logCtor(arguments);e._responseRuleNavigationUpdateTrigger=
new Nf(b,c,g,h,n);e._prefetchOnRouteTrigger=new Jf(a,b,c,g,h,n);d.subscribe("ResponseRuleNavigation",e);d.subscribe("Navigation",e);return e}Of(b,f);b.prototype.notifyEvent=function(a){switch(a.name){case "ResponseRuleNavigation":this._responseRuleNavigationUpdateTrigger.run(a);break;case "Navigation":this._prefetchOnRouteTrigger.run(a)}};Pf([k],b.prototype,"notifyEvent",null);return b}(u),Rf=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&
function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Sf=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,
a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Tf=function(f){function b(a,b){var c=f.call(this)||this;c.logCtor(arguments);c._metricName=a;c._metricsService=b;return c}Rf(b,f);b.prototype.generateDiff=function(a,b,c){var e=F.getPerfNow();b=this.generateExternalLibDiff(b,c);this._metricsService.mark(a,this._metricName,
e);this._metricsService.tag(a,this._metricName);return this.normalizeExternalLibDiff(b)};Sf([k],b.prototype,"generateDiff",null);return b}(u),Uf=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+
String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Vf=function(f){function b(a,e){var c;var g=f.call(this,b._METRIC_NAME,e)||this;g.logCtor(arguments);if("function"!==typeof(null===(c=a.ThirdPartyLibs)||void 0===c?void 0:c.diffMatchPatch))throw t.create("DiffGeneratorMissing");g._diffMatchPatch=new a.ThirdPartyLibs.diffMatchPatch;if("function"!==typeof g._diffMatchPatch.diff_main||"function"!==typeof g._diffMatchPatch.diff_cleanupSemantic)throw t.create("DiffGeneratorMissing");
return g}Uf(b,f);b.prototype.generateExternalLibDiff=function(a,b){a=this._diffMatchPatch.diff_main(a,b);this._diffMatchPatch.diff_cleanupSemantic(a);return a};b.prototype.normalizeExternalLibDiff=function(a){var b=this;return a.map(function(a){return b._processDiffToken(a)})};b.prototype._processDiffToken=function(a){return{descriptor:this._processDiffTokenDescriptor(a[0]),value:a[1]}};b.prototype._processDiffTokenDescriptor=function(a){switch(a){case 1:return"Added";case -1:return"Removed";default:return"Unchanged"}};
b._METRIC_NAME="DiffMatchPatchGenerator";return b}(Tf),Wf=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):
(e.prototype=a.prototype,new e)}}(),vb=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Xf=function(f){function b(a,b,c){var e=f.call(this)||this;e.logCtor(arguments);e._metricsService=a;e._ruleName=b;e._ruleScope=
c;return e}Wf(b,f);b.prototype.logCount=function(a,b,c){this._metricsService.count(a,this._getMetricName(b),c);this._metricsService.count(a,this._getMetricScope(b),c)};b.prototype.logError=function(a,e,c){this._metricsService.error(a,e,b._ERROR_LOGGING_SCOPE,c)};b.prototype._getMetricName=function(a){return"".concat(this._ruleName,":").concat(b._METRIC_LOGGING_SCOPE,":").concat(a)};b.prototype._getMetricScope=function(a){return"".concat(this._ruleScope,":").concat(b._METRIC_LOGGING_SCOPE,":").concat(a)};
b._ERROR_LOGGING_SCOPE="CacheMismatchDetection";b._METRIC_LOGGING_SCOPE="cache-mismatch";vb([k],b.prototype,"logCount",null);vb([k],b.prototype,"logError",null);vb([k],b.prototype,"_getMetricName",null);vb([k],b.prototype,"_getMetricScope",null);return b}(u),Yf=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};
return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Zf=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-
1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},$f=this&&this.__values||function(f){var b="function"===typeof Symbol&&Symbol.iterator,a=b&&f[b],e=0;if(a)return a.call(f);if(f&&"number"===typeof f.length)return{next:function(){f&&e>=f.length&&(f=void 0);return{value:f&&f[e++],done:!f}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");},ag=function(f){function b(a,b){var c=f.call(this)||this;c.logCtor(arguments);
c._identifiedMismatches=b;c._metricsHelper=a;return c}Yf(b,f);b.prototype.publish=function(a,b){var c;b=this._extractMismatchDescriptors(b);if(0!==b.length){try{for(var e=$f(this._identifiedMismatches),h=e.next();!h.done;h=e.next())h.value.logMetricsIfPresent(a,b)}catch(n){var d={error:n}}finally{try{h&&!h.done&&(c=e.return)&&c.call(e)}finally{if(d)throw d.error;}}this._metricsHelper.logCount(a,"true");this._metricsHelper.logCount(a,"ncount",b.length)}};b.prototype._extractMismatchDescriptors=function(a){for(var b=
[],c=0;c<a.length;c++)if("Unchanged"!==a[c].descriptor){var g={oldValue:"",newValue:""};c+1<a.length&&"Unchanged"!==a[c+1].descriptor?(g="Removed"===a[c].descriptor?{oldValue:a[c].value,newValue:a[c+1].value}:{oldValue:a[c+1].value,newValue:a[c].value},c++):"Added"===a[c].descriptor?g.newValue=a[c].value:g.oldValue=a[c].value;b.push(g)}return b};Zf([k],b.prototype,"publish",null);return b}(u),bg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),ed=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,
a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},cg=function(f){function b(a){var b=f.call(this)||this;b.logCtor(arguments);b._metricsHelper=a;return b}bg(b,f);b.prototype.isPresent=function(a){var b=this;return a.some(function(a){return b.identifyMismatch(a)})};b.prototype.logMetricsIfPresent=function(a,e){this.isPresent(e)&&
(this._metricsHelper.logCount(a,"".concat(b._METRIC_SCOPE,":ncount")),this._metricsHelper.logCount(a,"".concat(b._METRIC_SCOPE,":").concat(this.getMetricName())))};b._METRIC_SCOPE="identified";ed([k],b.prototype,"isPresent",null);ed([k],b.prototype,"logMetricsIfPresent",null);return b}(u),dg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),fd=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,
b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},eg=function(f){function b(a){var b=f.call(this,a)||this;b.logCtor(arguments);return b}dg(b,f);b.prototype.getMetricName=function(){return b._NAME};b.prototype.identifyMismatch=function(a){return b._MATCHER.test(a.oldValue)||b._MATCHER.test(a.newValue)};b._MATCHER=/\bdir\s*=\s*('|"|\\")?(?:rtl|ltr|auto)\1/i;b._NAME="dir-tag";fd([k],b.prototype,"getMetricName",null);
fd([k],b.prototype,"identifyMismatch",null);return b}(cg),fg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===
a?Object.create(a):(e.prototype=a.prototype,new e)}}(),gg=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},hg=function(f){function b(a){var b=f.call(this)||this;b.logCtor(arguments);b._metricsHelper=a;return b}
fg(b,f);b.prototype.publish=function(a,b){b=this._generateCompressedHtml(b);this._metricsHelper.logError(a,t.create("DiffLogState",void 0,void 0,b,"ERROR"),"ERROR")};b.prototype._generateCompressedHtml=function(a){var b=this;return a.map(function(a){var c="Unchanged"===a.descriptor?b._compressDiffValue(a.value):a.value;c=b._encodeHtml(c);switch(a.descriptor){case "Added":return K.ins(c);case "Removed":return K.del(c);default:return K.span(c)}}).join("")};b.prototype._compressDiffValue=function(a){if(a.length<=
2*b._COMPRESSED_SLICE_LENGTH+b._COMPRESSION_OVERHEAD)return a;var e=a.slice(0,b._COMPRESSED_SLICE_LENGTH),c=a.slice(-b._COMPRESSED_SLICE_LENGTH);a=a.length-2*b._COMPRESSED_SLICE_LENGTH;return"".concat(e,"...*").concat(a,"*...").concat(c)};b.prototype._encodeHtml=function(a){return a.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26#39;").replace(/\n/g,"\x26para;\x3cbr\x3e")};b._COMPRESSED_SLICE_LENGTH=100;b._COMPRESSION_OVERHEAD=
20;gg([k],b.prototype,"publish",null);return b}(u),ig=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):
(e.prototype=a.prototype,new e)}}(),jg=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},kg=function(f){function b(a,b,c,g,h){var e=f.call(this)||this;e.logCtor(arguments);e._swGlobal=a;e._metricsService=
b;e._metricsHelper=new Xf(b,"".concat(c,":").concat(h),"".concat(g,":").concat(h));e._diffGenerator=e._initializeDiffGenerator();e._mismatchPublishers=e._initializeMismatchPublishers();return e}ig(b,f);b.prototype.detectMismatch=function(a,b,c){var e=this,h=this._diffGenerator.generateDiff(a,b,c);if(1===h.length)return!1;r.queueTask(function(){e._mismatchPublishers.forEach(function(b){b.publish(a,h)})});return!0};b.prototype._initializeDiffGenerator=function(){return new Vf(this._swGlobal,this._metricsService)};
b.prototype._initializeMismatchPublishers=function(){var a=[new eg(this._metricsHelper)];a=new ag(this._metricsHelper,a);var b=new hg(this._metricsHelper);return[a,b]};jg([k],b.prototype,"detectMismatch",null);return b}(u),lg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=
b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),wb=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||
g;return 3<c&&g&&Object.defineProperty(b,a,g),g},ab=function(f){function b(){return null!==f&&f.apply(this,arguments)||this}lg(b,f);b.prototype.filter=function(a){var b=this;return a.filter(function(a){var c=b.isValid(a);c||b.log("filter","Invalid:",a);return c})};b.prototype.isValidRouteMatcher=function(a){var b=q.isObject,c=q.isNonEmptyString,g=q.isUndefinedOr,h=q.isBoolean;if(!b(a)||!c(a.name))return!1;switch(a.name){case "URLPathRoute":return a.pattern instanceof RegExp&&g(a.stripRefMarkers,h(a.stripRefMarkers))&&
g(a.stripLanguageFolder,h(a.stripLanguageFolder));default:return!1}};b.prototype.isValidValidationKeys=function(a){var b=q.isArrayWhereEvery,c=q.isOneOf;return b(a,function(a){return c(a,["language","recognition","session","clientlibversion","appversion"])})};b.prototype.isValidForHeaderField=function(a){var b=q.matchesPattern;return b(a,/^[\w\-]+$/)};wb([k],b.prototype,"filter",null);wb([k],b.prototype,"isValidRouteMatcher",null);wb([k],b.prototype,"isValidValidationKeys",null);wb([k],b.prototype,
"isValidForHeaderField",null);return b}(u),mg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):
(e.prototype=a.prototype,new e)}}(),ng=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},og=function(f){function b(){return null!==f&&f.apply(this,arguments)||this}mg(b,f);b.prototype.isValid=function(a){var b=
q.isObject,c=q.isNonEmptyString,g=q.isPositiveInteger,h=q.isUndefinedOr,d=q.isBoolean,f=q.isOneOf,l=q.isArrayWhereEvery;return b(a)&&c(a.name)&&g(a.version)&&h(a.dontCleanOldVersions,d(a.dontCleanOldVersions))&&h(a.dontAutoEvictOnCustomerContextChange,d(a.dontAutoEvictOnCustomerContextChange))&&h(a.plugins,l(a.plugins,function(a){return f(a,["MaxAge","ValidationKeys","Metadata","LREEviction"])}))};ng([k],b.prototype,"isValid",null);return b}(ab),pg=this&&this.__extends||function(){var f=function(b,
a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),qg=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,
g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},rg=function(f){function b(){return null!==f&&f.apply(this,arguments)||this}pg(b,f);b.prototype.isValid=function(a){var b=q.isObject,c=q.isNonEmptyString,g=q.isURL;return b(a)&&c(a.name)&&g(a.url)};qg([k],b.prototype,"isValid",
null);return b}(ab),sg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,
new e)}}(),Z=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},gd=function(f){function b(){return null!==f&&f.apply(this,arguments)||this}sg(b,f);b.prototype.isValidCachePopulationRuleCompareCopyTransmogs=
function(a){var b=this,c=q.isUndefinedOr,g=q.isArrayWhereEvery,h=q.isRegExp,d=q.isObject,f=q.isNonEmptyString;return c(a,g(a,function(a){if(!d(a)||!f(a.name))return!1;switch(a.name){case "PatternReplace":return g(a.patternReplaceList,function(a){return h(a.pattern)&&"string"===typeof a.replacement});default:return b._isValidTransmog(a)}}))};b.prototype.isValid=function(a){var b=this,c=q.isObject,g=q.isNonEmptyString,h=q.isNonEmptyArray,d=q.isArrayWhereEvery,f=q.isUndefinedOr;return c(a)&&g(a.name)&&
g(a.scope)&&h(a.triggers)&&d(a.triggers,function(a){return b._isValidTrigger(a)})&&this._isValidCachePopulationRuleTransmogs(a.transmogs)&&this._isValidStorage(a.storage)&&f(a.compareCopy,function(){return b._isValidCachePopulationRuleCompareCopyConfig(a.compareCopy,a.storage)})&&this._isValidFlags(a.flags)};b.prototype._isValidTrigger=function(a){var b=q.isObject,c=q.isNonEmptyString;if(!b(a)||!c(a.name)||!c(a.label))return!1;switch(a.name){case "ResponseRuleNavigationUpdate":return c(a.responseRuleName);
case "PrefetchOnRoute":return this.isValidRouteMatcher(a.routeMatcher)&&this._isValidPrefetch(a.prefetch);default:return!1}};b.prototype._isValidPrefetch=function(a){var b=q.isObject,c=q.isNonEmptyString,g=q.isOneOf,h=q.isPositiveInteger,d=q.isUndefinedOr;return b(a)&&c(a.endpoint)&&g(a.mode,["cache-miss","always"])&&h(a.delay)&&d(a.requestHeaders,this._isValidRequestHeaders(a.requestHeaders))};b.prototype._isValidRequestHeaders=function(a){var b=q.isObject,c=q.isArrayWhereEvery;return b(a)&&c(Object.keys(a),
function(b){return x.pageShellPrefetch.isHeaderAllowed(b,a[b])})};b.prototype._isValidCachePopulationRuleTransmogs=function(a){var b=this,c=q.isUndefinedOr,g=q.isArrayWhereEvery;return c(a,g(a,function(a){return b._isValidTransmog(a)}))};b.prototype._isValidTransmog=function(a){var b=q.isObject,c=q.isNonEmptyString,g=q.isUndefinedOr,h=q.isBoolean,d=q.isArrayWhereEvery,f=q.isNonEmptyArray;if(!b(a)||!c(a.name))return!1;switch(a.name){case "BeforeSingleDelimiter":return c(a.delimiter)&&this.isValidForHeaderField(a.delimiterKey)&&
g(a.inclusive,h(a.inclusive));case "EagerLoadJSMarker":return f(a.markers)&&d(a.markers,c);case "SyntheticRequestId":return g(a.useStaticRID,h(a.useStaticRID));case "InlinedStylesheet":case "ShoppingPortalLoadJSMarker":return!0;default:return!1}};b.prototype._isValidStorage=function(a){var b=q.isObject,c=q.isNonEmptyString,g=q.isPositiveInteger,h=q.isUndefinedOr;return b(a)&&c(a.cacheName)&&c(a.cacheKey)&&g(a.maxAge)&&h(a.cachingDelay,g(a.cachingDelay))&&this.isValidValidationKeys(a.validationKeys)};
b.prototype._isValidCompareCopyStorage=function(a,b){var c=q.isObject,e=q.isNonEmptyString,h=q.isPositiveInteger;return c(a)&&e(a.cacheName)&&e(a.cacheKey)&&h(a.maxAge)&&a.cacheName!==b.cacheName};b.prototype._isValidCachePopulationRuleCompareCopyConfig=function(a,b){var c=q.isUndefinedOr,e=q.isBoolean;return this.isValidCachePopulationRuleCompareCopyTransmogs(a.transmogs)&&this._isValidCompareCopyStorage(a.storage,b)&&c(a.disableCacheMismatchDetection,e(a.disableCacheMismatchDetection))};b.prototype._isValidFlags=
function(a){var b=q.isObject,c=q.isUndefinedOr,g=q.isArrayWhereEvery,h=q.isOneOf,d=q.isBoolean;return c(a,b(a)&&g(Object.keys(a),function(a){return h(a,["dontCacheAXModeContent"])})&&c(a.dontCacheAXModeContent,d(a.dontCacheAXModeContent)))};Z([k],b.prototype,"isValidCachePopulationRuleCompareCopyTransmogs",null);Z([k],b.prototype,"isValid",null);Z([k],b.prototype,"_isValidTrigger",null);Z([k],b.prototype,"_isValidPrefetch",null);Z([k],b.prototype,"_isValidRequestHeaders",null);Z([k],b.prototype,"_isValidCachePopulationRuleTransmogs",
null);Z([k],b.prototype,"_isValidTransmog",null);Z([k],b.prototype,"_isValidStorage",null);Z([k],b.prototype,"_isValidCompareCopyStorage",null);Z([k],b.prototype,"_isValidCachePopulationRuleCompareCopyConfig",null);Z([k],b.prototype,"_isValidFlags",null);return b}(ab),tg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,
a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Na=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-
1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},ug=function(f){function b(){return null!==f&&f.apply(this,arguments)||this}tg(b,f);b.prototype.isValid=function(a){var b=this,c=q.isObject,g=q.isNonEmptyString,h=q.isNonEmptyArray,d=q.isUndefinedOr,f=q.isBoolean,l=q.isArrayWhereEvery;return c(a)&&g(a.name)&&h(a.routeMatchers)&&l(a.routeMatchers,function(a){return b.isValidRouteMatcher(a)})&&h(a.levers)&&l(a.levers,function(a){return b._isValidRuleLever(a)})&&
d(a.weblabTriggers,l(a.weblabTriggers,function(a){return b._isValidWeblabTrigger(a)}))&&f(a.respond)&&this._isValidResponseStrategy(a.responseStrategy)};b.prototype._isValidRuleLever=function(a){var b=q.isNonEmptyString;return b(a)};b.prototype._isValidWeblabTrigger=function(a){var b=q.isObject,c=q.isNonEmptyString;return b(a)&&c(a.name)&&c(a.treatment)};b.prototype._isValidResponseStrategy=function(a){var b=this,c=q.isObject,g=q.isNonEmptyString,h=q.isUndefinedOr,d=q.isBoolean,f=q.isArrayWhereEvery,
l=q.isOneOf;if(!c(a)||!g(a.name))return!1;switch(a.name){case "SingleDelimiter":return f(a.pageShells,function(a){return g(a.cacheName)&&g(a.cacheKey)&&b.isValidValidationKeys(a.validationKeys)&&b.isValidForHeaderField(a.delimiterKey)&&b._isValidSkeleton(a.skeleton)})&&h(a.noPageShell,c(a.noPageShell)&&this._isValidSkeleton(a.noPageShell.skeleton))&&h(a.preloads,f(a.preloads,function(a){return b._isValidPreload(a)}))&&h(a.flags,c(a.flags)&&f(Object.keys(a.flags),function(b){var c=a.flags[b];return l(b,
["passthrough","disableCaching","flushFullOnMissingDelimiter"])&&h(c,d(c))}));case "FullPage":return c(a.cachedPage)&&g(a.cachedPage.cacheName)&&g(a.cachedPage.cacheKey)&&this.isValidValidationKeys(a.cachedPage.validationKeys)&&h(a.flags,c(a.flags)&&f(Object.keys(a.flags),function(b){var c=a.flags[b];return l(b,["skipReload","skipNonAppStarts"])&&h(c,d(c))}));default:return!1}};b.prototype._isValidSkeleton=function(a){var b=this,c=q.isObject,g=q.isBoolean,h=q.isNonEmptyString,d=q.isPositiveInteger,
f=q.isUndefinedOr,l=q.isOneOf,p=q.isArrayWhereEvery;return f(a,!!a&&c(a)&&h(a.name)&&f(a.prewarm,l(a.prewarm,["http-cache","memory","none"]))&&f(a.race,g(a.race))&&f(a.data,c(a.data))&&c(a.hooks)&&p(Object.keys(a.hooks),function(c){return b._isValidSkeletonHook(a.hooks[c])})&&c(a.hooks.remove)&&c(a.hooks.remove.whenAny)&&d(a.hooks.remove.whenAny.timeout))};b.prototype._isValidSkeletonHook=function(a){var b=q.isObject,c=q.isNonEmptyString,g=q.isPositiveInteger,h=q.isOneOf,d=q.isArrayWhereEvery,f=function(a){return b(a)&&
c(a.value)&&g(a.delay)};return d(Object.keys(a),function(b){var e=a[b];return h(b,["whenAny"])&&d(Object.keys(e),function(a){var b=e[a];return"timeout"===a&&g(b)||h(a,["domEvent","auiModule","idMatches","selectorMatches"])&&(c(b)||f(b)||d(b,function(a){return c(a)||f(a)}))})})};b.prototype._isValidPreload=function(a){var b=q.isObject,c=q.isNonEmptyString,g=q.isOneOf,h=q.isUndefinedOr;return b(a)&&c(a.purpose)&&h(a.attribution,c(a.attribution))&&g(a.as,["script","style","font","image"])&&h(a.fetchPriority,
g(a.fetchPriority,["high","low","auto"]))&&(c(a.href)||b(a.hrefHint)&&c(a.hrefHint.delegate)&&c(a.hrefHint.field))};Na([k],b.prototype,"isValid",null);Na([k],b.prototype,"_isValidRuleLever",null);Na([k],b.prototype,"_isValidWeblabTrigger",null);Na([k],b.prototype,"_isValidResponseStrategy",null);Na([k],b.prototype,"_isValidSkeleton",null);Na([k],b.prototype,"_isValidSkeletonHook",null);return b}(ab),vg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),wg=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,
a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},xg=function(f){function b(){return null!==f&&f.apply(this,arguments)||this}vg(b,f);b.prototype.isValid=function(a){var b=q.isObject,c=q.isNonEmptyString,g=q.isOneOf,h=q.isArrayWhereEvery;return b(a)&&c(a.name)&&b(a.properties)&&h(Object.keys(a.properties),function(b){return g(typeof a.properties[b],
["string","number","boolean"])})};wg([k],b.prototype,"isValid",null);return b}(ab),yg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,
a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),aa=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},ub=function(f){function b(a,e,c){var g=f.call(this)||this;g._cachePopulationRulesFilter=
new gd;g.logCtor(arguments);g._metricsService=a;g._ruleName=e;g._ruleScope=c;g._metricsNamePrefix="".concat(g._ruleName,":").concat(b.METRIC_SCOPE);g._metricsScopePrefix="".concat(g._ruleScope,":").concat(b.METRIC_SCOPE);return g}yg(b,f);b.prototype.decorateResponseWithStorageHeader=function(a,e,c){if(!e.compareCopy)return c;e=this._getStorageConfigHeaderString(e.compareCopy.storage,a.clientId);return this._decorateResponseWithHeader(a,c,"Storage",b.COMPARE_COPY_STORAGE_CONFIG_HEADER,e)};b.prototype.decorateResponseWithTransmogsHeader=
function(a,e,c){if(!e.compareCopy)return c;e=this._getTransmogsHeaderString(e.compareCopy.transmogs);return this._decorateResponseWithHeader(a,c,"Transmogs",b.COMPARE_COPY_TRANSMOGS_HEADER,e)};b.prototype.extractStorageConfigFromHeader=function(a,e){e=this._decodeHeaderValue(e.headers.get(b.COMPARE_COPY_STORAGE_CONFIG_HEADER));if(this._validateCompareCopyStorageConfig(e))return e;this._metricsService.count(a,"".concat(this._metricsNamePrefix,":StorageHeaderUnavailable"));this._metricsService.count(a,
"".concat(this._metricsScopePrefix,":StorageHeaderUnavailable"))};b.prototype.extractTransmogsFromHeader=function(a,e){if((e=this._decodeHeaderValue(e.headers.get(b.COMPARE_COPY_TRANSMOGS_HEADER)))&&this._cachePopulationRulesFilter.isValidCachePopulationRuleCompareCopyTransmogs(e))return e;this._metricsService.count(a,"".concat(this._metricsNamePrefix,":TransmogsHeaderUnavailable"));this._metricsService.count(a,"".concat(this._metricsScopePrefix,":TransmogsHeaderUnavailable"))};b.prototype.getFullCacheKeyForCompareCopy=
function(a,b){if(q.isNonEmptyString(b)&&"unknown"!==b)return"".concat(a,"/").concat(b)};b.prototype._decorateResponseWithHeader=function(a,b,c,g,h){if(!h)return this._metricsService.count(a,"".concat(this._metricsNamePrefix,":").concat(c,"HeaderDecorationFailed")),this._metricsService.count(a,"".concat(this._metricsScopePrefix,":").concat(c,"HeaderDecorationFailed")),b;a=new Headers(b.headers);a.append(g,h);return new Response(b.body,{status:b.status,statusText:b.statusText,headers:a})};b.prototype._decodeHeaderValue=
function(a){if(q.isNonEmptyString(a))return(a=a?J.decode(a):void 0)?I.reviverDeserialize(a,void 0):void 0};b.prototype._validateCompareCopyStorageConfig=function(a){return q.isObject(a)&&q.isNonEmptyString(a.cacheKey)&&q.isNonEmptyString(a.cacheName)&&q.isPositiveInteger(a.maxAge)};b.prototype._generateStorageConfigWithUniqueId=function(a,b){if(b=this.getFullCacheKeyForCompareCopy(a.cacheKey,b))return a=pa.shallow(a),a.cacheKey=b,a};b.prototype._getStorageConfigHeaderString=function(a,b){if(this._validateCompareCopyStorageConfig(a)&&
(a=this._generateStorageConfigWithUniqueId(a,b))&&(a=I.replacerSerialize(a,!1,""),q.isNonEmptyString(a)))return J.encode(a)};b.prototype._getTransmogsHeaderString=function(a){a=I.replacerSerialize(a,!1,"");if(q.isNonEmptyString(a))return J.encode(a)};b.COMPARE_COPY_STORAGE_CONFIG_HEADER=x.shared.getClientOnlyLibHeader("compare-copy-storage");b.COMPARE_COPY_TRANSMOGS_HEADER=x.shared.getClientOnlyLibHeader("compare-copy-transmogs");b.METRIC_SCOPE="CacheMismatchHeader";aa([k],b.prototype,"decorateResponseWithStorageHeader",
null);aa([k],b.prototype,"decorateResponseWithTransmogsHeader",null);aa([k],b.prototype,"extractStorageConfigFromHeader",null);aa([k],b.prototype,"extractTransmogsFromHeader",null);aa([k],b.prototype,"getFullCacheKeyForCompareCopy",null);aa([k],b.prototype,"_decorateResponseWithHeader",null);aa([k],b.prototype,"_decodeHeaderValue",null);aa([k],b.prototype,"_validateCompareCopyStorageConfig",null);aa([k],b.prototype,"_generateStorageConfigWithUniqueId",null);aa([k],b.prototype,"_getStorageConfigHeaderString",
null);aa([k],b.prototype,"_getTransmogsHeaderString",null);return b}(u),zg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=
null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),U=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},ta=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}
return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},ua=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,
a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,
c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Ag=this&&this.__read||function(f,b){var a="function"===typeof Symbol&&f[Symbol.iterator];if(!a)return f;f=a.call(f);var e,c=[];try{for(;(void 0===b||0<b--)&&!(e=f.next()).done;)c.push(e.value)}catch(h){var g=
{error:h}}finally{try{e&&!e.done&&(a=f["return"])&&a.call(f)}finally{if(g)throw g.error;}}return c},Bg=function(f){function b(a,b,c,g){var e=f.call(this)||this;e.logCtor(arguments);e._swGlobal=a;e._cacheService=b;e._metricsService=c;e._compareCopyCacheWriter=new Ef(e._cacheService,e._metricsService);e._eventBus=g;e._eventBus.subscribe("DetectCacheMismatch",e);e._eventBus.subscribe("CacheTTLExpired",e);return e}zg(b,f);b.prototype.notifyEvent=function(a){switch(a.name){case "DetectCacheMismatch":this._handleDetectCacheMismatchEvent(a);
break;case "CacheTTLExpired":this._handleCacheTTLExpiredEvent(a)}};b.prototype.detectCacheMismatch=function(a,b,c,g,h,d){var e=this;this._logTagAndCount(a,g,"CompareIntent");this._logTagAndCount(a,h,"CompareIntent");var f=this._initCacheMismatchHeadersHelper(g,h);try{var p=this._initCacheMismatchDetector(g,h,c)}catch(m){this._evictCompareCopyFromCache(a,g,h,d);w.matchesCode(m,"DiffGeneratorMissing")&&(this._logTagAndCount(a,g,"CacheMismatchDetectorInitError"),this._logTagAndCount(a,h,"CacheMismatchDetectorInitError"));
this._logError(a,m);return}r.queueTask(function(){return ta(e,void 0,void 0,function(){var c,e,l,n,k,q,r,u,w,v,x;return ua(this,function(m){switch(m.label){case 0:return m.trys.push([0,4,,5]),c=F.getPerfNow(),[4,this._readCompareCopyFromCache(a,g,h,d)];case 1:e=m.sent();if(!e)throw t.create("CompareCopyUnavailable");l=f.extractTransmogsFromHeader(a,e);if(!l)throw t.create("CompareCopyTransmogsUnavailable");u=(r=Promise).all;w=[e.text()];return[4,this._compareCopyCacheWriter.getTransmoggedResponse(b.clone(),
l,this._getWriterOptions(a))];case 2:return[4,u.apply(r,[w.concat([m.sent().text()])])];case 3:return n=Ag.apply(void 0,[m.sent(),2]),k=n[0],q=n[1],this._evictCompareCopyFromCache(a,g,h,d),v=p.detectMismatch(a,k,q),this._logMark(a,g,"MismatchDetectionTime",c),this._logMark(a,h,"MismatchDetectionTime",c),this._logTagAndCount(a,g,"MismatchDetected:".concat(v)),this._logTagAndCount(a,h,"MismatchDetected:".concat(v)),this._logTagAndCount(a,g,"CompareSuccess"),this._logTagAndCount(a,h,"CompareSuccess"),
[3,5];case 4:return x=m.sent(),this._evictCompareCopyFromCache(a,g,h,d),this._logTagAndCount(a,g,"CompareFailed"),this._logTagAndCount(a,h,"CompareFailed"),this._logError(a,x),[3,5];case 5:return[2]}})})})};b.prototype.writeCompareCopyToCache=function(a,b,c,g){return ta(this,void 0,void 0,function(){return ua(this,function(e){switch(e.label){case 0:if(!c.compareCopy)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),this._logMark(a,c.name,"CompareCopy:Write:Start"),this._logMark(a,c.scope,"CompareCopy:Write:Start"),
[4,this._compareCopyCacheWriter.write(b,c,{eventOptions:a,requestStartTimestampSeconds:F.getEpochSeconds(a.timeOriginEpoch),attribution:g})];case 2:return e.sent(),this._logMark(a,c.name,"CompareCopy:Write:Success"),this._logMark(a,c.scope,"CompareCopy:Write:Success"),this._logTagAndCount(a,c.name,"CompareCopy:Success"),this._logTagAndCount(a,c.scope,"CompareCopy:Success"),[3,4];case 3:return e.sent(),this._logMark(a,c.name,"CompareCopy:Write:Fail"),this._logMark(a,c.scope,"CompareCopy:Write:Fail"),
this._logTagAndCount(a,c.name,"CompareCopy:Fail:Write"),this._logTagAndCount(a,c.scope,"CompareCopy:Fail:Write"),[3,4];case 4:return[2]}})})};b.prototype._handleDetectCacheMismatchEvent=function(a){return ta(this,void 0,void 0,function(){var b,c,g,h,d,f,l,p=this;return ua(this,function(e){b=a.detail;c=b.eventOptions;g=b.serverResponse;h=b.responseStrategy;d=b.ruleName;f=b.ruleScope;l=b.compareCopyStorageConfig;r.queueTask(function(){return ta(p,void 0,void 0,function(){return ua(this,function(a){this.detectCacheMismatch(c,
g,h,d,f,l);return[2]})})});return[2]})})};b.prototype._handleCacheTTLExpiredEvent=function(a){return ta(this,void 0,void 0,function(){var e,c,g,h=this;return ua(this,function(d){e=a.detail;c=e.eventOptions;g=e.response;r.queueTask(function(){return ta(h,void 0,void 0,function(){var a,e;return ua(this,function(d){try{a=this._initCacheMismatchHeadersHelper(b._CACHE_TTL_EVICT_RULE_NAME,b._CACHE_TTL_EVICT_RULE_SCOPE);e=a.extractStorageConfigFromHeader(c,g);if(!e)return[2];this._evictCompareCopyFromCache(c,
b._CACHE_TTL_EVICT_RULE_NAME,b._CACHE_TTL_EVICT_RULE_SCOPE,e)}catch(m){this._logError(c,m)}return[2]})})});return[2]})})};b.prototype._readCompareCopyFromCache=function(a,b,c,g){return ta(this,void 0,void 0,function(){var e,d;return ua(this,function(h){this._logTagAndCount(a,b,"ReadIntent");this._logTagAndCount(a,c,"ReadIntent");e=g.cacheName;d=g.cacheKey;return[2,this._cacheService.read(a,e,d)]})})};b.prototype._evictCompareCopyFromCache=function(a,b,c,g){return ta(this,void 0,void 0,function(){var e,
d,f,l;return ua(this,function(h){switch(h.label){case 0:this._logTagAndCount(a,b,"EvictIntent"),this._logTagAndCount(a,c,"EvictIntent"),e=g.cacheName,d=g.cacheKey,f=!1,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this._cacheService.evict(a,e,d)];case 2:return f=h.sent(),[3,4];case 3:return l=h.sent(),this._logError(a,l),[3,4];case 4:return this._logTagAndCount(a,b,"Evict:".concat(f)),this._logTagAndCount(a,c,"Evict:".concat(f)),[2]}})})};b.prototype._logMark=function(a,b,c,g){b=this._getMetricName(b,
c);this._metricsService.mark(a,b,g)};b.prototype._logCount=function(a,b,c,g){b=this._getMetricName(b,c);this._metricsService.count(a,b,g)};b.prototype._logTag=function(a,b,c){b=this._getMetricName(b,c);this._metricsService.tag(a,b)};b.prototype._logTagAndCount=function(a,b,c,g){this._logTag(a,b,c);this._logCount(a,b,c,g)};b.prototype._logError=function(a,e){var c=w.matchesSignature(e,z.FAILED_TO_FETCH),g=w.matchesCodeOrSignature(e,"NetworkError",z.NETWORK_ERROR);this._metricsService.error(a,e,b._METRIC_LOGGING_SCOPE,
"ERROR");this._metricsService.countError(a,e,c?"".concat("FailedToFetch",":").concat(b._METRIC_LOGGING_SCOPE):g?"".concat("NetworkError",":").concat(b._METRIC_LOGGING_SCOPE):b._METRIC_LOGGING_SCOPE)};b.prototype._getMetricName=function(a,e){return"".concat(a,":").concat(b._METRIC_LOGGING_SCOPE,":").concat(e)};b.prototype._getWriterOptions=function(a){return{eventOptions:a,requestStartTimestampSeconds:F.getEpochSeconds(a.timeOriginEpoch),attribution:b._WRITER_OPTIONS_LABEL}};b.prototype._initCacheMismatchHeadersHelper=
function(a,b){return new ub(this._metricsService,a,b)};b.prototype._initCacheMismatchDetector=function(a,b,c){return new kg(this._swGlobal,this._metricsService,a,b,c)};b._METRIC_LOGGING_SCOPE="CacheMismatchDetectionService";b._CACHE_TTL_EVICT_RULE_NAME="CACHE-TTL-EVICT-COMP-COPY";b._CACHE_TTL_EVICT_RULE_SCOPE="CACHE-TTL-EVICT-COMP-COPY-SCOPE";b._WRITER_OPTIONS_LABEL="compcopy";U([k],b.prototype,"notifyEvent",null);U([k],b.prototype,"detectCacheMismatch",null);U([k],b.prototype,"writeCompareCopyToCache",
null);U([k],b.prototype,"_readCompareCopyFromCache",null);U([k],b.prototype,"_evictCompareCopyFromCache",null);U([k],b.prototype,"_logMark",null);U([k],b.prototype,"_logCount",null);U([k],b.prototype,"_logTag",null);U([k],b.prototype,"_logTagAndCount",null);U([k],b.prototype,"_logError",null);U([k],b.prototype,"_getMetricName",null);U([k],b.prototype,"_getWriterOptions",null);U([k],b.prototype,"_initCacheMismatchHeadersHelper",null);U([k],b.prototype,"_initCacheMismatchDetector",null);return b}(u),
Cg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),W=this&&
this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},hd=this&&this.__values||function(f){var b="function"===typeof Symbol&&Symbol.iterator,a=b&&f[b],e=0;if(a)return a.call(f);if(f&&"number"===typeof f.length)return{next:function(){f&&
e>=f.length&&(f=void 0);return{value:f&&f[e++],done:!f}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");},id=function(f){function b(a,b,c){var e=f.call(this)||this;e.logCtor(arguments);e._maxEntries=a;"function"===typeof c&&(e._stateChangeCallback=c);e._entries=e._trimToMaxSize(b);var h={added:new Map(e._entries)};0<e.size()&&e._stateChanged(h);return e}Cg(b,f);b.prototype.get=function(a){return this._entries.get(a)};b.prototype.set=function(a,b){this._overflow();
this._entries.set(a,b);a={added:new Map([[a,b]])};this._stateChanged(a)};b.prototype.delete=function(a){var b=this._entries.get(a);if(!b)return!1;var c=this._entries.delete(a);c&&(a={removed:new Map([[a,b]])},this._stateChanged(a));return c};b.prototype.has=function(a){return this._entries.has(a)};b.prototype.size=function(){return this._entries.size};b.prototype.full=function(){return this._entries.size>=this._maxEntries};b.prototype.keys=function(){return this._entries.keys()};b.prototype.serialize=
function(a){void 0===a&&(a="[]");return I.serialize(Array.from(this._entries.entries()),!1,a)};b.prototype.clear=function(){var a={removed:new Map(this._entries)};this._entries.clear();this._stateChanged(a)};b.prototype._trimToMaxSize=function(a){var b;a=a?new Map(a):new Map;try{for(var c=hd(a.keys()),g=c.next();!(g.done||a.size<=this._maxEntries);g=c.next())a.delete(g.value)}catch(d){var h={error:d}}finally{try{g&&!g.done&&(b=c.return)&&b.call(c)}finally{if(h)throw h.error;}}return a};b.prototype._overflow=
function(){var a;try{for(var b=hd(this.keys()),c=b.next();!c.done;c=b.next()){var g=c.value;if(!this.full())break;this.delete(g)}}catch(d){var h={error:d}}finally{try{c&&!c.done&&(a=b.return)&&a.call(b)}finally{if(h)throw h.error;}}};b.prototype._stateChanged=function(a){this._stateChangeCallback&&this._stateChangeCallback.call(void 0,this,a)};W([k],b.prototype,"get",null);W([k],b.prototype,"set",null);W([k],b.prototype,"delete",null);W([k],b.prototype,"has",null);W([k],b.prototype,"size",null);W([k],
b.prototype,"full",null);W([k],b.prototype,"keys",null);W([k],b.prototype,"serialize",null);W([k],b.prototype,"clear",null);W([k],b.prototype,"_trimToMaxSize",null);W([k],b.prototype,"_overflow",null);W([k],b.prototype,"_stateChanged",null);return b}(u),Dg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,
a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),xb=function(f){function b(a,b,c){var e=f.call(this,a,b,c)||this;e.logCtor(arguments);return e}Dg(b,f);return b}(id),Eg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,
b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),jd=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&
"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},bb=function(f){function b(a,b,c){var e=f.call(this,a,b,c)||this;e.logCtor(arguments);return e}Eg(b,f);b.prototype.get=function(a){var b=f.prototype.get.call(this,a);if(b)return this.set(a,b),b};b.prototype.set=function(a,b){f.prototype.delete.call(this,a);f.prototype.set.call(this,a,b)};jd([k],b.prototype,"get",
null);jd([k],b.prototype,"set",null);return b}(id),Fg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):
(e.prototype=a.prototype,new e)}}(),Gg=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},jc=function(f){function b(a){var b=f.call(this)||this;b.logCtor(arguments);b.eventBus=a;return b}Fg(b,f);b.prototype.notify=
function(a,b,c){this.accepts(a,b)&&this.publish(a,b,c)};Gg([k],b.prototype,"notify",null);return b}(u),Hg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");
f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),kc=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Ig=function(f){function b(a){var e=f.call(this,a)||this;e.logCtor(arguments);
e._readyStore=new xb(b._MAX_CLIENTS);return e}Hg(b,f);b.prototype.isClientReady=function(a){return this._readyStore.has(a)};b.prototype.accepts=function(a,b){return!(!b||"retail_service_worker_messaging"!==b.feature||"client_messaging_ready"!==b.command)};b.prototype.publish=function(a,b,c){this._readyStore.set(a,!0);this.eventBus.publish({name:"ClientReady",detail:{eventOptions:c}})};b._MAX_CLIENTS=50;kc([k],b.prototype,"isClientReady",null);kc([k],b.prototype,"accepts",null);kc([k],b.prototype,
"publish",null);return b}(jc),Jg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=
a.prototype,new e)}}(),kd=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Kg=function(f){function b(a){var b=f.call(this,a)||this;b.logCtor(arguments);return b}Jg(b,f);b.prototype.accepts=function(a,b){return!(!b||
"lightsaber"!==b.feature||"rendering_hints"!==b.command||!b.options||"object"!==typeof b.options)};b.prototype.publish=function(a,b,c){this.eventBus.publish({name:"RenderingHints",detail:{eventOptions:c,options:b.options}})};kd([k],b.prototype,"accepts",null);kd([k],b.prototype,"publish",null);return b}(jc),Lg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),ld=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,
b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Mg=function(f){function b(a){var b=f.call(this,a)||this;b.logCtor(arguments);return b}Lg(b,f);b.prototype.accepts=function(a,b){return!(!b||"lightsaber"!==b.feature||"customer_context_change.v1"!==b.command||!this._isValidCustomerContextChange(b.options))};b.prototype.publish=function(a,b,c){a=this._filterCustomerContextChangeMessage(b.options);this.eventBus.publish({name:"CustomerContextChange",
detail:{eventOptions:c,options:a}})};b.prototype._isValidCustomerContextChange=function(a){var b=this,c=q.isObject,g=q.isOneOf,h=q.isNonEmptyArray,d=q.isArrayWhereEvery;return c(a)&&h(a.changes)&&d(a.changes,function(c){return g(c,["customer","exports","lop","marketplace"])&&b._isValidCustomerContextChangeKey(c,a)})};b.prototype._filterCustomerContextChangeMessage=function(a){var b={changes:a.changes};a.changes.forEach(function(c){b[c]=pa.shallow(a[c])});return b};b.prototype._isValidCustomerContextChangeKey=
function(a,b){var c,e,h=q.isArrayWhereEvery,d=q.isObject,f=q.isNonEmptyString,l=q.isOneOf;return d(b[a])&&h(Object.keys(b[a]),function(a){return l(a,["new","old"])})&&f(null===(c=b[a])||void 0===c?void 0:c.new)&&f(null===(e=b[a])||void 0===e?void 0:e.old)};ld([k],b.prototype,"accepts",null);ld([k],b.prototype,"publish",null);return b}(jc),Ng=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),va=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,
b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},md=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},nd=this&&this.__generator||function(f,
b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-
1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&
(n[Symbol.iterator]=function(){return this}),n},Og=function(f){function b(a,b){var c=f.call(this)||this;c.logCtor(arguments);c._swGlobal=a;c._clientReadyPublisher=new Ig(b);c._renderingHintsPublisher=new Kg(b);c._customerContextChangePublisher=new Mg(b);c._listenForClientMessages();return c}Ng(b,f);b.prototype.isClientReady=function(a){return this._clientReadyPublisher.isClientReady(a)};b.prototype.getClient=function(a){return md(this,void 0,void 0,function(){var b;return nd(this,function(c){switch(c.label){case 0:return[4,
this._swGlobal.clients.get(a)];case 1:if(b=c.sent())return[2,b];throw t.create("ClientNotFound",{clientId:a});}})})};b.prototype.postMessageToClient=function(a,b){a.postMessage(b)};b.prototype.postMessageToClientById=function(a,b){return md(this,void 0,void 0,function(){var c;return nd(this,function(e){switch(e.label){case 0:return[4,this.getClient(a)];case 1:return c=e.sent(),this.postMessageToClient(c,b),[2]}})})};b.prototype.notify=function(a,b,c){this._publish(a,b,c)};b.prototype._listenForClientMessages=
function(){var a=this;this._swGlobal.addEventListener("message",function(b){if(a._filter(b)){var c=b.source.id;b=b.data;var e=V.create(c);a._publish(c,b,e)}})};b.prototype._publish=function(a,b,c){[this._clientReadyPublisher,this._renderingHintsPublisher,this._customerContextChangePublisher].forEach(function(e){e.notify(a,b,c)})};b.prototype._filter=function(a){return a.origin===this._swGlobal.location.origin&&a.source instanceof WindowClient&&"string"===typeof a.source.id};va([k],b.prototype,"isClientReady",
null);va([k],b.prototype,"getClient",null);va([k],b.prototype,"postMessageToClient",null);va([k],b.prototype,"postMessageToClientById",null);va([k],b.prototype,"notify",null);va([k],b.prototype,"_listenForClientMessages",null);va([k],b.prototype,"_publish",null);va([k],b.prototype,"_filter",null);return b}(u),Pg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),wa=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,
b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},lc=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},mc=this&&this.__generator||function(f,
b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-
1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&
(n[Symbol.iterator]=function(){return this}),n},Qg=function(f){function b(a,e,c){var g=f.call(this)||this;g._computed={};g.logCtor(arguments);g._metricsService=a;g._errorLoggingScope="ContentFragmentService";g._memoryCache=new bb(b._MAX_MEMORY_CACHE_ENTRIES);g._init(c,e);return g}Pg(b,f);b.prototype.render=function(a,b,c){return lc(this,void 0,void 0,function(){var e,h;return mc(this,function(d){switch(d.label){case 0:return e=this._getContentFragmentConfig(b),e?(h=this._fetchFromMemory(e.name))?
[3,2]:[4,this._fetchFromNetwork(a,e)]:[2];case 1:h=d.sent(),d.label=2;case 2:return h?[2,(new De(a,this._metricsService,b,h,c)).getResponse()]:[2]}})})};b.prototype.prewarm=function(a,b,c){var e=this,h=this._getContentFragmentConfig(b);if(h)switch(c){case "http-cache":case "memory":r.queueTask(function(){return lc(e,void 0,void 0,function(){var e;return mc(this,function(d){switch(d.label){case 0:return[4,this._fetchFromNetwork(a,h,!0)];case 1:return e=d.sent(),"memory"===c&&this._cacheInMemory(b,
e),[2]}})})})}};b.prototype.notifyEvent=function(a){switch(a.name){case "ContentFragmentSpeculation":this.prewarm(a.detail.eventOptions,a.detail.name,a.detail.prewarm)}};b.prototype._fetchFromNetwork=function(a,b,c){void 0===c&&(c=!1);return lc(this,void 0,void 0,function(){var e;return mc(this,function(g){switch(g.label){case 0:return g.trys.push([0,2,,3]),[4,(new Za(b.url)).getResponse()];case 1:return[2,g.sent()];case 2:return e=g.sent(),this._metricsService.countError(a,e,c?"".concat(this._errorLoggingScope,
":Prewarming"):this._errorLoggingScope),[2];case 3:return[2]}})})};b.prototype._fetchFromMemory=function(a){return(a=this._memoryCache.get(a))?a.clone():void 0};b.prototype._cacheInMemory=function(a,b){b&&this._memoryCache.set(a,b)};b.prototype._getContentFragmentConfig=function(a){return this._computed[a]};b.prototype._init=function(a,b){var c=this;a.forEach(function(a){c._computed[a.name]=a});b.subscribe("ContentFragmentSpeculation",this)};b._MAX_MEMORY_CACHE_ENTRIES=100;wa([k],b.prototype,"render",
null);wa([k],b.prototype,"prewarm",null);wa([k],b.prototype,"notifyEvent",null);wa([k],b.prototype,"_fetchFromNetwork",null);wa([k],b.prototype,"_fetchFromMemory",null);wa([k],b.prototype,"_cacheInMemory",null);wa([k],b.prototype,"_getContentFragmentConfig",null);wa([k],b.prototype,"_init",null);return b}(u),Rg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),yb=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,
b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Sg=function(f){function b(a){var b=f.call(this)||this,c=R.getCustomerProperties(a);"function"===typeof(null===c||void 0===c?void 0:c.getSessionId)&&(b._sessionId=c.getSessionId());"function"===typeof(null===c||void 0===c?void 0:c.getDirectedCustomerId)&&(b._directedCustomerId=c.getDirectedCustomerId());"function"===typeof(null===c||void 0===c?void 0:c.getLanguageOfPreference)&&
(b._languageOfPreference=c.getLanguageOfPreference());b._appVersion=y.getAppVersion(a);return b}Rg(b,f);b.prototype.getSessionId=function(){return this._sessionId};b.prototype.getDirectedCustomerId=function(){return this._directedCustomerId};b.prototype.getLanguage=function(){return this._languageOfPreference};b.prototype.getAppVersion=function(){return this._appVersion};yb([k],b.prototype,"getSessionId",null);yb([k],b.prototype,"getDirectedCustomerId",null);yb([k],b.prototype,"getLanguage",null);
yb([k],b.prototype,"getAppVersion",null);return b}(u),Tg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):
(e.prototype=a.prototype,new e)}}(),Oa=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Ug=function(f){function b(){var a=f.call(this)||this;a.logCtor(arguments);a._subscriptionsByEvents={};a._subscriptionCount=
0;return a}Tg(b,f);b.prototype.publish=function(a){var b=this,c=this._subscriptionsByEvents[this._getInternalEventName(a.name)];c&&Object.keys(c).forEach(function(e){var g=c[e];g.once&&b.unsubscribe(e);b._notify(a,g)})};b.prototype.subscribe=function(a,b,c,g){void 0===c&&(c="async");a=this._getInternalEventName(a);var e=this._getUniqueSubscriptionId();b={subscriptionId:e,mode:c,subscriber:b,once:g};this._subscriptionsByEvents.hasOwnProperty(a)||(this._subscriptionsByEvents[a]={});this._subscriptionsByEvents[a][e]=
b;return e};b.prototype.unsubscribe=function(a){var b=this;Object.keys(this._subscriptionsByEvents).forEach(function(c){var e=b._subscriptionsByEvents[c];Object.keys(e).forEach(function(b){b===a&&delete e[b]})})};b.prototype._notify=function(a,b){var c=function(){b.subscriber.notifyEvent(a)};"sync"===b.mode?c():r.queueTask(c)};b.prototype._getUniqueSubscriptionId=function(){return"".concat(this._subscriptionCount++)};b.prototype._getInternalEventName=function(a){return"".concat(v.NAMESPACE,":").concat(a)};
Oa([k],b.prototype,"publish",null);Oa([k],b.prototype,"subscribe",null);Oa([k],b.prototype,"unsubscribe",null);Oa([k],b.prototype,"_notify",null);Oa([k],b.prototype,"_getUniqueSubscriptionId",null);Oa([k],b.prototype,"_getInternalEventName",null);return b}(u),Vg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};
return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Wg=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-
1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},od=function(f){function b(a,b,c){var e=f.call(this)||this;e.logCtor(arguments);e.swGlobal=a;e.metricsService=b;e.eventBus=c;e._initFetchHandling();return e}Vg(b,f);b.prototype._initFetchHandling=function(){var a=this;this.swGlobal.addEventListener("fetch",function(b){if(a.filter(b)){var c=V.create(b.resultingClientId);a.handle(c,b);a.publishEvent(c,b)}})};Wg([k],b.prototype,"_initFetchHandling",
null);return b}(u),Xg=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,
new e)}}(),pd=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Yg=function(f){function b(a,b,c,g){var e=f.call(this,a,c,g)||this;e.logCtor(arguments);e._clientMessageAsFetchResponseService=b;e._swGlobal=
a;return e}Xg(b,f);b.prototype.filter=function(a){a=a.request;var e=a.url;return"GET"===a.method&&0===e.indexOf("".concat(this._swGlobal.location.origin).concat(b.CLIENT_MSG_AS_FETCH_URL_PATH))};b.prototype.handle=function(a,b){this._clientMessageAsFetchResponseService.respond(a,b)};b.prototype.publishEvent=function(a,b){};b.CLIENT_MSG_AS_FETCH_URL_PATH="/".concat(v.NAMESPACE_LCASE,"/client-api/message");pd([k],b.prototype,"handle",null);pd([k],b.prototype,"publishEvent",null);return b}(od),Zg=this&&
this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),zb=this&&this.__decorate||
function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},$g=function(f){function b(a,b,c,g,h){var d=f.call(this,a,c,g)||this;d.logCtor(arguments);d._requireNavigationPreloadSupport=h.usePreloadResponseOnlyForServerResponseOnNavigations;
d._navigationResponseService=b;return d}Zg(b,f);b.prototype.filter=function(a){a=a.request;var b=a.destination,c=a.method,g=a.isHistoryNavigation;return"navigate"===a.mode&&"document"===b&&"GET"===c&&!g};b.prototype.handle=function(a,b){this._shouldSkipInterception(a,b)||this._navigationResponseService.respond(a,b)};b.prototype.publishEvent=function(a,b){this.eventBus.publish({name:"Navigation",detail:{request:b.request,eventOptions:a}})};b.prototype._shouldSkipInterception=function(a,b){return this._hasSkipInterceptionUrlSubstring(a,
b)||this._hasSkipInterceptUrlParam(a,b)||this._requiresButDoesNotSupportNavigationPreload(b)};b.prototype._hasSkipInterceptionUrlSubstring=function(a,e){var c=this,g=["lx_bd","i\x3dluxury","purchasePrograms\x3dBOND","ref\x3dluxury_cx_proceed"],h=y.getCountryCode(this.swGlobal);h&&h.toLowerCase()===b.IN_COUNTRY_CODE&&g.push("node\x3daps");var d=g.filter(function(a){return-1<e.request.url.indexOf(a)});r.queueTask(function(){d.forEach(function(b){b=Ua.onlyWordChars(b).substr(0,50);c.metricsService.tag(a,
"".concat("SkipIntercept",":").concat(b))})});return 0<d.length};b.prototype._hasSkipInterceptUrlParam=function(a,b){var c=this,e=(b=L.parse(b.request.url))?x.skipIntercept.getParam(b):"NoURL";e&&r.queueTask(function(){var b=Ua.onlyWordChars(e).substr(0,50);c.metricsService.tag(a,"SkipIntercept");c.metricsService.tag(a,"".concat("SkipIntercept",":").concat(b))});return!!e};b.prototype._requiresButDoesNotSupportNavigationPreload=function(a){return this._requireNavigationPreloadSupport&&!a.preloadResponse};
b.IN_COUNTRY_CODE="in";zb([k],b.prototype,"handle",null);zb([k],b.prototype,"publishEvent",null);zb([k],b.prototype,"_hasSkipInterceptUrlParam",null);zb([k],b.prototype,"_requiresButDoesNotSupportNavigationPreload",null);return b}(od),Ea=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=
(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},ah=function(){function f(){this._bufferedCounterLRUStore=new bb(f._MAX_CLIENTS);this._bufferedCountErrorLRUStore=new bb(f._MAX_CLIENTS)}f.prototype.bufferedCounter=function(b){var a=b.eventOptions.clientId,e=this._isNewClientId(a),c=[];this._bufferedCounterLRUStore.has(a)&&(c=this._bufferedCounterLRUStore.get(a));var g=!1;c&&(g=c.length>=f._MAX_COUNTERS_PER_CLIENT,ja.pushClamped(c,b,f._MAX_COUNTERS_PER_CLIENT),this._bufferedCounterLRUStore.set(a,
c));return{isNewBufferCreated:e,isBufferOverflowed:g}};f.prototype.bufferedCounterSize=function(){return this._bufferedCounterLRUStore.size()};f.prototype.drainBufferedCounters=function(b){var a=this._bufferedCounterLRUStore.get(b);this._bufferedCounterLRUStore.delete(b);return a};f.prototype.bufferedCountError=function(b){var a=b.eventOptions.clientId,e=this._isNewClientId(a),c=[];this._bufferedCountErrorLRUStore.has(a)&&(c=this._bufferedCountErrorLRUStore.get(a));var g=!1;c&&(g=c.length>=f._MAX_COUNTERS_PER_CLIENT,
ja.pushClamped(c,b,f._MAX_ERROR_COUNTERS_PER_CLIENT),this._bufferedCountErrorLRUStore.set(a,c));return{isNewBufferCreated:e,isBufferOverflowed:g}};f.prototype.bufferedCountErrorSize=function(){return this._bufferedCountErrorLRUStore.size()};f.prototype.drainBufferedCountErrors=function(b){var a=this._bufferedCountErrorLRUStore.get(b);this._bufferedCountErrorLRUStore.delete(b);return a};f.prototype._isNewClientId=function(b){return!this._bufferedCounterLRUStore.has(b)&&!this._bufferedCountErrorLRUStore.has(b)};
f._MAX_CLIENTS=50;f._MAX_COUNTERS_PER_CLIENT=20;f._MAX_ERROR_COUNTERS_PER_CLIENT=20;Ea([k],f.prototype,"bufferedCounter",null);Ea([k],f.prototype,"bufferedCounterSize",null);Ea([k],f.prototype,"drainBufferedCounters",null);Ea([k],f.prototype,"bufferedCountError",null);Ea([k],f.prototype,"bufferedCountErrorSize",null);Ea([k],f.prototype,"drainBufferedCountErrors",null);Ea([k],f.prototype,"_isNewClientId",null);return f}(),bh=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),A=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=
Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},ha=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}
function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},ia=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;
h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];
return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},ch=function(f){function b(a,b){var c=f.call(this)||this;c.logCtor(arguments);c.reset();b.subscribe("ClientReady",c);c._clientMessagingService=a;return c}bh(b,f);b.prototype.reset=function(){this._bufferedCounters=[];this._bufferedTags=[];this._bufferedErrors=[];this._bufferedWeblabTriggers=[]};b.prototype.counter=function(a,b,c){var e=this;
this._clientMessagingService.isClientReady(a)?r.queueTask(function(){return ha(e,void 0,void 0,function(){var e,d;return ia(this,function(g){switch(g.label){case 0:return g.trys.push([0,2,,3]),[4,this._getClient(a)];case 1:return e=g.sent(),this._postCounter(e,b,c),[3,3];case 2:return d=g.sent(),this.log("counter",d.message),[3,3];case 3:return[2]}})})}):this._bufferCounter(a,b,c)};b.prototype.tag=function(a,b){var c=this;this._clientMessagingService.isClientReady(a)?r.queueTask(function(){return ha(c,
void 0,void 0,function(){var c,e;return ia(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,this._getClient(a)];case 1:return c=d.sent(),this._postTag(c,b),[3,3];case 2:return e=d.sent(),this.log("tag",e.message),[3,3];case 3:return[2]}})})}):this._bufferTag(a,b)};b.prototype.error=function(a,b,c,g){var e=this;this._clientMessagingService.isClientReady(a)?r.queueTask(function(){return ha(e,void 0,void 0,function(){var d,e;return ia(this,function(h){switch(h.label){case 0:return h.trys.push([0,
2,,3]),[4,this._getClient(a)];case 1:return d=h.sent(),this._postError(d,b,c,g),[3,3];case 2:return e=h.sent(),this.log("tag",e.message),[3,3];case 3:return[2]}})})}):this._bufferError(a,b,c,g)};b.prototype.weblabTrigger=function(a,b,c){var e=this;this._clientMessagingService.isClientReady(a)?r.queueTask(function(){return ha(e,void 0,void 0,function(){var e,d;return ia(this,function(g){switch(g.label){case 0:return g.trys.push([0,2,,3]),[4,this._getClient(a)];case 1:return e=g.sent(),this._postWeblabTrigger(e,
b,c),[3,3];case 2:return d=g.sent(),this.log("weblabtrigger",d.message),[3,3];case 3:return[2]}})})}):this._bufferWeblabTrigger(a,b,c)};b.prototype.notifyEvent=function(a){var b=this;switch(a.name){case "ClientReady":r.queueTask(function(){return ha(b,void 0,void 0,function(){var b,e,h,d=this;return ia(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),b=a.detail.eventOptions.clientId,[4,this._getClient(b)];case 1:return e=c.sent(),r.queueTask(function(){d._drainBufferedCounters(e)}),
r.queueTask(function(){d._drainBufferedTags(e)}),r.queueTask(function(){d._drainBufferedErrors(e)}),r.queueTask(function(){d._drainBufferedWeblabTriggers(e)}),[3,3];case 2:return h=c.sent(),this.log("notifyEvent",h.message),[3,3];case 3:return[2]}})})})}};b.prototype._bufferCounter=function(a,e,c){ja.pushClamped(this._bufferedCounters,{clientId:a,name:e,value:c},b._MAX_COUNTERS)};b.prototype._bufferTag=function(a,e){ja.pushClamped(this._bufferedTags,{clientId:a,name:e},b._MAX_TAGS)};b.prototype._bufferError=
function(a,e,c,g){ja.pushClamped(this._bufferedErrors,{clientId:a,message:e,attribution:c,level:g},b._MAX_ERRORS)};b.prototype._bufferWeblabTrigger=function(a,e,c){ja.pushClamped(this._bufferedWeblabTriggers,{clientId:a,name:e,treatment:c},b._MAX_WEBLAB_TRIGGERS)};b.prototype._drainBufferedCounters=function(a){for(var b=this,c=[],g=function(d){var e=h._bufferedCounters[d];if(a.id!==e.clientId)return c.push(e),"continue";r.queueTask(function(){return ha(b,void 0,void 0,function(){return ia(this,function(b){this._postCounter(a,
e.name,e.value);return[2]})})})},h=this,d=0;d<this._bufferedCounters.length;d++)g(d);this._bufferedCounters=c};b.prototype._drainBufferedTags=function(a){for(var b=this,c=[],g=function(d){var e=h._bufferedTags[d];if(a.id!==e.clientId)return c.push(e),"continue";r.queueTask(function(){return ha(b,void 0,void 0,function(){return ia(this,function(b){this._postTag(a,e.name);return[2]})})})},h=this,d=0;d<this._bufferedTags.length;d++)g(d);this._bufferedTags=c};b.prototype._drainBufferedErrors=function(a){for(var b=
this,c=[],g=function(d){var e=h._bufferedErrors[d];if(a.id!==e.clientId)return c.push(e),"continue";r.queueTask(function(){return ha(b,void 0,void 0,function(){return ia(this,function(b){this._postError(a,e.message,e.attribution,e.level);return[2]})})})},h=this,d=0;d<this._bufferedErrors.length;d++)g(d);this._bufferedErrors=c};b.prototype._drainBufferedWeblabTriggers=function(a){for(var b=this,c=[],g=function(d){var e=h._bufferedWeblabTriggers[d];if(a.id!==e.clientId)return c.push(e),"continue";r.queueTask(function(){return ha(b,
void 0,void 0,function(){return ia(this,function(b){this._postWeblabTrigger(a,e.name,e.treatment);return[2]})})})},h=this,d=0;d<this._bufferedWeblabTriggers.length;d++)g(d);this._bufferedWeblabTriggers=c};b.prototype._postCounter=function(a,b,c){b=this._createClientCounterMessage(b,c);this._postMessageToClient(a,b)};b.prototype._postTag=function(a,b){b=this._createClientTagMessage(b);this._postMessageToClient(a,b)};b.prototype._postError=function(a,b,c,g){b=this._createClientErrorMessage(b,c,g);this._postMessageToClient(a,
b)};b.prototype._postWeblabTrigger=function(a,b,c){b=this._createClientWeblabTriggerMessage(b,c);this._postMessageToClient(a,b)};b.prototype._createClientCounterMessage=function(a,e){return{feature:b._MESSAGING_FEATURE,command:b._MESSAGING_COMMAND_COUNTER,data:{name:a,value:e}}};b.prototype._createClientTagMessage=function(a){return{feature:b._MESSAGING_FEATURE,command:b._MESSAGING_COMMAND_TAG,data:{tag:a}}};b.prototype._createClientErrorMessage=function(a,e,c){return{feature:b._MESSAGING_FEATURE,
command:b._MESSAGING_COMMAND_ERROR,data:{message:a,attribution:e,level:c}}};b.prototype._createClientWeblabTriggerMessage=function(a,e){return{feature:b._MESSAGING_FEATURE,command:b._MESSAGING_COMMAND_WEBLAB_TRIGGER,data:{weblab:a,treatment:e}}};b.prototype._postMessageToClient=function(a,b){this._clientMessagingService.postMessageToClient(a,b)};b.prototype._getClient=function(a){return ha(this,void 0,void 0,function(){return ia(this,function(b){return[2,this._clientMessagingService.getClient(a)]})})};
b._MAX_COUNTERS=400;b._MAX_TAGS=100;b._MAX_ERRORS=100;b._MAX_WEBLAB_TRIGGERS=100;b._MESSAGING_FEATURE="retail_service_worker_messaging";b._MESSAGING_COMMAND_COUNTER="log_counter";b._MESSAGING_COMMAND_TAG="log_tag";b._MESSAGING_COMMAND_ERROR="log_error";b._MESSAGING_COMMAND_WEBLAB_TRIGGER="log_weblab_trigger";A([k],b.prototype,"reset",null);A([k],b.prototype,"counter",null);A([k],b.prototype,"tag",null);A([k],b.prototype,"error",null);A([k],b.prototype,"weblabTrigger",null);A([k],b.prototype,"notifyEvent",
null);A([k],b.prototype,"_bufferCounter",null);A([k],b.prototype,"_bufferTag",null);A([k],b.prototype,"_bufferError",null);A([k],b.prototype,"_bufferWeblabTrigger",null);A([k],b.prototype,"_drainBufferedCounters",null);A([k],b.prototype,"_drainBufferedTags",null);A([k],b.prototype,"_drainBufferedErrors",null);A([k],b.prototype,"_drainBufferedWeblabTriggers",null);A([k],b.prototype,"_postCounter",null);A([k],b.prototype,"_postTag",null);A([k],b.prototype,"_postWeblabTrigger",null);A([k],b.prototype,
"_createClientCounterMessage",null);A([k],b.prototype,"_createClientTagMessage",null);A([k],b.prototype,"_createClientErrorMessage",null);A([k],b.prototype,"_createClientWeblabTriggerMessage",null);A([k],b.prototype,"_postMessageToClient",null);A([k],b.prototype,"_getClient",null);return b}(u),dh=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),nc=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,
b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},eh=function(f){function b(){var a=f.call(this)||this;a.logCtor(arguments);a._ready=new xb(b._MAX_CLIENTS);return a}dh(b,f);b.prototype.isReady=function(a){return this._ready.has(a)};b.prototype.markReady=function(a,b){!this.isReady(a)&&q.isNonEmptyString(b)&&this._ready.set(a,b)};b.prototype.getRequestIdForClient=function(a){var b=this._ready.get(a);if(b)return b;
throw t.create("RequestIdMissingInStore",{clientId:a});};b._MAX_CLIENTS=50;nc([k],b.prototype,"isReady",null);nc([k],b.prototype,"markReady",null);nc([k],b.prototype,"getRequestIdForClient",null);return b}(u),fh=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=
b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Pa=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||
g;return 3<c&&g&&Object.defineProperty(b,a,g),g},oc=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},pc=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");
for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=
d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},gh=function(f){function b(a,b){var c=f.call(this)||this;c.logCtor(arguments);
c._globalTelemetryClient=a;c._requestIdReadyStore=new eh;c.reset();b.subscribe("RequestIdAvailable",c);return c}fh(b,f);b.prototype.reset=function(){this._bufferedWeblabTriggers=[]};b.prototype.weblabTrigger=function(a,b,c){var e=this;this._requestIdReadyStore.isReady(a)?r.queueTask(function(){return oc(e,void 0,void 0,function(){var e,d;return pc(this,function(g){try{e=this._requestIdReadyStore.getRequestIdForClient(a),d=[{name:b,treatment:c}],this._postWeblabTrigger(a,d,e)}catch(l){this.log("weblabtrigger",
l.message)}return[2]})})}):this._bufferWeblabTrigger(a,b,c)};b.prototype.notifyEvent=function(a){var b=this;switch(a.name){case "RequestIdAvailable":r.queueTask(function(){return oc(b,void 0,void 0,function(){var b,e,h,d=this;return pc(this,function(c){try{b=a.detail.eventOptions.clientId,e=a.detail.requestId,this._requestIdReadyStore.markReady(b,e),h=this._requestIdReadyStore.getRequestIdForClient(b),r.queueTask(function(){d._drainBufferedWeblabTriggers(b,h)})}catch(l){this.log("notifyEvent",l.message)}return[2]})})})}};
b.prototype._bufferWeblabTrigger=function(a,e,c){ja.pushClamped(this._bufferedWeblabTriggers,{clientId:a,name:e,treatment:c},b._MAX_WEBLAB_TRIGGERS)};b.prototype._drainBufferedWeblabTriggers=function(a,b){for(var c=this,e=[],h=[],d=0;d<this._bufferedWeblabTriggers.length;d++){var f=this._bufferedWeblabTriggers[d];a!==f.clientId?e.push(f):h.push({name:f.name,treatment:f.treatment})}0<h.length&&r.queueTask(function(){return oc(c,void 0,void 0,function(){return pc(this,function(c){this._postWeblabTrigger(a,
h,b);return[2]})})});this._bufferedWeblabTriggers=e};b.prototype._postWeblabTrigger=function(a,b,c){this._globalTelemetryClient&&q.isFunction(this._globalTelemetryClient.trigger)&&this._globalTelemetryClient.trigger(b,{clientID:a,requestID:c})};b._MAX_WEBLAB_TRIGGERS=100;Pa([k],b.prototype,"reset",null);Pa([k],b.prototype,"weblabTrigger",null);Pa([k],b.prototype,"notifyEvent",null);Pa([k],b.prototype,"_bufferWeblabTrigger",null);Pa([k],b.prototype,"_drainBufferedWeblabTriggers",null);Pa([k],b.prototype,
"_postWeblabTrigger",null);return b}(u),hh=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):
(e.prototype=a.prototype,new e)}}(),M=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},cb=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||
(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},db=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;
if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=
[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},ih=function(f){function b(a,b,c){var e=f.call(this)||this;e.logCtor(arguments);e._swGlobal=a;e._clientPostbacks=new ch(b,c);e._clientPostbacks.reset();a.$TM&&(e._globalTelemetryClient=a.$TM,e._telemetryTriggers=
new gh(e._globalTelemetryClient,c),e._telemetryTriggers.reset());e._bufferedMetricsHandler=new ah;return e}hh(b,f);b.prototype.count=function(a,b,c){void 0===c&&(c=1);this._count(a,b,c)};b.prototype.bufferedCount=function(a,b,c){b=this._bufferedMetricsHandler.bufferedCounter({eventOptions:a,name:b,value:null!==c&&void 0!==c?c:1});b.isNewBufferCreated&&this._queueDrainAllBuffered(a);b.isBufferOverflowed&&this.count(a,"CountBufferOverflowed")};b.prototype.mark=function(a,b,c){c=c?c:a.timeOriginPerfNow;
if(this._globalTelemetryClient&&q.isFunction(this._globalTelemetryClient.mark))this._globalTelemetryClient.mark(this._getFormattedName(b),c,{clientID:a.clientId});else{var e=F.getPerfNow();this.count(a,b,e-c)}};b.prototype.tag=function(a,b){var c=this;r.queueTask(function(){var e=c._getFormattedName(b);c._clientPostbacks.tag(a.clientId,e)})};b.prototype.error=function(a,b,c,g){var e=this;r.queueTask(function(){if(e._globalTelemetryClient&&q.isFunction(e._globalTelemetryClient.error)){var d=Ta.formatErrorAttribution(e._swGlobal,
c),h=null!==g&&void 0!==g?g:b.logLevel||"FATAL",f=Object.keys(a.errorContext).map(function(b){return"".concat(b," \x3d ").concat(a.errorContext[b])}).join("\n\n");e._globalTelemetryClient.error(b,h,d,f)}else e.countError(a,t.create("MissingDependencyTelemetry"))})};b.prototype.countError=function(a,b,c){this._countError(a,b,c)};b.prototype.bufferedCountError=function(a,b,c){b=this._bufferedMetricsHandler.bufferedCountError({eventOptions:a,error:b,scope:c});b.isNewBufferCreated&&this._queueDrainAllBuffered(a);
b.isBufferOverflowed&&this.count(a,"CountErrorBufferOverflowed")};b.prototype.weblabTrigger=function(a,b,c,g){var e=this;void 0===g&&(g=!1);r.queueTask(function(){g&&e._telemetryTriggers?(e._telemetryTriggers.weblabTrigger(a.clientId,b,c),e.count(a,"triggerintent:direct:".concat(b,":").concat(c))):(e._clientPostbacks.weblabTrigger(a.clientId,b,c),e.count(a,"triggerintent:ue:".concat(b,":").concat(c)))})};b.prototype.drainAllBuffered=function(a){this._drainAllBuffered(a,!1)};b.prototype._drainAllBuffered=
function(a,b){var c=this;r.queueTask(function(){return cb(c,void 0,void 0,function(){return db(this,function(c){this._drainAllBufferedCounters(a,b);return[2]})})});r.queueTask(function(){return cb(c,void 0,void 0,function(){return db(this,function(c){this._drainAllBufferedCountErrors(a,b);return[2]})})})};b.prototype._queueDrainAllBuffered=function(a){var e=this;r.queueTask(function(){return cb(e,void 0,void 0,function(){return db(this,function(b){this._drainAllBuffered(a,!0);return[2]})})},b._BUFFERED_METRIC_DRAIN_TIMEOUT)};
b.prototype._count=function(a,b,c,g){var e=this;void 0===c&&(c=1);void 0===g&&(g=!1);r.queueTask(function(){var d=e._getFormattedName(b,g);e._globalTelemetryClient&&q.isFunction(e._globalTelemetryClient.count)?e._globalTelemetryClient.count(d,c,{clientID:a.clientId}):e._clientPostbacks.counter(a.clientId,d,c)})};b.prototype._countError=function(a,b,c,g){var e=this;void 0===g&&(g=!1);r.queueTask(function(){var d=b.code,h=b.name;h=d?"".concat(h,":").concat(d):h;h=c?"".concat(h,":").concat(c):h;e._count(a,
"Error:".concat(h),1,g)})};b.prototype._getFormattedName=function(a,e){void 0===e&&(e=!1);a=e?"".concat(b._BUFFERED_METRIC_PREFIX,":").concat(a):a;return Ta.format(this._swGlobal,a)};b.prototype._drainAllBufferedCounters=function(a,b){var c=this,e=this._bufferedMetricsHandler.drainBufferedCounters(a.clientId);if(e)for(b?this.count(a,"TimeoutBufferedCountersDrain"):this.count(a,"BufferedCountersDrain"),a=function(a){var b=e[a];r.queueTask(function(){return cb(c,void 0,void 0,function(){return db(this,
function(a){this._count(b.eventOptions,b.name,b.value,!0);return[2]})})})},b=0;b<e.length;b++)a(b)};b.prototype._drainAllBufferedCountErrors=function(a,b){var c=this,e=this._bufferedMetricsHandler.drainBufferedCountErrors(a.clientId);if(e)for(b?this.count(a,"TimeoutBufferedCountErrorsDrain"):this.count(a,"BufferedCountErrorsDrain"),a=function(a){var b=e[a];r.queueTask(function(){return cb(c,void 0,void 0,function(){return db(this,function(a){this._countError(b.eventOptions,b.error,b.scope,!0);return[2]})})})},
b=0;b<e.length;b++)a(b)};b._BUFFERED_METRIC_DRAIN_TIMEOUT=3E4;b._BUFFERED_METRIC_PREFIX="buff";M([k],b.prototype,"count",null);M([k],b.prototype,"bufferedCount",null);M([k],b.prototype,"mark",null);M([k],b.prototype,"tag",null);M([k],b.prototype,"error",null);M([k],b.prototype,"countError",null);M([k],b.prototype,"bufferedCountError",null);M([k],b.prototype,"weblabTrigger",null);M([k],b.prototype,"drainAllBuffered",null);M([k],b.prototype,"_drainAllBuffered",null);M([k],b.prototype,"_queueDrainAllBuffered",
null);M([k],b.prototype,"_count",null);M([k],b.prototype,"_countError",null);M([k],b.prototype,"_getFormattedName",null);M([k],b.prototype,"_drainAllBufferedCounters",null);M([k],b.prototype,"_drainAllBufferedCountErrors",null);return b}(u),Ab=this&&this.__assign||function(){Ab=Object.assign||function(f){for(var b,a=1,e=arguments.length;a<e;a++){b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(f[c]=b[c])}return f};return Ab.apply(this,arguments)};Ab(Ab({},{"https://www.amazon.com":"https://data.amazon.com",
"https://us.amazon.com":"https://data.amazon.com","https://www.amazon.ca":"https://data.amazon.ca","https://www.amazon.com.mx":"https://data.amazon.com.mx","https://www.amazon.com.br":"https://data.amazon.com.br","https://www.amazon.co.uk":"https://data.amazon.co.uk","https://www.amazon.de":"https://data.amazon.de","https://www.amazon.fr":"https://data.amazon.fr","https://www.amazon.it":"https://data.amazon.it","https://www.amazon.es":"https://data.amazon.es","https://www.amazon.in":"https://data.amazon.in",
"https://www.amazon.nl":"https://data.amazon.nl","https://www.amazon.com.tr":"https://data.amazon.com.tr","https://www.amazon.ae":"https://data.amazon.ae","https://www.amazon.sa":"https://data.amazon.sa","https://www.amazon.se":"https://data.amazon.se","https://www.amazon.pl":"https://data.amazon.pl","https://www.amazon.eg":"https://data.amazon.eg","https://www.amazon.com.be":"https://data.amazon.com.be","https://www.amazon.com.ng":"https://data.amazon.com.ng","https://www.amazon.co.jp":"https://data.amazon.co.jp",
"https://www.amazon.com.au":"https://data.amazon.com.au","https://www.amazon.sg":"https://data.amazon.sg","https://www.amazon.cl":"https://data.amazon.cl","https://www.amazon.com.co":"https://data.amazon.com.co","https://www.amazon.co.za":"https://data.amazon.co.za","https://www.amazon.ie":"https://data.amazon.ie"}),{});var jh=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),eb=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,
b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},qc=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},rc=this&&this.__generator||function(f,
b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-
1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&
(n[Symbol.iterator]=function(){return this}),n},kh=function(f){function b(a,b,c){var e=f.call(this)||this;e._swGlobal=a;e._metricsService=b;e._aapiCsrfTokenManagerService=c;e._errorLoggingScope="AapiClient";e._aapiEndpoint=y.getAmazonApiEndpoint(e._swGlobal);return e}jh(b,f);b.prototype.getProductV2=function(a,b,c,g){var e;return qc(this,void 0,void 0,function(){var d,h,f,k,m,q,t,r;return rc(this,function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),this._metricsService.count(a,"".concat(this._errorLoggingScope,
":GetProductV2")),this._validateAsins(b),d=this._getProductV2Url(b),r={credentials:"include"},[4,this._getProductV2Headers(a,c,g)];case 1:return h=(r.headers=l.sent(),r.method="GET",r),f=new Za(d,h),[4,f.getResponseJson()];case 2:return[2,l.sent()];case 3:throw k=l.sent(),m=w.matchesCodeOrSignature(k,"NetworkError",z.NETWORK_ERROR),q=w.matchesCode(k,"FailedToFetch"),t=w.matchesCode(k,"AapiCsrfTokenNotFound"),this._metricsService.error(a,k,this._errorLoggingScope,q||m||t?"ERROR":void 0),this._metricsService.countError(a,
k,w.matchesCode(k,"ResponseNotOK")&&(null===(e=k.data)||void 0===e?0:e.status)?"".concat(this._errorLoggingScope,":").concat(k.data.status):this._errorLoggingScope),k;case 4:return[2]}})})};b.prototype._getProductV2Headers=function(a,b,c){void 0===c&&(c="en-US");return qc(this,void 0,void 0,function(){var e;return rc(this,function(g){switch(g.label){case 0:return[4,this._getCsrfToken(a)];case 1:e=g.sent();if(!e||!q.isNonEmptyString(e))throw t.create("AapiCsrfTokenNotFound");return[2,{Accept:'application/vnd.com.amazon.api+json; type\x3d"collection(product/v2)/v1"; expand\x3d"'.concat(b.join(","),
'"'),"Accept-Language":c,Origin:this._swGlobal.location.origin,"x-api-csrf-token":e}]}})})};b.prototype._getProductV2Url=function(a){var b=y.getObfuscatedMarketplaceId(this._swGlobal);if(!q.isNonEmptyString(b))throw t.create("ObfuscatedMarketplaceIdNotFound");if(!q.isNonEmptyString(this._aapiEndpoint))throw t.create("AapiEndpointNotFound");return"".concat(this._aapiEndpoint,"/api/marketplaces/").concat(b,"/products/").concat(a.join(","))};b.prototype._validateAsins=function(a){if(!q.isArrayWhereEvery(a,
q.isNonEmptyString)||30<a.length)throw t.create("AapiProductV2InvalidAsinsInput");};b.prototype._getCsrfToken=function(a){return qc(this,void 0,void 0,function(){var b;return rc(this,function(c){switch(c.label){case 0:return[4,this._aapiCsrfTokenManagerService.getToken()];case 1:return(b=c.sent())&&q.isNonEmptyString(b)?[3,3]:[4,this._aapiCsrfTokenManagerService.refreshToken(a)];case 2:return c.sent(),[2,this._aapiCsrfTokenManagerService.getToken()];case 3:return[2,b]}})})};eb([k],b.prototype,"getProductV2",
null);eb([k],b.prototype,"_getProductV2Headers",null);eb([k],b.prototype,"_getProductV2Url",null);eb([k],b.prototype,"_validateAsins",null);eb([k],b.prototype,"_getCsrfToken",null);return b}(u),Bb;(function(f){f.PRODUCT_IMAGES="productImages(product.product-images/v2)";f.PRODUCT_CATEGORY="productCategory(product.offer.product-category/v1)"})(Bb||(Bb={}));var lh=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||
function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),ba=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&
"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},ca=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,
b||[])).next())})},da=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();
continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,n;return n=
{next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},qd=function(f){function b(a,b,c,g,h,d,n,l){void 0===n&&(n="lre");void 0===l&&(l=function(){return!0});var e=f.call(this)||this;e._cacheService=a;e._metricsService=b;e._cacheName=c;e._cacheKey=g;e._cacheMaxAge=h;e._validator=l;e._errorLoggingScope="CacheBackedKeyValueStore";e._ready=e._initialize(c,g,h,d,n);e.logCtor(arguments);return e}lh(b,f);b.prototype.get=function(a){return ca(this,
void 0,void 0,function(){return da(this,function(b){switch(b.label){case 0:return[4,this._ready];case 1:return b.sent(),[2,this._store.get(a)]}})})};b.prototype.set=function(a,b){return ca(this,void 0,void 0,function(){return da(this,function(c){switch(c.label){case 0:return[4,this._ready];case 1:return c.sent(),this._store.set(a,b),[2]}})})};b.prototype.delete=function(a){return ca(this,void 0,void 0,function(){return da(this,function(b){switch(b.label){case 0:return[4,this._ready];case 1:return b.sent(),
[2,this._store.delete(a)]}})})};b.prototype.has=function(a){return ca(this,void 0,void 0,function(){return da(this,function(b){switch(b.label){case 0:return[4,this._ready];case 1:return b.sent(),[2,this._store.has(a)]}})})};b.prototype.size=function(){return ca(this,void 0,void 0,function(){return da(this,function(a){switch(a.label){case 0:return[4,this._ready];case 1:return a.sent(),[2,this._store.size()]}})})};b.prototype.full=function(){return ca(this,void 0,void 0,function(){return da(this,function(a){switch(a.label){case 0:return[4,
this._ready];case 1:return a.sent(),[2,this._store.full()]}})})};b.prototype.keys=function(){return ca(this,void 0,void 0,function(){return da(this,function(a){switch(a.label){case 0:return[4,this._ready];case 1:return a.sent(),[2,this._store.keys()]}})})};b.prototype.serialize=function(a){return ca(this,void 0,void 0,function(){return da(this,function(b){switch(b.label){case 0:return[4,this._ready];case 1:return b.sent(),[2,this._store.serialize(a)]}})})};b.prototype.clear=function(){return ca(this,
void 0,void 0,function(){return da(this,function(a){switch(a.label){case 0:return[4,this._ready];case 1:return a.sent(),this._store.clear(),[2]}})})};b.prototype._initialize=function(a,b,c,g,h){return ca(this,void 0,void 0,function(){var d,e,f,k,m,q,r,E,u,w,v=this;return da(this,function(l){switch(l.label){case 0:d=V.create(),l.label=1;case 1:return l.trys.push([1,6,,7]),[4,this._cacheService.read(d,a,b)];case 2:return(f=l.sent())?[4,f.text()]:[3,4];case 3:return m=l.sent(),[3,5];case 4:m=void 0,
l.label=5;case 5:return q=(k=m)?I.deserialize(k,[]):[],r=Array.isArray(q)?q.filter(function(a){return Array.isArray(a)&&2===a.length&&v._validator(a[0],a[1])}):[],e=new Map(r),[3,7];case 6:return E=l.sent(),e=new Map,u=t.create("StoreInitialization",{cacheName:a,cacheKey:b,cacheMaxAge:c,strategy:h},E),this._metricsService.error(d,u,this._errorLoggingScope),this._metricsService.countError(d,u,this._errorLoggingScope),[3,7];case 7:w=function(){v._storeStateChanged()};switch(h){case "lru":this._store=
new bb(g,e,w);break;default:this._store=new xb(g,e,w)}return[2]}})})};b.prototype._storeStateChanged=function(){var a=this;if(!this._pendingCacheWrite){var e=function(){return ca(a,void 0,void 0,function(){var a,g,h;return da(this,function(c){switch(c.label){case 0:this._pendingCacheWrite=void 0,c.label=1;case 1:return c.trys.push([1,3,,4]),a=V.create(),g=this._store.serialize(),[4,this._cacheService.write(a,this._cacheName,this._cacheKey,new Response(g),{maxAgeSeconds:this._cacheMaxAge,requestStartTimestampSeconds:F.getEpochSeconds(a.timeOriginEpoch)})];
case 2:return c.sent(),[3,4];case 3:return h=c.sent(),w.matchesCode(h,"CacheTainted")&&(this._pendingCacheWrite=r.queueTask(e,b._CACHE_WRITE_THROTTLE_MS)),[3,4];case 4:return[2]}})})};this._pendingCacheWrite=r.queueTask(e,b._CACHE_WRITE_THROTTLE_MS)}};b._CACHE_WRITE_THROTTLE_MS=1E3;ba([k],b.prototype,"get",null);ba([k],b.prototype,"set",null);ba([k],b.prototype,"delete",null);ba([k],b.prototype,"has",null);ba([k],b.prototype,"size",null);ba([k],b.prototype,"full",null);ba([k],b.prototype,"keys",null);
ba([k],b.prototype,"serialize",null);ba([k],b.prototype,"clear",null);ba([k],b.prototype,"_initialize",null);ba([k],b.prototype,"_storeStateChanged",null);return b}(u),mh=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+
String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),C=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},O=this&&this.__awaiter||function(f,
b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},G=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:
a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=
d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},nh=this&&this.__read||function(f,b){var a="function"===typeof Symbol&&f[Symbol.iterator];if(!a)return f;f=a.call(f);
var e,c=[];try{for(;(void 0===b||0<b--)&&!(e=f.next()).done;)c.push(e.value)}catch(h){var g={error:h}}finally{try{e&&!e.done&&(a=f["return"])&&a.call(f)}finally{if(g)throw g.error;}}return c},oh=this&&this.__spreadArray||function(f,b,a){if(a||2===arguments.length)for(var e=0,c=b.length,g;e<c;e++)!g&&e in b||(g||(g=Array.prototype.slice.call(b,0,e)),g[e]=b[e]);return f.concat(g||Array.prototype.slice.call(b))},ph=this&&this.__values||function(f){var b="function"===typeof Symbol&&Symbol.iterator,a=
b&&f[b],e=0;if(a)return a.call(f);if(f&&"number"===typeof f.length)return{next:function(){f&&e>=f.length&&(f=void 0);return{value:f&&f[e++],done:!f}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");},qh=function(f){function b(a,b,c,g,h,d,k){var e=f.call(this)||this;e.logCtor(arguments);e._name=a;e._swGlobal=b;e._metricsService=h;e._remoteOperations=d;var n=e._parseProperties(a,k),m=n.wdgLandingImageStore,q=n.asinAttributeStore;e._navigationContentHintsStore=new xb(n.navigationContentHintStore.storeLimit);
e._wdgLandingImageStore=new qd(g,h,m.cacheName,m.cacheKey,m.maxAge,m.storeLimit,"lru",function(a,b){return e._validateWDGLandingImageRecord(a,b)});e._immutableAsinAttributesStore=new qd(g,h,q.cacheName,q.cacheKey,q.maxAge,q.storeLimit,"lre",function(a,b){return e._validateAsinAttributeRecord(a,b)});e._errorLoggingScope="DetailPageRenderingHintsDelegate";c.subscribe("CustomerContextChange",e);c.subscribe("RenderingHintsRemoteOperationResult",e);return e}mh(b,f);b.prototype.getHint=function(a,b,c){return O(this,
void 0,void 0,function(){var e,h,d,f,l,k,m;return G(this,function(g){switch(g.label){case 0:e=this._getASIN(b);if(!e)return[2];h=c;switch(h){case "predictedLCPImage":return[3,1]}return[3,2];case 1:return[2,this._getPredictedLCPImage(a,e)];case 2:return(d=this._navigationContentHintsStore.get(e))&&d.hasOwnProperty(c)?(f=d[c],l=f.value,k=f.source,[2,{value:l,source:k}]):[4,this._immutableAsinAttributesStore.get(e)];case 3:m=g.sent()||{};if(m.hasOwnProperty(c))return l=m[c].value,[2,{value:l,source:this._getServiceWorkerSource()}];
g.label=4;case 4:return[2]}})})};b.prototype.getHintValueOnly=function(a,b,c){return O(this,void 0,void 0,function(){var e;return G(this,function(g){switch(g.label){case 0:return[4,this.getHint(a,b,c)];case 1:return e=g.sent(),[2,null===e||void 0===e?void 0:e.value]}})})};b.prototype.getAllHints=function(a,b){return O(this,void 0,void 0,function(){var c,e,h,d,f,l=this;return G(this,function(g){switch(g.label){case 0:c=this._getASIN(b);if(!c)return[2,{}];e={};h=this._navigationContentHintsStore.get(c)||
{};Object.keys(h).forEach(function(a){var b=h[a];e[a]={value:b.value,source:b.source}});return[4,this._immutableAsinAttributesStore.get(c)];case 1:return d=g.sent()||{},Object.keys(d).forEach(function(a){e[a]={value:d[a].value,source:l._getServiceWorkerSource()}}),[4,this._getPredictedLCPImage(a,c)];case 2:return(f=g.sent())&&(e.predictedLCPImage=f),[2,e]}})})};b.prototype.getAllHintsValueOnly=function(a,b){return O(this,void 0,void 0,function(){var c,e;return G(this,function(g){switch(g.label){case 0:return[4,
this.getAllHints(a,b)];case 1:return c=g.sent(),e={},Object.keys(c).forEach(function(a){e[a]=c[a].value}),[2,e]}})})};b.prototype.notify=function(a,e){var c=this,g;switch(e.nature){case "speculated_navigation_content":r.queueTask(function(){return O(c,void 0,void 0,function(){var c,d=this;return G(this,function(f){switch(f.label){case 0:return(g=this._getASIN(e.target))?[4,this._writeToNavigationContentHintsStore(a,g,e.data,e.source)]:[2];case 1:f.sent();r.queueTask(function(){d._metricsService.count(a,
"".concat(d._errorLoggingScope,":notifyAttemptBeforeValidTreatmentAndPlatformCheckInSNC"))});if(!this._isValidTreatmentAndPlatform())return[2];c={};Object.keys(e.data).forEach(function(a){-1!==b._SUPPORTED_ASIN_ATTRIBUTES.indexOf(a)?c[a]=e.data[a]:"faceoutImage"===a&&(a=Ia.getPhysicalId(e.data[a]))&&(c.physicalId=a)});return 0===Object.keys(c).length?[2]:[4,this._writeToImmutableASINAttributesStore(a,g,c)];case 2:return f.sent(),[2]}})})});break;case "page_attributes":r.queueTask(function(){return O(c,
void 0,void 0,function(){return G(this,function(b){switch(b.label){case 0:return(g=this._getASIN(e.source.url))?[4,this._writePageAttributes(a,e.data)]:[2];case 1:return b.sent(),[2]}})})});break;case "navigation_targets":r.queueTask(function(){c._metricsService.count(a,"".concat(c._errorLoggingScope,":notifyAttemptBeforeValidTreatmentAndPlatformCheckInNTHC"))}),this._isValidTreatmentAndPlatform()&&r.queueTask(function(){return O(c,void 0,void 0,function(){return G(this,function(a){switch(a.label){case 0:return[4,
this._queueASINAttributesRemoteOperation(e.data.targets)];case 1:return a.sent(),[2]}})})})}};b.prototype.notifyEvent=function(a){switch(a.name){case "CustomerContextChange":this._evictStores(a.detail.eventOptions);break;case "RenderingHintsRemoteOperationResult":this._handleRemoteOperationResult(a.detail.eventOptions,a.detail.options)}};b.prototype._parseProperties=function(a,b){var c=q.isObject,e=q.isNonEmptyString,f=q.isPositiveInteger;if(!(b&&c(b)&&f(b.wdgLandingImageStoreLimit)&&e(b.wdgLandingImageCacheName)&&
e(b.wdgLandingImageCacheKey)&&f(b.wdgLandingImageMaxAge)&&f(b.asinAttributeStoreLimit)&&e(b.asinAttributeCacheName)&&e(b.asinAttributeCacheKey)&&f(b.asinAttributeMaxAge)&&f(b.navigationContentHintStoreLimit)))throw t.create("InvalidRenderingHintsDelegateProperties",{name:a,properties:b});return{navigationContentHintStore:{storeLimit:b.navigationContentHintStoreLimit},wdgLandingImageStore:{cacheName:b.wdgLandingImageCacheName,cacheKey:b.wdgLandingImageCacheKey,maxAge:b.wdgLandingImageMaxAge,storeLimit:b.wdgLandingImageStoreLimit},
asinAttributeStore:{cacheName:b.asinAttributeCacheName,cacheKey:b.asinAttributeCacheKey,maxAge:b.asinAttributeMaxAge,storeLimit:b.asinAttributeStoreLimit}}};b.prototype._getASIN=function(a){return Va.getASINFromUrl(a)};b.prototype._getPredictedLCPImage=function(a,e){return O(this,void 0,void 0,function(){var c,g,f,d,k,l;return G(this,function(h){switch(h.label){case 0:return[4,this._immutableAsinAttributesStore.get(e)];case 1:c=h.sent()||{};if(!c||!c.hasOwnProperty("wdg")||!c.hasOwnProperty("physicalId"))return this._logImmutableASINAttributeNotFoundMetrics(c,
a),[2];g=c.wdg.value;return g?(f=c.physicalId.value)?[4,this._wdgLandingImageStore.get(g)]:[2]:[2];case 2:return(d=h.sent())&&d.hasOwnProperty("lcpImage")?[3,4]:[4,this._wdgLandingImageStore.get(b._WDG_LAST_VISITED)];case 3:d=h.sent();if(!d||!d.hasOwnProperty("lcpImage"))return this._metricsService.tag(a,this._getMetricName("WDG:NotFound")),[2];this._metricsService.tag(a,this._getMetricName("WDG:LastVisited"));return[3,5];case 4:this._metricsService.tag(a,this._getMetricName("WDG:Match")),h.label=
5;case 5:return k=d.lcpImage.value,(l=Ia.replacePhysicalId(k,f))?[2,{value:l,source:this._getServiceWorkerSource()}]:[2]}})})};b.prototype._writeToNavigationContentHintsStore=function(a,b,c,g){return O(this,void 0,void 0,function(){var e;return G(this,function(d){try{e=this._navigationContentHintsStore.get(b)||{},Object.keys(c).forEach(function(a){e[a]={value:c[a],source:g}}),this._navigationContentHintsStore.set(b,e)}catch(n){this._metricsService.error(a,t.create("RenderingHintsWriteFailed",{nature:"speculated_navigation_content",
asin:b,data:c},n),this._errorLoggingScope)}return[2]})})};b.prototype._writePageAttributes=function(a,e){return O(this,void 0,void 0,function(){var c,g,f,d,k,l,p;return G(this,function(h){switch(h.label){case 0:if(!q.isNonEmptyString(e.wdg)||!q.isNonEmptyString(e.lcpImage))return[2];c=e.wdg;g=e.lcpImage;f=(p={},p.lcpImage={value:g},p);h.label=1;case 1:return h.trys.push([1,4,,5]),[4,this._wdgLandingImageStore.get(c)];case 2:return(k=(d=h.sent())?d.lcpImage.value:void 0)&&this._isStyleCodeFlip(k,g)&&
this._metricsService.count(a,this._getMetricName("WDGLCPStyleCodeFlip")),[4,Promise.all([k===g?Promise.resolve():this._wdgLandingImageStore.set(c,f),this._wdgLandingImageStore.set(b._WDG_LAST_VISITED,f)])];case 3:return h.sent(),[3,5];case 4:return l=h.sent(),this._metricsService.error(a,t.create("RenderingHintsWriteFailed",{nature:"page_attributes",data:e},l),this._errorLoggingScope),[3,5];case 5:return[2]}})})};b.prototype._handleRemoteOperationResult=function(a,b){var c=this;switch(b.operation){case "asin-attributes":r.queueTask(function(){return O(c,
void 0,void 0,function(){var c=this;return G(this,function(e){switch(e.label){case 0:return[4,Promise.all(b.data.map(function(b){return c._writeToImmutableASINAttributesStore(a,b.asin,b.attributes)}))];case 1:return e.sent(),[2]}})})})}};b.prototype._writeToImmutableASINAttributesStore=function(a,e,c){return O(this,void 0,void 0,function(){var g,f,d;return G(this,function(h){switch(h.label){case 0:return h.trys.push([0,3,,4]),[4,this._immutableAsinAttributesStore.get(e)];case 1:return g=h.sent()||
{},b._SUPPORTED_ASIN_ATTRIBUTES.forEach(function(a){c.hasOwnProperty(a)&&(g[a]={value:c[a]})}),[4,this._immutableAsinAttributesStore.set(e,g)];case 2:return h.sent(),[3,4];case 3:return f=h.sent(),d=t.create("RenderingHintsAsinAttributeStoreWriteFailed",{asin:e,attributes:c},f),this._metricsService.error(a,d,this._errorLoggingScope),this._metricsService.countError(a,d,this._errorLoggingScope),[3,4];case 4:return[2]}})})};b.prototype._queueASINAttributesRemoteOperation=function(a){return O(this,void 0,
void 0,function(){var e,c,g,f,d,k,l,p,m=this;return G(this,function(h){switch(h.label){case 0:return e=oh([],nh(new Set(a.map(function(a){return m._getASIN(a)}).filter(function(a){return q.isNonEmptyString(a)}))),!1),[4,Promise.all(e.map(function(a){return O(m,void 0,void 0,function(){var c;return G(this,function(d){switch(d.label){case 0:return[4,this._immutableAsinAttributesStore.get(a)];case 1:return c=d.sent(),[2,c&&b._SUPPORTED_ASIN_ATTRIBUTES.every(function(a){return c.hasOwnProperty(a)})?void 0:
a]}})})}))];case 1:c=h.sent().filter(q.isNonEmptyString);if(!q.isNonEmptyArray(c))return[2];g={};try{for(f=ph(c),d=f.next();!d.done;d=f.next())k=d.value,g[k]=b._SUPPORTED_ASIN_ATTRIBUTES}catch(lb){l={error:lb}}finally{try{d&&!d.done&&(p=f.return)&&p.call(f)}finally{if(l)throw l.error;}}return[4,this._remoteOperations.queueOperation("asin-attributes",g)];case 2:return h.sent(),[2]}})})};b.prototype._isStyleCodeFlip=function(a,b){a=Ia.replacePhysicalId(a,"");b=Ia.replacePhysicalId(b,"");return!(!a||
!b||a===b)};b.prototype._validateWDGLandingImageRecord=function(a,b){var c=q.isNonEmptyString,e=q.isObject,f=q.isArrayWhereEvery;return c(a)&&e(b)&&f(Object.keys(b),function(a){return c(a)&&c(b[a].value)})};b.prototype._validateAsinAttributeRecord=function(a,b){var c=q.isNonEmptyString,e=q.isObject,f=q.isArrayWhereEvery;return c(a)&&e(b)&&f(Object.keys(b),function(a){return c(a)&&c(b[a].value)})};b.prototype._evictStores=function(a){var b=this;r.queueTask(function(){return O(b,void 0,void 0,function(){return G(this,
function(b){switch(b.label){case 0:return this._navigationContentHintsStore.clear(),[4,this._wdgLandingImageStore.clear()];case 1:return b.sent(),this._metricsService.count(a,this._getMetricName("Eviction")),[2]}})})})};b.prototype._getServiceWorkerSource=function(){return{url:this._swGlobal.location.href,pty:v.NAMESPACE}};b.prototype._getMetricName=function(a){return"RenderingHints:".concat(this._name,":").concat(a)};b.prototype._logImmutableASINAttributeNotFoundMetrics=function(a,b){a&&0!==Object.keys(a).length?
a.hasOwnProperty("physicalId")?this._metricsService.tag(b,this._getMetricName("IAA:WDG:NotFound")):this._metricsService.tag(b,this._getMetricName("IAA:PhysicalID:NotFound")):this._metricsService.tag(b,this._getMetricName("IAA:NotFound"))};b.prototype._isValidTreatmentAndPlatform=function(){return y.isMShop(this._swGlobal)||y.isMobileWeb(this._swGlobal)&&"T1"===Ka.getWeblabTreatment(this._swGlobal,"A2I_LIGHTSABER_RHV3_HINTS_COLLECTOR_MWEB_CHROME_1279464")||y.isDesktopWeb(this._swGlobal)&&"T1"===Ka.getWeblabTreatment(this._swGlobal,
"A2I_LIGHTSABER_PAGEASSET_DESKTOP_RHV3_1323783")};b._WDG_LAST_VISITED="last_visited_display_on_website";b._SUPPORTED_ASIN_ATTRIBUTES=["wdg","physicalId"];C([k],b.prototype,"getHint",null);C([k],b.prototype,"getHintValueOnly",null);C([k],b.prototype,"getAllHints",null);C([k],b.prototype,"getAllHintsValueOnly",null);C([k],b.prototype,"notify",null);C([k],b.prototype,"notifyEvent",null);C([k],b.prototype,"_parseProperties",null);C([k],b.prototype,"_getASIN",null);C([k],b.prototype,"_getPredictedLCPImage",
null);C([k],b.prototype,"_writeToNavigationContentHintsStore",null);C([k],b.prototype,"_writePageAttributes",null);C([k],b.prototype,"_handleRemoteOperationResult",null);C([k],b.prototype,"_writeToImmutableASINAttributesStore",null);C([k],b.prototype,"_queueASINAttributesRemoteOperation",null);C([k],b.prototype,"_isStyleCodeFlip",null);C([k],b.prototype,"_validateWDGLandingImageRecord",null);C([k],b.prototype,"_validateAsinAttributeRecord",null);C([k],b.prototype,"_evictStores",null);C([k],b.prototype,
"_getServiceWorkerSource",null);C([k],b.prototype,"_getMetricName",null);C([k],b.prototype,"_logImmutableASINAttributeNotFoundMetrics",null);C([k],b.prototype,"_isValidTreatmentAndPlatform",null);return b}(u),fb;(function(f){f.LOW_RES="lowRes";f.HI_RES="hiRes"})(fb||(fb={}));var rh=function(){function f(b){this._swGlobal=b}f.prototype.getPhysicalIdResolution=function(){return y.isDesktopWeb(this._swGlobal)&&"in"===y.getCountryCode(this._swGlobal)?fb.LOW_RES:fb.HI_RES};return f}(),sh=this&&this.__extends||
function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Fa=this&&this.__decorate||function(f,
b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},sc=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}
function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},tc=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;
case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:
void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},uc=this&&this.__read||function(f,b){var a="function"===typeof Symbol&&f[Symbol.iterator];if(!a)return f;f=a.call(f);var e,c=[];try{for(;(void 0===b||0<b--)&&!(e=f.next()).done;)c.push(e.value)}catch(h){var g={error:h}}finally{try{e&&!e.done&&(a=f["return"])&&a.call(f)}finally{if(g)throw g.error;
}}return c},vc=this&&this.__spreadArray||function(f,b,a){if(a||2===arguments.length)for(var e=0,c=b.length,g;e<c;e++)!g&&e in b||(g||(g=Array.prototype.slice.call(b,0,e)),g[e]=b[e]);return f.concat(g||Array.prototype.slice.call(b))},th=function(f){function b(a,e,c,g,h){var d=f.call(this)||this;d._isRemoteOperationInProgress=!1;d.logCtor(arguments);d._swGlobal=a;d._eventBus=e;d._metricsService=c;d._aapiCsrfTokenManagerService=g;d._aapiClient=h;d._errorLoggingScope="RenderingHintsRemoteOperation";d._asinAttributesBuffer=
new bb(b._ASIN_ATTRIBUTES_BUFFER_LIMIT);d._asinAttributePreferences=new rh(a);return d}sh(b,f);b.prototype.queueOperation=function(a,b){return sc(this,void 0,void 0,function(){var c,e;return tc(this,function(g){c=V.create();if(!this._isRHRemoteOperationsFeatureEnabled())return this._metricsService.count(c,"".concat(this._errorLoggingScope,":RHRemoteOperationsFeatureLeverPulled")),[2];switch(a){case "asin-attributes":this._queueASINAttributesOperation(b);break;default:e=t.create("RenderingHintsUnrecognizedRemoteOperation",
{operation:a}),this._metricsService.countError(c,e,this._errorLoggingScope),this._metricsService.error(c,e,this._errorLoggingScope)}return[2]})})};b.prototype._queueASINAttributesOperation=function(a){var b=this;Object.keys(a).forEach(function(c){var e=b._asinAttributesBuffer.get(c)||[],f=a[c];b._asinAttributesBuffer.set(c,vc([],uc(new Set(vc(vc([],uc(e),!1),uc(f),!1))),!1))});this._attemptRemoteOperation()};b.prototype._attemptRemoteOperation=function(){return sc(this,void 0,void 0,function(){var a,
e;return tc(this,function(c){switch(c.label){case 0:if(this._isRemoteOperationInProgress)return[2];a=V.create();this._isRemoteOperationInProgress=!0;c.label=1;case 1:c.trys.push([1,6,7,8]),c.label=2;case 2:return 0<this._asinAttributesBuffer.size()?[4,r.wait(b._AAPI_DEBOUNCING_TIME)]:[3,5];case 3:return c.sent(),e=this._getASINAttributesRequestPayload(),[4,this._fetchAsinAttributes(a,e)];case 4:return c.sent(),[3,2];case 5:return[3,8];case 6:return c.sent(),this._metricsService.count(a,"".concat(this._errorLoggingScope,
":AsinAttributes:RemoteOperationFailed")),[3,8];case 7:return this._isRemoteOperationInProgress=!1,[7];case 8:return[2]}})})};b.prototype._getASINAttributesRequestPayload=function(){var a=this,e=Array.from(this._asinAttributesBuffer.keys());e=e.slice(Math.max(0,e.length-b._AAPI_BATCHING_LIMIT));var c=new Set;e.forEach(function(b){(a._asinAttributesBuffer.get(b)||[]).forEach(function(a){return c.add(a)})});var g={operation:"asin-attributes",options:{asins:e,attributes:Array.from(c)}};e.forEach(function(b){a._asinAttributesBuffer.delete(b)});
return g};b.prototype._fetchAsinAttributes=function(a,b){var c;return sc(this,void 0,void 0,function(){var e,f,d,k,l,p,m=this;return tc(this,function(g){switch(g.label){case 0:e=b.options.attributes,f=b.options.asins,d=new Set,e.forEach(function(b){switch(b){case "physicalId":d.add(Bb.PRODUCT_IMAGES);break;case "wdg":d.add(Bb.PRODUCT_CATEGORY);break;default:b=t.create("RenderingHintsRemoteOperationInvalidAsinAttribute",b),m._metricsService.countError(a,b,m._errorLoggingScope),m._metricsService.error(a,
b,m._errorLoggingScope)}}),g.label=1;case 1:return g.trys.push([1,3,,6]),[4,this._aapiClient.getProductV2(a,f,Array.from(d))];case 2:return k=g.sent(),l=this._parseAsinAttributesAapiResponse(a,k,e),this._publishRemoteOperationResponse(a,l),[3,6];case 3:return p=g.sent(),w.matchesCode(p,"ResponseNotOK")&&(null===(c=p.data)||void 0===c?0:c.status)&&403===p.data.status?[4,this._aapiCsrfTokenManagerService.refreshToken(a)]:[3,5];case 4:g.sent(),g.label=5;case 5:throw p;case 6:return[2]}})})};b.prototype._publishRemoteOperationResponse=
function(a,b){switch(b.operation){case "asin-attributes":if(!q.isNonEmptyArray(b.data)){this._metricsService.count(a,"".concat(this._errorLoggingScope,":AsinAttributes:EmptyResponse"));break}this._eventBus.publish({name:"RenderingHintsRemoteOperationResult",detail:{eventOptions:a,options:b}});break;default:b=t.create("RenderingHintsUnrecognizedRemoteOperation",{remoteOperationsResponseItem:b},void 0,"Unrecognised remote operation while publishing response to event bus"),this._metricsService.countError(a,
b,this._errorLoggingScope),this._metricsService.error(a,b,this._errorLoggingScope)}};b.prototype._parseAsinAttributesAapiResponse=function(a,b,c){var e=this,f,d;return{operation:"asin-attributes",data:(null===(d=null===(f=null===b||void 0===b?void 0:b.entities)||void 0===f?void 0:f.map(function(b){var d,g,f,h,k,n,r,u,w,v=null===(d=null===b||void 0===b?void 0:b.entity)||void 0===d?void 0:d.asin,x={};-1!==c.indexOf("physicalId")&&(d=null===(k=null===(h=null===(f=null===(g=null===b||void 0===b?void 0:
b.entity)||void 0===g?void 0:g.productImages)||void 0===f?void 0:f.entity)||void 0===h?void 0:h.images)||void 0===k?void 0:k.filter(function(a){return"MAIN"===a.variant})[0],(g=e._getPhysicalId(d))&&(x.physicalId=g));-1!==c.indexOf("wdg")&&(b=null===(w=null===(u=null===(r=null===(n=null===b||void 0===b?void 0:b.entity)||void 0===n?void 0:n.productCategory)||void 0===r?void 0:r.entity)||void 0===u?void 0:u.websiteDisplayGroup)||void 0===w?void 0:w.symbol)&&(x.wdg=b);n=c.filter(function(a){return!x.hasOwnProperty(a)});
if(!v||q.isNonEmptyArray(n))n=t.create("RenderingHintsRemoteOperationInvalidResponseAsinAttribute",{asin:v,missingAttributes:n}),e._metricsService.countError(a,n,e._errorLoggingScope),e._metricsService.error(a,n,e._errorLoggingScope,"ERROR");return{asin:v,attributes:x}}))||void 0===d?void 0:d.filter(function(a){return a.asin&&0<Object.keys(a.attributes).length}))||[]}};b.prototype._getPhysicalId=function(a){var b,c,g,f,d,k;if(a)return this._asinAttributePreferences.getPhysicalIdResolution()===fb.LOW_RES?
null!==(c=null===(b=null===a||void 0===a?void 0:a.lowRes)||void 0===b?void 0:b.physicalId)&&void 0!==c?c:null===(g=null===a||void 0===a?void 0:a.hiRes)||void 0===g?void 0:g.physicalId:null!==(d=null===(f=null===a||void 0===a?void 0:a.hiRes)||void 0===f?void 0:f.physicalId)&&void 0!==d?d:null===(k=null===a||void 0===a?void 0:a.lowRes)||void 0===k?void 0:k.physicalId};b.prototype._isRHRemoteOperationsFeatureEnabled=function(){var a=this._getRemoteOperationsLever();if(!a)return!1;a=R.getFeaturePropertiesData(this._swGlobal,
"in-latency",a);return!0===(null===a||void 0===a?void 0:a.featureEnabled)};b.prototype._getRemoteOperationsLever=function(){if(y.isMShop(this._swGlobal))return"lightsaber-mshop-rendering-hints-remote-operations";if(y.isMobileWeb(this._swGlobal))return"lightsaber-mweb-rendering-hints-remote-operations";if(y.isDesktopWeb(this._swGlobal))return"lightsaber-desktop-web-rendering-hints-remote-operations"};b._AAPI_BATCHING_LIMIT=30;b._ASIN_ATTRIBUTES_BUFFER_LIMIT=1E3;b._AAPI_DEBOUNCING_TIME=1E3;Fa([k],b.prototype,
"queueOperation",null);Fa([k],b.prototype,"_queueASINAttributesOperation",null);Fa([k],b.prototype,"_attemptRemoteOperation",null);Fa([k],b.prototype,"_getASINAttributesRequestPayload",null);Fa([k],b.prototype,"_fetchAsinAttributes",null);Fa([k],b.prototype,"_publishRemoteOperationResponse",null);Fa([k],b.prototype,"_parseAsinAttributesAapiResponse",null);return b}(u),uh=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=
b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),ma=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&
"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Cb=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,
b||[])).next())})},Db=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();
continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,k;return k=
{next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},vh=this&&this.__values||function(f){var b="function"===typeof Symbol&&Symbol.iterator,a=b&&f[b],e=0;if(a)return a.call(f);if(f&&"number"===typeof f.length)return{next:function(){f&&e>=f.length&&(f=void 0);return{value:f&&f[e++],done:!f}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");},wh=function(f){function b(a,b,c,g,h,d,k){var e=f.call(this)||this;
e.logCtor(arguments);e._metricsService=g;e._errorLoggingScope="RenderingHintsService";var n=new kh(a,g,d);n=new th(a,b,g,d,n);e._delegates=e._initDelegates(a,b,c,g,h,n,k);b.subscribe("RenderingHints",e);return e}uh(b,f);b.prototype.getHint=function(a,b,c,g){return Cb(this,void 0,void 0,function(){return Db(this,function(e){try{return[2,this._getDelegate(c).getHint(a,b,g)]}catch(d){this._metricsService.error(a,d,this._errorLoggingScope)}return[2]})})};b.prototype.getHintValueOnly=function(a,b,c,g){return Cb(this,
void 0,void 0,function(){return Db(this,function(e){try{return[2,this._getDelegate(c).getHintValueOnly(a,b,g)]}catch(d){this._metricsService.error(a,d,this._errorLoggingScope)}return[2]})})};b.prototype.getAllHints=function(a,b,c){return Cb(this,void 0,void 0,function(){return Db(this,function(e){try{return[2,this._getDelegate(c).getAllHints(a,b)]}catch(h){this._metricsService.error(a,h,this._errorLoggingScope)}return[2,{}]})})};b.prototype.getAllHintsValueOnly=function(a,b,c){return Cb(this,void 0,
void 0,function(){return Db(this,function(e){try{return[2,this._getDelegate(c).getAllHintsValueOnly(a,b)]}catch(h){this._metricsService.error(a,h,this._errorLoggingScope)}return[2,{}]})})};b.prototype.notifyEvent=function(a){var b=this;"RenderingHints"===a.name&&a.detail&&this._filterValidRenderingHintsOptions(a.detail.options).forEach(function(c){Object.keys(b._delegates).forEach(function(e){b._delegates[e].notify(a.detail.eventOptions,c)})})};b.prototype._initDelegates=function(a,b,c,g,f,d,k){f=
{};try{f["detail-page"]=new qh("detail-page",a,b,c,g,d,this._getDelegateProperties("detail-page",k))}catch(l){a=l,g.error(V.create(),a,this._errorLoggingScope)}return f};b.prototype._getDelegate=function(a){if(!this._delegates[a])throw t.create("UnrecognizedRenderingHintsDelegate",{name:a});return this._delegates[a]};b.prototype._getDelegateProperties=function(a,b){var c;try{for(var e=vh(b),f=e.next();!f.done;f=e.next()){var d=f.value;if(d.name===a)return d.properties}}catch(l){var k={error:l}}finally{try{f&&
!f.done&&(c=e.return)&&c.call(e)}finally{if(k)throw k.error;}}};b.prototype._filterValidRenderingHintsOptions=function(a){if(!Array.isArray(a))return[];var b=q.isObject,c=q.isOneOf,g=q.isNonEmptyString;return a.filter(function(a){var d=b(a)&&c(a.nature,["speculated_navigation_content","page_attributes","navigation_targets"])&&b(a.data)&&b(a.source)&&g(a.source.url)&&g(a.source.pty);switch(a.nature){case "speculated_navigation_content":return d&&g(a.target);case "page_attributes":return d;case "navigation_targets":return d&&
Array.isArray(a.data.targets);default:return!1}})};ma([k],b.prototype,"getHint",null);ma([k],b.prototype,"getHintValueOnly",null);ma([k],b.prototype,"getAllHints",null);ma([k],b.prototype,"getAllHintsValueOnly",null);ma([k],b.prototype,"notifyEvent",null);ma([k],b.prototype,"_initDelegates",null);ma([k],b.prototype,"_getDelegate",null);ma([k],b.prototype,"_getDelegateProperties",null);ma([k],b.prototype,"_filterValidRenderingHintsOptions",null);return b}(u),xh=this&&this.__extends||function(){var f=
function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),rd=function(f){function b(a,b,c,g,h,d){var e=
f.call(this)||this;e.logCtor(arguments);e.customerContextService=a;e.cacheService=b;e.metricsService=c;e.contentFragmentService=g;e.renderingHintsService=h;e.eventBus=d;return e}xh(b,f);return b}(u),yh=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==
typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),xa=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&
g&&Object.defineProperty(b,a,g),g},sd=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},td=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");
for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=
d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},zh=function(f){function b(a,b,c,g,h,d,k){var e=f.call(this,a,b,c,g,h,k)||
this;e._clientMessagingService=d;e.logCtor(arguments);return e}yh(b,f);b.prototype.respond=function(a,b){this._logCount(a,"IncomingRequest");var c=L.parse(b.request.url);if(c){var e=204,f=null;this._logClientMessageAsFetchRequestAttributionMetrics(a,c);var d=this._getMessageSchema(c);switch(d){case "customer_context_change.v1":this._transformMessageAndSendToClientMessagingService(a,c,d);this._logCountWithScope(a,d,"Schema");this.metricsService.mark(a,"Schema:".concat(d));this._waitForServerResponse(b);
break;default:e=404,f="Schema not Found",this._logCountWithScope(a,"NotFound","Schema")}b.respondWith(this._getResponse(e,f))}else this._logCount(a,"InvalidURL")};b.prototype._transformMessageAndSendToClientMessagingService=function(a,b,c){b=this._getMessagePayload(b);b=J.decode(b)||"{}";b=I.deserialize(b,{});this._clientMessagingService.notify(a.clientId,{feature:"lightsaber",command:c,options:b},a)};b.prototype._getMessageSchema=function(a){return x.clientMessageAsFetch.getSchema(a)||void 0};b.prototype._getMessagePayload=
function(a){return x.clientMessageAsFetch.getPayload(a)||"{}"};b.prototype._logClientMessageAsFetchRequestAttributionMetrics=function(a,b){var c=x.clientMessageAsFetch.getClient(b)||"unknown";this._logSanitizedAttribution(a,"Client",c);b=x.clientMessageAsFetch.getAttribution(b)||"unknown";this._logSanitizedAttribution(a,"Attribution",b)};b.prototype._logSanitizedAttribution=function(a,b,c){c=Ua.onlyWordChars(c).substr(0,50);this._logCountWithScope(a,c,b)};b.prototype._getResponse=function(a,b){return sd(this,
void 0,void 0,function(){return td(this,function(c){return[2,new Response(b,{status:a})]})})};b.prototype._waitForServerResponse=function(a){"navigate"===a.request.mode&&"GET"===a.request.method&&a.waitUntil(this._waitForPreloadResponseIfExists(a))};b.prototype._waitForPreloadResponseIfExists=function(a){return sd(this,void 0,void 0,function(){return td(this,function(b){switch(b.label){case 0:return a.preloadResponse?[4,a.preloadResponse]:[3,2];case 1:b.sent(),b.label=2;case 2:return[2]}})})};b.prototype._logCount=
function(a,b){this.metricsService.count(a,"ClientMessageAsFetch:".concat(b))};b.prototype._logCountWithScope=function(a,b,c){this._logCount(a,"".concat(c,":").concat(b))};xa([k],b.prototype,"respond",null);xa([k],b.prototype,"_transformMessageAndSendToClientMessagingService",null);xa([k],b.prototype,"_getMessageSchema",null);xa([k],b.prototype,"_getMessagePayload",null);xa([k],b.prototype,"_logClientMessageAsFetchRequestAttributionMetrics",null);xa([k],b.prototype,"_getResponse",null);xa([k],b.prototype,
"_waitForServerResponse",null);xa([k],b.prototype,"_waitForPreloadResponseIfExists",null);return b}(rd),Ah=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");
f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),ea=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Bh=function(f){function b(a,b,c,g,h){var d=f.call(this)||this;d.logCtor(arguments);
d._eventOptions=b;d._metricsService=a;d._responseStrategyName=c;d._responseRuleName=g;d._responseRuleScope=h;d._errorLoggingScope="".concat(d._responseStrategyName,"ResponseStrategy");return d}Ah(b,f);b.prototype.getMetricName=function(a){return"".concat(this._responseRuleName,":").concat(this._responseStrategyName,":").concat(a)};b.prototype.getMetricScope=function(a){return"".concat(this._responseRuleScope,":").concat(this._responseStrategyName,":").concat(a)};b.prototype.logCount=function(a,b,
c){c?this._metricsService.count(this._eventOptions,a,b):(this._metricsService.count(this._eventOptions,this.getMetricName(a),b),this._metricsService.count(this._eventOptions,this.getMetricScope(a),b))};b.prototype.logBufferedCount=function(a,b,c){c?this._metricsService.bufferedCount(this._eventOptions,a,b):(this._metricsService.bufferedCount(this._eventOptions,this.getMetricName(a),b),this._metricsService.bufferedCount(this._eventOptions,this.getMetricScope(a),b))};b.prototype.logMark=function(a){this._metricsService.mark(this._eventOptions,
this.getMetricName(a));this._metricsService.mark(this._eventOptions,this.getMetricScope(a))};b.prototype.logTag=function(a,b){b?this._metricsService.tag(this._eventOptions,a):(this._metricsService.tag(this._eventOptions,this.getMetricName(a)),this._metricsService.tag(this._eventOptions,this.getMetricScope(a)))};b.prototype.logTagAndCount=function(a,b){this.logTag(a,b);this.logCount(a,1,b)};b.prototype.logCountError=function(a){this._metricsService.countError(this._eventOptions,a,this._errorLoggingScope)};
b.prototype.logBufferedCountError=function(a){this._metricsService.bufferedCountError(this._eventOptions,a,this._errorLoggingScope)};b.prototype.logError=function(a,b){this._metricsService.error(this._eventOptions,a,this._errorLoggingScope,b)};b.prototype.drainAllBuffered=function(){this._metricsService.drainAllBuffered(this._eventOptions)};ea([k],b.prototype,"getMetricName",null);ea([k],b.prototype,"getMetricScope",null);ea([k],b.prototype,"logCount",null);ea([k],b.prototype,"logBufferedCount",null);
ea([k],b.prototype,"logMark",null);ea([k],b.prototype,"logTag",null);ea([k],b.prototype,"logTagAndCount",null);ea([k],b.prototype,"logCountError",null);ea([k],b.prototype,"logBufferedCountError",null);ea([k],b.prototype,"logError",null);ea([k],b.prototype,"drainAllBuffered",null);return b}(u),Ch=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Dh=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}
function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},Eh=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;
h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];
return d[1]},trys:[],ops:[]},g,h,d,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},Fh=function(f){function b(a,b,c,g,h,d,k){var e=f.call(this)||this;e.logCtor(arguments);e._eventBus=a;e._eventOptions=b;e._metricsHelper=g;e._responseStrategy=h;e._responseRuleName=d;e._responseRuleScope=k;e._cacheMismatchHeadersHelper=new ub(c,d,k);return e}Ch(b,f);b.prototype.triggerMismatchDetection=function(a,b){var c=this,e=this._cacheMismatchHeadersHelper.extractStorageConfigFromHeader(this._eventOptions,
a);e?(this._metricsHelper.logTagAndCount("MismatchDetectionTriggerd"),r.queueTask(function(){return Dh(c,void 0,void 0,function(){return Eh(this,function(a){this._eventBus.publish({name:"DetectCacheMismatch",detail:{eventOptions:this._eventOptions,serverResponse:b,responseStrategy:this._responseStrategy,ruleName:this._responseRuleName,ruleScope:this._responseRuleScope,compareCopyStorageConfig:e}});return[2]})})})):this._metricsHelper.logTagAndCount("CompareCopyHeaderNotFound")};return b}(u),Gh=this&&
this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),na=this&&this.__decorate||
function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Qa=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}
function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},Ra=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;
case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:
void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},ud=function(f){function b(a,b,c,g,h){var d=f.call(this)||this;d.logCtor(arguments);d._swGlobal=a;d._metricsService=b;d._metricsHelper=c;d._responseRuleName=h;d._eventBus=g;return d}Gh(b,f);b.prototype.fetchServerResponse=function(a,b){return Qa(this,void 0,void 0,function(){return Ra(this,
function(c){return[2,b?ib.getResponseWithoutRelay(a):ib.getResponseWithRelay(a)]})})};b.prototype.readServerResponse=function(a,b,c,g,f,d){void 0===g&&(g="unknown");return Qa(this,void 0,void 0,function(){var e,h,k,m;return Ra(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,c];case 1:return e=l.sent(),[3,3];case 2:h=l.sent();if(w.matchesCode(h,"PreloadResponseUnexpected")){this._logError(h);this._logBufferedCountError(h);if(!d)throw h;return[2,this._getReloadBypassFallbackContent(a,
b,f,"prx_".concat(g))]}if(w.matchesCode(h,"PreloadResponseUnsupported")){this._logError(h);this._logBufferedCountError(h);if(!d)throw h;return[2,this._getErrorFallbackContent(a,b,f,"pru_".concat(g))]}k=t.create("FailedToFetch",void 0,h);this._logError(k,"ERROR");this._logBufferedCountError(h);if(!d)throw k;return[2,this._getErrorFallbackContent(a,b,f,"flf_".concat(g))];case 3:if(!(e instanceof Response)){m=t.create("ResponseInvalid");this._logError(m);this._logBufferedCountError(m);if(!d)throw m;
return[2,this._getErrorFallbackContent(a,b,f,"riv_".concat(g))]}if("opaqueredirect"===e.type)return[2,f?{unrecoverable:!0,parseable:!1,response:e}:this._getReloadBypassFallbackContent(a,b,f,"opr_".concat(g))];this._extractAndPublishRequestId(b,e);return 200!==e.status?[2,{unrecoverable:!1,parseable:!1,response:e}]:[2,{unrecoverable:!1,parseable:!0,response:e}]}})})};b.prototype._getErrorFallbackContent=function(a,b,c,g){return Qa(this,void 0,void 0,function(){var e,d;return Ra(this,function(f){switch(f.label){case 0:if(!y.isMShop(this._swGlobal))return[3,
2];d={unrecoverable:!0,parseable:!1};return[4,this._getAppErrorFragment(a,b)];case 1:return e=(d.response=f.sent(),d),[3,3];case 2:e=this._getReloadBypassFallbackContent(a,b,c,g),f.label=3;case 3:return[2,e]}})})};b.prototype._getReloadBypassFallbackContent=function(a,b,c,g){return Qa(this,void 0,void 0,function(){var e;return Ra(this,function(d){switch(d.label){case 0:return e={unrecoverable:!0,parseable:!1},[4,this._getReloadBypassFragment(a,b,c,g)];case 1:return[2,(e.response=d.sent(),e)]}})})};
b.prototype._getAppErrorFragment=function(a,b){return Qa(this,void 0,void 0,function(){return Ra(this,function(c){this._metricsHelper.logCount("Emit:AppErrorFragment");return[2,(new gf(b,this._metricsService,a.request.url,"-1","net::ERR_FAILED",a.request.referrer)).getResponse()]})})};b.prototype._getReloadBypassFragment=function(a,b,c,g){return Qa(this,void 0,void 0,function(){return Ra(this,function(e){this._metricsHelper.logCount("Emit:ReloadFragment");return[2,(new zf(this._swGlobal,b,this._metricsService,
a.request.url,c,!0,"erf_".concat(this._responseRuleName,"_").concat(g))).getResponse()]})})};b.prototype._logError=function(a,b){var c=this;r.queueTask(function(){c._metricsHelper.logError(a,b);c._metricsHelper.logCountError(a)})};b.prototype._logBufferedCountError=function(a){var b=this;r.queueTask(function(){b._metricsHelper.logBufferedCountError(a)})};b.prototype._extractAndPublishRequestId=function(a,b){var c=this,e=b.headers.get(x.shared.REQUEST_ID_OPF_HEADER);e&&q.isNonEmptyString(e)?r.queueTask(function(){c._eventBus.publish({name:"RequestIdAvailable",
detail:{eventOptions:a,requestId:e}})}):this._metricsHelper.logCount("RIDHeader:Missing")};na([k],b.prototype,"fetchServerResponse",null);na([k],b.prototype,"readServerResponse",null);na([k],b.prototype,"_getErrorFallbackContent",null);na([k],b.prototype,"_getReloadBypassFallbackContent",null);na([k],b.prototype,"_getAppErrorFragment",null);na([k],b.prototype,"_getReloadBypassFragment",null);na([k],b.prototype,"_logError",null);na([k],b.prototype,"_logBufferedCountError",null);na([k],b.prototype,
"_extractAndPublishRequestId",null);return b}(u),Hh=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):
(e.prototype=a.prototype,new e)}}(),wc=this&&this.__assign||function(){wc=Object.assign||function(f){for(var b,a=1,e=arguments.length;a<e;a++){b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(f[c]=b[c])}return f};return wc.apply(this,arguments)},ya=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=
f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},xc=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},yc=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,
b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&
(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),
k},Ih=function(f){function b(a,b,c,g,h){var d=f.call(this)||this;d.logCtor(arguments);d._renderingHintsService=a;d._metricsHelper=b;d._event=c;d._eventOptions=g;d._preloadConfig=h||[];return d}Hh(b,f);b.prototype.getHeadersWithPreload=function(a){return xc(this,void 0,void 0,function(){var b,c;return yc(this,function(e){switch(e.label){case 0:if(!this._preloadConfig.length)return[2,a];b=[];c=[];this._sortConfig(b,c);if(!c.length)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._resolveHints(b,
c)];case 2:return e.sent(),[3,4];case 3:return e.sent(),this._metricsHelper.logCountError(t.create("PreloadHintResolution")),[3,4];case 4:return[2,this._getOutputHeaders(b,a)]}})})};b.prototype.hasPreload=function(){return 0<this._preloadConfig.length};b.prototype._sortConfig=function(a,b){this._preloadConfig.forEach(function(c){"href"in c?a.push(c):"hrefHint"in c&&b.push(c)})};b.prototype._resolveHints=function(a,b){return xc(this,void 0,void 0,function(){var c,e=this;return yc(this,function(g){switch(g.label){case 0:return c=
b.map(function(b){return xc(e,void 0,void 0,function(){var c,d,e,g,f,h,k,q,r;return yc(this,function(l){switch(l.label){case 0:return c=b.purpose,d=b.attribution,e=b.hrefHint,g=b.as,f=b.fetchPriority,h=e.delegate,k=e.field,[4,this._renderingHintsService.getHint(this._eventOptions,this._event.request.url,h,k)];case 1:q=l.sent();if(!q)return this._metricsHelper.logCount("PreloadHintMissing:".concat(c)),[2];r=L.parse(String(q.value));if(!r)return this._metricsHelper.logCountError(t.create("PreloadHintInvalidURL")),
[2];a.push({purpose:c,href:r.href,as:g,fetchPriority:f,attribution:this._getAttribution(d,q.source)});return[2]}})})}),[4,Promise.all(c)];case 1:return g.sent(),[2]}})})};b.prototype._getOutputHeaders=function(a,e){var c=this,g=new Headers(e),f={};a.forEach(function(a){f[a.href]?c.log("_getOutputHeaders","Preload with same URL already issued, ignoring: ".concat(a.href)):(f[a.href]=!0,g.append(b._PRELOAD_HEADER_NAME,c._getLinkHeaderValue(a)),g.append(b._SERVER_TIMING_HEADER_NAME,c._getServerTimingHeaderValue(a)))});
return g};b.prototype._getLinkHeaderValue=function(a){var b=a.as,c=a.fetchPriority;a="\x3c".concat(a.href,'\x3e; rel\x3d"preload"; as\x3d"').concat(b,'"');c&&(a="".concat(a,'; fetchpriority\x3d"').concat(c,'"'));return a};b.prototype._getServerTimingHeaderValue=function(a){a=I.serialize(wc({role:b._SERVER_TIME_RECORD_ROLE},a));return"".concat(v.NAMESPACE_LCASE,';desc\x3d"').concat(J.encodeRFC3986(a),'"')};b.prototype._getAttribution=function(a,b){return[a,b&&b.pty].filter(q.isNonEmptyString).join(":").toLowerCase()};
b._PRELOAD_HEADER_NAME="Link";b._SERVER_TIMING_HEADER_NAME="Server-Timing";b._SERVER_TIME_RECORD_ROLE="rendering-hints/preload";ya([k],b.prototype,"getHeadersWithPreload",null);ya([k],b.prototype,"hasPreload",null);ya([k],b.prototype,"_sortConfig",null);ya([k],b.prototype,"_resolveHints",null);ya([k],b.prototype,"_getOutputHeaders",null);ya([k],b.prototype,"_getLinkHeaderValue",null);ya([k],b.prototype,"_getServerTimingHeaderValue",null);ya([k],b.prototype,"_getAttribution",null);return b}(u),Jh=
this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Kh=this&&
this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Lh=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{l(e.next(a))}catch(m){h(m)}}
function g(a){try{l(e["throw"](a))}catch(m){h(m)}}function l(b){b.done?a(b.value):c(b.value).then(d,g)}l((e=e.apply(f,b||[])).next())})},Mh=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;
case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:
void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},vd=function(f){function b(a,b,c,g,h,d,k,l,p,m){var e=f.call(this)||this;e.logCtor(arguments);e.name=a;e.customerContextService=b;e.cacheService=c;e.metricsService=g;e.contentFragmentService=h;e.renderingHintsService=d;e.eventBus=k;e.eventOptions=l;e.responseRuleName=p;e.responseRuleScope=
m;e.metricsHelper=new Bh(g,l,e.name,p,m);e.mismatchDetectionController=new Fh(k,l,g,e.metricsHelper,a,p,m);return e}Jh(b,f);b.prototype.getResponse=function(){return Lh(this,void 0,void 0,function(){var a=this;return Mh(this,function(b){r.queueTask(function(){a.metricsHelper.logTagAndCount("Execute");a.metricsHelper.logBufferedCount("Execute")});return[2,this.build()]})})};Kh([k],b.prototype,"getResponse",null);return b}(u),Nh=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),gb=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?
e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Oh=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{k(e.next(a))}catch(m){h(m)}}function g(a){try{k(e["throw"](a))}catch(m){h(m)}}
function k(b){b.done?a(b.value):c(b.value).then(d,g)}k((e=e.apply(f,b||[])).next())})},Ph=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;
h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];
return d[1]},trys:[],ops:[]},g,h,d,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},Qh=function(f){function b(a,b,c,g,h,d){var e=f.call(this)||this;e.logCtor(arguments);e._customerContextService=a;e._cacheService=b;e._metricsHelper=c;e._eventBus=g;e._eventOptions=h;e._responseRuleName=d;return e}Nh(b,f);b.prototype.getCachedPageFromCache=function(a){return Oh(this,void 0,void 0,function(){var b,c,g,f,d,k,l;return Ph(this,
function(e){switch(e.label){case 0:return b=a.cacheName,c=a.cacheKey,g=a.validationKeys,d=(f=this._cacheService).read,k=[this._eventOptions,b,c],l={},[4,(new pb(this._customerContextService)).compute(g)];case 1:return[2,d.apply(f,k.concat([(l.validationKeys=e.sent(),l)]))]}})})};b.prototype.getFilteredCachedPageHeaders=function(a){return x.shared.removeLibHeaders(a.headers)};b.prototype.getCachedPageMetadata=function(a){return(a=(a=(a=a.headers.get(x.shared.getClientOnlyLibHeader("metadata")))?J.decode(a):
void 0)?I.deserialize(a):void 0)?{attribution:a.attribution||"unknown",staleness:"number"===typeof a.requestStartTimestampSeconds?F.getEpochSeconds(this._eventOptions.timeOriginEpoch)-a.requestStartTimestampSeconds:void 0}:{attribution:"unknown"}};b.prototype.queueCachedPageMetadataMetrics=function(a){var b=this;r.queueTask(function(){var c=b.getCachedPageMetadata(a);b._metricsHelper.logTagAndCount("CachePopAttribution:".concat(c.attribution));c.staleness&&b._metricsHelper.logCount("CachedPageStaleness",
c.staleness)})};b.prototype.queueCachedPageUpdate=function(a,b){var c=this;r.queueTask(function(){c._metricsHelper.logCount("Queue:CachedPageUpdate");c._metricsHelper.logCount("Queue:CachedPageUpdate:".concat(b?"OnHit":"OnMiss"));c._eventBus.publish({name:"ResponseRuleNavigation",detail:{eventOptions:c._eventOptions,serverResponse:a,ruleName:c._responseRuleName}})})};gb([k],b.prototype,"getCachedPageFromCache",null);gb([k],b.prototype,"getFilteredCachedPageHeaders",null);gb([k],b.prototype,"getCachedPageMetadata",
null);gb([k],b.prototype,"queueCachedPageMetadataMetrics",null);gb([k],b.prototype,"queueCachedPageUpdate",null);return b}(u),Rh=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+
" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),X=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Ga=this&&this.__awaiter||function(f,b,
a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{k(e.next(a))}catch(m){h(m)}}function g(a){try{k(e["throw"](a))}catch(m){h(m)}}function k(b){b.done?a(b.value):c(b.value).then(d,g)}k((e=e.apply(f,b||[])).next())})},Ha=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:
a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=
d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},Sh=function(f){function b(a,b,c,g,h,d,k,l,p,m,q,r,t){var e=f.call(this,"FullPage",b,c,g,h,d,k,p,q,r)||this;e.logCtor(arguments);
e._event=l;e._usePreloadResponseOnly=m;e._cachedPageConfig=t;e._cachedPageController=new Qh(b,c,e.metricsHelper,k,p,q);e._serverResponseController=new ud(a,g,e.metricsHelper,k,q);return e}Rh(b,f);b.prototype.build=function(){return Ga(this,void 0,void 0,function(){var a,b,c,g,f,d=this;return Ha(this,function(e){switch(e.label){case 0:a=this._serverResponseController.fetchServerResponse(this._event,this._usePreloadResponseOnly),this.metricsHelper.logMark("Query:CachedPage"),e.label=1;case 1:return e.trys.push([1,
3,,4]),[4,this._cachedPageController.getCachedPageFromCache(this._cachedPageConfig)];case 2:return b=e.sent(),[3,4];case 3:return c=e.sent(),r.queueTask(function(){d.metricsHelper.logError(c);d.metricsHelper.logCountError(c);d.metricsHelper.logTagAndCount("CachedPageCacheMiss:CacheError")}),[3,4];case 4:return this.metricsHelper.logMark("Arrived:CachedPage"),r.queueTask(function(){d.metricsHelper.logTagAndCount("CachedPageCache".concat(b?"Hit":"Miss"))}),b?(this._cachedPageController.queueCachedPageMetadataMetrics(b),
[2,this._getCachedPageAssembledResponse(b,a)]):[4,this._serverResponseController.readServerResponse(this._event,this.eventOptions,a,"fprs",!0,!0)];case 5:return g=e.sent(),this.metricsHelper.logMark("Arrived:ServerResponse"),g.parseable&&(f=g.response.clone(),this._cachedPageController.queueCachedPageUpdate(f,!1)),[2,g.response]}})})};b.prototype._getCachedPageAssembledResponse=function(a,b){return Ga(this,void 0,void 0,function(){return Ha(this,function(c){return[2,new Response(this._getAssembledResponseOutputStream(a,
b),this._getAssembledResponseInit(a))]})})};b.prototype._getAssembledResponseInit=function(a){return{status:200,statusText:"OK",headers:this._cachedPageController.getFilteredCachedPageHeaders(a)}};b.prototype._getAssembledResponseOutputStream=function(a,b){var c=this;return new ReadableStream({start:function(e){return Ga(c,void 0,void 0,function(){var c,d,g,f,k,m,q,r,t,u,w,v,Q,x;return Ha(this,function(h){switch(h.label){case 0:c=new Gd,this._event.waitUntil(c.promise),d=new $a(e,this.metricsService,
this.eventOptions),h.label=1;case 1:return h.trys.push([1,13,14,15]),g=this._toOutputStream("CachedPage",a,d),f=this._serverResponseController.readServerResponse(this._event,this.eventOptions,b,"fprs",!1,!0),[4,g];case 2:return h.sent(),k=this._toOutputStream,m=["PageMetadata"],[4,this._getPageMetadataFragment(a)];case 3:return[4,k.apply(this,m.concat([h.sent(),d]))];case 4:h.sent();if(!fa.isDebug)return[3,7];q=this._toOutputStream;r=["DebugInfo"];return[4,this._getDebugInfoFragment()];case 5:return[4,
q.apply(this,r.concat([h.sent(),d]))];case 6:h.sent(),h.label=7;case 7:return[4,f];case 8:return t=h.sent(),u=t.unrecoverable,w=t.parseable,v=t.response,this.metricsHelper.logMark("Arrived:ServerResponse"),"opaqueredirect"!==v.type?[3,10]:[4,this._toOutputStream("ServerResponse",v,d)];case 9:return h.sent(),d.close(),this._logResponseSuccessTagAndCount(),this._bufferResponseSuccessCount(),this.metricsHelper.drainAllBuffered(),[2];case 10:d.close();this.metricsHelper.logTagAndCount("ServerResponseStatus:".concat(v.status));
this._logResponseSuccessTagAndCount();this._bufferResponseSuccessCount();this.metricsHelper.drainAllBuffered();if(u||!w)return[3,12];this._cachedPageController.queueCachedPageUpdate(v,!0);return[4,this._drainResponseClone(v)];case 11:h.sent(),h.label=12;case 12:return[3,15];case 13:throw Q=h.sent(),d.safeClose(),(x=this._isDropError(Q))?(this.metricsHelper.logBufferedCount("Response:Drop",1),this.metricsHelper.logBufferedCount("Response:Drop",1,!0)):(this.metricsHelper.logBufferedCount("Response:Error",
1),this.metricsHelper.logBufferedCount("Response:Error",1,!0)),this.metricsHelper.logError(Q,x?"ERROR":void 0),this.metricsHelper.logCountError(Q),this.metricsHelper.logBufferedCountError(Q),this.metricsHelper.drainAllBuffered(),Q;case 14:return c.resolveWith(),[7];case 15:return[2]}})})}})};b.prototype._drainResponseClone=function(a){return Ga(this,void 0,void 0,function(){var b;return Ha(this,function(c){switch(c.label){case 0:return b=a.clone(),[4,b.text()];case 1:return c.sent(),[2]}})})};b.prototype._toOutputStream=
function(a,b,c){return Ga(this,void 0,void 0,function(){var e=this;return Ha(this,function(g){switch(g.label){case 0:if(!(b.body instanceof ReadableStream))throw t.create("ResponseBodyInvalid");return[4,Ja.drain(b.body,function(a){e._processChunk(a,c)})];case 1:return g.sent(),this.metricsHelper.logMark("Flushed:".concat(a)),[2]}})})};b.prototype._processChunk=function(a,b){b.enqueue(a)};b.prototype._getPageMetadataFragment=function(a){return Ga(this,void 0,void 0,function(){var b,c;return Ha(this,
function(e){b=this._cachedPageController.getCachedPageMetadata(a);c={attribution:b.attribution,staleness:b.staleness};return[2,(new Wc(this.eventOptions,this.metricsService,this.responseRuleName,this.responseRuleScope,this.name,c)).getResponse()]})})};b.prototype._getDebugInfoFragment=function(){return Ga(this,void 0,void 0,function(){return Ha(this,function(a){return[2,(new Sc(this.eventOptions,this.metricsService,this._event.request.url)).getResponse()]})})};b.prototype._logResponseSuccessTagAndCount=
function(){this.metricsHelper.logTagAndCount("Response:Success");this.metricsHelper.logTagAndCount("Response:Success",!0)};b.prototype._bufferResponseSuccessCount=function(){this.metricsHelper.logBufferedCount("Response:Success");this.metricsHelper.logBufferedCount("Response:Success",1,!0)};b.prototype._isDropError=function(a){return w.matchesCodeOrSignature(a,"NetworkError",z.NETWORK_ERROR)||w.matchesCode(a,"ControllerUnexpectedlyClosed")};X([k],b.prototype,"build",null);X([k],b.prototype,"_getCachedPageAssembledResponse",
null);X([k],b.prototype,"_getAssembledResponseInit",null);X([k],b.prototype,"_getAssembledResponseOutputStream",null);X([k],b.prototype,"_drainResponseClone",null);X([k],b.prototype,"_toOutputStream",null);X([k],b.prototype,"_processChunk",null);X([k],b.prototype,"_getPageMetadataFragment",null);X([k],b.prototype,"_getDebugInfoFragment",null);X([k],b.prototype,"_logResponseSuccessTagAndCount",null);X([k],b.prototype,"_bufferResponseSuccessCount",null);X([k],b.prototype,"_isDropError",null);return b}(vd),
Th=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),hb=
this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},Uh=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{k(e.next(a))}catch(m){h(m)}}
function g(a){try{k(e["throw"](a))}catch(m){h(m)}}function k(b){b.done?a(b.value):c(b.value).then(d,g)}k((e=e.apply(f,b||[])).next())})},Vh=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;
case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:
void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},Wh=function(f){function b(a,b,c,g,h,d){var e=f.call(this)||this;e.logCtor(arguments);e._customerContextService=a;e._cacheService=b;e._metricsHelper=c;e._eventBus=g;e._eventOptions=h;e._responseRuleName=d;return e}Th(b,f);b.prototype.getPageShellFromCache=function(a,b){return Uh(this,
void 0,void 0,function(){var c,e,f,d,k,l,p,m,q,t,u,v,w=this;return Vh(this,function(g){switch(g.label){case 0:return c=a.cacheName,e=a.cacheKey,f=a.validationKeys,d=a.delimiterKey,k=a.skeleton,m=(p=this._cacheService).read,q=[this._eventOptions,c,e],v={},[4,(new pb(this._customerContextService)).compute(f)];case 1:return[4,m.apply(p,q.concat([(v.validationKeys=g.sent(),v.metricLoggingPrefixes=b,v)]))];case 2:l=g.sent();if(!l)return[2];u=(t=l.headers.get(x.shared.getClientOnlyLibHeader(d)))?J.decode(t):
void 0;return u?[2,{delimiter:u,response:l,skeleton:k}]:(r.queueTask(function(){w._metricsHelper.logTagAndCount("PageShellCacheMiss:Delimiter")}),[2])}})})};b.prototype.getFilteredPageShellHeaders=function(a){return x.shared.removeLibHeaders(a.headers)};b.prototype.getPageShellMetadata=function(a){return(a=(a=(a=a.headers.get(x.shared.getClientOnlyLibHeader("metadata")))?J.decode(a):void 0)?I.deserialize(a):void 0)?{attribution:a.attribution||"unknown",staleness:"number"===typeof a.requestStartTimestampSeconds?
F.getEpochSeconds(this._eventOptions.timeOriginEpoch)-a.requestStartTimestampSeconds:void 0}:{attribution:"unknown"}};b.prototype.queuePageShellMetadataMetrics=function(a){var b=this;r.queueTask(function(){var c=b.getPageShellMetadata(a);b._metricsHelper.logTagAndCount("CachePopAttribution:".concat(c.attribution));c.staleness&&b._metricsHelper.logCount("PageShellStaleness",c.staleness)})};b.prototype.queuePageShellUpdate=function(a,b){var c=this;r.queueTask(function(){c._metricsHelper.logCount("Queue:PageShellUpdate");
c._metricsHelper.logCount("Queue:PageShellUpdate:".concat(b?"OnHit":"OnMiss"));c._eventBus.publish({name:"ResponseRuleNavigation",detail:{eventOptions:c._eventOptions,serverResponse:a,ruleName:c._responseRuleName}})})};hb([k],b.prototype,"getPageShellFromCache",null);hb([k],b.prototype,"getFilteredPageShellHeaders",null);hb([k],b.prototype,"getPageShellMetadata",null);hb([k],b.prototype,"queuePageShellMetadataMetrics",null);hb([k],b.prototype,"queuePageShellUpdate",null);return b}(u),Xh=this&&this.__extends||
function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),D=this&&this.__decorate||function(f,
b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},H=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{k(e.next(a))}catch(m){h(m)}}
function g(a){try{k(e["throw"](a))}catch(m){h(m)}}function k(b){b.done?a(b.value):c(b.value).then(d,g)}k((e=e.apply(f,b||[])).next())})},N=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;
case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:
void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},Yh=function(f){function b(a,b,c,g,h,d,k,l,p,m,q,r,t,u,v,w){var e=f.call(this,"SingleDelimiter",b,c,g,h,d,k,p,q,r)||this;e.logCtor(arguments);e._event=l;e._usePreloadResponseOnly=m;e._pageShellsConfig=t;e._noPageShellConfig=u||{};e._flags=w||{};e._pageShellController=new Wh(b,
c,e.metricsHelper,k,p,q);e._serverResponseController=new ud(a,g,e.metricsHelper,k,q);e._preloadController=new Ih(d,e.metricsHelper,l,p,v);return e}Xh(b,f);b.prototype.build=function(){return H(this,void 0,void 0,function(){var a,b,c=this;return N(this,function(e){switch(e.label){case 0:return a=this._serverResponseController.fetchServerResponse(this._event,this._usePreloadResponseOnly),r.queueTask(function(){c.metricsHelper.logTagAndCount("Passthrough:".concat(!!c._flags.passthrough))}),this._flags.passthrough?
[3,2]:[4,this._getPageShell(this._pageShellsConfig)];case 1:if(b=e.sent())return[2,this._getPageShellAssembledResponse(b,a)];if(this._noPageShellConfig.skeleton||this._preloadController.hasPreload())return[2,this._getNoPageShellAssembledResponse(this._noPageShellConfig,a)];e.label=2;case 2:return[2,this._getNonAssembledResponse(a)]}})})};b.prototype._getPageShell=function(a){return H(this,void 0,void 0,function(){var b,c,g,f=this;return N(this,function(d){switch(d.label){case 0:this.metricsHelper.logMark("Query:PageShell"),
c=0,d.label=1;case 1:if(!(c<a.length))return[3,6];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,this._pageShellController.getPageShellFromCache(a[c],this._getMetricPrefixes("PageShellCache"))];case 3:return(b=d.sent())?[3,6]:[3,5];case 4:return g=d.sent(),r.queueTask(function(){var a=w.matchesCodeOrSignature(g,"NetworkError",z.NETWORK_ERROR);f.metricsHelper.logError(g,a?"ERROR":void 0);f.metricsHelper.logCountError(g);f.metricsHelper.logTagAndCount("PageShellCacheMiss:CacheError")}),[3,5];case 5:return c++,
[3,1];case 6:return this.metricsHelper.logMark("Arrived:PageShell"),r.queueTask(function(){f.metricsHelper.logTagAndCount("PageShellCache".concat(b?"Hit":"Miss"))}),b&&this._pageShellController.queuePageShellMetadataMetrics(b.response),[2,b]}})})};b.prototype._getNonAssembledResponse=function(a){return H(this,void 0,void 0,function(){var b,c,g,f=this;return N(this,function(d){switch(d.label){case 0:return[4,this._serverResponseController.readServerResponse(this._event,this.eventOptions,a,"sdrsm",
!0,!0)];case 1:return b=d.sent(),this.metricsHelper.logMark("Arrived:ServerResponse"),c=[],this._flags.passthrough&&c.push(function(){return H(f,void 0,void 0,function(){return N(this,function(a){switch(a.label){case 0:return[4,this._getPageShell(this._pageShellsConfig)];case 1:return a.sent(),[2]}})})}),b.parseable&&!this._flags.disableCaching&&(g=b.response.clone(),c.push(function(){return H(f,void 0,void 0,function(){return N(this,function(a){this._pageShellController.queuePageShellUpdate(g,!1);
return[2]})})})),r.queueTask(function(){return H(f,void 0,void 0,function(){var a;return N(this,function(b){switch(b.label){case 0:a=0,b.label=1;case 1:return a<c.length?[4,c[a]()]:[3,4];case 2:b.sent(),b.label=3;case 3:return a++,[3,1];case 4:return[2]}})})}),this._logResponseSuccessTagAndCount(),this._bufferResponseSuccessCount(),this.metricsHelper.drainAllBuffered(),[2,b.response]}})})};b.prototype._getPageShellAssembledResponse=function(a,b){return H(this,void 0,void 0,function(){var c,e;return N(this,
function(g){switch(g.label){case 0:return c=this._getPageShellAssembledResponseOutputStream(a,b),[4,this._getPageShellAssembledResponseInit(a)];case 1:return e=g.sent(),[2,new Response(c,e)]}})})};b.prototype._getNoPageShellAssembledResponse=function(a,b){return H(this,void 0,void 0,function(){var c,e;return N(this,function(g){switch(g.label){case 0:return c=this._getNoPageShellAssembledResponseOutputStream(a,b),[4,this._getNoPageShellAssembledResponseInit()];case 1:return e=g.sent(),[2,new Response(c,
e)]}})})};b.prototype._getPageShellAssembledResponseInit=function(a){return H(this,void 0,void 0,function(){var b;return N(this,function(c){switch(c.label){case 0:return[4,this._preloadController.getHeadersWithPreload(this._pageShellController.getFilteredPageShellHeaders(a.response))];case 1:return b=c.sent(),[2,{status:200,statusText:"OK",headers:b}]}})})};b.prototype._getNoPageShellAssembledResponseInit=function(){return H(this,void 0,void 0,function(){var a;return N(this,function(b){switch(b.label){case 0:return[4,
this._preloadController.getHeadersWithPreload(Sa.getCommonHTMLHeaders())];case 1:return a=b.sent(),[2,{status:200,statusText:"OK",headers:a}]}})})};b.prototype._getPageShellAssembledResponseOutputStream=function(a,b){var c=this,e;return new ReadableStream({start:function(g){return H(c,void 0,void 0,function(){var c,f,h,k,m,q,r,t,u,v,x,y,A,B,C,D,H,I,F,K,L,J,M,O,G,P;return N(this,function(d){switch(d.label){case 0:c=!0,d.label=1;case 1:return d.trys.push([1,27,,28]),e=new $a(g,this.metricsService,this.eventOptions),
f=this._toOutputStream("PageShell",a.response,e),h=this._serverResponseController.readServerResponse(this._event,this.eventOptions,b,"sdrs",!1,!0),k=this._getSkeletonFragment(a,h),[4,f];case 2:return d.sent(),[4,k];case 3:return(m=d.sent())?[4,this._toOutputStream("Skeleton",m,e)]:[3,5];case 4:d.sent(),d.label=5;case 5:return q=this._toOutputStream,r=["ShellRenderPerfCounter"],[4,this._getPerfCounterFragment(this.metricsHelper.getMetricName("ShellRender"),this.metricsHelper.getMetricScope("ShellRender"))];
case 6:return[4,q.apply(this,r.concat([d.sent(),e]))];case 7:return d.sent(),[4,h];case 8:t=d.sent();u=t.unrecoverable;v=t.parseable;x=t.response;this.metricsHelper.logMark("Arrived:ServerResponse");if(!u)return[3,10];this._logResponseUnrecoverableTagAndCount();this._logAsyncBufferedCounters("PageShell:Response:Unrecoverable");return[4,this._toOutputStream("ServerResponse",x,e)];case 9:return d.sent(),e.close(),this._logResponseSuccessTagAndCount(),this._bufferResponseSuccessCount(),this.metricsHelper.drainAllBuffered(),
[2];case 10:return y=this._getCSMTokensFragment(a.response,x),A=this._getPageMetadataFragment(a.response,x),B=v?this._getAfterDelimiterFragment(a,x):Promise.resolve(x.clone()),C=this._toOutputStream,D=["CSMTokens"],[4,y];case 11:return[4,C.apply(this,D.concat([d.sent(),e]))];case 12:return d.sent(),H=this._toOutputStream,I=["PageMetadata"],[4,A];case 13:return[4,H.apply(this,I.concat([d.sent(),e]))];case 14:d.sent(),F=!1,d.label=15;case 15:return d.trys.push([15,18,,23]),K=this._toOutputStream,L=
["AfterDelimiter"],[4,B];case 16:return[4,K.apply(this,L.concat([d.sent(),e]))];case 17:return d.sent(),[3,23];case 18:J=d.sent();if(!w.matchesCode(J,"StreamTransformMissingDelimiter"))return[3,21];c=!1;F=!0;this.metricsHelper.logTagAndCount("MissingDelimiter");this.metricsHelper.logBufferedCount("MissingDelimiter");this.metricsHelper.logBufferedCount("MissingDelimiter",1,!0);return this._flags.flushFullOnMissingDelimiter?[4,this._toOutputStream("MissingDelimiterFallback",x.clone(),e)]:[3,20];case 19:d.sent(),
d.label=20;case 20:return[3,22];case 21:w.matchesCodeOrSignature(J,"NetworkError",z.NETWORK_ERROR)?(this.metricsHelper.logBufferedCount("AfterDelimiterNetworkError"),this.metricsHelper.logBufferedCount("AfterDelimiterNetworkError",1,!0)):this.metricsHelper.logBufferedCountError(J),d.label=22;case 22:return[3,23];case 23:if(!fa.isDebug)return[3,26];M=this._toOutputStream;O=["DebugInfo"];return[4,this._getDebugInfoFragment()];case 24:return[4,M.apply(this,O.concat([d.sent(),e]))];case 25:d.sent(),d.label=
26;case 26:e.close();v&&this.mismatchDetectionController.triggerMismatchDetection(a.response,x.clone());this.metricsHelper.logTagAndCount("ServerResponseStatus:".concat(x.status));c?(this._logResponseSuccessTagAndCount(),this._bufferResponseSuccessCount()):(this.metricsHelper.logBufferedCount("Response:Error",1),this.metricsHelper.logBufferedCount("Response:Error",1,!0));this.metricsHelper.drainAllBuffered();if(!v||F)return[2];this._pageShellController.queuePageShellUpdate(x,!0);return[3,28];case 27:throw G=
d.sent(),e.safeClose(),(P=this._isDropError(G))?(this.metricsHelper.logBufferedCount("Response:Drop",1),this.metricsHelper.logBufferedCount("Response:Drop",1,!0)):(this.metricsHelper.logBufferedCount("Response:Error",1),this.metricsHelper.logBufferedCount("Response:Error",1,!0)),this.metricsHelper.logError(G,P?"ERROR":void 0),this.metricsHelper.logCountError(G),this.metricsHelper.logBufferedCountError(G),this.metricsHelper.drainAllBuffered(),G;case 28:return[2]}})})}})};b.prototype._getNoPageShellAssembledResponseOutputStream=
function(a,b){var c=this,e;return new ReadableStream({start:function(g){return H(c,void 0,void 0,function(){var c,f,h,k,m,q,r,t,u,v,w;return N(this,function(d){switch(d.label){case 0:return d.trys.push([0,9,,10]),e=new $a(g,this.metricsService,this.eventOptions),c=this._serverResponseController.readServerResponse(this._event,this.eventOptions,b,"sdrsn",!1,!0),f=this._getSkeletonFragment(a,c),[4,f];case 1:return(h=d.sent())?[4,this._toOutputStream("Skeleton",h,e)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[4,
c];case 4:return k=d.sent(),m=k.unrecoverable,q=k.parseable,r=k.response,this.metricsHelper.logMark("Arrived:ServerResponse"),[4,this._toOutputStream("ServerResponse",r.clone(),e)];case 5:d.sent();if(m)return this._logResponseUnrecoverableTagAndCount(),this._logAsyncBufferedCounters("NoPageShell:Response:Unrecoverable"),e.close(),this._logResponseSuccessTagAndCount(),this._bufferResponseSuccessCount(),this.metricsHelper.drainAllBuffered(),[2];if(!fa.isDebug)return[3,8];t=this._toOutputStream;u=["DebugInfo"];
return[4,this._getDebugInfoFragment()];case 6:return[4,t.apply(this,u.concat([d.sent(),e]))];case 7:d.sent(),d.label=8;case 8:e.close();this.metricsHelper.logTagAndCount("ServerResponseStatus:".concat(r.status));this._logResponseSuccessTagAndCount();this._bufferResponseSuccessCount();this.metricsHelper.drainAllBuffered();if(!q)return[2];this._pageShellController.queuePageShellUpdate(r,!1);return[3,10];case 9:throw v=d.sent(),e.safeClose(),(w=this._isDropError(v))?(this.metricsHelper.logBufferedCount("Response:Drop",
1),this.metricsHelper.logBufferedCount("Response:Drop",1,!0)):(this.metricsHelper.logBufferedCount("Response:Error",1),this.metricsHelper.logBufferedCount("Response:Error",1,!0)),this.metricsHelper.logError(v,w?"ERROR":void 0),this.metricsHelper.logCountError(v),this.metricsHelper.logBufferedCountError(v),this.metricsHelper.drainAllBuffered(),v;case 10:return[2]}})})}})};b.prototype._toOutputStream=function(a,b,c){return H(this,void 0,void 0,function(){var e=this;return N(this,function(g){switch(g.label){case 0:if(!(b.body instanceof
ReadableStream))throw t.create("ResponseBodyInvalid");return[4,Ja.drain(b.body,function(a){e._processChunk(a,c)})];case 1:return g.sent(),this.metricsHelper.logMark("Flushed:".concat(a)),[2]}})})};b.prototype._processChunk=function(a,b){b.enqueue(a)};b.prototype._getSkeletonFragment=function(a,b){return H(this,void 0,void 0,function(){var c,e,f,d,k,l,p;return N(this,function(g){switch(g.label){case 0:c=a.skeleton;if(!c)return[2];e=c.data||{};f=c.hooks;d=this.contentFragmentService.render(this.eventOptions,
c.name,{data:e,hooks:f});return c.race?[4,Promise.race([d,b])]:[3,2];case 1:return l=g.sent(),[3,4];case 2:return[4,d];case 3:l=g.sent(),g.label=4;case 4:return k=l,p=k instanceof Response,this.metricsHelper.logMark("Arrived:Skeleton"),this.metricsHelper.logTag("Skeleton:Race:".concat(!!c.race)),this.metricsHelper.logTag("Skeleton:Render:".concat(p)),[2,p?k:void 0]}})})};b.prototype._getCSMTokensFragment=function(a,b){return H(this,void 0,void 0,function(){var c;return N(this,function(e){c=this._pageShellController.getPageShellMetadata(a);
return[2,(new mf(this.eventOptions,this.metricsService,b,c.attribution)).getResponse()]})})};b.prototype._getPageMetadataFragment=function(a,b){return H(this,void 0,void 0,function(){var c,e,f,d,k,l,p;return N(this,function(g){c=this._pageShellController.getPageShellMetadata(a);e=b.ok;f=b.type;d=b.status;k=b.redirected;l=b.headers.get(x.shared.REQUEST_ID_OPF_HEADER);p={attribution:c.attribution,staleness:c.staleness,serverResponse:{ok:e,type:f,status:d,redirected:k,requestId:l}};return[2,(new Wc(this.eventOptions,
this.metricsService,this.responseRuleName,this.responseRuleScope,this.name,p)).getResponse()]})})};b.prototype._getPerfCounterFragment=function(a,b){return H(this,void 0,void 0,function(){return N(this,function(c){return[2,(new vf(this.eventOptions,this.metricsService,a,b)).getResponse()]})})};b.prototype._getAfterDelimiterFragment=function(a,b){return H(this,void 0,void 0,function(){return N(this,function(c){return[2,(new af(this.eventOptions,this.metricsService,b,a.delimiter)).getResponse()]})})};
b.prototype._getDebugInfoFragment=function(){return H(this,void 0,void 0,function(){return N(this,function(a){return[2,(new Sc(this.eventOptions,this.metricsService,this._event.request.url)).getResponse()]})})};b.prototype._logResponseSuccessTagAndCount=function(){this.metricsHelper.logTagAndCount("Response:Success");this.metricsHelper.logTagAndCount("Response:Success",!0)};b.prototype._bufferResponseSuccessCount=function(){this.metricsHelper.logBufferedCount("Response:Success");this.metricsHelper.logBufferedCount("Response:Success",
1,!0)};b.prototype._logResponseUnrecoverableTagAndCount=function(){this.metricsHelper.logTagAndCount("Response:Unrecoverable");this.metricsHelper.logTagAndCount("Response:Unrecoverable",!0)};b.prototype._logAsyncBufferedCounters=function(a){var b=this;r.queueTask(function(){b.metricsHelper.logBufferedCount(a);b.metricsHelper.logBufferedCount(a,1,!0)})};b.prototype._isDropError=function(a){return w.matchesCodeOrSignature(a,"NetworkError",z.NETWORK_ERROR)||w.matchesCode(a,"ControllerUnexpectedlyClosed")};
b.prototype._getMetricPrefixes=function(a){return[this.metricsHelper.getMetricScope(a)]};D([k],b.prototype,"build",null);D([k],b.prototype,"_getPageShellAssembledResponse",null);D([k],b.prototype,"_getNoPageShellAssembledResponse",null);D([k],b.prototype,"_getPageShellAssembledResponseInit",null);D([k],b.prototype,"_getNoPageShellAssembledResponseInit",null);D([k],b.prototype,"_getPageShellAssembledResponseOutputStream",null);D([k],b.prototype,"_getNoPageShellAssembledResponseOutputStream",null);
D([k],b.prototype,"_toOutputStream",null);D([k],b.prototype,"_processChunk",null);D([k],b.prototype,"_getSkeletonFragment",null);D([k],b.prototype,"_getCSMTokensFragment",null);D([k],b.prototype,"_getPageMetadataFragment",null);D([k],b.prototype,"_getPerfCounterFragment",null);D([k],b.prototype,"_getAfterDelimiterFragment",null);D([k],b.prototype,"_getDebugInfoFragment",null);D([k],b.prototype,"_logResponseSuccessTagAndCount",null);D([k],b.prototype,"_bufferResponseSuccessCount",null);D([k],b.prototype,
"_logResponseUnrecoverableTagAndCount",null);D([k],b.prototype,"_logAsyncBufferedCounters",null);D([k],b.prototype,"_isDropError",null);D([k],b.prototype,"_getMetricPrefixes",null);return b}(vd),Zh=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==
typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Y=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&
Object.defineProperty(b,a,g),g},$h=this&&this.__read||function(f,b){var a="function"===typeof Symbol&&f[Symbol.iterator];if(!a)return f;f=a.call(f);var e,c=[];try{for(;(void 0===b||0<b--)&&!(e=f.next()).done;)c.push(e.value)}catch(h){var g={error:h}}finally{try{e&&!e.done&&(a=f["return"])&&a.call(f)}finally{if(g)throw g.error;}}return c},ai=function(f){function b(a,b,c,g,h,d,k,l,p){var e=f.call(this,b,c,g,h,d,k)||this;e.logCtor(arguments);e._swGlobal=a;e._usePreloadResponseOnlyForServerResponseOnNavigations=
p.usePreloadResponseOnlyForServerResponseOnNavigations;e._errorLoggingScope="NavigationResponseService";e._initNavigationRules(l);e._speculateContentFragmentUsage();return e}Zh(b,f);b.prototype.respond=function(a,b){var c="",e="";try{for(var f=0;f<this._navigationRules.length;f++){var d=this._navigationRules[f];if(this._doesRuleMatch(d.routeMatchers,a,b)){a.errorContext.NavigationResponseRule=d.src;a.errorContext.NavigationURL=b.request.url;c=d.name;e=d.scope;if(!d.leversEnabled){this._logTagAndCount(a,
"Levers",!1,c,e);break}this._triggerWeblabs(d.weblabs,a);if(!d.respond){this._logTagAndCount(a,"Respond",!1,c,e);this._bufferedCount(a,"Respond",!1,c,e);break}var k=this._createResponseStrategy(c,e,d.strategy,a,b);this._logMark(a,!0,c,e);b.respondWith(k.getResponse());this._logMark(a,!1,c,e);this._logTagAndCount(a,"Respond",!0,c,e);this._bufferedCount(a,"Respond",!0,c,e);break}}}catch(l){throw this.metricsService.error(a,l,this._errorLoggingScope),this.metricsService.countError(a,l,this._errorLoggingScope),
this.metricsService.bufferedCount(a,"Error"),c&&0<c.length&&(this.metricsService.bufferedCount(a,"Error:".concat(c)),this.metricsService.bufferedCount(a,"Error:".concat(e))),this.metricsService.bufferedCountError(a,l,this._errorLoggingScope),this.metricsService.drainAllBuffered(a),l;}};b.prototype._initNavigationRules=function(a){var b=this;this._navigationRules=a.map(function(a){return{name:a.name,scope:a.scope,routeMatchers:a.routeMatchers.map(function(a){return b._createRouteMatcher(a)}),leversEnabled:b._resolveLevers(a.levers),
weblabs:a.weblabTriggers,respond:a.respond,strategy:a.responseStrategy,src:I.serialize(a)}})};b.prototype._speculateContentFragmentUsage=function(){var a=this;this._navigationRules.forEach(function(b){switch(b.strategy.name){case "SingleDelimiter":b.strategy.pageShells.forEach(function(b){b.skeleton&&a._publishSpeculatedContentFragmentUsage(b.skeleton)}),b.strategy.noPageShell&&b.strategy.noPageShell.skeleton&&a._publishSpeculatedContentFragmentUsage(b.strategy.noPageShell.skeleton)}})};b.prototype._publishSpeculatedContentFragmentUsage=
function(a){var b=a.name;a=a.prewarm;this.eventBus.publish({name:"ContentFragmentSpeculation",detail:{eventOptions:V.create(),name:b,prewarm:a}})};b.prototype._doesRuleMatch=function(a,b,c){for(var e=0;e<a.length;e++)if(a[e].match(c.request,c,b))return!0;return!1};b.prototype._createRouteMatcher=function(a){switch(a.name){case "URLPathRoute":return new Kc(a.pattern,a.stripRefMarkers,a.stripLanguageFolder);default:throw t.create("UnrecognizedRouteMatcher",a);}};b.prototype._resolveLevers=function(a){var e=
this;return a&&0!==a.length?a.reduce(function(a,f){f=f.split(b.RULE_LEVER_SEPARATOR);if(2!==f.length)return!1;f=$h(f,2);f=R.getFeaturePropertiesData(e._swGlobal,f[0],f[1]);return a&&!0===(null===f||void 0===f?void 0:f.ruleEnabled)},!0):!1};b.prototype._createResponseStrategy=function(a,b,c,f,h){switch(c.name){case "SingleDelimiter":return new Yh(this._swGlobal,this.customerContextService,this.cacheService,this.metricsService,this.contentFragmentService,this.renderingHintsService,this.eventBus,h,f,
this._usePreloadResponseOnlyForServerResponseOnNavigations,a,b,c.pageShells,c.noPageShell,c.preloads,c.flags);case "FullPage":return new Sh(this._swGlobal,this.customerContextService,this.cacheService,this.metricsService,this.contentFragmentService,this.renderingHintsService,this.eventBus,h,f,this._usePreloadResponseOnlyForServerResponseOnNavigations,a,b,c.cachedPage);default:throw t.create("UnrecognizedResponseStrategy",c);}};b.prototype._triggerWeblabs=function(a,b){var c=this;a&&r.queueTask(function(){a.forEach(function(a){c.metricsService.weblabTrigger(b,
a.name,a.treatment,a.directTrigger)})})};b.prototype._logTagAndCount=function(a,b,c,f,h){var d=this;r.queueTask(function(){var e=d._getMode(c);d.metricsService.tag(a,d._getMetricName(b,e));d.metricsService.count(a,d._getMetricName(b,e));d.metricsService.tag(a,d._getMetricName(b,e,f));d.metricsService.count(a,d._getMetricName(b,e,f));d.metricsService.tag(a,d._getMetricName(b,e,void 0,h));d.metricsService.count(a,d._getMetricName(b,e,void 0,h))})};b.prototype._bufferedCount=function(a,b,c,f,h){var d=
this;r.queueTask(function(){var e=d._getMode(c);d.metricsService.bufferedCount(a,d._getMetricName(b,e));d.metricsService.bufferedCount(a,d._getMetricName(b,e,f));d.metricsService.bufferedCount(a,d._getMetricName(b,e,void 0,h))})};b.prototype._getMode=function(a){return a?"Active":"Inactive"};b.prototype._getMetricName=function(a,b,c,f){return f?"".concat(a,":").concat(b,":").concat(f):c?"".concat(a,":").concat(b,":").concat(c):"".concat(a,":").concat(b)};b.prototype._logMark=function(a,b,c,f){b=b?
"Before":"After";this.metricsService.mark(a,"Respond:".concat(b));this.metricsService.mark(a,"Respond:".concat(b,":").concat(c));this.metricsService.mark(a,"Respond:".concat(b,":").concat(f))};b.RULE_LEVER_SEPARATOR="::";Y([k],b.prototype,"respond",null);Y([k],b.prototype,"_initNavigationRules",null);Y([k],b.prototype,"_speculateContentFragmentUsage",null);Y([k],b.prototype,"_publishSpeculatedContentFragmentUsage",null);Y([k],b.prototype,"_doesRuleMatch",null);Y([k],b.prototype,"_createRouteMatcher",
null);Y([k],b.prototype,"_resolveLevers",null);Y([k],b.prototype,"_createResponseStrategy",null);Y([k],b.prototype,"_triggerWeblabs",null);Y([k],b.prototype,"_logTagAndCount",null);Y([k],b.prototype,"_bufferedCount",null);Y([k],b.prototype,"_logMark",null);return b}(rd),bi=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,
a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),za=this&&this.__decorate||function(f,b,a,e){var c=arguments.length,g=3>c?b:null===e?e=Object.getOwnPropertyDescriptor(b,a):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(f,b,a,e);else for(var d=f.length-
1;0<=d;d--)if(h=f[d])g=(3>c?h(g):3<c?h(b,a,g):h(b,a))||g;return 3<c&&g&&Object.defineProperty(b,a,g),g},zc=this&&this.__awaiter||function(f,b,a,e){function c(b){return b instanceof a?b:new a(function(a){a(b)})}return new (a||(a=Promise))(function(a,h){function d(a){try{k(e.next(a))}catch(m){h(m)}}function g(a){try{k(e["throw"](a))}catch(m){h(m)}}function k(b){b.done?a(b.value):c(b.value).then(d,g)}k((e=e.apply(f,b||[])).next())})},Ac=this&&this.__generator||function(f,b){function a(a){return function(b){return e([a,
b])}}function e(a){if(g)throw new TypeError("Generator is already executing.");for(;c;)try{if(g=1,h&&(d=a[0]&2?h["return"]:a[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,a[1])).done)return d;if(h=0,d)a=[a[0]&2,d.value];switch(a[0]){case 0:case 1:d=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++;h=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&
(!d||a[1]>d[0]&&a[1]<d[3]))c.label=a[1];else if(6===a[0]&&c.label<d[1])c.label=d[1],d=a;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(a);else{d[2]&&c.ops.pop();c.trys.pop();continue}}a=b.call(f,c)}catch(p){a=[6,p],h=0}finally{g=d=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},g,h,d,k;return k={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),
k},ci=function(f){function b(a,e){var c=f.call(this)||this;c.logCtor(arguments);c._swGlobal=a;c._metricsService=e;c._errorLoggingScope="AapiCsrfTokenManagerService";c._aapiCsrfToken=Promise.resolve(void 0);c._currentCooldownTimeMs=b._DEFAULT_COOLDOWN_TIME_MS;c._lastFetchTimestamp=void 0;c._consecutiveErrorCount=0;c._aapiCsrfToken=c._isValidTreatmentAndPlatform()?c._fetchAapiCsrfToken(V.create()):Promise.resolve(void 0);return c}bi(b,f);b.prototype.getToken=function(){return zc(this,void 0,void 0,
function(){return Ac(this,function(a){return[2,this._aapiCsrfToken]})})};b.prototype.refreshToken=function(a){return zc(this,void 0,void 0,function(){var b,c=this;return Ac(this,function(e){switch(e.label){case 0:r.queueTask(function(){c._metricsService.count(a,"".concat(c._errorLoggingScope,":RefreshTokenAttemptBeforeValidTreatmentAndPlatformCheck"))});if(!this._isValidTreatmentAndPlatform())return[2,!1];this._metricsService.count(a,"".concat(this._errorLoggingScope,":RefreshTokenAttempt"));this._aapiCsrfToken=
this._fetchAapiCsrfToken(a);return[4,this._aapiCsrfToken];case 1:return b=e.sent(),[2,!!b]}})})};b.prototype._fetchAapiCsrfToken=function(a){return zc(this,void 0,void 0,function(){var e,c,f,h,d,k,l,p,m;return Ac(this,function(g){switch(g.label){case 0:g.trys.push([0,2,3,4]);if(!this._isAapiCsrfFeatureEnabled())return this._metricsService.count(a,"".concat(this._errorLoggingScope,":AapiCsrfFeatureLeverPulled")),[2];c=Date.now();if(void 0!==this._lastFetchTimestamp&&c-this._lastFetchTimestamp<this._currentCooldownTimeMs)return this._metricsService.count(a,
"".concat(this._errorLoggingScope,":CooldownTriggered")),[2];this._lastFetchTimestamp=c;this._metricsService.count(a,"".concat(this._errorLoggingScope,":FetchToken"));f=this._getAapiCsrfTokenURL(b._AAPI_CSRF_ENDPOINT);return f?[4,(new Za(f)).getResponseJson()]:(this._metricsService.count(a,"".concat(this._errorLoggingScope,":InvalidUrl")),[2]);case 1:h=g.sent();e=this._getAapiCsrfTokenFromResponse(h);if(!e)return this._metricsService.count(a,"".concat(this._errorLoggingScope,":ReceivedNoToken")),
[2];this._metricsService.count(a,"".concat(this._errorLoggingScope,":FetchedValidToken"));return[2,e];case 2:return d=g.sent(),k=w.matchesCode(d,"ResponseNotOK"),l=w.matchesCode(d,"FailedToFetch"),p=w.matchesCodeOrSignature(d,"NetworkError",z.NETWORK_ERROR),this._metricsService.error(a,d,this._errorLoggingScope,l||p?"ERROR":void 0),m=this._errorLoggingScope,p?m="".concat(this._errorLoggingScope,":").concat("NetworkError"):l?m="".concat(this._errorLoggingScope,":").concat("FailedToFetch"):k&&d.data&&
d.data.status&&(m="".concat(this._errorLoggingScope,":").concat(d.data.status)),this._metricsService.countError(a,d,m),[2];case 3:return this._updateCooldownParameters(e,a),[7];case 4:return[2]}})})};b.prototype._getAapiCsrfTokenFromResponse=function(a){var e=q.isObject,c=q.isNonEmptyString;return e(a)&&c(a[b._AAPI_CSRF_TOKEN_KEY])?a[b._AAPI_CSRF_TOKEN_KEY]:void 0};b.prototype._updateCooldownParameters=function(a,e){a?(this._consecutiveErrorCount=0,this._currentCooldownTimeMs=b._DEFAULT_COOLDOWN_TIME_MS):
(this._consecutiveErrorCount++,this._currentCooldownTimeMs=b._DEFAULT_COOLDOWN_TIME_MS*(this._consecutiveErrorCount+1),this._metricsService.count(e,"".concat(this._errorLoggingScope,":ConsecutiveFetchError:").concat(this._consecutiveErrorCount)))};b.prototype._getAapiCsrfTokenURL=function(a){if(a=L.parse(a,this._swGlobal.location.href))return a.href};b.prototype._isValidTreatmentAndPlatform=function(){return y.isMShop(this._swGlobal)||y.isMobileWeb(this._swGlobal)&&"T1"===Ka.getWeblabTreatment(this._swGlobal,
"A2I_LIGHTSABER_RHV3_HINTS_COLLECTOR_MWEB_CHROME_1279464")||y.isDesktopWeb(this._swGlobal)&&"T1"===Ka.getWeblabTreatment(this._swGlobal,"A2I_LIGHTSABER_PAGEASSET_DESKTOP_RHV3_1323783")};b.prototype._isAapiCsrfFeatureEnabled=function(){var a=this._getAapiCsrfLever();if(!a)return!1;a=R.getFeaturePropertiesData(this._swGlobal,"in-latency",a);return!0===(null===a||void 0===a?void 0:a.featureEnabled)};b.prototype._getAapiCsrfLever=function(){if(y.isMShop(this._swGlobal))return"lightsaber-mshop-rendering-hints-aapi-csrf";
if(y.isMobileWeb(this._swGlobal))return"lightsaber-mweb-rendering-hints-aapi-csrf";if(y.isDesktopWeb(this._swGlobal))return"lightsaber-desktop-web-rendering-hints-aapi-csrf"};b._AAPI_CSRF_TOKEN_KEY="anti-csrftoken-a2z";b._AAPI_CSRF_ENDPOINT="/lightsaber/csrf/aapi?skipswc\x3d1";b._DEFAULT_COOLDOWN_TIME_MS=5E3;za([k],b.prototype,"getToken",null);za([k],b.prototype,"refreshToken",null);za([k],b.prototype,"_fetchAapiCsrfToken",null);za([k],b.prototype,"_getAapiCsrfTokenFromResponse",null);za([k],b.prototype,
"_updateCooldownParameters",null);za([k],b.prototype,"_getAapiCsrfTokenURL",null);za([k],b.prototype,"_isValidTreatmentAndPlatform",null);za([k],b.prototype,"_isAapiCsrfFeatureEnabled",null);return b}(u),di=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==
typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),Eb=this&&this.__assign||function(){Eb=Object.assign||function(f){for(var b,a=1,e=arguments.length;a<e;a++){b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(f[c]=b[c])}return f};return Eb.apply(this,arguments)},wd=!1,ei=function(f){function b(a){var b=f.call(this)||this;b.logCtor(arguments);
b._checkAlreadyStarted();b._logDebugInfo(a);var c=b._getGlobal(a),g=b._getFlags(a,c);if(!b._isSupported(c,g)||!b._isClientEnabled(c))return b;var h=b._getConfig(a);b._startServices(c,g,h);return b}di(b,f);b.prototype._checkAlreadyStarted=function(){if(wd)throw t.create("DuplicateLibraryInitialization");wd=!0};b.prototype._logDebugInfo=function(a){fa.isDebugVerbose&&this.log("_logDebugInfo","Lib Init",{startTimeSeconds:F.getEpochSeconds(),libInfo:v,options:a})};b.prototype._getGlobal=function(a){return a.serviceWorkerGlobal||
self};b.prototype._getFlags=function(a,b){b={usePreloadResponseOnlyForServerResponseOnNavigations:y.isMShop(b)};return Eb(Eb({},b),a.flags)};b.prototype._getConfig=function(a){a=a.configuration;if(!(a&&Array.isArray(a.caches)&&Array.isArray(a.cachePopulationRules)&&Array.isArray(a.navigationResponseRules)&&Array.isArray(a.renderingHintsDelegates)))throw t.create("InvalidInitializationConfiguration",{config:a});return{caches:(new og).filter(a.caches),cachePopulationRules:(new gd).filter(a.cachePopulationRules),
navigationResponseRules:(new ug).filter(a.navigationResponseRules),contentFragments:(new rg).filter(a.contentFragments),renderingHintsDelegates:(new xg).filter(a.renderingHintsDelegates)}};b.prototype._isSupported=function(a,b){a=new Sd(a,b);try{return a.validate(),!0}catch(c){return this.log("_isSupported","".concat(c)),!1}};b.prototype._isClientEnabled=function(a){a=y.isClientEnabled(a);if(void 0===a)throw t.create("RuntimeConfigMissing");return a};b.prototype._startServices=function(a,b,c){var e=
new Ug,f=new Og(a,e),d=new Sg(a),k=new ih(a,f,e),l=new je(a,k,c.caches,e),p=new Bg(a,l,k,e),m=new Qg(k,e,c.contentFragments),q=new ci(a,k);q=new wh(a,e,l,k,d,q,c.renderingHintsDelegates);var r=new ai(a,d,l,k,m,q,e,c.navigationResponseRules,b);new Qf(a,d,l,p,k,e,c.cachePopulationRules);new $g(a,r,k,e,b);b=new zh(d,l,k,m,q,f,e);new Yg(a,b,k,e)};return b}(u);xd.init=function(f){new ei(f)}})(this.Lightsaber=this.Lightsaber||{})}).call(self);'use strict';(function(){(function(c){var d=[],e=[],f=[],g=[],h=[],b=function(a,b){Array.isArray(b)&&a.push.apply(a,b.filter(function(a){return!!a}))};c.register=function(a){b(d,a.caches);b(e,a.cachePopulationRules);b(f,a.navigationResponseRules);b(g,a.contentFragments);b(h,a.renderingHintsDelegates)};c.getConfig=function(){return{caches:d,cachePopulationRules:e,navigationResponseRules:f,contentFragments:g,renderingHintsDelegates:h}}})(this.LightsaberConfiguration=this.LightsaberConfiguration||{})}).call(self);'use strict';(function(){LightsaberConfiguration.register({caches:[{name:"PageShell",version:3,plugins:["MaxAge","ValidationKeys","Metadata"]},{name:"CachedPage",version:1,plugins:["MaxAge","ValidationKeys","Metadata"]},{name:"CompareCopy",version:1,plugins:["MaxAge","Metadata"]}]})})();'use strict';(function(){var e=function(){try{var d=JSON.parse(decodeURIComponent("%5B%7B%22name%22%3A%22trims.checkout.animation-cart.no-page-shell%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F99ENCFEhNLCSHZB.html%3FLightsaberSkeleton%3Dtrims.checkout.animation-cart.no-page-shell%22%7D%2C%7B%22name%22%3A%22trims.checkout.animation-cart%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F2rvz4S_DqpndDn2.html%3FLightsaberSkeleton%3Dtrims.checkout.animation-cart%22%7D%2C%7B%22name%22%3A%22search.mweb.common.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FGBP5bmFoQMYscIj.html%3FLightsaberSkeleton%3Dsearch.mweb.common.wave-pulse%22%7D%2C%7B%22name%22%3A%22search.mweb.common.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FlvghayGGXuaK4ao.html%3FLightsaberSkeleton%3Dsearch.mweb.common.static%22%7D%2C%7B%22name%22%3A%22search.mweb.common.no-page-shell.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FONEqt69ql9NLQdv.html%3FLightsaberSkeleton%3Dsearch.mweb.common.no-page-shell.wave-pulse%22%7D%2C%7B%22name%22%3A%22search.mweb.common.no-page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FCWkJJntRuCDfpvi.html%3FLightsaberSkeleton%3Dsearch.mweb.common.no-page-shell.static%22%7D%2C%7B%22name%22%3A%22search.mweb.common.no-page-shell.mobile-tags-fixed.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FIsDigow_pz_1NBa.html%3FLightsaberSkeleton%3Dsearch.mweb.common.no-page-shell.mobile-tags-fixed.wave-pulse%22%7D%2C%7B%22name%22%3A%22search.mweb.common.no-page-shell.mobile-tags-fixed.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FvgxQo-k3or1d10r.html%3FLightsaberSkeleton%3Dsearch.mweb.common.no-page-shell.mobile-tags-fixed.static%22%7D%2C%7B%22name%22%3A%22search.app.common.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FJCCAWXOhry0ndIH.html%3FLightsaberSkeleton%3Dsearch.app.common.wave-pulse%22%7D%2C%7B%22name%22%3A%22search.app.common.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FOvRtIj7oNsXBGuC.html%3FLightsaberSkeleton%3Dsearch.app.common.static%22%7D%2C%7B%22name%22%3A%22search.app.common.no-page-shell.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FoEklfwUyn51Sw4G.html%3FLightsaberSkeleton%3Dsearch.app.common.no-page-shell.wave-pulse%22%7D%2C%7B%22name%22%3A%22search.app.common.no-page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FxSvt_wlFW8zm8WE.html%3FLightsaberSkeleton%3Dsearch.app.common.no-page-shell.static%22%7D%2C%7B%22name%22%3A%22search.app.common.no-page-shell.mobile-tags-fixed.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FdnEqqk7aysrkqSa.html%3FLightsaberSkeleton%3Dsearch.app.common.no-page-shell.mobile-tags-fixed.wave-pulse%22%7D%2C%7B%22name%22%3A%22search.app.common.no-page-shell.mobile-tags-fixed.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F_NmI8WJtNTXsrsy.html%3FLightsaberSkeleton%3Dsearch.app.common.no-page-shell.mobile-tags-fixed.static%22%7D%2C%7B%22name%22%3A%22homepage.mweb.common.no-page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FE-vfiMHSX_a0U_p.html%3FLightsaberSkeleton%3Dhomepage.mweb.common.no-page-shell.static%22%7D%2C%7B%22name%22%3A%22homepage.mweb.common-halo.no-page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FC2-eWHo78N0TyOk.html%3FLightsaberSkeleton%3Dhomepage.mweb.common-halo.no-page-shell.static%22%7D%2C%7B%22name%22%3A%22homepage.app.common.no-page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FUYZ2JVA9UuadfrY.html%3FLightsaberSkeleton%3Dhomepage.app.common.no-page-shell.static%22%7D%2C%7B%22name%22%3A%22homepage.app.common.no-page-shell.redesign.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FXQdsXSjwMYwHFMb.html%3FLightsaberSkeleton%3Dhomepage.app.common.no-page-shell.redesign.static%22%7D%2C%7B%22name%22%3A%22dummy.nav.parameters.test.detail.mweb.common.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FsJPcamlxiLOVYVP.html%3FLightsaberSkeleton%3Ddummy.nav.parameters.test.detail.mweb.common.static%22%7D%2C%7B%22name%22%3A%22dummy.nav.parameters.test.detail.mweb.common.no-page-shell.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Fq5D5bHqPpr6EL80.html%3FLightsaberSkeleton%3Ddummy.nav.parameters.test.detail.mweb.common.no-page-shell.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.wave-vertical%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FD6bjwa5Xcx-NK_R.html%3FLightsaberSkeleton%3Ddetail.mweb.common.wave-vertical%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FGb4Q8R0SnQSmr8S.html%3FLightsaberSkeleton%3Ddetail.mweb.common.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.wave-horizontal%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Fhseo34Kll0yf8Uy.html%3FLightsaberSkeleton%3Ddetail.mweb.common.wave-horizontal%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Fkb81uf3D8RkhheG.html%3FLightsaberSkeleton%3Ddetail.mweb.common.static%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.no-page-shell.wave-vertical%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FgnQHMhzrBZwSZ84.html%3FLightsaberSkeleton%3Ddetail.mweb.common.no-page-shell.wave-vertical%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.no-page-shell.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FKAZNNWbsdyzksFI.html%3FLightsaberSkeleton%3Ddetail.mweb.common.no-page-shell.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.no-page-shell.wave-horizontal%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FgS-hDWdVxMr3DaP.html%3FLightsaberSkeleton%3Ddetail.mweb.common.no-page-shell.wave-horizontal%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.no-page-shell.t0-reset.wave-vertical%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FraqcgeQfebtHfwV.html%3FLightsaberSkeleton%3Ddetail.mweb.common.no-page-shell.t0-reset.wave-vertical%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.no-page-shell.t0-reset.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FSyGK8frQ0BArJat.html%3FLightsaberSkeleton%3Ddetail.mweb.common.no-page-shell.t0-reset.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.no-page-shell.t0-reset.wave-horizontal%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FHacDZk_YgDGsOjW.html%3FLightsaberSkeleton%3Ddetail.mweb.common.no-page-shell.t0-reset.wave-horizontal%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.no-page-shell.t0-reset.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FzWynm67r4o4qbmb.html%3FLightsaberSkeleton%3Ddetail.mweb.common.no-page-shell.t0-reset.static%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.no-page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Fvvh1-Qz0TpWU6k0.html%3FLightsaberSkeleton%3Ddetail.mweb.common.no-page-shell.static%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.V2.wave-vertical%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FLgu-feHIjMhVBAD.html%3FLightsaberSkeleton%3Ddetail.mweb.common.V2.wave-vertical%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.V2.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FOgtaJg5qVPZey4V.html%3FLightsaberSkeleton%3Ddetail.mweb.common.V2.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.V2.wave-horizontal%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Fli1wXcGDvgz2T7-.html%3FLightsaberSkeleton%3Ddetail.mweb.common.V2.wave-horizontal%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.V2.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FkdmT_8O1KNyYgjl.html%3FLightsaberSkeleton%3Ddetail.mweb.common.V2.static%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.V2.no-page-shell.wave-vertical%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FYP3TeU4Ua-DK_g1.html%3FLightsaberSkeleton%3Ddetail.mweb.common.V2.no-page-shell.wave-vertical%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.V2.no-page-shell.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FUIGPzj63w5AwlbN.html%3FLightsaberSkeleton%3Ddetail.mweb.common.V2.no-page-shell.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.V2.no-page-shell.wave-horizontal%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Fz503tbn4tuHAnrs.html%3FLightsaberSkeleton%3Ddetail.mweb.common.V2.no-page-shell.wave-horizontal%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.V2.no-page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F7eZi6Yq6Ur1FKIM.html%3FLightsaberSkeleton%3Ddetail.mweb.common.V2.no-page-shell.static%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.V2.no-page-shell.mobile-tags-fixed.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FyKWabPcwXKwjrGD.html%3FLightsaberSkeleton%3Ddetail.mweb.common.V2.no-page-shell.mobile-tags-fixed.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.V2.no-page-shell.mobile-tags-fixed.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FrzBMJMMx8NRryUe.html%3FLightsaberSkeleton%3Ddetail.mweb.common.V2.no-page-shell.mobile-tags-fixed.static%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.V2.no-page-shell.mobile-tags-fixed.move-nodes-title-meta-to-head.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F60wCOdRueCPHL5G.html%3FLightsaberSkeleton%3Ddetail.mweb.common.V2.no-page-shell.mobile-tags-fixed.move-nodes-title-meta-to-head.static%22%7D%2C%7B%22name%22%3A%22detail.mweb.common.V2.move-nodes-title-meta-to-head.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Fmgyp3Vjs6mGQ_Tz.html%3FLightsaberSkeleton%3Ddetail.mweb.common.V2.move-nodes-title-meta-to-head.static%22%7D%2C%7B%22name%22%3A%22detail.app.common.wave-vertical%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FQ05Ix-mHAA9T6Pd.html%3FLightsaberSkeleton%3Ddetail.app.common.wave-vertical%22%7D%2C%7B%22name%22%3A%22detail.app.common.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FRwWupx_E35jW2Sd.html%3FLightsaberSkeleton%3Ddetail.app.common.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.app.common.wave-horizontal%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FgMRGPT7envxr8Ea.html%3FLightsaberSkeleton%3Ddetail.app.common.wave-horizontal%22%7D%2C%7B%22name%22%3A%22detail.app.common.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Fa_TVHGDR3kz7IwK.html%3FLightsaberSkeleton%3Ddetail.app.common.static%22%7D%2C%7B%22name%22%3A%22detail.app.common.no-page-shell.wave-vertical%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Fo9YFaaSZatxufu6.html%3FLightsaberSkeleton%3Ddetail.app.common.no-page-shell.wave-vertical%22%7D%2C%7B%22name%22%3A%22detail.app.common.no-page-shell.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FmoLnY-Un_5pN9Lr.html%3FLightsaberSkeleton%3Ddetail.app.common.no-page-shell.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.app.common.no-page-shell.wave-horizontal%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FCjdZ0QMJS004L_b.html%3FLightsaberSkeleton%3Ddetail.app.common.no-page-shell.wave-horizontal%22%7D%2C%7B%22name%22%3A%22detail.app.common.no-page-shell.t0-reset.wave-vertical%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FTrgi0aceBZtyJIA.html%3FLightsaberSkeleton%3Ddetail.app.common.no-page-shell.t0-reset.wave-vertical%22%7D%2C%7B%22name%22%3A%22detail.app.common.no-page-shell.t0-reset.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FluUaUYbPdA34LRH.html%3FLightsaberSkeleton%3Ddetail.app.common.no-page-shell.t0-reset.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.app.common.no-page-shell.t0-reset.wave-horizontal%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Fhf3nQ_Xr9UHSN8l.html%3FLightsaberSkeleton%3Ddetail.app.common.no-page-shell.t0-reset.wave-horizontal%22%7D%2C%7B%22name%22%3A%22detail.app.common.no-page-shell.t0-reset.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FbXlphlMxNitUk8C.html%3FLightsaberSkeleton%3Ddetail.app.common.no-page-shell.t0-reset.static%22%7D%2C%7B%22name%22%3A%22detail.app.common.no-page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FNfywmaghBlUzEfN.html%3FLightsaberSkeleton%3Ddetail.app.common.no-page-shell.static%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.wave-vertical%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FZpLsUWTs3BjWSQS.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.wave-vertical%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FOGU-KmJ8HjFilnI.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.wave-horizontal%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F1i9r141AuTfTnoG.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.wave-horizontal%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FiZgVCSyET3H3U3D.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.static%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.no-page-shell.wave-vertical%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Fv0sENMuqiMG1oDC.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.no-page-shell.wave-vertical%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.no-page-shell.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FijBMuF_vOyNgaL6.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.no-page-shell.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.no-page-shell.wave-horizontal%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Fj6DlbJyHA4UiH36.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.no-page-shell.wave-horizontal%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.no-page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FULu0J9ER5WntC-R.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.no-page-shell.static%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.no-page-shell.mobile-tags-fixed.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F69_gwTBbzGjb_oI.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.no-page-shell.mobile-tags-fixed.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.no-page-shell.mobile-tags-fixed.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FhU_OaOZLqK3y66b.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.no-page-shell.mobile-tags-fixed.static%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.no-page-shell.mobile-tags-fixed.move-nodes-title-meta-to-head.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FtWdp4R2nDEdGLlH.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.no-page-shell.mobile-tags-fixed.move-nodes-title-meta-to-head.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.no-page-shell.mobile-tags-fixed.move-nodes-title-meta-to-head.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F2NISzEbR5gGTiyE.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.no-page-shell.mobile-tags-fixed.move-nodes-title-meta-to-head.static%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.no-page-shell.mobile-tags-fixed.bb-move-nodes-title-meta-to-head.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F2gP7fjkb1aHKz-v.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.no-page-shell.mobile-tags-fixed.bb-move-nodes-title-meta-to-head.static%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.move-nodes-title-meta-to-head.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Fj7qMw1ywSUuqB6F.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.move-nodes-title-meta-to-head.wave-pulse%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.move-nodes-title-meta-to-head.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F_3tLpwKhh0FuAIo.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.move-nodes-title-meta-to-head.static%22%7D%2C%7B%22name%22%3A%22detail.app.common.V2.bb-move-nodes-title-meta-to-head.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FAuC5fSCq62iudtc.html%3FLightsaberSkeleton%3Ddetail.app.common.V2.bb-move-nodes-title-meta-to-head.static%22%7D%2C%7B%22name%22%3A%22detail-inline.app.common.partial-skl%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FaP4U-dMkhx9yDcr.html%3FLightsaberSkeleton%3Ddetail-inline.app.common.partial-skl%22%7D%2C%7B%22name%22%3A%22detail-inline.app.common.no-skl%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FgkEXRwkU9TUJXy-.html%3FLightsaberSkeleton%3Ddetail-inline.app.common.no-skl%22%7D%2C%7B%22name%22%3A%22detail-inline.app.common.no-page-shell.partial-skl%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F3pRtpXjQdKnQqHS.html%3FLightsaberSkeleton%3Ddetail-inline.app.common.no-page-shell.partial-skl%22%7D%2C%7B%22name%22%3A%22detail-inline.app.common.no-page-shell.no-skl%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FOyFDHjFdBoeiwfE.html%3FLightsaberSkeleton%3Ddetail-inline.app.common.no-page-shell.no-skl%22%7D%2C%7B%22name%22%3A%22detail-inline.app.common.no-page-shell.full-skl%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FezbnmDKzZKQrOC2.html%3FLightsaberSkeleton%3Ddetail-inline.app.common.no-page-shell.full-skl%22%7D%2C%7B%22name%22%3A%22detail-inline.app.common.full-skl%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FnuPop6KldM_FB4e.html%3FLightsaberSkeleton%3Ddetail-inline.app.common.full-skl%22%7D%2C%7B%22name%22%3A%22checkout.mweb.common.no-page-shell.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FuvP6DfAW9qTpAaq.html%3FLightsaberSkeleton%3Dcheckout.mweb.common.no-page-shell.wave-pulse%22%7D%2C%7B%22name%22%3A%22checkout.mweb.common.no-page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FUrqGZzwQIDVBcNy.html%3FLightsaberSkeleton%3Dcheckout.mweb.common.no-page-shell.static%22%7D%2C%7B%22name%22%3A%22checkout.mweb.common.no-page-shell.static-aui%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FGGcHC2kpsWEiZkY.html%3FLightsaberSkeleton%3Dcheckout.mweb.common.no-page-shell.static-aui%22%7D%2C%7B%22name%22%3A%22checkout.mweb.common.no-page-shell.spinner%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F99EURctDu4ZpuaC.html%3FLightsaberSkeleton%3Dcheckout.mweb.common.no-page-shell.spinner%22%7D%2C%7B%22name%22%3A%22checkout.app.common.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F8UtIodmjGhUMVG1.html%3FLightsaberSkeleton%3Dcheckout.app.common.wave-pulse%22%7D%2C%7B%22name%22%3A%22checkout.app.common.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FmRw-xh27FX4rf3W.html%3FLightsaberSkeleton%3Dcheckout.app.common.static%22%7D%2C%7B%22name%22%3A%22checkout.app.common.static-aui%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FnHdIa7bNvrE_x-Z.html%3FLightsaberSkeleton%3Dcheckout.app.common.static-aui%22%7D%2C%7B%22name%22%3A%22checkout.app.common.spinner%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Ft9DblYS-wkWxnb-.html%3FLightsaberSkeleton%3Dcheckout.app.common.spinner%22%7D%2C%7B%22name%22%3A%22checkout.app.common.no-page-shell.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FtGy5jcIPubjN426.html%3FLightsaberSkeleton%3Dcheckout.app.common.no-page-shell.wave-pulse%22%7D%2C%7B%22name%22%3A%22checkout.app.common.no-page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2Fz3UAbmKKjC-keGE.html%3FLightsaberSkeleton%3Dcheckout.app.common.no-page-shell.static%22%7D%2C%7B%22name%22%3A%22checkout.app.common.no-page-shell.static-aui%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FXq_sQWHidp7E39v.html%3FLightsaberSkeleton%3Dcheckout.app.common.no-page-shell.static-aui%22%7D%2C%7B%22name%22%3A%22checkout.app.common.no-page-shell.spinner%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FAfgWksVAcfWddnI.html%3FLightsaberSkeleton%3Dcheckout.app.common.no-page-shell.spinner%22%7D%2C%7B%22name%22%3A%22cart.mweb.common.page-shell.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FwHxE53ncZbnMgWF.html%3FLightsaberSkeleton%3Dcart.mweb.common.page-shell.wave-pulse%22%7D%2C%7B%22name%22%3A%22cart.mweb.common.page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FZgmVP_9W0zwt5gl.html%3FLightsaberSkeleton%3Dcart.mweb.common.page-shell.static%22%7D%2C%7B%22name%22%3A%22cart.mweb.common.no-page-shell.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FVH_vXyQ1TYFOOGt.html%3FLightsaberSkeleton%3Dcart.mweb.common.no-page-shell.wave-pulse%22%7D%2C%7B%22name%22%3A%22cart.mweb.common.no-page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FmxHxRqxke0M_Zad.html%3FLightsaberSkeleton%3Dcart.mweb.common.no-page-shell.static%22%7D%2C%7B%22name%22%3A%22cart.app.common.page-shell.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FBdFccgNeEEOgeW-.html%3FLightsaberSkeleton%3Dcart.app.common.page-shell.wave-pulse%22%7D%2C%7B%22name%22%3A%22cart.app.common.page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F-IuCcmIX9ZYjYMb.html%3FLightsaberSkeleton%3Dcart.app.common.page-shell.static%22%7D%2C%7B%22name%22%3A%22cart.app.common.no-page-shell.wave-pulse%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2F5bKC3yH6hbzDj4z.html%3FLightsaberSkeleton%3Dcart.app.common.no-page-shell.wave-pulse%22%7D%2C%7B%22name%22%3A%22cart.app.common.no-page-shell.static%22%2C%22url%22%3A%22https%3A%2F%2Fm.media-amazon.com%2Fimages%2FS%2Fsash%2FmJIyfivN6fsEXFy.html%3FLightsaberSkeleton%3Dcart.app.common.no-page-shell.static%22%7D%5D"))}catch(g){d=
[]}return{contentFragments:(this&&this.__spreadArray||function(d,b,e){if(e||2===arguments.length)for(var a=0,f=b.length,c;a<f;a++)!c&&a in b||(c||(c=Array.prototype.slice.call(b,0,a)),c[a]=b[a]);return d.concat(c||Array.prototype.slice.call(b))})([],d,!0)}}();LightsaberConfiguration.register(e)})();'use strict';(function(){LightsaberConfiguration.register({caches:[{name:"RenderingHintsDelegate",version:1,plugins:["MaxAge","ValidationKeys","Metadata"]},{name:"RenderingHintsAsinAttributes",version:1,plugins:["MaxAge","Metadata"],dontAutoEvictOnCustomerContextChange:!0}],renderingHintsDelegates:[{name:"detail-page",properties:{wdgLandingImageCacheName:"RenderingHintsDelegate",wdgLandingImageCacheKey:"detail-page/wdg-landing-image",wdgLandingImageMaxAge:604800,wdgLandingImageStoreLimit:500,asinAttributeCacheName:"RenderingHintsAsinAttributes",
asinAttributeCacheKey:"asin-attribute-cache",asinAttributeMaxAge:63072E4,asinAttributeStoreLimit:5E3,navigationContentHintStoreLimit:500}}]})})();'use strict';(function(){LightsaberConfiguration.register({cachePopulationRules:[void 0],navigationResponseRules:[void 0]})})();'use strict';(function(){LightsaberConfiguration.register({cachePopulationRules:[void 0],navigationResponseRules:[void 0]})})();'use strict';(function(){LightsaberConfiguration.register({cachePopulationRules:[void 0],navigationResponseRules:[void 0]})})();'use strict';(function(){LightsaberConfiguration.register({cachePopulationRules:[void 0],navigationResponseRules:[void 0]})})();'use strict';(function(){LightsaberConfiguration.register({cachePopulationRules:[void 0],navigationResponseRules:[void 0]})})();'use strict';(function(){LightsaberConfiguration.register({cachePopulationRules:[void 0],navigationResponseRules:[void 0]})})();'use strict';(function(){LightsaberConfiguration.register({cachePopulationRules:[void 0],navigationResponseRules:[void 0]})})();'use strict';(function(){LightsaberConfiguration.register({cachePopulationRules:[void 0],navigationResponseRules:[void 0]})})();'use strict';(function(){LightsaberConfiguration.register({cachePopulationRules:[void 0],navigationResponseRules:[void 0]})})();'use strict';(function(){LightsaberConfiguration.register({cachePopulationRules:[void 0],navigationResponseRules:[void 0]})})();var AUI_JS_DEBUG=!1;(function(a){a.init=function(){}})(this.LightsaberShadow=this.LightsaberShadow||{});(function(){})();var WPN_CL_PNAFV="AmazonWebPushNotificationsClientLib-1.0.7001.0",AUI_JS_DEBUG=!1;(function(a){a.init=function(a){}})(this.WebPushNotifications=this.WebPushNotifications||{});var AUI_JS_DEBUG=!1;
(function(){function t(e,f){var c=e;"boolean"===typeof e&&e!==f&&(c=void 0);k("Caching navigation preload state: ".concat(c));self.amzSwConfig=self.amzSwConfig||{};self.amzSwConfig.navigationPreload=self.amzSwConfig.navigationPreload||{};self.amzSwConfig.navigationPreload.enabled=c}var w=this&&this.__extends||function(){var e=function(f,c){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&
(c[e]=d[e])};return e(f,c)};return function(f,c){function h(){this.constructor=f}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");e(f,c);f.prototype=null===c?Object.create(c):(h.prototype=c.prototype,new h)}}(),x=this&&this.__awaiter||function(e,f,c,h){function d(d){return d instanceof c?d:new c(function(c){c(d)})}return new (c||(c=Promise))(function(c,g){function a(a){try{b(h.next(a))}catch(m){g(m)}}function l(a){try{b(h["throw"](a))}catch(m){g(m)}}
function b(b){b.done?c(b.value):d(b.value).then(a,l)}b((h=h.apply(e,f||[])).next())})},y=this&&this.__generator||function(e,f){function c(b){return function(a){return h([b,a])}}function h(b){if(l)throw new TypeError("Generator is already executing.");for(;d;)try{if(l=1,g&&(a=b[0]&2?g["return"]:b[0]?g["throw"]||((a=g["return"])&&a.call(g),0):g.next)&&!(a=a.call(g,b[1])).done)return a;if(g=0,a)b=[b[0]&2,a.value];switch(b[0]){case 0:case 1:a=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++;
g=b[1];b=[0];continue;case 7:b=d.ops.pop();d.trys.pop();continue;default:if(!(a=d.trys,a=0<a.length&&a[a.length-1])&&(6===b[0]||2===b[0])){d=0;continue}if(3===b[0]&&(!a||b[1]>a[0]&&b[1]<a[3]))d.label=b[1];else if(6===b[0]&&d.label<a[1])d.label=a[1],a=b;else if(a&&d.label<a[2])d.label=a[2],d.ops.push(b);else{a[2]&&d.ops.pop();d.trys.pop();continue}}b=f.call(e,d)}catch(p){b=[6,p],g=0}finally{l=a=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}var d={label:0,sent:function(){if(a[0]&1)throw a[1];
return a[1]},trys:[],ops:[]},l,g,a,r;return r={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},k=function(e){AUI_JS_DEBUG&&console.log("[SW] ".concat(e))};(function(e){function f(c){c=e.call(this,c)||this;Object.setPrototypeOf(c,f.prototype);return c}w(f,e);return f})(Error);var z=function(e){return self.amzSwConfig&&self.amzSwConfig.hasOwnProperty(e)?self.amzSwConfig[e]:{}},A=function(e,f){return x(void 0,void 0,void 0,function(){var c,
h;return y(this,function(d){k("Attempting Navigation Preload Manager...");c=e.preloadResponse;h=z("navigationPreload").enabled;return c&&!1!==h?[2,c.then(function(c){if(c)return k("Using Preload Response..."),c;k("Received empty preload response, calling fallback handler");return f()}).catch(f)]:[2,f()]})})},B=this&&this.__awaiter||function(e,f,c,h){function d(d){return d instanceof c?d:new c(function(c){c(d)})}return new (c||(c=Promise))(function(c,g){function a(a){try{b(h.next(a))}catch(m){g(m)}}
function l(a){try{b(h["throw"](a))}catch(m){g(m)}}function b(b){b.done?c(b.value):d(b.value).then(a,l)}b((h=h.apply(e,f||[])).next())})},C=this&&this.__generator||function(e,f){function c(a){return function(b){return h([a,b])}}function h(b){if(l)throw new TypeError("Generator is already executing.");for(;d;)try{if(l=1,g&&(a=b[0]&2?g["return"]:b[0]?g["throw"]||((a=g["return"])&&a.call(g),0):g.next)&&!(a=a.call(g,b[1])).done)return a;if(g=0,a)b=[b[0]&2,a.value];switch(b[0]){case 0:case 1:a=b;break;
case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++;g=b[1];b=[0];continue;case 7:b=d.ops.pop();d.trys.pop();continue;default:if(!(a=d.trys,a=0<a.length&&a[a.length-1])&&(6===b[0]||2===b[0])){d=0;continue}if(3===b[0]&&(!a||b[1]>a[0]&&b[1]<a[3]))d.label=b[1];else if(6===b[0]&&d.label<a[1])d.label=a[1],a=b;else if(a&&d.label<a[2])d.label=a[2],d.ops.push(b);else{a[2]&&d.ops.pop();d.trys.pop();continue}}b=f.call(e,d)}catch(p){b=[6,p],g=0}finally{l=a=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:
void 0,done:!0}}var d={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},l,g,a,k;return k={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},n;(function(e){var f=this;e.cacheNavigationPreloadState=function(c){return B(f,void 0,void 0,function(){return C(this,function(e){return[2,new Promise(function(d,e){var f=self.registration.navigationPreload;f&&"function"===typeof f.getState&&f.getState()instanceof Promise?
f.getState().then(function(a){t(a.enabled,c);d()}).catch(function(a){k("Caching navigation preload state failed");t(void 0,c);e(a)}):e(Error("Unsupported nav preload API"))})]})})};e.logNavigationPreloadStateUpdateFailure=function(){self.$TM&&"function"===typeof self.$TM.count&&self.$TM.count("sw:np:state:failure")}})(n||(n={}));var u=this&&this.__awaiter||function(e,f,c,h){function d(d){return d instanceof c?d:new c(function(c){c(d)})}return new (c||(c=Promise))(function(c,g){function a(a){try{b(h.next(a))}catch(m){g(m)}}
function l(a){try{b(h["throw"](a))}catch(m){g(m)}}function b(b){b.done?c(b.value):d(b.value).then(a,l)}b((h=h.apply(e,f||[])).next())})},v=this&&this.__generator||function(e,f){function c(a){return function(b){return h([a,b])}}function h(b){if(l)throw new TypeError("Generator is already executing.");for(;d;)try{if(l=1,g&&(a=b[0]&2?g["return"]:b[0]?g["throw"]||((a=g["return"])&&a.call(g),0):g.next)&&!(a=a.call(g,b[1])).done)return a;if(g=0,a)b=[b[0]&2,a.value];switch(b[0]){case 0:case 1:a=b;break;
case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++;g=b[1];b=[0];continue;case 7:b=d.ops.pop();d.trys.pop();continue;default:if(!(a=d.trys,a=0<a.length&&a[a.length-1])&&(6===b[0]||2===b[0])){d=0;continue}if(3===b[0]&&(!a||b[1]>a[0]&&b[1]<a[3]))d.label=b[1];else if(6===b[0]&&d.label<a[1])d.label=a[1],a=b;else if(a&&d.label<a[2])d.label=a[2],d.ops.push(b);else{a[2]&&d.ops.pop();d.trys.pop();continue}}b=f.call(e,d)}catch(p){b=[6,p],g=0}finally{l=a=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:
void 0,done:!0}}var d={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},l,g,a,k;return k={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},D=function(e){return u(void 0,void 0,void 0,function(){var f;return v(this,function(c){return(f=self.registration.navigationPreload)?[2,(e?f.enable():f.disable()).then(function(){return n.cacheNavigationPreloadState(e).catch(function(){return Promise.resolve()})}).catch(function(c){k("Error setting nav preload: ".concat(c));
n.logNavigationPreloadStateUpdateFailure()})]:[2,Promise.resolve()]})})},E=function(e){e=e.request;var f=e.method;return"navigate"===e.mode&&"GET"===f},F=function(e){E(e)&&e.respondWith(A(e,function(){return u(void 0,void 0,void 0,function(){return v(this,function(f){k("Falling back to normal fetch");return[2,fetch(e.request)]})})}))},G=function(e){var f=new Promise(function(c){var e="".concat("np:","unsupp");if(self.registration.navigationPreload)if("function"!==typeof self.registration.navigationPreload.getState)c(["".concat(e,
":gs")]);else{var d=self.registration.navigationPreload.getState();d instanceof Promise?d.then(function(d){c(["".concat("np:","enabled:").concat(d.enabled)])}).catch(function(){c(["".concat("np:","err:gs")])}):c(["".concat(e,":gs")])}else c([e])});e.detail.callback(f)},q=this&&this.__assign||function(){q=Object.assign||function(e){for(var f,c=1,h=arguments.length;c<h;c++){f=arguments[c];for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(e[d]=f[d])}return e};return q.apply(this,arguments)},
H={shouldEnableNavPreload:!0,allowsFetchHandler:!0},I=function(e){return q(q({},H),e)},J=function(e,f,c,h){var d=[],l=!0;f=new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:{clientId:f,callback:function(a){l&&d.push(a)}}});k("Dispatching feature custom event");self.dispatchEvent(f);l=!1;var g=d.length,a=0;d.forEach(function(d){d.then(function(b){k("Received feature data for event ".concat(e,": ").concat(b));a++;c(b,g===a)}).catch(function(b){k("Error while generating data for event ".concat(e,": ").concat(b));
a++;h(g===a)})})};(function(){if(!ServiceWorkerTelemetry||"function"!==typeof ServiceWorkerTelemetry.init)return k("Could not initialize the ServiceWorkerTelemetry client!"),!1;if(!ServiceWorkerTelemetryConfiguration||!ServiceWorkerTelemetryConfiguration.foresterConfig)return k("Failed to initialize ServiceWorkerTelementryConfiguration, either library is missing or forester config is not present"),!1;ServiceWorkerTelemetry.init({swGlobal:self,foresterConfig:ServiceWorkerTelemetryConfiguration.foresterConfig});
return!0})();self.addEventListener("install",function(e){k("Installed");e.waitUntil(self.skipWaiting())});self.addEventListener("activate",function(e){k("Activated");e.waitUntil(self.clients.claim())});(function(){if(!Lightsaber||"function"!==typeof Lightsaber.init)return k("Lightsaber init failed: Client library missing!"),!1;if(!LightsaberConfiguration||"function"!==typeof LightsaberConfiguration.getConfig)return k("Lightsaber init failed: Client configuration missing!"),!1;Lightsaber.init({configuration:LightsaberConfiguration.getConfig()});
return!0})();(function(e){var f=I(e);self.addEventListener("activate",function(c){c.waitUntil(D(f.shouldEnableNavPreload))});e.needsFetchHandler&&f.allowsFetchHandler&&self.addEventListener("fetch",F);self.addEventListener("aui-sw:page-proxy:feature-tags:request",G);n.cacheNavigationPreloadState(f.shouldEnableNavPreload).catch(function(){n.logNavigationPreloadStateUpdateFailure()});return!0})({needsFetchHandler:!0});self.addEventListener("message",function(e){if(e.origin!==self.location.origin)k("Untrusted origin not allowed");
else{var f=e.source;if(f instanceof WindowClient&&"string"===typeof f.id){var c=e.data;if(null!==c&&"object"===typeof c&&"page_proxy"===c.feature)switch(c.command){case "request_feature_tags":k("Start feature tags request"),J("aui-sw:page-proxy:feature-tags:request",f.id,function(f,d){var h=e.ports;f={feature:c.feature,command:c.command,ok:!0,statusCode:"success",done:d,data:f};h&&h[0]&&h[0].postMessage(f)},function(f){var d=e.ports;f={feature:c.feature,command:c.command,ok:!1,statusCode:"failure",
done:f,data:void 0};d&&d[0]&&d[0].postMessage(f)})}}}});(function(){var e=!1;self.addEventListener("aui-sw:page-proxy:feature-tags:request",function(f){f=f.detail.callback;var c=["".concat("page_proxy:","active")];e||(c.push("".concat("page_proxy:","sw-start")),e=!0);f(Promise.resolve(c))})})()})();