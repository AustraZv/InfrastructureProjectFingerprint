var currentTitle,currentDuration,currentRating,currentThumb,vKeyAddVideo,menuPosition,createPlaylistModal,menu=null,playlistMenu=document.querySelector(".playlist-option-menu"),playlist_menu_fading=!1,thumbScroll=0,showOverlay=function(e){var e=e.target||e.srcElement,t=e.querySelector(".linkWrapper"),s=e.querySelector(".add-to-playlist-icon"),a=e.querySelector(".not-interested-button"),i=t&&t.querySelector(".playAllLink"),n=t&&t.querySelector(".viewPlaylistLink");t&&(MG_Utils.addClass(t.querySelector(".borderLink"),"hoverPL"),i&&(i.style.display="block"),n)&&(n.style.display="block"),s&&!MG_Utils.closest(e,".innerHeaderSubMenu")&&"false"==disablePlaylistPlusButon&&MG_Utils.removeClass(s,"display-none"),(menuPosition=menu?MG_Utils.offset(menu).left:null)&&0<menuPosition&&(MG_Utils.hasClass(menu,"display-none")||MG_Utils.addClass(menu,"display-none"),activePlaylists()),a&&(MG_Utils.removeClass(a.parentNode,"display-none"),MG_Utils.addClass(a,"active"))},hideOverlay=function(e,t){function s(){!l||MG_Utils.closest(n,".innerHeaderSubMenu")||MG_Utils.hasClass(l.parentNode,"display-none")||(MG_Utils.addClass(l.parentNode,"display-none"),MG_Utils.removeClass(l,"active")),r&&!MG_Utils.hasClass(r.parentNode,"display-none")&&(MG_Utils.addClass(r.parentNode,"display-none"),MG_Utils.removeClass(r,"active")),o&&(MG_Utils.removeClass(o.querySelector(".borderLink"),"hoverPL"),c&&(c.style.display="none"),u)&&(u.style.display="none")}function a(){menu&&(MG_Utils.hasClass(menu,"display-none")||MG_Utils.addClass(menu,"display-none"),activePlaylists()),MG_Utils.hasClass(n.parentNode,"active")&&MG_Utils.removeClass(n.parentNode,"active")}var i,n=e.target||e.srcElement,l=n.querySelector(".open-playlist-link"),o=n.querySelector(".linkWrapper"),r=n.querySelector(".not-interested-button"),d=menu?MG_Utils.offset(menu).left:null,c=o&&o.querySelector(".playAllLink"),u=o&&o.querySelector(".viewPlaylistLink");void 0===t&&(t=e.clientX,i=document.elementFromPoint(t,e.clientY));menu&&!MG_Utils.closest(n,".innerHeaderSubMenu")&&0<d?i&&(MG_Utils.hasClass(i.parentNode,"add-to-playlist-menu")||MG_Utils.closest(i,".add-to-playlist-menu"))?menu.addEventListener("mouseleave",function(e){s(),a()}):i&&!MG_Utils.hasClass(i.parentNode,"add-to-playlist-menu")&&(s(),a()):s()},addToSubmenu=function(t){var e,s=t.target||t.srcElement;playlist_menu_fading=clearTimeout(playlist_menu_fading)&&!1,MG_Utils.hasClass(s,"open-playlist-link")&&(vKeyAddVideo=s.getAttribute("data-video-id"),currentTitle=MG_Utils.nextElementSibling(s.parentNode).querySelector("a").innerHTML,currentDuration=s.parentNode.parentNode.querySelector(".marker-overlays").querySelector(".duration").innerHTML,currentRating=MG_Utils.nextElementSibling(s.parentNode).querySelector(".value")?parseInt(MG_Utils.nextElementSibling(s.parentNode).querySelector(".value").innerHTML)/20:"",currentThumb=MG_Utils.previousElementSibling(s.parentNode).querySelector("img")&&MG_Utils.previousElementSibling(s.parentNode).querySelector("img").getAttribute("data-smallthumb")?MG_Utils.previousElementSibling(s.parentNode).querySelector("img").getAttribute("data-smallthumb"):"",menu||(addToPlayListComponent.create(),addToPlayListComponent.initialize(),menu=document.querySelector(".add-to-playlist-menu")),menu.querySelector(".custom-playlist")&&menu.querySelector(".custom-playlist").querySelectorAll("li").length&&(menu.querySelector("#scrollParent").style.borderBottom="1px solid #313131"),hideShowMenu(s,menu),MG_Utils.hasClass(menu,"fadeOut")&&MG_Utils.removeClass(menu,"fadeOut"),thumbScroll||(MG_Scroll.init({selector:document.querySelectorAll("#scrollThumbs"),height:"auto",color:"#7d7c7c",size:"7px",alwaysVisible:!0,railVisible:!0,railOpacity:1,railColor:"#222",distance:0,opacity:1,railClass:"track4",barClass:"handle4",wrapperClass:"wrapper4"}),thumbScroll=1)),MG_Utils.hasClass(s,"not-interested-button")&&(e=s.getAttribute("data-url"),s={id:s.getAttribute("data-video-id"),value:0,token:s.getAttribute("data-token"),type:s.getAttribute("data-type")},$j.ajax({type:"POST",url:e,data:s,success:function(e){successCallback(e,t)},error:errorCallback}))},addToPlayListComponent={create:function(){var e=document.createElement("custom-add-to-playlist-menu");document.body.insertAdjacentElement("afterbegin",e)},initialize:function(){Vue.customElement("custom-add-to-playlist-menu",{computed:{translatedText:function(){return TRANSLATED_MESSAGE},isLoggedIn:function(){return WIDGET_PLAYLIST_HEADER.isLoggedIn},isLovers:function(){return WIDGET_PLAYLIST_HEADER.isLovers},hasVerifiedEmail:function(){return WIDGET_PLAYLIST_HEADER.hasVerifiedEmail},confirmEmailUrl:function(){return WIDGET_PLAYLIST_HEADER.confirmEmailUrl}},methods:{signIn:function(){event.preventDefault(),signinbox.show({head:"playlist"}),"undefined"!=typeof userClogTracking&&userClogTracking(currentDomain,"login-open",originPart,originUrl,"add-to-playlist",""),updateClogTracking("add-to-playlist")},watchLater:function(){"function"==typeof addToWatchLater&&addToWatchLater(event)},addToLovers:function(){"function"==typeof addToLoversPlaylist&&addToLoversPlaylist(event)},addToPlaylistClick:function(){"function"==typeof addToCustomPL&&addToCustomPL(event)},createNewPlaylist:function(){event.preventDefault(),void 0!==createPlaylistModalComponent&&createPlaylistModalComponent.open(function(){dropdown.init("#playlist-form .privacySelector"),MG_Utils.limit(document.querySelectorAll("#new-playlist-description"),{limit:1e3})})}},mounted:function(){"function"==typeof playlistAppend&&playlistAppend()},template:`<div class="add-to-playlist-menu display-none" :class="{'not-verified': !hasVerifiedEmail}">
                    <div v-if="isLoggedIn" class="signin">
                        <a href="" @click="signIn">{{translatedText.signIn}}</a>{{translatedText.signInToAdd}}
                    </div>
                    <div v-if="!isLoggedIn && hasVerifiedEmail" class="playlist-menu-addTo">
                        <span>{{translatedText.addToPlaylist}}</span>
                    </div>
                    <div v-if="!isLoggedIn && hasVerifiedEmail" class="playlist-list">
                        <div class="quicklick">
                            <a href="" class="watchlater-add" data-type="watchlater" data-video-id="" @click="watchLater">{{translatedText.watchLater}}</a>
                        </div>
                        <div id="scrollParent">
                            <div id="scrollThumbs" class="blockPageScroll">
                                <ul id="addToPlaylist" class="custom-playlist" @click="addToPlaylistClick">
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div v-if="!isLoggedIn && hasVerifiedEmail" class="playlist-menu-createNew">
                        <a href="" class="createPlaylistModalTrigger" @click="createNewPlaylist">{{translatedText.createPlaylist}}</a>
                    </div>
                    <div v-if="!isLoggedIn && !hasVerifiedEmail" class="signin">
                        <a :href="confirmEmailUrl">{{translatedText.verifyYourEmail}}</a>{{translatedText.toCreatePlaylists}}
                    </div>
                </div>`})}},createPlaylistModalComponent={open:function(e){var t;void 0===createPlaylistModal&&WIDGET_PLAYLIST_HEADER.showCreatePlaylistModal&&(t=document.createElement("v-create-playlist-modal"),document.body.insertAdjacentElement("afterbegin",t),Vue.customElement("v-create-playlist-modal",{computed:{translatedText:function(){return TRANSLATED_MESSAGE}},mounted:function(){var e=document.getElementById("create-playlist-modal");e&&(createPlaylistModal=new MG_Modal({content:e,className:"createPlaylistContainer"}))},template:'<div id="create-playlist-modal" class="modalWrapper"><div class="playlist-modal"><div class="modal-title">{{translatedText.newPlaylist}}</div><div id="MHP1138-playlist-form"><form autocomplete="off"><div class="error displayNone">{{translatedText.reqInfoError}}</div><label for="MHP1138-new-playlist-title">{{translatedText.title}}</label><input type="text" name="title" id="MHP1138-new-playlist-title" maxlength="35"><div id="tagListBlockModal"><label for="addTagInputModal">{{translatedText.addTagsPlaceHolder}}</label><div class="inputHolder"><input class="js-addTagInputModal" id="addTagInputModal" type="text" /><input type="hidden" id="js-tagsListModal"/><button class="js-addTagModal buttonBase orangeButton" id="addTagModal">{{translatedText.addTag}}</button></div><div id="tagErrorDisplayModal"></div><ul id="tagListModal" class="tagsHolder"></ul></div><label class="new-playlist-description" for="MHP1138-new-playlist-description">{{translatedText.description}}</label><br><textarea name="description" rows="20" cols="20" id="MHP1138-new-playlist-description"></textarea><label for="MHP1138-new-playlist-privacy">{{translatedText.privacy}}</label><div class="filters privacySelector" id="MHP1138-new-playlist-privacy"><div class="dropdownTrigger"><div><span class="textFilter">{{translatedText.publicTxt}}</span><span class="arrowFilters"></span></div><ul class="filterListItem dropdownWrapper"><li data-value="public" class="active"><span>{{translatedText.publicTxt}}</span></li><li data-value="private"><span>{{translatedText.privateTxt}}</span></li></ul></div><input type="hidden"></div><div class="modal-footer clearfix"><input type="submit" name="submit" :value="translatedText.save" id="MHP1138-add-playlist" class="submit-button buttonBase orangeButton"><a class="buttonBase greyButton cancelButton clearModalPlaylist" data-modal="createPlaylist">{{translatedText.cancel}}</a></div></form></div></div></div>'}),document.addEventListener("click",function(e){e.target&&MG_Utils.hasClass(e.target,"clearModalPlaylist")&&"function"==typeof clearModalPlaylist&&clearModalPlaylist()})),void 0!==createPlaylistModal&&("function"==typeof e?createPlaylistModal.openModal(e):createPlaylistModal.openModal())}},SubscriptionRegistry={state:{},set(e,t,s=null){this.state[e]=t,window.dispatchEvent(new CustomEvent("subscription-changed",{detail:{id:e,value:t,source:s}}))},get(e){return e in this.state?this.state[e]:null}};let MoreActionMenuComponent={init:function(){Vue.customElement("v-more-action-menu",{props:{id:{type:Number,required:!0},canAddToPlaylist:{type:String,required:!0},addedToPlaylist:{type:String,required:!0},isPrivateMember:{type:String,required:!0},isBlocked:{type:String,required:!0},isPornhub:{type:String,required:!0},isChannel:{type:String,required:!0},isContentPartner:{type:String,required:!0},isSubscribed:{type:String,required:!0},subscribeId:{type:String,required:!0},title:{type:String,required:!0}},data(){return{localIsSubscribed:this.isSubscribed}},computed:{addToPlayListLabel:function(){return"1"===this.addedToPlaylist?actionMenuTranslations.removeWatchLater:actionMenuTranslations.addToWatchLater},subscribeToLabel:function(){return this.boolIsSubscribed?actionMenuTranslations.unSubscribeToMsg+" "+this.title:actionMenuTranslations.subscribeToMsg+" "+this.title},notInterestedLabel:function(){return actionMenuTranslations.notInterested},gtmDataEvent:function(){return"undefined"!=typeof actionMenuOriginPage?"action_menu_"+actionMenuOriginPage:""},boolIsSubscribed:function(){return Boolean(parseInt(this.localIsSubscribed))}},mounted(){window.addEventListener("subscription-changed",e=>{var{id:e,value:t,source:s}=e.detail;e===this.subscribeId&&s!==this.$el&&this.updateSubscribeLink(t)})},methods:{updateClog:function(e){updateClogTracking(e)},handleSubscribeClick(){var e=SubscriptionRegistry.get(this.subscribeId)??this.isSubscribed;SubscriptionRegistry.set(this.subscribeId,"1"===e?"0":"1",this.$el),this.updateClog("subscribe"),window.addEventListener("forceUpdateProperty",this.forceUpdateProperty)},updateSubscribeLink(e){this.localIsSubscribed=e},forceUpdateProperty(e){e.detail?.property&&e.detail?.value&&(this[e.detail.property]=e.detail.value),window.removeEventListener("forceUpdateProperty",this.forceUpdateProperty)}},template:`<div class="moreActionMenu displayNone">
                    <a v-if="canAddToPlaylist === '1'" class="moreActionLink addToWatchLaterLink gtm-event-actionmenu" data-name="Add to Watch Later" :data-video-added="addedToPlaylist" :data-video-id="id" @click="updateClog('add-to-watch-later')" data-label="watch_later" :data-event="gtmDataEvent">
                        <span :class="['icon', {'ph-icon-playlist-add-check' : addedToPlaylist === '1', 'ph-icon-playlist-add' : addedToPlaylist !== '1'}]"></span>
                        <span class="label">{{addToPlayListLabel}}</span>
                    </a>
                    <a ref="subscribeLink" :class="['moreActionLink', 'subscribeToLink', 'gtm-event-actionmenu', {privateMember: isPrivateMember === '1'}]" :disabled="isBlocked === '1'" data-name="Subscribe to Uploader" :data-is-pornhub="isPornhub" @click="handleSubscribeClick"
                       :data-content-partner="isContentPartner" :data-channel="isChannel" :data-subscribed="localIsSubscribed" :data-id="subscribeId" :data-title="title" data-label="subscribe" :data-event="gtmDataEvent">
                        <span :class="{'ph-icon-friend-added':boolIsSubscribed, 'ph-icon-add-friend':!boolIsSubscribed}"></span>
                        <span class="label">{{subscribeToLabel}}</span>
                    </a>
                    <a class="moreActionLink notInterestedLink gtm-event-actionmenu" data-name="Not Interested" :data-video-id="id" data-type="video" @click="updateClog('not-interested')" data-label="not_interested" :data-event="gtmDataEvent">
                        <span class="ph-icon-cancel"></span>
                        <span class="label">{{notInterestedLabel}}</span>
                    </a>
                </div>`})}};function updateSubscribeButton({container:e,subscribedText:t,unsubscribedText:s,iconClasses:a={},updateLabels:i=!1,id:n,value:l,source:o,isSubscribed:r}){var d,c=e?.querySelector("button");e&&c&&c!==o&&(o=c.querySelector(".buttonLabel"),d=c.querySelector("i"),(c.dataset.userId??c.dataset.id)===n)&&(c.setAttribute("data-subscribed",l),i&&(c.setAttribute("data-label",r?"unsubscribe_button":"subscribe_button"),c.setAttribute("data-label2",r?"unsubscribe":"subscribe")),e.classList.toggle("unsubscribe",r),e.classList.toggle("subscribe",!r),d&&a.subscribed&&a.unsubscribed&&(d.classList.toggle(a.subscribed,r),d.classList.toggle(a.unsubscribed,!r)),o)&&(o.textContent=r?t:s)}window.addEventListener("subscription-changed",e=>{var{id:e,value:t,source:s}=e.detail,a="1"===t;updateSubscribeButton({container:document.querySelector(".js-mpp-subscribe-btn"),subscribedText:"undefined"!=typeof MODEL_PROFILE?MODEL_PROFILE?.subscribedText:"",unsubscribedText:"undefined"!=typeof MODEL_PROFILE?MODEL_PROFILE?.unsubscribedText:"",iconClasses:{subscribed:"ph-icon-already-subscribed",unsubscribed:"ph-icon-rss-feed"},id:e,value:t,source:s,isSubscribed:a}),updateSubscribeButton({container:document.querySelector(".js-show-subscribe-btn"),subscribedText:"undefined"!=typeof MODEL_PROFILE?MODEL_PROFILE?.subscribedText:"",unsubscribedText:"undefined"!=typeof MODEL_PROFILE?MODEL_PROFILE?.unsubscribedText:"",iconClasses:{subscribed:"ph-icon-already-subscribed",unsubscribed:"ph-icon-rss-feed"},updateLabels:!0,id:e,value:t,source:s,isSubscribed:a}),updateSubscribeButton({container:document.querySelector(".js-cpp-subscribe-btn"),subscribedText:"undefined"!=typeof CHANNEL_CHANNEL_INFO?CHANNEL_CHANNEL_INFO?.subscribedText:"",unsubscribedText:"undefined"!=typeof CHANNEL_CHANNEL_INFO?CHANNEL_CHANNEL_INFO?.unsubscribedText:"",iconClasses:{subscribed:"ph-icon-already-subscribed",unsubscribed:"ph-icon-rss-feed"},id:e,value:t,source:s,isSubscribed:a})}),document.querySelector(".js-show-subscribe-btn button")?.addEventListener("click",function(){var e=this.dataset.id,t=this.dataset.subscribed;SubscriptionRegistry.set(e,"1"===t?"0":"1",this)}),document.querySelector(".js-cpp-subscribe-btn button")?.addEventListener("click",function(){var e=this.dataset.id,t=this.dataset.subscribed;SubscriptionRegistry.set(e,"1"===t?"0":"1",this)});let ToastMessage={init:function(){Vue.customElement("v-toast-message",{props:{undoText:{type:String,required:!0}},data:function(){return{type:"addTo",message:"",videoId:null}},watch:{message:function(e,t){return e!=t}},methods:{undoClick:function(){var e,t=this.videoId;t&&(e=(e=document.querySelector('li[data-video-id="'+t+'"]'))?e.querySelector(".addToWatchLaterLink"):null,"addTo"===this.type)&&watchLaterLinkClick(e,t)},closeClick:function(){var e=document.getElementById("toastMessage");e&&MG_Utils.removeClass(e,"showToast")}},template:`<div id="toastMessage">
                    <span v-if="type=='addTo'" class="ph-icon-playlist-add-check"></span>
                    <span v-if="type=='subscribe'" class="ph-icon-check"></span>
                    <span v-if="type=='error'" class="ph-icon-error"></span>
                    <span class="confirmationMsg">{{message}}</span>
                    <button v-if="type=='addTo'" @click="undoClick">{{undoText}}</button>
                    <span v-if="type=='subscribe' || type=='error'" class="ph-icon-cross" @click="closeClick"></span>
                </div>`})}};function undoNotInterestedClick(e){let t=e&&e.dataset?e.dataset:null,a=t?t.videoId:null;"undefined"!=typeof interestedUrl&&"undefined"!=typeof actionMenuToken&&a&&MG_Utils.ajaxCall({type:"POST",url:interestedUrl,data:{entityId:a,token:actionMenuToken,actionType:2,entityType:"video"},dataType:"json",headers:"undefined"!=typeof liuIdOrNull&&liuIdOrNull?{__m:liuIdOrNull}:{},success:function(e){var t;if(e&&e.success&&e.message&&"Success"==e.message)for(t of document.querySelectorAll('li[data-video-id="'+a+'"]')){var s=t.querySelector(".not-interested-overlay");s&&s.classList.add("display-none")}else e&&!e.success&&e.message?showToastMessage("error",e.message,a):showToastMessage("error",actionMenuTranslations.tryLater,a)}})}function subscribeActionClick(l,o,r){if("undefined"!=typeof subscribeActionObj){let e,t=l?l.dataset:null,s=t&&0==t.subscribed?subscribeActionObj.confirmSubscribeTxt:subscribeActionObj.confirmUnsubscribeTxt,a=t?t.channel:0,i=t?t.contentPartner:null,n=t?t.isPornhub:null;MG_Utils.hasClass(l,"privateMember")?showToastMessage("",subscribeActionObj.cannotSubscribe,o):t&&(e=1==a?0==t.subscribed?subscribeActionObj.subscribeToChannelUrl:subscribeActionObj.unSubscribeFromChannelUrl:0==t.subscribed?subscribeActionObj.subscribeToUserUrl:subscribeActionObj.unSubscribeFromUserUrl,e+="&id="+t.id,0!=n||1!=i||r?MG_Utils.ajaxCall({type:"GET",url:e,headers:"undefined"!=typeof liuIdOrNull&&liuIdOrNull?{__m:liuIdOrNull}:{},success:function(e){if(e&&"PASS"==e.success){if(0==t.subscribed)showToastMessage("subscribe",actionMenuTranslations.subscribedMsg+' "'+t.title+'"',o);else if(showToastMessage("subscribe",actionMenuTranslations.unSubscribedMsg+' "'+t.title+'"',o),isSubscriptionsPage){var s=document.getElementById("subscriptionsVideosSection"),a=document.querySelectorAll(".sectionWrap"),s=s.querySelectorAll("li");let t=l.closest(".pcVideoListItem.videoblock");s.forEach(e=>{e.dataset.userId===t.dataset.userId&&e.remove()}),0==e.video_subscriptions_count&&a.forEach(e=>{e.classList.toggle("displayNone")})}window.dispatchEvent(new CustomEvent("forceUpdateProperty",{detail:{property:"localIsSubscribed",value:"0"===t.subscribed?"1":"0"}}))}}}):confirm(s)&&subscribeActionClick(l,o,!0))}}function watchLaterLinkClick(a,i){var e=a.dataset.videoAdded;0==e?"undefined"!=typeof playlistsUtils&&"undefined"!=typeof actionMenuToken&&playlistsUtils.addVideoToPlaylist(null,i,actionMenuToken,a,"watchlater",function(e){if(e&&(e.success||e.video_count)){var t=a?a.querySelector(".label"):null,s=a?a.querySelector(".icon"):null;t&&(t.innerHTML=actionMenuTranslations.removeWatchLater),s&&(MG_Utils.removeClass(s,"ph-icon-playlist-add"),MG_Utils.addClass(s,"ph-icon-playlist-add-check")),a&&(a.dataset.videoAdded="1");try{showToastMessage("addTo",actionMenuTranslations.addedToWatchLater,i)}catch(e){showToastMessage("error",actionMenuTranslations.tryLater,i)}}else showToastMessage("error",e.message,i)}):1==e&&"undefined"!=typeof removeWatchLaterUrl&&"undefined"!=typeof actionMenuToken&&MG_Utils.ajaxCall({type:"DELETE",url:removeWatchLaterUrl+"?token="+actionMenuToken+"&vid="+i,headers:"undefined"!=typeof liuIdOrNull&&liuIdOrNull?{__m:liuIdOrNull}:{},success:function(e){var t=a?a.querySelector(".label"):null,s=a?a.querySelector(".icon"):null;t&&(t.innerHTML=actionMenuTranslations.addToWatchLater),s&&(MG_Utils.addClass(s,"ph-icon-playlist-add"),MG_Utils.removeClass(s,"ph-icon-playlist-add-check")),a&&(a.dataset.videoAdded="0"),showToastMessage("addTo",actionMenuTranslations.removedFromWatchLater,i)}})}function notInterestedLinkClick(e,n){"undefined"!=typeof notInterestedUrl&&"undefined"!=typeof actionMenuToken&&MG_Utils.ajaxCall({type:"POST",url:notInterestedUrl,data:{token:actionMenuToken,actionType:2,entityType:"video",entityId:n},dataType:"json",headers:"undefined"!=typeof liuIdOrNull&&liuIdOrNull?{__m:liuIdOrNull}:{},success:function(e){if(e&&e.success&&e.message&&"Success"===e.message){let t=document.querySelectorAll('li[data-video-id="'+n+'"]'),s=document.createElement("div"),e=document.createElement("span"),a=document.createElement("button");"undefined"!=typeof actionMenuTranslations&&(e.innerHTML=actionMenuTranslations.notInterestedMessage,a.textContent=actionMenuTranslations.undo,s.appendChild(e),s.appendChild(a),a.setAttribute("data-video-id",n),MG_Utils.addClass(a,"undoNotInterested"),MG_Utils.addClass(s,"not-interested-overlay"));for(let e of t){var i=e.querySelector(".not-interested-overlay");i?i.classList.remove("display-none"):setTimeout(function(){e.insertAdjacentElement("beforeend",s.cloneNode(!0))},10)}}else e&&!e.success&&e.message?showToastMessage("error",e.message,n):showToastMessage("error",actionMenuTranslations.tryLater,n)}})}function moreActionLinkClick(e){var t;e.target&&(t=(e=e.target).dataset.videoId,MG_Utils.hasClass(e,"addToWatchLaterLink")?watchLaterLinkClick(e,t):MG_Utils.hasClass(e,"subscribeToLink")?subscribeActionClick(e,t,!1):MG_Utils.hasClass(e,"notInterestedLink")&&notInterestedLinkClick(e,t))}function showToastMessage(e,t,s){let a=document.querySelector("v-toast-message")?document.querySelector("v-toast-message").getVueInstance():null,i=document.getElementById("toastMessage");a&&(a.type=e,a.message=t,a.videoId=s,"error"===e?i&&MG_Utils.addClass(i,"errorToast"):i&&MG_Utils.removeClass(i,"errorToast"),i&&MG_Utils.addClass(i,"showToast"),setTimeout(function(){i&&MG_Utils.removeClass(i,"showToast")},3e3))}function initVideoActionMenu(){void 0!==ToastMessage&&ToastMessage.init(),document.addEventListener("click",function(t){var e=document.querySelectorAll(".moreActionMenu"),s=document.querySelectorAll(".moreActionMenuButton");if(t&&t.target&&MG_Utils.hasClass(t.target,"moreActionMenuButton")){var a=t.target,i=t.target.querySelector(".moreActionMenu"),n=!(i&&!MG_Utils.hasClass(i,"displayNone"));MG_Utils.addClassMultiple(e,"displayNone"),MG_Utils.removeClassMultiple(s,"active"),n?(MG_Utils.removeClass(i,"displayNone"),MG_Utils.addClass(t.target,"active"),a.setAttribute("data-label","menu-close")):a.setAttribute("data-label","menu-open")}else if(t&&t.target&&MG_Utils.hasClass(t.target,"moreActionLink")){if(t.preventDefault(),"undefined"!=typeof isLogged)if(parseInt(isLogged))moreActionLinkClick(t);else if("undefined"!=typeof signinbox){if("function"==typeof triggerSignInSignUpModal){let e="";t?.target.classList.contains("notInterestedLink")?e="notInterested":t?.target.classList.contains("subscribeToLink")?e="subscribe":t?.target.classList.contains("addToWatchLaterLink")&&(e="watchLater"),triggerSignInSignUpModal(e)}"undefined"!=typeof defaultSignUpModal&&defaultSignUpModal&&userClogTracking(currentDomain,"signup-open",originPart,originUrl,clickedElement,newModal)}else"undefined"!=typeof defaultSignUpModal&&defaultSignUpModal?"undefined"!=typeof signupRedirectUrl&&(window.location=signupRedirectUrl):"undefined"!=typeof loginRedirectUrl&&(window.location=loginRedirectUrl);MG_Utils.addClassMultiple(e,"displayNone"),MG_Utils.removeClassMultiple(s,"active")}else t&&t.target&&MG_Utils.hasClass(t.target,"undoNotInterested")?undoNotInterestedClick(t.target):(MG_Utils.addClassMultiple(e,"displayNone"),MG_Utils.removeClassMultiple(s,"active"))})}MG_Utils.domReady(function(){"undefined"!=typeof videoMoreActionEnabled&&videoMoreActionEnabled&&("undefined"!=typeof actionMenuTranslations&&void 0!==MoreActionMenuComponent&&MoreActionMenuComponent.init(),initVideoActionMenu()),document.body.addEventListener("mouseenter",function(e){var t=e.target;t&&MG_Utils.hasClass(t,"wrap")&&showOverlay(e)},!0),document.body.addEventListener("focus",function(e){var t=e.target;t&&MG_Utils.hasClass(t,"wrap")&&showOverlay(e)},!0),document.body.addEventListener("mouseleave",function(e){var t=e.target;t&&MG_Utils.hasClass(t,"wrap")&&hideOverlay(e)},!0),document.body.addEventListener("blur",function(e){var t=e.target;t&&MG_Utils.hasClass(t,"wrap")&&hideOverlay(e,!0)},!0),document.body.addEventListener("click",function(e){var t=e.target;t&&(MG_Utils.hasClass(t,"open-playlist-link")||MG_Utils.hasClass(t,"not-interested-button"))&&addToSubmenu(e)}),document.body.addEventListener("keypress",function(e){var t=e.target;t&&(MG_Utils.hasClass(t,"open-playlist-link")||MG_Utils.hasClass(t,"not-interested-button"))&&addToSubmenu(e)})});var hideShowMenu=function(e,t){e&&t&&(MG_Utils.hasClass(e,"active")?(MG_Utils.removeClass(e,"active"),MG_Utils.addClass(t,"display-none")):MG_Utils.hasClass(e,"active")||(activePlaylists(),MG_Utils.addClass(e,"active"),MG_Utils.removeClass(t,"display-none"),positionMenu(e,t)))},positionMenu=function(e,t){var s,a;e&&t&&(t.style.top=MG_Utils.offset(e).top+27+"px",t.style.left=MG_Utils.offset(e).left+"px",a=t.getBoundingClientRect(),s=window.innerWidth,a=t.offsetLeft+t.clientLeft+a.width)&&s<a&&(t.style.top=MG_Utils.offset(e).top+27+"px",t.style.left=MG_Utils.offset(e).left-245+"px")},playlist_menu_fadeout=function(){playlist_menu_fading=playlist_menu_fading&&clearTimeout(playlist_menu_fading)&&!1,playlist_menu_fading=setTimeout(function(){MG_Utils.addClass(menu,"fadeOut"),activePlaylists()},2e3)},successCallback=function(e,t){var s;e.success&&"OK"==e.message&&t.target&&(e=findAncestor(t.target,"videoBox"),t=findAncestor(t.target,"wrap"),e&&(s=e.querySelector(".not-interested-overlay"),e.style.pointerEvents="none"),t&&(s=t.querySelector(".not-interested-overlay"),t.style.pointerEvents="none"),s)&&(s.style.display="block")};function findAncestor(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}function errorCallback(e,t,s){console.log("something went wrong  "+e+" "+t+" "+s)}var hideSubmenu=function(e){var e=e.target||e.srcElement,t=document.querySelector(".zoom.active");MG_Utils.hasClass(e,"open-playlist-link")||menu&&!MG_Utils.hasClass(menu,"display-none")&&(MG_Utils.closest(e,".add-to-playlist-menu")?activePlaylists():t?MG_Utils.removeClass(t,"active"):(activePlaylists(),MG_Utils.hasClass(menu,"display-none")||MG_Utils.addClass(menu,"display-none"))),playlistMenu&&!MG_Utils.closest(e,".playlist-option-menu")&&e.parentNode!=document.querySelector("#options")&&e!=document.querySelector("#options")&&MG_Utils.addClass(playlistMenu,"display-none")},activePlaylists=(document.addEventListener("mouseup",hideSubmenu),function(e){var t=document.querySelector(".open-playlist-link.active"),s=document.querySelector(".not-interested-button.active");if(void 0===e){if(menu.querySelector(".custom-playlist")&&menu.querySelector(".custom-playlist").querySelectorAll("li").length){var a=menu.querySelector(".custom-playlist").querySelectorAll("li.added, li.alreadyAdded");if(a)for(var i=0;i<a.length;i++){MG_Utils.removeClass(a[i],"added");var n=a[i].querySelector("span");n&&(n.textContent="")}}var e=menu&&menu.querySelector(".quicklick.alreadyAdded"),l=e&&e.querySelector("span"),e=(e&&MG_Utils.removeClass(e,"alreadyAdded"),l&&e&&(l.textContent="",e.removeChild(l)),menu&&menu.querySelector(".quicklick.added")),l=e&&e.querySelector("span");e&&MG_Utils.removeClass(e,"added"),l&&(l.textContent="",e.removeChild(l))}t&&(MG_Utils.removeClass(t,"active"),MG_Utils.addClass(t.parentNode,"display-none")),s&&(MG_Utils.removeClass(s,"active"),MG_Utils.addClass(s.parentNode,"display-none"))});let commentButton=document.getElementById("commentPlaylist"),commentBlock=document.querySelector(".js-commentReplacement"),aboutButton=document.getElementById("js-aboutPlaylistTrigger"),playlistViewTab=document.querySelector(".js-playlistViewTab"),sharePlaylistTabView=document.querySelector(".js-sharePlaylistTabView"),sharePlaylistTrigger=document.getElementById("js-sharePlaylistTrigger"),isMac=(commentButton&&commentBlock&&aboutButton&&playlistViewTab&&sharePlaylistTabView&&(commentButton.addEventListener("click",()=>commentBlock.scrollIntoView({behavior:"smooth",block:"start"})),window.addEventListener("scroll",()=>{var{top:e,bottom:t}=commentBlock.getBoundingClientRect();e<=window.innerHeight&&0<=t?(commentButton.classList.add("active"),aboutButton.classList.remove("active"),playlistViewTab.classList.contains("displayNone")&&playlistViewTab.classList.remove("displayNone"),sharePlaylistTabView.classList.contains("displayNone")||(sharePlaylistTabView.classList.add("displayNone"),sharePlaylistTrigger.classList.remove("active"))):(aboutButton.classList.add("active"),commentButton.classList.remove("active"))})),navigator.userAgent.includes("Macintosh")||navigator.userAgent.includes("Mac OS"));isMac&&document.documentElement.classList.add("macintosh");