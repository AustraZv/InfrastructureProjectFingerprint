/*! For license information please see desktop.js.LICENSE.txt */
(()=>{var e={3995:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1169),i=n(8027),a=n(8680),s=n(323),c=n(1404),l=(r=c)&&r.__esModule?r:{default:r},u=n(3314);var d=n.g,p=d.Element,f=(p=void 0===p?{}:p).prototype,m=(f=void 0===f?{}:f).scrollIntoView,_=f.scrollIntoViewIfNeeded,h=d.scroll,g=d.scrollBy,E=d.scrollByLines,v=d.scrollByPages,y=d.scrollTo,w=function(){(0,s.dispatchCustomEvent)("scrollutilsblock")},I=function(e){(0,o.setClientPosition)(e.clientX,e.clientY),(0,o.updateMouseOverIframe)()},b=function(e,t){var n=function(){e.resetJudgement(),(0,o.updatePosition)()};(0,o.isInteracting)()?n():((0,o.updateScrollDirection)(),(0,o.updateMouseOverIframe)(),(0,o.isMouseOverIframe)()?n():(e.notify(),w(),(0,o.resetScroll)()))},O=function(){(0,o.isInteracting)()||(0,o.goingBack)()?(0,o.setHash)(n.g.location.hash):(w(),(0,i.goBack)(),(0,o.resetScroll)())};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.recursiveConsideration,r=(t=void 0===t?{}:t).frequency,c=void 0===r?2:r,d=t.timeout,p=void 0===d?500:d,f=e.recursiveInterventionThreshold,S=void 0===f?5:f,C=e.wheelInteractionTimeout,T=void 0===C?30:C,L=e.mouseupInteractionTimeout,A=void 0===L?30:L;if(void 0===n.g.pageYOffset||u.IS_SAFARI)return a.noop;var P=new l.default({intervene:function(){return(0,s.dispatchCustomEvent)("scrollutilsintervention")},interventionThreshold:S,frequency:c,timeout:p}),M=b.bind(null,P),N=a.Debouncer.debounce(o.endInteraction,T),R=a.Debouncer.debounce(o.endInteraction,A),D=function(e){var t=e.endWheelInteraction,r=e.endKeyMouseUpInteraction,i=e.monitoredScrollHandler,a=n.g.document,s=a.body,c=a.documentElement,l=[s,c],u=s.doScroll;return function e(){s.doScroll=u,n.g.Element.prototype.scrollIntoView=m,n.g.Element.prototype.scrollIntoViewIfNeeded=_,n.g.scroll=h,n.g.scrollBy=g,n.g.scrollByLines=E,n.g.scrollByPages=v,n.g.scrollTo=y,n.g.removeEventListener("scrollutilsintervention",e),n.g.removeEventListener("wheel",o.startInteraction,!0),n.g.removeEventListener("wheel",t,!1),n.g.removeEventListener("keydown",o.startInteraction,!0),n.g.removeEventListener("keyup",r,!0),n.g.removeEventListener("mousedown",o.startInteraction,!0),n.g.removeEventListener("mouseup",r,!0),n.g.removeEventListener("dragstart",o.startInteraction,!0),n.g.removeEventListener("dragend",o.endInteraction,!0),n.g.removeEventListener("scroll",i,!0),n.g.removeEventListener("touchstart",o.startInteraction,!0),n.g.removeEventListener("touchend",o.endInteraction,!0),n.g.removeEventListener("touchmove",i,!0),n.g.removeEventListener("mousemove",I,!1),n.g.removeEventListener("hashchange",O,!1);var a=!0,c=!1,d=void 0;try{for(var p,f=l[Symbol.iterator]();!(a=(p=f.next()).done);a=!0){var w=p.value;delete w.scrollTop,delete w.scrollLeft,w.scrollTop=(0,o.getScrollTop)(),w.scrollLeft=(0,o.getScrollLeft)()}}catch(e){c=!0,d=e}finally{try{!a&&f.return&&f.return()}finally{if(c)throw d}}}}({endWheelInteraction:N,endKeyMouseUpInteraction:R,monitoredScrollHandler:M});return(0,o.setHash)(n.g.location.hash),(0,o.updatePosition)(),function(e){var t=e.endWheelInteraction,r=e.endKeyMouseUpInteraction,a=e.monitoredScrollHandler,s=e.reenableWindowScrollMethods,c=n.g.document,l=c.body,u=[l,c.documentElement];l.doScroll=w,n.g.Element.prototype.scrollIntoView=w,n.g.Element.prototype.scrollIntoViewIfNeeded=w,n.g.scroll=h&&w,n.g.scrollBy=g&&w,n.g.scrollByLines=E&&w,n.g.scrollByPages=v&&w,n.g.scrollTo=w,n.g.addEventListener("scrollutilsintervention",s),n.g.addEventListener("wheel",o.startInteraction,!0),n.g.addEventListener("wheel",t,!1),n.g.addEventListener("keydown",o.startInteraction,!0),n.g.addEventListener("keyup",r,!0),n.g.addEventListener("mousedown",o.startInteraction,!0),n.g.addEventListener("mouseup",r,!0),n.g.addEventListener("dragstart",o.startInteraction,!0),n.g.addEventListener("dragend",o.endInteraction,!0),n.g.addEventListener("scroll",a,!0),n.g.addEventListener("touchstart",o.startInteraction,!0),n.g.addEventListener("touchend",o.endInteraction,!0),n.g.addEventListener("touchmove",a,!0),n.g.addEventListener("mousemove",I,!1),n.g.addEventListener("hashchange",O,!1);var d=function(e){Object.defineProperty(e,"scrollTop",{configurable:!0,get:function(){return(0,i.getScrollTop)(e)},set:w}),Object.defineProperty(e,"scrollLeft",{configurable:!0,get:function(){return(0,i.getScrollLeft)(e)},set:w})},p=!0,f=!1,m=void 0;try{for(var _,y=u[Symbol.iterator]();!(p=(_=y.next()).done);p=!0)d(_.value)}catch(e){f=!0,m=e}finally{try{!p&&y.return&&y.return()}finally{if(f)throw m}}}({endWheelInteraction:N,endKeyMouseUpInteraction:R,monitoredScrollHandler:M,reenableWindowScrollMethods:D}),D}},323:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.dispatchCustomEvent=n.g.dispatchEvent?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.g,r=new n.g.CustomEvent(e);t.dispatchEvent(r)}:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.g,r=n.g.createEventObject();t.fireEvent("on"+r,r)}},416:(e,t,n)=>{"use strict";var r=n(3995);Object.defineProperty(t,"io",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}});var o=n(8027);Object.defineProperty(t,"gW",{enumerable:!0,get:function(){return o.createInteractionMethod}}),Object.defineProperty(t,"v_",{enumerable:!0,get:function(){return o.getScrollLeft}}),Object.defineProperty(t,"hY",{enumerable:!0,get:function(){return o.getScrollTop}}),Object.defineProperty(t,"hd",{enumerable:!0,get:function(){return o.setHash}}),Object.defineProperty(t,"ND",{enumerable:!0,get:function(){return o.setScrollLeft}}),Object.defineProperty(t,"LR",{enumerable:!0,get:function(){return o.setScrollTop}}),Object.defineProperty(t,"W2",{enumerable:!0,get:function(){return o.scroll}}),Object.defineProperty(t,"HN",{enumerable:!0,get:function(){return o.scrollBy}}),Object.defineProperty(t,"M$",{enumerable:!0,get:function(){return o.scrollByLines}}),Object.defineProperty(t,"Tw",{enumerable:!0,get:function(){return o.scrollByPages}}),Object.defineProperty(t,"VG",{enumerable:!0,get:function(){return o.scrollTo}}),Object.defineProperty(t,"PA",{enumerable:!0,get:function(){return o.scrollToElement}}),Object.defineProperty(t,"Dn",{enumerable:!0,get:function(){return o.scrollToElementIfNeeded}})},1404:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(t){var n=t.intervene,r=t.timeout,o=t.frequency,i=t.interventionThreshold;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.intervene=n,this.timeout=r,this.frequency=o,this.interventionThreshold=i,this.makeJudgement=this.makeJudgement.bind(this),this.calls=0,this.resetNum=0}return n(e,[{key:"notify",value:function(){this.calls++,this.id||(this.id=setTimeout(this.makeJudgement,this.timeout))}},{key:"makeJudgement",value:function(){this.calls>=this.frequency?this.resetJudgement():this.stopTimer(),this.resetNum>=this.interventionThreshold&&(this.startOver(),this.intervene())}},{key:"stopTimer",value:function(){this.id=clearTimeout(this.id)}},{key:"resetJudgement",value:function(){this.id=clearTimeout(this.id),this.calls=0,this.resetNum++}},{key:"startOver",value:function(){this.resetJudgement(),this.resetNum=0}}]),e}();t.default=r},8027:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.goBack=t.setHash=t.scrollByPages=t.scrollByLines=t.scrollBy=t.scroll=t.doScroll=t.setScrollLeft=t.getScrollLeft=t.setScrollTop=t.getScrollTop=t.scrollToElementIfNeeded=t.scrollToElement=t.scrollTo=t.createInteractionMethod=void 0;var r=n(1169),o=n(8680);var i=n.g,a=i.Element,s=(a=void 0===a?{}:a).prototype,c=(s=void 0===s?{}:s).scrollIntoView,l=s.scrollIntoViewIfNeeded,u=s.doScroll,d=i.scroll,p=i.scrollBy,f=i.scrollByLines,m=i.scrollByPages,_=i.scrollTo,h=function(e){var t=n.g.document;return[t.body,t.documentElement].includes(e)},g=t.createInteractionMethod=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return(0,r.startInteraction)(),Promise.resolve(e.apply(t,i)).then((function(){return(0,o.nextTick)((function(){(0,r.updatePosition)(),(0,r.endInteraction)()}))}))}},E=t.scrollTo=g(_,n.g);t.scrollToElement=g((function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=c||e.scrollIntoView).call.apply(t,[e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r)))})),t.scrollToElementIfNeeded=g((function(e,t){return l.call(e,t)})),t.getScrollTop=function(e){return h(e)?(0,r.getScrollTop)():e.scrollTop},t.setScrollTop=function(e,t){h(e)?E((0,r.getScrollLeft)(),t):e.scrollTop=t},t.getScrollLeft=function(e){return h(e)?(0,r.getScrollLeft)():e.scrollLeft},t.setScrollLeft=function(e,t){h(e)?E(t,(0,r.getScrollTop)()):e.scrollLeft=t},t.doScroll=function(e,t){u.call(e,t)},t.scroll=g(d,n.g),t.scrollBy=g(p,n.g),t.scrollByLines=g(f,n.g),t.scrollByPages=g(m,n.g),t.setHash=g((function(e){n.g.location.hash=e})),t.goBack=g((function(){n.g.history.replaceState({},n.g.document.title,n.g.location.pathname+(0,r.getHash)())}))},1169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.goingBack=t.resetScroll=t.setClientPosition=t.setPosition=t.updatePosition=t.updateMouseOverIframe=t.updateScrollDirection=t.getScrollLeft=t.getScrollTop=t.endInteraction=t.startInteraction=t.isMouseOverIframe=t.isInteracting=t.getHash=t.setHash=t.setHoveringOverIframe=void 0;var r=n(8027),o=n(8680),i={clientX:0,clientY:0,history:[],interacting:!1,loading:!0,mouseOverIframe:!1,scrollXDirection:0,scrollYDirection:0,scrollLeft:0,scrollTop:0},a=t.setHoveringOverIframe=function(e){i.mouseOverIframe=e},s=(t.setHash=function(e){i.history.push(e)},t.getHash=function(){return i.history[i.history.length-1]},t.isInteracting=function(){return i.interacting||i.loading},t.isMouseOverIframe=function(){return i.mouseOverIframe}),c=(t.startInteraction=function(){i.interacting=!0},t.endInteraction=function(){i.interacting=!1},t.getScrollTop=function(){return i.scrollTop},t.getScrollLeft=function(){return i.scrollLeft},function(e,t){switch(t){case 1:return e-1;case-1:return e+1;default:return e}}),l=function(e,t){return e>t?1:e<t?-1:0},u=(t.updateScrollDirection=function(){i.scrollXDirection=l(n.g.pageXOffset,i.scrollLeft),i.scrollYDirection=l(n.g.pageYOffset,i.scrollTop)},new o.Debouncer({ms:400,fn:function(){c(i.clientX,i.scrollXDirection),c(i.clientY,i.scrollYDirection);var e=n.g.document.elementFromPoint(i.clientX-1,i.clientY-1),t=n.g.document.elementFromPoint(i.clientX+1,i.clientY+1),r=e&&"IFRAME"===e.nodeName||t&&"IFRAME"===t.nodeName;a(r)}})),d=(t.updateMouseOverIframe=function(){s()?u.call():u.force()},t.updatePosition=function(){d(n.g.pageXOffset,n.g.pageYOffset)},t.setPosition=function(e,t){i.scrollLeft=e,i.scrollTop=t});t.setClientPosition=function(e,t){i.clientX=e,i.clientY=t},t.resetScroll=function(){(0,r.scrollTo)(i.scrollLeft,i.scrollTop)},t.goingBack=function(){return i.history[i.history.length-2]===n.g.location.hash};n.g.addEventListener("load",(function(){(0,o.nextTick)((function(){i.loading=!1}))}))},3314:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.IS_SAFARI=/^((?!chrome|android).)*safari/i.test(n.g.navigator.userAgent)},8680:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=t.T=function(){return!0},i=t.noop=function(){};t.nextTick=function(e){return new Promise((function(t){setTimeout((function(){e(),t()}))}))},t.Debouncer=function(){function e(t){var n=t.fn,r=t.ms,a=t.head,s=void 0!==a&&a,c=t.filter,l=void 0===c?o:c,u=t.tail,d=void 0===u?!s:u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ms=r,this.filter=l,this.head=s?n:i,this.tail=d?n:i,this.call=this.call.bind(this),this.cancel=this.cancel.bind(this)}return n(e,null,[{key:"debounce",value:function(t,n){return new e({fn:t,ms:n}).call}}]),n(e,[{key:"call",value:function(){for(var e=this,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];this.filter.apply(this,r(n))&&(this.id?this.cancel():this.head.apply(this,r(n)),this.id=setTimeout((function(){return e.tail.apply(e,r(n))}),this.ms))}},{key:"force",value:function(){this.cancel(),this.head.apply(this,arguments),this.tail.apply(this,arguments)}},{key:"cancel",value:function(){this.id=this.id&&clearTimeout(this.id)}}]),e}()},2304:e=>{var t;window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=24)}([function(e,t,n){var r,o,i;i=function(){return function(){return function(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var n=e.shift();e[0]=n+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<e.length;r++){var o=e[r];if("string"!=typeof o)throw new TypeError("Url must be a string. Received "+o);""!==o&&(r>0&&(o=o.replace(/^[\/]+/,"")),o=r<e.length-1?o.replace(/[\/]+$/,""):o.replace(/[\/]+$/,"/"),t.push(o))}var i=t.join("/"),a=(i=i.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return a.shift()+(a.length>0?"?":"")+a.join("&")}("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=i():void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o)},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fRetry=t.FetchError=void 0;var l=c(n(10)),u=c(n(14)),d=n(5),p=function(e){function t(n,r,o,i,a){var s=e.call(this,n)||this;return Object.setPrototypeOf?Object.setPrototypeOf(s,t.prototype):s.__proto__=t.prototype,s.url=r,s.method=o,s.requestBody=i,s.responseStatus=a,s}return o(t,e),t}(Error);t.FetchError=p,t.fRetry=function(e){return function(t,n,r,o){return void 0===r&&(r=!0),a(void 0,void 0,void 0,(function(){var c,f;return s(this,(function(m){return c=(0,u.default)(d.trackClientErrors,500),f=function(e){return a(void 0,void 0,void 0,(function(){var a,l,u,d,f,m,_,h,g,E,v,y,w,I,b;return s(this,(function(s){switch(s.label){case 0:return n&&n.method&&"GET"!==n.method.toUpperCase()&&n.headers&&"string"==typeof n.body&&(a=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("content-type"===r.toLowerCase())return e[r]}return null}(n.headers),a&&"application/json"===a.toLowerCase()&&"object"==typeof(l=JSON.parse(n.body))&&(n.body=JSON.stringify(i({__numberOfAttempts:e},l)))),u="string"==typeof t?t:t.url,d=n&&n.method||"string"!=typeof t&&t.method||"get",_=(m=JSON).parse,(h=n&&n.body)?[3,3]:(g="string"!=typeof t)?[4,t.clone().text()]:[3,2];case 1:g=s.sent(),s.label=2;case 2:h=g,s.label=3;case 3:f=_.apply(m,[h.toString()])||void 0,s.label=4;case 4:return s.trys.push([4,8,9,10]),[4,fetch(t,i(i({},n),{credentials:(null==n?void 0:n.credentials)||"omit"}))];case 5:return E=s.sent(),(y=o)?[4,o(E)]:[3,7];case 6:y=!s.sent(),s.label=7;case 7:if(v=y,!E.ok||v)throw w=v?"Failed response validation":E.statusText,new p(w,u,d,f,E.status);return[2,E];case 8:if((I=s.sent())instanceof p)throw I;throw new p(I.message||"Unexpected fetch error",u,d,f);case 9:return r&&c(null===(b=null==n?void 0:n.headers)||void 0===b?void 0:b.Authorization),[7];case 10:return[2]}}))}))},[2,(0,l.default)(f,e)]}))}))}};var f=(0,t.fRetry)({retries:5});t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t=localStorage),this.name=e,this.storage=t}return e.prototype.get=function(){try{var e=this.storage.getItem(this.name);if(null!==e)return JSON.parse(e)}catch(e){console.error(e)}return null},e.prototype.set=function(e){try{this.storage.setItem(this.name,JSON.stringify(e))}catch(e){console.error(e)}},e.prototype.clear=function(){try{this.storage.removeItem(this.name)}catch(e){console.error(e)}},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.clearStatus=t.getStatus=t.setStatus=void 0;var o=new(r(n(2)).default)("MOL-FE-WEB-PUSH_SUBSCRIPTION_STATUS");t.setStatus=function(e,t){o.set({metadata:t,state:e})},t.getStatus=function(){return o.get()},t.clearStatus=function(){return o.clear()}},function(e,t){var n=1e3,r=60*n,o=60*r,i=24*o,a=7*i,s=365.25*i;function c(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,t){t=t||{};var l,u,d=typeof e;if("string"===d&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*s;case"weeks":case"week":case"w":return c*a;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*o;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}(e);if("number"===d&&isFinite(e))return t.long?(l=e,(u=Math.abs(l))>=i?c(l,u,i,"day"):u>=o?c(l,u,o,"hour"):u>=r?c(l,u,r,"minute"):u>=n?c(l,u,n,"second"):l+" ms"):function(e){var t=Math.abs(e);return t>=i?Math.round(e/i)+"d":t>=o?Math.round(e/o)+"h":t>=r?Math.round(e/r)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.trackClientErrors=t.clear=t.addError=t.getErrors=t.setBaseEndpoint=void 0;var c,l=n(7),u=s(n(0)),d=s(n(2)),p=s(n(1)),f=new d.default("MOL-FE-WEB-PUSH_CLIENT_SUBSCRIPTION_ERRORS",sessionStorage);t.setBaseEndpoint=function(e){return c=e},t.getErrors=function(){return f.get()},t.addError=function(e){var n=(0,l.serializeError)(e),r=(0,t.getErrors)();(null==r?void 0:r.find((function(e){return JSON.stringify(e)===JSON.stringify(n)})))||f.set(a(a([],r||[],!0),[n],!1))},t.clear=function(){return f.clear()},t.trackClientErrors=function(e){return o(void 0,void 0,void 0,(function(){var n,o,a,s,l;return i(this,(function(i){switch(i.label){case 0:if(!(n=(0,t.getErrors)())||0===n.length)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),o=(0,u.default)(c,"analytics/client/error"),a={body:JSON.stringify({errors:n}),headers:{"Content-type":"application/json"},method:"post"},e&&(a.headers=r(r({},a.headers),{Authorization:e})),[4,(0,p.default)(o,a,!1)];case 2:if(!(s=i.sent()).ok)throw new Error(s.statusText);return(0,t.clear)(),[3,4];case 3:return l=i.sent(),console.error("Track Client Errors",l),[3,4];case 4:return[2]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.replaceSubscription=t.updatePushSubscription=t.requestPushPermissionAndSubscribe=t.requestPushNotificationPermission=t.subscribePushNotifications=t.registerPushSubscription=t.willExpireSoon=t.needsMigration=t.isWebPushSupported=void 0;var s=a(n(15)),c=a(n(1)),l=a(n(8));t.isWebPushSupported=function(){return"serviceWorker"in navigator&&"PushManager"in window},t.needsMigration=function(e,t){return e.options.applicationServerKey instanceof ArrayBuffer&&!(0,s.default)(t,new Uint8Array(e.options.applicationServerKey,0))},t.willExpireSoon=function(e){return!!e.expirationTime&&e.expirationTime<Date.now()+6048e5},t.registerPushSubscription=function(e,t,n){var a=t.subscription,s=t.metadata;return o(void 0,void 0,void 0,(function(){var t,o;return i(this,(function(i){return function(e){var t,n;try{t=e.getKey("auth"),n=e.getKey("p256dh")}catch(t){return console.error("Unable to get auth and p256dh keys, subscription ".concat(JSON.stringify(e,null,2))),!1}return null!==t&&null!==n}(a)?(t={metadata:r(r({},s),{browserLanguage:navigator.language,subscribedUrl:location.href}),subscription:a},o={body:JSON.stringify(t),headers:{"Content-type":"application/json"},method:"POST",mode:"cors"},n&&(o.headers=r(r({},o.headers),{Authorization:"ApiKey ".concat(n)})),[2,(0,c.default)(e,o)]):[2,void 0]}))}))},t.subscribePushNotifications=function(e){var n=e.apiKey,r=e.appServerKey,a=e.metadata,s=e.subscriptionEndpoint,c=e.registration;return o(void 0,void 0,void 0,(function(){var e,o;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,c.pushManager.subscribe({applicationServerKey:r,userVisibleOnly:!0})];case 1:return e=i.sent(),[4,(0,t.registerPushSubscription)(s,{metadata:a,subscription:e},n)];case 2:return i.sent(),[2,e];case 3:throw o=i.sent(),new l.default(o.message,"register",o);case 4:return[2]}}))}))},t.requestPushNotificationPermission=function(){return o(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2,new Promise((function(e,t){var n=Notification.requestPermission((function(t){e(t)}));n instanceof Promise&&n.then(e,t)}))]}))}))},t.requestPushPermissionAndSubscribe=function(e){return o(void 0,void 0,void 0,(function(){var n;return i(this,(function(o){switch(o.label){case 0:return[4,(0,t.requestPushNotificationPermission)()];case 1:return"granted"!==(n=o.sent())?[3,3]:[4,(0,t.subscribePushNotifications)(r({},e))];case 2:o.sent(),o.label=3;case 3:return[2,n]}}))}))},t.updatePushSubscription=function(e,t,n){var a=t.subscription,s=t.metadata;return o(void 0,void 0,void 0,(function(){var t,o,u;return i(this,(function(i){switch(i.label){case 0:t={metadata:r(r({},s),{browserLanguage:navigator.language,subscribedUrl:location.href}),subscription:a},o={body:JSON.stringify(t),headers:{"Content-type":"application/json"},method:"PATCH",mode:"cors"},n&&(o.headers=r(r({},o.headers),{Authorization:"ApiKey ".concat(n)})),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,c.default)(e,o)];case 2:return i.sent(),[3,4];case 3:throw u=i.sent(),new l.default(u.message,"update",u);case 4:return[2]}}))}))},t.replaceSubscription=function(e){var n=e.apiKey,r=e.appServerKey,a=e.metadata,s=e.registration,c=e.subscription,l=e.subscriptionEndpoint;return o(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,c.unsubscribe()];case 1:return e.sent(),[2,(0,t.subscribePushNotifications)({apiKey:n,appServerKey:r,metadata:a,registration:s,subscriptionEndpoint:l})]}}))}))}},function(e,t,n){"use strict";class r extends Error{constructor(e){super(r._prepareSuperMessage(e)),Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,r)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch(t){return String(e)}}}const o=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],i=({from:e,seen:t,to_:n,forceEnumerable:r})=>{const a=n||(Array.isArray(e)?[]:{});t.push(e);for(const[n,o]of Object.entries(e))"function"!=typeof o&&(o&&"object"==typeof o?t.includes(e[n])?a[n]="[Circular]":a[n]=i({from:e[n],seen:t.slice(),forceEnumerable:r}):a[n]=o);for(const{property:t,enumerable:n}of o)"string"==typeof e[t]&&Object.defineProperty(a,t,{value:e[t],enumerable:!!r||n,configurable:!0,writable:!0});return a};e.exports={serializeError:e=>"object"==typeof e&&null!==e?i({from:e,seen:[],forceEnumerable:!0}):"function"==typeof e?`[Function: ${e.name||"anonymous"}]`:e,deserializeError:e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e&&!Array.isArray(e)){const t=new Error;return i({from:e,seen:[],to_:t}),t}return new r(e)}}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(n,r,o){var i=e.call(this,n)||this;return Object.setPrototypeOf?Object.setPrototypeOf(i,t.prototype):i.__proto__=t.prototype,i.type=r,i.cause=o,i}return o(t,e),t}(Error);t.default=i},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(29));t.default=function(e,t,n){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(0,a.default)(e,t,n)];case 1:return o.sent(),[3,3];case 2:return r=o.sent(),console.error("TrackEvent Error",r),[3,3];case 3:return[2]}}))}))}},function(e,t,n){"use strict";const r=n(11);class o extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const i=(e,t)=>new Promise(((n,i)=>{t={onFailedAttempt:()=>{},retries:10,...t};const a=r.operation(t);a.attempt((async r=>{try{n(await e(r))}catch(e){if(!(e instanceof Error))return void i(new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`));if(e instanceof o)a.stop(),i(e.originalError);else if(e instanceof TypeError)a.stop(),i(e);else{((e,t,n)=>{const r=n.retries-(t-1);e.attemptNumber=t,e.retriesLeft=r})(e,r,t);try{await t.onFailedAttempt(e)}catch(e){return void i(e)}a.retry(e)||i(a.mainError())}}}))}));e.exports=i,e.exports.default=i,e.exports.AbortError=o},function(e,t,n){e.exports=n(12)},function(e,t,n){var r=n(13);t.operation=function(e){var n=t.timeouts(e);return new r(n,{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],o=0;o<t.retries;o++)r.push(this.createTimeout(o,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(o,t)),r.sort((function(e,t){return e-t})),r},t.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1,r=Math.round(n*t.minTimeout*Math.pow(t.factor,e));return r=Math.min(r,t.maxTimeout)},t.wrap=function(e,n,r){if(n instanceof Array&&(r=n,n=null),!r)for(var o in r=[],e)"function"==typeof e[o]&&r.push(o);for(var i=0;i<r.length;i++){var a=r[i],s=e[a];e[a]=function(r){var o=t.operation(n),i=Array.prototype.slice.call(arguments,1),a=i.pop();i.push((function(e){o.retry(e)||(e&&(arguments[0]=o.mainError()),a.apply(this,arguments))})),o.attempt((function(){r.apply(e,i)}))}.bind(e,s),e[a].options=n}}},function(e,t){function n(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(void 0===n){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),n=this._timeouts.shift()}var r=this,o=setTimeout((function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)}),n);return this._options.unref&&o.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){n._operationTimeoutCb()}),n._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,n=0,r=0;r<this._errors.length;r++){var o=this._errors[r],i=o.message,a=(e[i]||0)+1;e[i]=a,a>=n&&(t=o,n=a)}return t}},function(e,t,n){"use strict";e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0,o=void 0,i=void 0,a=[];return function(){var c=function(e){return"function"==typeof e?e():e}(t),l=(new Date).getTime(),u=!r||l-r>c;r=l;for(var d=arguments.length,p=Array(d),f=0;f<d;f++)p[f]=arguments[f];if(u&&n.leading)return n.accumulate?Promise.resolve(e.call(this,[p])).then((function(e){return e[0]})):Promise.resolve(e.call.apply(e,[this].concat(p)));if(o?clearTimeout(i):o=function(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}(),a.push(p),i=setTimeout(s.bind(this),c),n.accumulate){var m=a.length-1;return o.promise.then((function(e){return e[m]}))}return o.promise};function s(){var t=o;clearTimeout(i),Promise.resolve(n.accumulate?e.call(this,a):e.apply(this,a[a.length-1])).then(t.resolve,t.reject),a=[],o=null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=0;n!==e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.handleRegisterError=void 0;var o=n(7),i=n(5);t.handleRegisterError=function(e,t){var n=t.emit,a=t.metadata,s=t.rawAppServerKey,c=r(r({},(0,o.serializeError)(e)),{organisation:null==a?void 0:a.organisation,rawAppServerKey:s,userAgent:navigator.userAgent});(0,i.addError)(c),n("error",c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e){case"production":return"https://hulkprod.anm.co.uk/api/web-push-notification";case"integration":return"https://hulkint.anm.co.uk/api/web-push-notification";default:return"/public"}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(37),t),o(n(38),t),o(n(39),t),o(n(40),t),o(n(41),t)},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(void 0,void 0,void 0,(function(){return o(this,(function(e){return[2,new Promise((function(e){"interactive"===document.readyState&&Boolean(document.body)||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",(function(){e()}))}))]}))}));t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(8)),i=n(3),a=n(16);t.default=function(e,t){if(e instanceof o.default){var n=t.metadata;"register"===e.type?(0,i.setStatus)("register_pending",n):"update"===e.type&&(0,i.setStatus)("update_pending",n)}(0,a.handleRegisterError)(e,t)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SetIntervalAsyncTimer=void 0;var a=function(){function e(){this.timeout=void 0,this.promise=void 0,this.stopped=!1}return e.startTimer=function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var a=Math.min(Math.max(Math.trunc(n),10),2147483647),s=new e;return s.scheduleTimeout.apply(s,i([t,a,a],r,!1)),s},e.stopTimer=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return e.stopped=!0,e.timeout&&clearTimeout(e.timeout),e.promise?[4,e.promise]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.scheduleTimeout=function(e,t,n){for(var a=this,s=[],c=3;c<arguments.length;c++)s[c-3]=arguments[c];this.timeout=setTimeout((function(){return r(a,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return this.timeout=void 0,this.promise=this.runHandlerAndScheduleTimeout.apply(this,i([e,t],s,!1)),[4,this.promise];case 1:return n.sent(),this.promise=void 0,[2]}}))}))}),n)},e.prototype.runHandlerAndScheduleTimeout=function(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];return r(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),[4,e.apply(void 0,n)];case 1:case 2:return r.sent(),[3,4];case 3:return this.stopped||this.scheduleTimeout.apply(this,i([e,t,t],n,!1)),[7];case 4:return[2]}}))}))},e}();t.SetIntervalAsyncTimer=a},function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteOldClickRecords=t.getAll=t.clear=t.wasTrackedBefore=t.markAsTracked=t.storage=void 0;var i=o(n(4)),a=o(n(2));t.storage=new a.default("MOL-FE-WEB-PULL_NOTIFICATION_CLICKS"),t.markAsTracked=function(e,n){var o=t.storage.get()||[];return t.storage.set(r(r([],o,!0),[{campaignId:e,crossOrgUserId:n,epoch:Date.now()}],!1))},t.wasTrackedBefore=function(e,n){return(t.storage.get()||[]).some((function(t){return t.campaignId===e&&t.crossOrgUserId===n}))},t.clear=function(){return t.storage.clear()},t.getAll=function(){return t.storage.get()||[]},t.deleteOldClickRecords=function(){var e=t.storage.get()||[];t.storage.set(e.filter((function(e){var t=e.epoch;return Date.now()-t<(0,i.default)("24h")})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(44);t.default=function(e){var t=(0,r.getISOStringParts)(e).map((function(e){return parseInt(e,10)})),n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],l=t[6];return new Date(Date.UTC(n,o-1,i,a,s,c,l||0))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Register=void 0;var l=c(n(0)),u=c(n(25)),d=c(n(26)),p=c(n(28)),f=c(n(31)),m=c(n(17)),_=n(6),h=c(n(32)),g=n(33),E=n(55),v=function(e){function t(t){var n=e.call(this)||this;n.appServerKey=null,n.registration=null;var r=t.environment?(0,m.default)(t.environment):t.baseEndpoint||"";return n.options=(0,h.default)(i({},t)),n.baseEndpoint=(0,l.default)(r,"/v1/organisation",n.options.metadata.organisation),n.subscriptionEndpoint=(0,l.default)(n.baseEndpoint,"subscription"),n}return o(t,e),t.isWebPushSupported=function(){return(0,_.isWebPushSupported)()},t.prototype.getAppServerKey=function(e){return void 0===e&&(e=!1),a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return null===this.appServerKey||e?(t=this,[4,(0,d.default)((0,l.default)(this.subscriptionEndpoint,"publicKey"),this.options.apiKey)]):[3,2];case 1:t.appServerKey=n.sent(),n.label=2;case 2:return[2,this.appServerKey]}}))}))},t.prototype.getCrossOrgUserId=function(){return a(this,void 0,void 0,(function(){var e,t=this;return s(this,(function(n){switch(n.label){case 0:return this.crossOrguserId?[3,2]:(e=this,[4,(0,E.getCrossOrgUserId)(this.options.metadata,(function(e,n){return t.emit(e,n)}))]);case 1:e.crossOrguserId=n.sent(),n.label=2;case 2:return[2,this.crossOrguserId]}}))}))},t.prototype.init=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,o,a,c,l=this;return s(this,(function(s){switch(s.label){case 0:return[4,this.getAppServerKey()];case 1:return e=s.sent()||{},t=e.parsed,n=e.raw,r=this,o=p.default,a=[i({},this.options)],c={appServerKey:t,baseEndpoint:this.baseEndpoint},[4,this.getCrossOrgUserId()];case 2:return[4,o.apply(void 0,[i.apply(void 0,a.concat([(c.crossOrgUserId=s.sent(),c.emit=function(e,t){return l.emit(e,t)},c.rawAppServerKey=n,c.subscriptionEndpoint=this.subscriptionEndpoint,c)]))])];case 3:return r.registration=s.sent(),[2,this.registration]}}))}))},t.prototype.initPullNotifications=function(e){var t=e.renderPullNotification,n=e.canRender;return a(this,void 0,void 0,(function(){var e,r,o=this;return s(this,(function(a){switch(a.label){case 0:if("function"!=typeof t)throw new TypeError("Missing required option `renderPullNotification` function");if(n&&"function"!=typeof n)throw new TypeError("Optional `canRender` option must be a function");return e=g.init,r={apiKey:this.options.apiKey,baseEndpoint:this.baseEndpoint,canRender:n},[4,this.getCrossOrgUserId()];case 1:return[4,e.apply(void 0,[(r.crossOrgUserId=a.sent(),r.emit=function(e,t){return o.emit(e,t)},r.metadata=i({geo:"ALL"},this.options.metadata),r.renderPullNotification=t,r)])];case 2:return a.sent(),[2,this]}}))}))},t.prototype.showPrompt=function(e){return a(this,void 0,void 0,(function(){var t,n,r,o=this;return s(this,(function(a){switch(a.label){case 0:return[4,this.getAppServerKey()];case 1:if(t=a.sent()||{},n=t.parsed,r=t.raw,null===this.registration)throw new Error("Init must be called before attempting to call showPrompt");return[2,(0,f.default)(this.registration,i(i({},this.options),{appServerKey:n,baseEndpoint:this.baseEndpoint,emit:function(e,t){return o.emit(e,t)},rawAppServerKey:r,renderPrePrompt:e,subscriptionEndpoint:this.subscriptionEndpoint}))]}}))}))},t}(u.default);t.Register=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.events={},this.logger=e||console}return e.prototype.on=function(e,t){var n=this.events;return(n[e]||(n[e]=[])).push(t),this},e.prototype.removeListener=function(e,t){var n=this.events,r=n[e]||(n[e]=[]);return n[e]=r.filter((function(e){return e!==t})),this},e.prototype.removeAllListeners=function(e){return e?this.events[e]=null:this.events={},this},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.events,i=o[e]||(o[e]=[]),a=i.length>0,s=n;try{s=JSON.parse(JSON.stringify(n))}catch(e){}return i.forEach((function(e){try{e.apply(void 0,s)}catch(e){t.logger.error(e,e.stack)}})),a},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(27)),s=i(n(1));t.default=function(e,t){return r(void 0,void 0,void 0,(function(){var n,i;return o(this,(function(c){switch(c.label){case 0:return n={mode:"cors"},t&&(n.headers={Authorization:"ApiKey ".concat(t)}),[4,(0,s.default)(e,n,!0,(function(e){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,e.clone().text()];case 1:return[2,""!==t.sent().trim()]}}))}))}))];case 1:return[4,c.sent().text()];case 2:return i=c.sent(),[2,{parsed:(0,a.default)(i),raw:i}]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=function(){try{return window.atob(),!0}catch(e){return!1}}()?function(e){var t,n,r,o={},i=0,a=0,s="",c=e.length;for(t=0;t<64;t++)o["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)]=t;for(n=0;n<c;n++)for(i=(i<<6)+(t=o[e.charAt(n)]),a+=6;a>=8;)((r=255&i>>>(a-=8))||c-2>n)&&(s+=String.fromCharCode(r));return s}(t):window.atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=s(n(19)),l=n(6),u=n(3),d=s(n(20)),p=n(5),f=s(n(9)),m=n(30),_=function(e){var t;if(e&&"object"==typeof e&&0!==Object.keys(e).length)return{impression:null===(t=e.impression)||void 0===t?void 0:t.filter((function(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]}))}};t.default=function(e){return o(void 0,void 0,void 0,(function(){var t,n,o,s,h,g,E,v,y,w,I,b,O,S,C,T,L,A,P,M,N,R,D,k,x,U,j,B,V,G,W,K;return i(this,(function(i){switch(i.label){case 0:t=e.apiKey,n=e.appServerKey,o=e.notificationMacros,s=e.emit,h=e.metadata,g=e.baseEndpoint,E=e.swUrl,v=e.subscriptionEndpoint,y=e.rawAppServerKey,w=e.crossOrgUserId,I=Array.isArray(h.visitorIds)?h.visitorIds[0]:void 0,b=h.userAgent,i.label=1;case 1:return i.trys.push([1,20,,21]),[4,c.default];case 2:return i.sent(),(0,m.deleteOldClickRecords)(),O=new URLSearchParams(window.location.search),S=O.get("ito"),(0,p.setBaseEndpoint)(g),C=(0,u.getStatus)(),T=w?[w]:void 0,h.crossOrgUserIds=T,"push-notification"!==S?[3,4]:(L=O.get("ci"),A=O.get("cri")||"",P=O.get("si"),M=O.get("ai"),N=O.get("xi"),L&&P?(R=function(e){var t=e.sharedCrossOrgUserId,n=e.crossOrgUserId,r=e.campaignId,o=e.subscriptionId;return t?n!==t?"click_page_share":(0,m.wasTrackedBefore)(r,o)?"click_page_refresh":"click":"click"}({campaignId:L,crossOrgUserId:w,sharedCrossOrgUserId:N,subscriptionId:P}),D={action:R,campaignId:L,campaignRunId:A,crossOrgUserId:w,organisation:h.organisation,platform:h.platform,subscriptionId:P,type:"notification",userAgent:b,visitorId:I},M&&(D.assetId=M),s("notification_click",D),[4,(0,f.default)(g,r(r({},D),{action:"click"===R?"click_page_load":R}),t)]):[3,4]);case 3:i.sent(),(0,m.markAsTracked)(L,P),i.label=4;case 4:if(!E)return[3,8];i.label=5;case 5:return i.trys.push([5,7,,8]),[4,navigator.serviceWorker.register(E,{scope:"/"})];case 6:return i.sent(),[3,8];case 7:return k=i.sent(),console.error("ServiceWorker registration failed: ",k),[3,8];case 8:return[4,navigator.serviceWorker.ready];case 9:return[4,(x=i.sent()).pushManager.getSubscription()];case 10:return U=i.sent(),j=!!U&&(0,l.needsMigration)(U,n),C=(0,u.getStatus)(),B={apiKey:t,baseEndpoint:g,crossOrgUserId:w,navigatorPlatform:window.navigator.platform,notificationMacros:_(o),organisation:h.organisation,permission:Notification.permission,subscription:j?null:U,type:"web-push-sw-init-data",userAgent:h.userAgent,visitorId:I},x.active.postMessage(JSON.stringify(B)),C&&"undecided"===C.state&&"granted"===Notification.permission&&((0,u.setStatus)("register_pending",C.metadata),C=(0,u.getStatus)()),C&&"undecided"!==C.state&&C.metadata&&(C.metadata.userAgent!==h.userAgent||C.metadata.profilingAllowed!==h.profilingAllowed||(C.metadata.visitorIds||[]).join(",")!==(h.visitorIds||[]).join(",")||(C.metadata.crossOrgUserIds||[]).join(",")!==(T||[]).join(",")||"push-notification"===S)&&(G=r(r({},C.metadata),{crossOrgUserIds:Array.from(new Set(a(a([],C.metadata.crossOrgUserIds||[],!0),T||[],!0))),keywords:Array.from(new Set(a(a([],C.metadata.keywords||[],!0),h.keywords||[],!0))),profilingAllowed:h.profilingAllowed,userAgent:h.userAgent,visitorIds:Array.from(new Set(a(a([],C.metadata.visitorIds||[],!0),h.visitorIds||[],!0)))}),V="ready"===C.state?"update_pending":C.state,(0,u.setStatus)(V,G),C=(0,u.getStatus)()),U?(G=C?C.metadata:h,j||(0,l.willExpireSoon)(U)?[4,(0,l.replaceSubscription)({apiKey:t,appServerKey:n,metadata:r(r({},h),{migrated:j,migratedSubscriptionEndpoint:j?U.endpoint:void 0}),registration:x,subscription:U,subscriptionEndpoint:v})]:[3,12]):[3,17];case 11:return i.sent(),[3,16];case 12:return C&&"register_pending"===C.state?[4,(0,l.registerPushSubscription)(v,{metadata:G,subscription:U},t)]:[3,14];case 13:return i.sent(),[3,16];case 14:return C&&"update_pending"===C.state||!C?[4,(0,l.updatePushSubscription)(v,{metadata:G,subscription:U},t)]:[3,16];case 15:i.sent(),i.label=16;case 16:return(0,u.setStatus)("ready",h),[3,19];case 17:return"granted"!==Notification.permission?[3,19]:(W=C?C.metadata:h,[4,(0,l.subscribePushNotifications)({apiKey:t,appServerKey:n,metadata:W,registration:x,subscriptionEndpoint:v})]);case 18:i.sent(),(0,u.setStatus)("ready",W),i.label=19;case 19:return[2,x];case 20:return K=i.sent(),(0,d.default)(K,{emit:s,metadata:h,rawAppServerKey:y}),[3,21];case 21:return[2,null]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(0)),c=a(n(1));t.default=function(e,t,n){return o(void 0,void 0,void 0,(function(){var o,a,l,u;return i(this,(function(i){return o=t.type,a=t.action,l=(0,s.default)(e,"analytics/track",o,a),u={body:JSON.stringify(t),headers:{"Content-type":"application/json"},method:"post",mode:"cors"},n&&(u.headers=r(r({},u.headers),{Authorization:"ApiKey ".concat(n)})),[2,(0,c.default)(l,u)]}))}))}},function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteOldClickRecords=t.getAll=t.clear=t.wasTrackedBefore=t.markAsTracked=t.storage=void 0;var i=o(n(4)),a=o(n(2));t.storage=new a.default("MOL-FE-WEB-PUSH_NOTIFICATION_CLICKS"),t.markAsTracked=function(e,n){var o=t.storage.get()||[];return t.storage.set(r(r([],o,!0),[{campaignId:e,epoch:Date.now(),subscriptionId:n}],!1))},t.wasTrackedBefore=function(e,n){return(t.storage.get()||[]).some((function(t){return t.campaignId===e&&t.subscriptionId===n}))},t.clear=function(){return t.storage.clear()},t.getAll=function(){return t.storage.get()||[]},t.deleteOldClickRecords=function(){var e=t.storage.get()||[];t.storage.set(e.filter((function(e){var t=e.epoch;return Date.now()-t<(0,i.default)("24h")})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LAST_PROMPT_EPOCH=void 0;var s=a(n(4)),c=n(6),l=n(3),u=a(n(9)),d=a(n(20));t.LAST_PROMPT_EPOCH="mol-fe-browser-notifications-last-prompt-epoch",t.default=function(e,n){return o(void 0,void 0,void 0,(function(){var a,p,f,m,_,h,g,E,v,y,w,I,b,O,S,C,T,L,A,P,M,N,R,D,k;return i(this,(function(x){switch(x.label){case 0:a=n.apiKey,p=n.appServerKey,f=n.emit,m=n.metadata,_=n.baseEndpoint,h=n.subscriptionEndpoint,g=n.promptFrequency,E=n.rawAppServerKey,v=n.renderPrePrompt,x.label=1;case 1:return x.trys.push([1,12,,13]),y=m.channels,w=m.crossOrgUserIds,I=m.platform,b=m.subChannels,O=m.userAgent,S=m.visitorIds,C=Array.isArray(S)?S[0]:void 0,T=Array.isArray(w)?w[0]:void 0,L=Array.isArray(y)?y[0]:void 0,A=Array.isArray(b)?b[0]:void 0,P=function(e){return r({channel:L,crossOrgUserId:T,organisation:m.organisation,platform:I,subChannel:A,type:"prompt",userAgent:O,visitorId:C},e)},M=function(e){return o(void 0,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return t=e.action,n=P(e),f("".concat("prompt","_").concat(t),n),[4,(0,u.default)(_,n,a)];case 1:return r.sent(),[2]}}))}))},function(e){if(!e)return!0;var n=(0,s.default)(e);if("number"!=typeof n)throw new TypeError("Prompt frequency must be a valid string like `1d` or `1h`");if(!("localStorage"in window))return!0;var r=JSON.parse(window.localStorage.getItem(t.LAST_PROMPT_EPOCH)||"0");return Date.now()-r>=n}(g)?[3,2]:(f("prompt_discarded",P({action:"discarded",permission:Notification.permission,type:"prompt"})),[3,11]);case 2:return"default"!==Notification.permission?[3,8]:(N=function(){return o(void 0,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,M({action:"impression",permission:Notification.permission})];case 1:return n.sent(),[4,(0,c.requestPushPermissionAndSubscribe)({apiKey:a,appServerKey:p,metadata:m,registration:e,subscriptionEndpoint:h})];case 2:return t=n.sent(),[4,M({action:"click",permission:t})];case 3:return n.sent(),[2]}}))}))},"function"!=typeof v?[3,5]:[4,M({action:"pre_prompt_impression",permission:Notification.permission})]);case 3:return x.sent(),[4,new Promise((function(e){v((function(t){return o(void 0,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,M({action:"pre_prompt_click",permission:t?"granted":"denied"})];case 1:return n.sent(),t?[4,N()]:[3,3];case 2:n.sent(),n.label=3;case 3:return e(t),[2]}}))}))}))}))];case 4:return x.sent(),[3,7];case 5:return[4,N()];case 6:x.sent(),x.label=7;case 7:"localStorage"in window&&window.localStorage.setItem(t.LAST_PROMPT_EPOCH,JSON.stringify(Date.now())),x.label=8;case 8:return"granted"!==Notification.permission?[3,10]:[4,e.pushManager.getSubscription()];case 9:return R=x.sent(),D={subscription:R,type:"web-push-sw-subscription-ready"},e.active.postMessage(JSON.stringify(D)),(0,l.setStatus)("ready",m),[3,11];case 10:"default"===Notification.permission?(0,l.setStatus)("undecided",m):(0,l.clearStatus)(),x.label=11;case 11:return[3,13];case 12:return k=x.sent(),(0,d.default)(k,{emit:f,metadata:m,rawAppServerKey:E}),[3,13];case 13:return[2]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===e.length||t&&t<e.length},o=function(e){return!Array.isArray(e)||e.length&&e.map(r).every(Boolean)},i=["organisation","platform","profilingAllowed","userAgent"];t.default=function(e){var t,n,a,s,c,l,u,d,p,f,m,_,h,g;if(function(e,t){if(null!==e&&"object"==typeof e){var n=Object.keys(e),r=t&&t.map((function(e){return n.includes(e)})).filter(Boolean).length===t.length;return!n.length||!r}return!0}(e.metadata,i))throw new Error("metadata is required and must be object containing the following required fields ".concat(i.join(", "),"."));if(r(null===(t=e.metadata)||void 0===t?void 0:t.organisation))throw new Error("metadata.organisation is required and must be a non empty string.");if(r(null===(n=e.metadata)||void 0===n?void 0:n.platform))throw new Error("metadata.platform is required and must be a non empty string.");if("boolean"!=typeof(null===(a=e.metadata)||void 0===a?void 0:a.profilingAllowed))throw new Error("metadata.profilingAllowed is required and must be a boolean.");if(r(null===(s=e.metadata)||void 0===s?void 0:s.userAgent))throw new Error("metadata.userAgent is required and must be a non empty string.");if(void 0!==e.swUrl&&r(e.swUrl))throw new Error("swUrl is optional but must be non empty string when provided.");if(void 0!==(null===(c=e.metadata)||void 0===c?void 0:c.visitorIds)&&o(null===(l=e.metadata)||void 0===l?void 0:l.visitorIds))throw new Error("metadata.visitorIds is optional but must be a non empty string array.");if(void 0!==(null===(u=e.metadata)||void 0===u?void 0:u.crossOrgUserIds)&&o(null===(d=e.metadata)||void 0===d?void 0:d.crossOrgUserIds))throw new Error("metadata.crossOrgUserIds is optional but must be a non empty string array.");if(void 0!==(null===(p=e.metadata)||void 0===p?void 0:p.keywords)&&o(null===(f=e.metadata)||void 0===f?void 0:f.keywords))throw new Error("metadata.keywords is optional but must be a non empty string array when provided.");if(void 0!==(null===(m=e.metadata)||void 0===m?void 0:m.channels)&&o(null===(_=e.metadata)||void 0===_?void 0:_.channels))throw new Error("metadata.channels is optional but must be a non empty string array when provided.");if(void 0!==(null===(h=e.metadata)||void 0===h?void 0:h.subChannels)&&o(null===(g=e.metadata)||void 0===g?void 0:g.subChannels))throw new Error("metadata.subChannels is optional but must be a non empty string array when provided.");return e}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;var a=i(n(4)),s=i(n(19)),c=n(34),l=n(16),u=n(22),d=n(36),p=n(54);t.init=function(e){return r(void 0,void 0,void 0,(function(){var t,n,i,f,m,_,h,g;return o(this,(function(E){switch(E.label){case 0:t=(0,d.pullNotifierFactory)(e).showPullNotification,n=null,i=function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,t()];case 1:return e.sent(),n=(0,c.setIntervalAsync)(t,(0,a.default)("30s")),[2]}}))}))},f=function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return n?[4,(0,c.clearIntervalAsync)(n)]:[3,2];case 1:e.sent(),n=null,e.label=2;case 2:return[2]}}))}))},m=function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return"hidden"!==document.visibilityState?[3,2]:[4,f()];case 1:e.sent(),e.label=2;case 2:return"visible"!==document.visibilityState||n?[3,4]:[4,i()];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))},_=function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return document.removeEventListener("visibilitychange",m),[4,f()];case 1:return e.sent(),[2]}}))}))},E.label=1;case 1:return E.trys.push([1,7,,8]),[4,s.default];case 2:return E.sent(),(0,u.deleteOldClickRecords)(),"pull-notification"!==(h=new URLSearchParams(window.location.search)).get("ito")?[3,4]:[4,(0,p.trackPullNotificationClickLoad)(h,e)];case 3:E.sent(),E.label=4;case 4:return"visible"!==document.visibilityState?[3,6]:[4,i()];case 5:E.sent(),E.label=6;case 6:return document.addEventListener("visibilitychange",m),[3,8];case 7:return g=E.sent(),(0,l.handleRegisterError)(g,{emit:e.emit,metadata:e.metadata}),[3,8];case 8:return[2,{cleanup:_}]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.setIntervalAsync=t.clearIntervalAsync=void 0;var o=n(35);Object.defineProperty(t,"clearIntervalAsync",{enumerable:!0,get:function(){return o.clearIntervalAsync}});var i=n(21);t.setIntervalAsync=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if("function"!=typeof e)throw new TypeError("First argument is not a function");if("number"!=typeof t)throw new TypeError("Second argument is not a number");return i.SetIntervalAsyncTimer.startTimer.apply(i.SetIntervalAsyncTimer,r([e,t],n,!1))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.clearIntervalAsync=void 0;var i=n(21);t.clearIntervalAsync=function(e){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:if(!(e instanceof i.SetIntervalAsyncTimer))throw new TypeError("First argument is not an instance of SetIntervalAsyncTimer");return[4,i.SetIntervalAsyncTimer.stopTimer(e)];case 1:return t.sent(),[2]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pullNotifierFactory=void 0;var a=n(18),s=i(n(4)),c=n(42),l=i(n(9)),u=n(43),d=n(53),p=function(e,t,n,i,s){return function(){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return r={action:e,campaignId:s.campaignId,crossOrgUserId:s.crossOrgUserId,organisation:s.organisation,platform:s.platform,type:"pull-notification",userAgent:navigator.userAgent},e!==a.PullNotificationEventAction.CLICK?[3,2]:[4,(0,l.default)(n,r,i)];case 1:o.sent(),o.label=2;case 2:return t("pull_notification_".concat(e),r),[2]}}))}))}};t.pullNotifierFactory=function(e){var t=e.apiKey,n=e.baseEndpoint,i=e.metadata,l=e.crossOrgUserId,f=e.renderPullNotification,m=e.emit,_=e.canRender,h=void 0===_?function(){return!0}:_,g=new c.HashStorage("hulk_pull-notification_shown_campaigns",(0,s.default)("24h"),1e3);return{showPullNotification:function(){return r(void 0,void 0,void 0,(function(){var e,r,c,_;return o(this,(function(o){switch(o.label){case 0:return[4,(0,u.getLatestPullCampaign)(n,i,t)];case 1:return(e=o.sent())&&!g.get(e.id)&&"visible"===document.visibilityState&&h(e)?(r=(0,d.getPullNotificationData)(i,e,l),c=p(a.PullNotificationEventAction.IMPRESSION,m,n,t,r),_=p(a.PullNotificationEventAction.CLICK,m,n,t,r),[4,f(r,{onClick:_})]):[3,4];case 2:return o.sent(),[4,c()];case 3:o.sent(),g.set(e.id,!0,(0,s.default)("24h")),o.label=4;case 4:return[2]}}))}))},storage:g}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedisDB=void 0,function(e){e[e.MAIN=0]="MAIN",e[e.REDLOCK=1]="REDLOCK",e[e.SESSION=2]="SESSION"}(t.RedisDB||(t.RedisDB={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsLogLevel=void 0,function(e){e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error"}(t.MetricsLogLevel||(t.MetricsLogLevel={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PullNotificationEventAction=t.PullCampaignStatus=t.PullCampaignType=void 0,function(e){e.DEFAULT="DEFAULT",e.SCHEDULED="SCHEDULED"}(t.PullCampaignType||(t.PullCampaignType={})),function(e){e.SCHEDULED="SCHEDULED",e.ACTIVE="ACTIVE",e.CANCELED="CANCELED",e.FINISHED="FINISHED"}(t.PullCampaignStatus||(t.PullCampaignStatus={})),function(e){e.IMPRESSION="impression",e.CLICK="click",e.CLICK_PAGE_LOAD="click_page_load",e.CLICK_PAGE_SHARE="click_page_share",e.CLICK_PAGE_REFRESH="click_page_refresh"}(t.PullNotificationEventAction||(t.PullNotificationEventAction={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pipeline=t.CampaignRunType=t.CampaignType=t.CampaignStatus=t.SubscriptionStatus=t.SubscriptionMigrationStatus=void 0,function(e){e[e.PENDING=1]="PENDING",e[e.PARTIAL=2]="PARTIAL",e[e.DONE=3]="DONE"}(t.SubscriptionMigrationStatus||(t.SubscriptionMigrationStatus={})),function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE",e.ZOMBIE="ZOMBIE"}(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.READY="READY",e.STARTED="STARTED",e.CANCELED="CANCELED",e.SEARCHING="SEARCHING",e.DELIVERING="DELIVERING",e.FINISHED="FINISHED",e.SCHEDULED="SCHEDULED",e.SAMPLE_PROBING="SAMPLE_PROBING",e.AB_TESTING="AB_TESTING",e.WAITING="WAITING",e.CANCELED_BY_PROBE="CANCELED_BY_PROBE"}(t.CampaignStatus||(t.CampaignStatus={})),function(e){e.DEFAULT="DEFAULT",e.SCHEDULED_SAMPLE_PROBING="SCHEDULED_SAMPLE_PROBING",e.SAMPLE_PROBING="SAMPLE_PROBING",e.SCHEDULED_AB_TESTING="SCHEDULED_AB_TESTING",e.SCHEDULED_AB_TESTING_SAMPLE_PROBING="SCHEDULED_AB_TESTING_SAMPLE_PROBING",e.AB_TESTING_SAMPLE_PROBING="AB_TESTING_SAMPLE_PROBING",e.AB_TESTING="AB_TESTING",e.SCHEDULED="SCHEDULED",e.PING="PING"}(t.CampaignType||(t.CampaignType={})),function(e){e.DEFAULT="DEFAULT",e.SAMPLE_PROBE="SAMPLE_PROBE",e.AB_PROBE="AB_PROBE",e.PING="PING"}(t.CampaignRunType||(t.CampaignRunType={})),function(e){e.USER_AGENT="USER_AGENT"}(t.Pipeline||(t.Pipeline={}))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HashStorage=void 0;var o=r(n(4)),i=r(n(2)),a=function(){function e(e,t,n){void 0===t&&(t=(0,o.default)("24h")),void 0===n&&(n=1e3),this.name=e,this.storage=new i.default(e),this.defaultTTL=t,this.entriesLimit=n,this.syncHash()}return e.prototype.getHash=function(){return this.storage.get()||{}},e.prototype.syncHash=function(){for(var e=this.getHash(),t={},n=0,r=0,o=Object.entries(e).sort((function(e,t){return t[1].epoch-e[1].epoch}));r<o.length;r++){var i=o[r],a=i[0],s=i[1];Date.now()-s.epoch<s.ttl&&n<this.entriesLimit&&(t[a]=s,n+=1)}this.storage.set(t)},e.prototype.get=function(e){var t=this.getHash()[e];return t?t.data:null},e.prototype.set=function(e,t,n){var r=this.getHash(),o={data:t,epoch:Date.now(),ttl:n};r[e]=o,this.storage.set(r),this.syncHash()},e.prototype.clear=function(){this.storage.clear()},e}();t.HashStorage=a},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getLatestPullCampaign=void 0;var a=i(n(23)),s=n(45);t.getLatestPullCampaign=function(e,t,n){return r(void 0,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,(0,s.fetchSegmentedPullCampaigns)(e,t,n)];case 1:return[2,r.sent().sort((function(e,t){var n=(0,a.default)(e.triggerTime||e.creationTimestamp).getTime();return(0,a.default)(t.triggerTime||t.creationTimestamp).getTime()-n}))[0]]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getISOStringParts=void 0,t.getISOStringParts=function(e){return e.split(/\D+/)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchSegmentedPullCampaigns=void 0;var i=n(46),a=n(48),s=n(49);t.fetchSegmentedPullCampaigns=function(e,t,n){return r(void 0,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,(0,i.fetchPullCampaigns)(e,t,n)];case 1:return[2,r.sent().filter((function(e){return(0,a.isActive)(t.platform,e)&&(0,s.matchesSegments)(t,e.segments)}))]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchPullCampaigns=void 0;var a=i(n(1)),s=n(47);t.fetchPullCampaigns=function(e,t,n){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return r={mode:"cors"},n&&(r.headers={Authorization:"ApiKey ".concat(n)}),[4,(0,a.default)((0,s.buildPullCampaignsEndpoint)(e,t),r,!0)];case 1:return[2,o.sent().json()||[]]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.buildPullCampaignsEndpoint=void 0;var o=r(n(0));t.buildPullCampaignsEndpoint=function(e,t){var n=t.geo,r=t.channels,i=t.subChannels;if(!n)throw new TypeError("Missing required `geo` to generate PullCampaigns request endpoint");var a=(0,o.default)(e,"pull-campaign");return a=(0,o.default)(a,n),r&&1===r.length&&(a=(0,o.default)(a,r[0]),i&&1===i.length&&(a=(0,o.default)(a,i[0]))),a}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isActive=void 0;var o=n(18),i=r(n(23));t.isActive=function(e,t){if(!t.ttl)return!1;var n=1e3*("desktop"===e?t.ttl.desktop:t.ttl.mobile),r=t.type===o.PullCampaignType.SCHEDULED?t.triggerTime:t.creationTimestamp,a=(0,i.default)(r).getTime(),s=new Date(a+n).getTime();return Date.now()<=s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchesSegments=void 0;var r=n(50);t.matchesSegments=function(e,t){var n=t.exclude,o=t.include;if(n)for(var i=0,a=n;i<a.length;i++){var s=a[i];if((0,r.matchesSegment)(e,s))return!1}for(var c=0,l=o;c<l.length;c++)if(s=l[c],(0,r.matchesSegment)(e,s))return!0;return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchesSegment=void 0;var r=n(51);t.matchesSegment=function(e,t){for(var n=0,o=t.criteria.and;n<o.length;n++){var i=o[n];if(!(0,r.matchesAndCriteria)(e,i))return!1}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchesAndCriteria=void 0;var r=n(52);t.matchesAndCriteria=function(e,t){return t.or.some((function(t){return(0,r.matchesCriterion)(e,t)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchesCriterion=void 0;var r=function(e){switch(e){case"channel":return"channels";case"subchannel":return"subChannels";case"geo":return"geo";case"keyword":return"keywords";case"platform":return"platform"}},o=function(e,t){var n=e[r(t.property)];return n?(Array.isArray(n)?n:[n]).some((function(e){return e===t.value})):"ALL"===t.value},i=function(e,t){var n=e[r(t.property)];if(!n)return!1;var o=Array.isArray(n)?n:[n],i=Array.isArray(t.value)?t.value:[t.value];return o.some((function(e){return i.includes(e)}))},a={eq:o,neq:function(e,t){return!o(e,t)},not_one_of:function(e,t){return!i(e,t)},one_of:i};t.matchesCriterion=function(e,t){return(0,a[t.operator])(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPullNotificationData=void 0,t.getPullNotificationData=function(e,t,n){var r=t.assetId,o=t.body,i=t.clickThroughUrl,a=t.id,s=t.organisation,c=t.title,l=t.image,u=e.geo,d=e.platform,p=new URL(i);return p.searchParams.has("ito")||p.searchParams.append("ito","pull-notification"),p.searchParams.append("ci","".concat(t.id)),n&&p.searchParams.append("xi","".concat(n)),r&&p.searchParams.append("ai","".concat(r)),{assetId:r,body:o,campaignId:a,clickThroughUrl:p.href,geo:u,image:l,organisation:s,platform:d,title:c,type:"pull-notification",userAgent:navigator.userAgent}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.trackPullNotificationClickLoad=void 0;var a=n(18),s=n(22),c=i(n(9));t.trackPullNotificationClickLoad=function(e,t){return r(void 0,void 0,void 0,(function(){var n,r,i,l,u,d,p,f,m,_;return o(this,(function(o){switch(o.label){case 0:return n=t.crossOrgUserId,r=t.metadata,i=t.emit,l=t.baseEndpoint,u=t.apiKey,d=e.get("ci"),p=e.get("ai"),f=e.get("xi"),d?(m=function(e){var t=e.sharedCrossOrgUserId,n=e.crossOrgUserId,r=e.campaignId;return t?n!==t?a.PullNotificationEventAction.CLICK_PAGE_SHARE:(0,s.wasTrackedBefore)(r,t)?a.PullNotificationEventAction.CLICK_PAGE_REFRESH:a.PullNotificationEventAction.CLICK_PAGE_LOAD:a.PullNotificationEventAction.CLICK_PAGE_LOAD}({campaignId:d,crossOrgUserId:n,sharedCrossOrgUserId:f}),_={action:m,campaignId:d,crossOrgUserId:n,organisation:r.organisation,platform:r.platform,type:"pull-notification",userAgent:navigator.userAgent},p&&(_.assetId=p),[4,(0,c.default)(l,_,u)]):[3,2];case 1:o.sent(),i("pull_notification_click",_),(0,s.markAsTracked)(d,n||"unknown"),o.label=2;case 2:return[2]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCrossOrgUserId=void 0;var i=n(56),a=n(16),s=n(3);t.getCrossOrgUserId=function(e,t){return r(void 0,void 0,void 0,(function(){var n,r,c,l;return o(this,(function(o){switch(o.label){case 0:n=(0,s.getStatus)(),r=e.organisation,c=n&&Array.isArray(n.metadata.crossOrgUserIds)?n.metadata.crossOrgUserIds:[],o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,i.getCrossOrgUserIdFromCentral)(r)];case 2:return[2,o.sent()||void 0];case 3:return l=o.sent(),(0,a.handleRegisterError)(l,{emit:t,metadata:e}),[3,4];case 4:return[2,c[c.length-1]]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCrossOrgUserIdFromCentral=t.API_ROOT_BY_ENV=void 0;var i=n(57);t.API_ROOT_BY_ENV={development:{central:"".concat(location.protocol,"//").concat(location.host,"/public/v1/static/latest/mol-fe-web-push-browser-register")},integration:{central:"https://hulkint.anm.co.uk/api/web-push-notification/v1/static/latest/mol-fe-web-push-browser-register"},production:{central:"https://hulkprod.anm.co.uk/api/web-push-notification/v1/static/latest/mol-fe-web-push-browser-register"}};var a={inews:["inews.co.uk"],metro:["metro.co.uk"],mol:["www.dailymail.co.uk","a.dailymail.co.uk","b.dailymail.co.uk","c.dailymail.co.uk"],newzit:["www.newzit.com"]};t.getCrossOrgUserIdFromCentral=function(e){return r(void 0,void 0,void 0,(function(){var n,r,s;return o(this,(function(o){switch(o.label){case 0:return n=function(e,t){var n=new URL(t).hostname;if("localhost"===n||n.endsWith("ngrok.io"))return"development";if(!a[e])throw new Error("No hostnames for organisation: ".concat(e));return a[e].includes(n)?"production":"integration"}(e,location.href),r="".concat(t.API_ROOT_BY_ENV[n].central,"/crossOrgInlinedMin.html?command=getCrossOrgUserId"),[4,(0,i.loadIframeAndWaitForMessage)(r,"mol-fe-web-push-cross-org-user-id")];case 1:return[2,(s=o.sent())&&s.crossOrgUserId]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadIframeAndWaitForMessage=void 0,t.loadIframeAndWaitForMessage=function(e,t){return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(r){return n=new URL(e).origin,[2,new Promise((function(r,o){var i,a=null,s=function(e){e.data.scope===t&&e.origin===n&&(window.removeEventListener("message",s),i&&clearTimeout(i),void 0!==e.data.data?r(e.data.data):o(new Error("Invalid data posted back from crossOrg iframe")),a&&a.remove())};window.addEventListener("message",s),(a=document.createElement("iframe")).style.width="0px",a.style.height="0px",a.style.border="none",a.src=e,document.body.appendChild(a),i=window.setTimeout((function(){window.removeEventListener("message",s),o(new Error("crossOrg iframe timed out")),a&&a.remove()}),1e4)}))]}))}))}}])},e.exports=t()},6660:(e,t,n)=>{e.exports=n(8226)},8427:(e,t,n)=>{"use strict";var r=n(4345),o=n(6435),i=n(5905),a=n(3025),s=n(3916),c=n(6135),l=n(6923),u=n(3201),d=n(5400),p=n(5220),f=n(733);e.exports=function(e){return new Promise((function(t,n){var m,_=e.data,h=e.headers,g=e.responseType;function E(){e.cancelToken&&e.cancelToken.unsubscribe(m),e.signal&&e.signal.removeEventListener("abort",m)}r.isFormData(_)&&r.isStandardBrowserEnv()&&delete h["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var y=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(y+":"+w)}var I=s(e.baseURL,e.url);function b(){if(v){var r="getAllResponseHeaders"in v?c(v.getAllResponseHeaders()):null,i={data:g&&"text"!==g&&"json"!==g?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v};o((function(e){t(e),E()}),(function(e){n(e),E()}),i),v=null}}if(v.open(e.method.toUpperCase(),a(I,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=b:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(b)},v.onabort=function(){v&&(n(new d("Request aborted",d.ECONNABORTED,e,v)),v=null)},v.onerror=function(){n(new d("Network Error",d.ERR_NETWORK,e,v,v)),v=null},v.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||u;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new d(t,r.clarifyTimeoutError?d.ETIMEDOUT:d.ECONNABORTED,e,v)),v=null},r.isStandardBrowserEnv()){var O=(e.withCredentials||l(I))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;O&&(h[e.xsrfHeaderName]=O)}"setRequestHeader"in v&&r.forEach(h,(function(e,t){void 0===_&&"content-type"===t.toLowerCase()?delete h[t]:v.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),g&&"json"!==g&&(v.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(m=function(e){v&&(n(!e||e&&e.type?new p:e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(m),e.signal&&(e.signal.aborted?m():e.signal.addEventListener("abort",m))),_||(_=null);var S=f(I);S&&-1===["http","https","file"].indexOf(S)?n(new d("Unsupported protocol "+S+":",d.ERR_BAD_REQUEST,e)):v.send(_)}))}},8226:(e,t,n)=>{"use strict";var r=n(4345),o=n(5063),i=n(9560),a=n(4816);var s=function e(t){var n=new i(t),s=o(i.prototype.request,n);return r.extend(s,i.prototype,n),r.extend(s,n),s.create=function(n){return e(a(t,n))},s}(n(6075));s.Axios=i,s.CanceledError=n(5220),s.CancelToken=n(5912),s.isCancel=n(6945),s.VERSION=n(9978).version,s.toFormData=n(4195),s.AxiosError=n(5400),s.Cancel=s.CanceledError,s.all=function(e){return Promise.all(e)},s.spread=n(8127),s.isAxiosError=n(8568),e.exports=s,e.exports.default=s},5912:(e,t,n)=>{"use strict";var r=n(5220);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},5220:(e,t,n)=>{"use strict";var r=n(5400);function o(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(4345).inherits(o,r,{__CANCEL__:!0}),e.exports=o},6945:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},9560:(e,t,n)=>{"use strict";var r=n(4345),o=n(3025),i=n(546),a=n(1617),s=n(4816),c=n(3916),l=n(6552),u=l.validators;function d(e){this.defaults=e,this.interceptors={request:new i,response:new i}}d.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&l.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var i,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!o){var d=[a,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(c),i=Promise.resolve(t);d.length;)i=i.then(d.shift(),d.shift());return i}for(var p=t;r.length;){var f=r.shift(),m=r.shift();try{p=f(p)}catch(e){m(e);break}}try{i=a(p)}catch(e){return Promise.reject(e)}for(;c.length;)i=i.then(c.shift(),c.shift());return i},d.prototype.getUri=function(e){e=s(this.defaults,e);var t=c(e.baseURL,e.url);return o(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(s(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}d.prototype[e]=t(),d.prototype[e+"Form"]=t(!0)})),e.exports=d},5400:(e,t,n)=>{"use strict";var r=n(4345);function o(e,t,n,r,o){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}r.inherits(o,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=o.prototype,a={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){a[e]={value:e}})),Object.defineProperties(o,a),Object.defineProperty(i,"isAxiosError",{value:!0}),o.from=function(e,t,n,a,s,c){var l=Object.create(i);return r.toFlatObject(e,l,(function(e){return e!==Error.prototype})),o.call(l,e.message,t,n,a,s),l.name=e.name,c&&Object.assign(l,c),l},e.exports=o},546:(e,t,n)=>{"use strict";var r=n(4345);function o(){this.handlers=[]}o.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},3916:(e,t,n)=>{"use strict";var r=n(4860),o=n(7825);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},1617:(e,t,n)=>{"use strict";var r=n(4345),o=n(7638),i=n(6945),a=n(6075),s=n(5220);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return c(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},4816:(e,t,n)=>{"use strict";var r=n(4345);e.exports=function(e,t){t=t||{};var n={};function o(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(e[n],t[n])}function a(e){if(!r.isUndefined(t[e]))return o(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(void 0,t[n])}function c(n){return n in t?o(e[n],t[n]):n in e?o(void 0,e[n]):void 0}var l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||i,o=t(e);r.isUndefined(o)&&t!==c||(n[e]=o)})),n}},6435:(e,t,n)=>{"use strict";var r=n(5400);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},7638:(e,t,n)=>{"use strict";var r=n(4345),o=n(6075);e.exports=function(e,t,n){var i=this||o;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},6075:(e,t,n)=>{"use strict";var r=n(4345),o=n(2327),i=n(5400),a=n(3201),s=n(4195),c={"Content-Type":"application/x-www-form-urlencoded"};function l(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,d={transitional:a,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(u=n(8427)),u),transformRequest:[function(e,t){if(o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return l(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,i=r.isObject(e),a=t&&t["Content-Type"];if((n=r.isFileList(e))||i&&"multipart/form-data"===a){var c=this.env&&this.env.FormData;return s(n?{"files[]":e}:e,c&&new c)}return i||"application/json"===a?(l(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||d.transitional,n=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||o&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw i.from(e,i.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(1685)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){d.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){d.headers[e]=r.merge(c)})),e.exports=d},3201:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},9978:e=>{e.exports={version:"0.27.2"}},5063:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},3025:(e,t,n)=>{"use strict";var r=n(4345);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))})))})),i=a.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},7825:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},5905:(e,t,n)=>{"use strict";var r=n(4345);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4860:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},8568:(e,t,n)=>{"use strict";var r=n(4345);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},6923:(e,t,n)=>{"use strict";var r=n(4345);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},2327:(e,t,n)=>{"use strict";var r=n(4345);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},1685:e=>{e.exports=null},6135:(e,t,n)=>{"use strict";var r=n(4345),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,a={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},733:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8127:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4195:(e,t,n)=>{"use strict";var r=n(4345);e.exports=function(e,t){t=t||new FormData;var n=[];function o(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(i,a){if(r.isPlainObject(i)||r.isArray(i)){if(-1!==n.indexOf(i))throw Error("Circular reference detected in "+a);n.push(i),r.forEach(i,(function(n,i){if(!r.isUndefined(n)){var s,c=a?a+"."+i:i;if(n&&!a&&"object"==typeof n)if(r.endsWith(i,"{}"))n=JSON.stringify(n);else if(r.endsWith(i,"[]")&&(s=r.toArray(n)))return void s.forEach((function(e){!r.isUndefined(e)&&t.append(c,o(e))}));e(n,c)}})),n.pop()}else t.append(a,o(i))}(e),t}},6552:(e,t,n)=>{"use strict";var r=n(9978).version,o=n(5400),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var a={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new o(i(r," has been removed"+(t?" in "+t:"")),o.ERR_DEPRECATED);return t&&!a[r]&&(a[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new o("options must be an object",o.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],s=t[a];if(s){var c=e[a],l=void 0===c||s(c,a,e);if(!0!==l)throw new o("option "+a+" must be "+l,o.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new o("Unknown option "+a,o.ERR_BAD_OPTION)}},validators:i}},4345:(e,t,n)=>{"use strict";var r,o=n(5063),i=Object.prototype.toString,a=(r=Object.create(null),function(e){var t=i.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function s(e){return e=e.toLowerCase(),function(t){return a(t)===e}}function c(e){return Array.isArray(e)}function l(e){return void 0===e}var u=s("ArrayBuffer");function d(e){return null!==e&&"object"==typeof e}function p(e){if("object"!==a(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var f=s("Date"),m=s("File"),_=s("Blob"),h=s("FileList");function g(e){return"[object Function]"===i.call(e)}var E=s("URLSearchParams");function v(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),c(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var y,w=(y="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return y&&e instanceof y});e.exports={isArray:c,isArrayBuffer:u,isBuffer:function(e){return null!==e&&!l(e)&&null!==e.constructor&&!l(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||i.call(e)===t||g(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&u(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:d,isPlainObject:p,isUndefined:l,isDate:f,isFile:m,isBlob:_,isFunction:g,isStream:function(e){return d(e)&&g(e.pipe)},isURLSearchParams:E,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:v,merge:function e(){var t={};function n(n,r){p(t[r])&&p(n)?t[r]=e(t[r],n):p(n)?t[r]=e({},n):c(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)v(arguments[r],n);return t},extend:function(e,t,n){return v(t,(function(t,r){e[r]=n&&"function"==typeof t?o(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,o,i,a={};t=t||{};do{for(o=(r=Object.getOwnPropertyNames(e)).length;o-- >0;)a[i=r[o]]||(t[i]=e[i],a[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:a,kindOfTest:s,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(l(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:w,isFileList:h}},6654:(e,t,n)=>{var r,o;!function(i){if(void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),e.exports=i(),!!0){var a=window.Cookies,s=window.Cookies=i();s.noConflict=function(){return window.Cookies=a,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(s[0]);if(c=(r.read||r)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[l]=c,e===l)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))}))},1340:(e,t,n)=>{var r=n(2393),o=n(2049),i=n(7144),a=n(7452),s=n(3964);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},1623:(e,t,n)=>{var r=n(8942).Uint8Array;e.exports=r},6912:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},9968:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},9847:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}},5111:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},4810:(e,t,n)=>{var r=n(7073),o=n(6285);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},3422:(e,t,n)=>{var r=n(7073),o=n(6285),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];i.call(e,t)&&o(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},7034:(e,t,n)=>{var r=n(6285);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},7930:(e,t,n)=>{var r=n(9032),o=n(1211);e.exports=function(e,t){return e&&r(t,o(t),e)}},125:(e,t,n)=>{var r=n(9032),o=n(5288);e.exports=function(e,t){return e&&r(t,o(t),e)}},7073:(e,t,n)=>{var r=n(2532);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},9334:(e,t,n)=>{var r=n(1340),o=n(9968),i=n(3422),a=n(7930),s=n(125),c=n(7099),l=n(4354),u=n(3546),d=n(4733),p=n(393),f=n(3650),m=n(8486),_=n(7350),h=n(424),g=n(5964),E=n(3142),v=n(5853),y=n(7681),w=n(1580),I=n(3943),b=n(1211),O=n(5288),S="[object Arguments]",C="[object Function]",T="[object Object]",L={};L[S]=L["[object Array]"]=L["[object ArrayBuffer]"]=L["[object DataView]"]=L["[object Boolean]"]=L["[object Date]"]=L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Map]"]=L["[object Number]"]=L[T]=L["[object RegExp]"]=L["[object Set]"]=L["[object String]"]=L["[object Symbol]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L["[object Error]"]=L[C]=L["[object WeakMap]"]=!1,e.exports=function e(t,n,A,P,M,N){var R,D=1&n,k=2&n,x=4&n;if(A&&(R=M?A(t,P,M,N):A(t)),void 0!==R)return R;if(!w(t))return t;var U=E(t);if(U){if(R=_(t),!D)return l(t,R)}else{var j=m(t),B=j==C||"[object GeneratorFunction]"==j;if(v(t))return c(t,D);if(j==T||j==S||B&&!M){if(R=k||B?{}:g(t),!D)return k?d(t,s(R,t)):u(t,a(R,t))}else{if(!L[j])return M?t:{};R=h(t,j,D)}}N||(N=new r);var V=N.get(t);if(V)return V;N.set(t,R),I(t)?t.forEach((function(r){R.add(e(r,n,A,r,t,N))})):y(t)&&t.forEach((function(r,o){R.set(o,e(r,n,A,o,t,N))}));var G=U?void 0:(x?k?f:p:k?O:b)(t);return o(G||t,(function(r,o){G&&(r=t[o=r]),i(R,o,e(r,n,A,o,t,N))})),R}},9747:(e,t,n)=>{var r=n(1580),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},4570:(e,t,n)=>{var r=n(7170),o=n(5770)(r);e.exports=o},4661:(e,t,n)=>{var r=n(4570);e.exports=function(e,t){var n=[];return r(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}},5636:(e,t,n)=>{var r=n(6596)();e.exports=r},7170:(e,t,n)=>{var r=n(5636),o=n(1211);e.exports=function(e,t){return e&&r(e,t,o)}},7923:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},7379:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},2478:e=>{e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},3334:e=>{e.exports=function(e){return e}},195:(e,t,n)=>{var r=n(3766)(Object.keys,Object);e.exports=r},1393:(e,t,n)=>{var r=n(4570),o=n(6529);e.exports=function(e,t){var n=-1,i=o(e)?Array(e.length):[];return r(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}},91:(e,t,n)=>{var r=n(1340),o=n(4810),i=n(5636),a=n(6885),s=n(1580),c=n(5288),l=n(8763);e.exports=function e(t,n,u,d,p){t!==n&&i(n,(function(i,c){if(p||(p=new r),s(i))a(t,n,c,u,e,d,p);else{var f=d?d(l(t,c),i,c+"",t,n,p):void 0;void 0===f&&(f=i),o(t,c,f)}}),c)}},6885:(e,t,n)=>{var r=n(4810),o=n(7099),i=n(2264),a=n(4354),s=n(5964),c=n(3283),l=n(3142),u=n(5406),d=n(5853),p=n(3655),f=n(1580),m=n(8360),_=n(8666),h=n(8763),g=n(4207);e.exports=function(e,t,n,E,v,y,w){var I=h(e,n),b=h(t,n),O=w.get(b);if(O)r(e,n,O);else{var S=y?y(I,b,n+"",e,t,w):void 0,C=void 0===S;if(C){var T=l(b),L=!T&&d(b),A=!T&&!L&&_(b);S=b,T||L||A?l(I)?S=I:u(I)?S=a(I):L?(C=!1,S=o(b,!0)):A?(C=!1,S=i(b,!0)):S=[]:m(b)||c(b)?(S=I,c(I)?S=g(I):f(I)&&!p(I)||(S=s(b))):C=!1}C&&(w.set(b,S),v(S,b,E,y,w),w.delete(b)),r(e,n,S)}}},3945:(e,t,n)=>{var r=n(2053),o=n(5234),i=n(796);e.exports=function(e,t){return i(o(e,t,r),e+"")}},3905:(e,t,n)=>{var r=n(5111);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},3997:e=>{e.exports=function(e){return e}},8898:(e,t,n)=>{var r=n(1623);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},7099:(e,t,n)=>{e=n.nmd(e);var r=n(8942),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},2264:(e,t,n)=>{var r=n(8898);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},4354:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},9032:(e,t,n)=>{var r=n(3422),o=n(7073);e.exports=function(e,t,n,i){var a=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var l=t[s],u=i?i(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),a?o(n,l,u):r(n,l,u)}return n}},3546:(e,t,n)=>{var r=n(9032),o=n(7979);e.exports=function(e,t){return r(e,o(e),t)}},4733:(e,t,n)=>{var r=n(9032),o=n(5832);e.exports=function(e,t){return r(e,o(e),t)}},7848:(e,t,n)=>{var r=n(3945),o=n(4535);e.exports=function(e){return r((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,s&&o(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var c=n[r];c&&e(t,c,r,a)}return t}))}},5770:(e,t,n)=>{var r=n(6529);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var i=n.length,a=t?i:-1,s=Object(n);(t?a--:++a<i)&&!1!==o(s[a],a,s););return n}}},6596:e=>{e.exports=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===n(i[c],c,i))break}return t}}},2532:(e,t,n)=>{var r=n(4715),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},4967:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},393:(e,t,n)=>{var r=n(3766)(Object.keys,Object);e.exports=r},3650:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},4715:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},4784:(e,t,n)=>{var r=n(3766)(Object.getPrototypeOf,Object);e.exports=r},7979:e=>{e.exports=function(){return[]}},5832:e=>{e.exports=function(){return[]}},8486:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},7350:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},424:e=>{e.exports=function(e){return e}},5964:(e,t,n)=>{var r=n(9747),o=n(4784),i=n(4882);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(o(e))}},4535:e=>{e.exports=function(){return!1}},4882:e=>{e.exports=function(){return!1}},2393:e=>{e.exports=function(){this.__data__=[],this.size=0}},2049:(e,t,n)=>{var r=n(7034),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},7144:(e,t,n)=>{var r=n(7034);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7452:(e,t,n)=>{var r=n(7034);e.exports=function(e){return r(this.__data__,e)>-1}},3964:(e,t,n)=>{var r=n(7034);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},3766:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5234:(e,t,n)=>{var r=n(6912),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=o(i.length-t,0),c=Array(s);++a<s;)c[a]=i[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=i[a];return l[t]=n(c),r(e,this,l)}}},8942:(e,t,n)=>{var r=n(4967),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},8763:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},796:e=>{e.exports=function(e){return e}},3029:(e,t,n)=>{var r=n(7642);e.exports=function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=r(e),function(){if(--e<1)return t.apply(this,arguments)}}},149:(e,t,n)=>{var r=n(9032),o=n(7848),i=n(5288),a=o((function(e,t){r(t,i(t),e)}));e.exports=a},6108:(e,t,n)=>{var r=n(9334);e.exports=function(e){return r(e,5)}},6238:e=>{e.exports=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o}},2784:(e,t,n)=>{var r=n(1580),o=n(4495),i=n(6131),a=Math.max,s=Math.min;e.exports=function(e,t,n){var c,l,u,d,p,f,m=0,_=!1,h=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function E(t){var n=c,r=l;return c=l=void 0,m=t,d=e.apply(r,n)}function v(e){var n=e-f;return void 0===f||n>=t||n<0||h&&e-m>=u}function y(){var e=o();if(v(e))return w(e);p=setTimeout(y,function(e){var n=t-(e-f);return h?s(n,u-(e-m)):n}(e))}function w(e){return p=void 0,g&&c?E(e):(c=l=void 0,d)}function I(){var e=o(),n=v(e);if(c=arguments,l=this,f=e,n){if(void 0===p)return function(e){return m=e,p=setTimeout(y,t),_?E(e):d}(f);if(h)return clearTimeout(p),p=setTimeout(y,t),E(f)}return void 0===p&&(p=setTimeout(y,t)),d}return t=i(t)||0,r(n)&&(_=!!n.leading,u=(h="maxWait"in n)?a(i(n.maxWait)||0,t):u,g="trailing"in n?!!n.trailing:g),I.cancel=function(){void 0!==p&&clearTimeout(p),m=0,c=f=l=p=void 0},I.flush=function(){return void 0===p?d:w(o())},I}},4642:(e,t,n)=>{e.exports=n(3657)},6285:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},4015:(e,t,n)=>{e.exports=n(149)},7581:(e,t,n)=>{var r=n(9847),o=n(4661),i=n(3334),a=n(3142);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},3657:(e,t,n)=>{var r=n(9968),o=n(4570),i=n(3997),a=n(3142);e.exports=function(e,t){return(a(e)?r:o)(e,i(t))}},6123:(e,t,n)=>{var r=n(7923);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},2103:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},2053:e=>{e.exports=function(e){return e}},7526:(e,t,n)=>{var r=n(2478),o=n(6529),i=n(8138),a=n(7642),s=n(9817),c=Math.max;e.exports=function(e,t,n,l){e=o(e)?e:s(e),n=n&&!l?a(n):0;var u=e.length;return n<0&&(n=c(u+n,0)),i(e)?n<=u&&e.indexOf(t,n)>-1:!!u&&r(e,t,n)>-1}},3283:e=>{e.exports=function(){return!1}},3142:e=>{var t=Array.isArray;e.exports=t},6529:(e,t,n)=>{var r=n(3655),o=n(5387);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},5406:(e,t,n)=>{var r=n(6529),o=n(547);e.exports=function(e){return o(e)&&r(e)}},5853:e=>{e.exports=function(){return!1}},3514:(e,t,n)=>{var r=n(195),o=n(8486),i=n(3283),a=n(3142),s=n(6529),c=n(5853),l=n(4882),u=n(8666),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||u(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},3655:(e,t,n)=>{var r=n(7379),o=n(1580);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},5387:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},7681:e=>{e.exports=function(){return!1}},1580:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},547:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},8360:(e,t,n)=>{var r=n(7379),o=n(4784),i=n(547),a=Function.prototype,s=Object.prototype,c=a.toString,l=s.hasOwnProperty,u=c.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==u}},3943:e=>{e.exports=function(){return!1}},8138:(e,t,n)=>{var r=n(7379),o=n(3142),i=n(547);e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&"[object String]"==r(e)}},8666:e=>{e.exports=function(){return!1}},1211:(e,t,n)=>{var r=n(3766)(Object.keys,Object);e.exports=r},5288:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},105:(e,t,n)=>{var r=n(5111),o=n(3334),i=n(1393),a=n(3142);e.exports=function(e,t){return(a(e)?r:i)(e,o(t,3))}},2451:(e,t,n)=>{var r=n(91),o=n(7848)((function(e,t,n){r(e,t,n)}));e.exports=o},4495:(e,t,n)=>{var r=n(8942);e.exports=function(){return r.Date.now()}},7331:(e,t,n)=>{var r=n(2784),o=n(1580);e.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:i,maxWait:t,trailing:a})}},7642:e=>{e.exports=function(e){return e}},6131:e=>{e.exports=function(e){return e}},4207:(e,t,n)=>{var r=n(9032),o=n(5288);e.exports=function(e){return r(e,o(e))}},9817:(e,t,n)=>{var r=n(3905),o=n(1211);e.exports=function(e){return null==e?[]:r(e,o(e))}},5934:function(e,t,n){var r,o;r=function(e){"use strict";var t,n,r,o,i=function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(t in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],t)&&(e[t]=arguments[n][t]);return e},a={template:"[%t] %l:",timestampFormatter:function(e){return e.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},levelFormatter:function(e){return e.toUpperCase()},nameFormatter:function(e){return e||"root"}},s=function(e,o){if(!e||!e.getLogger)throw new TypeError("Argument is not a root loglevel object");if(t&&r!==e.methodFactory)throw new Error("You can't reassign a plugin after appling another plugin");return t=e,o=i({},a,o),n=n||e.methodFactory,r=function(e,t,r){var i=n(e,t,r),a=-1!==o.template.indexOf("%t"),s=-1!==o.template.indexOf("%l"),c=-1!==o.template.indexOf("%n");return function(){for(var t=o.template,n=arguments.length,l=Array(n),u=0;u<n;u++)l[u]=arguments[u];a&&(t=t.replace(/%t/,o.timestampFormatter(new Date))),s&&(t=t.replace(/%l/,o.levelFormatter(e))),c&&(t=t.replace(/%n/,o.nameFormatter(r))),l.length&&"string"==typeof l[0]?l[0]=t+" "+l[0]:l.unshift(t),i.apply(void 0,l)}},e.methodFactory=r,e.setLevel(e.getLevel()),e},c={apply:s,disable:function(){if(!t)throw new Error("You can't disable a not appled plugin");if(r!==t.methodFactory)throw new Error("You can't disable a plugin after appling another plugin");t.methodFactory=n,t.setLevel(t.getLevel()),n=void 0,t=void 0}};return e&&(o=e.prefix,c.noConflict=function(){return e.prefix===c&&(e.prefix=o),c}),c},void 0===(o="function"==typeof r?r.call(t,n,t,e):r)||(e.exports=o)},5880:function(e,t,n){var r,o;!function(){"use strict";r=function(){var e=function(){},t="undefined",n=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function o(n){return"debug"===n&&(n="log"),typeof console!==t&&(void 0!==console[n]?r(console,n):void 0!==console.log?r(console,"log"):e)}function i(t,r){for(var o=0;o<n.length;o++){var i=n[o];this[i]=o<t?e:this.methodFactory(i,t,r)}this.log=this.debug}function a(e,n,r){return function(){typeof console!==t&&(i.call(this,n,r),this[e].apply(this,arguments))}}function s(e,t,n){return o(e)||a.apply(this,arguments)}function c(e,r,o){var a,c=this,l="loglevel";function u(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t){try{return void(window.localStorage[l]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+r+";"}catch(e){}}}function d(){var e;if(typeof window!==t){try{e=window.localStorage[l]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(l)+"=");r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(e){}return void 0===c.levels[e]&&(e=void 0),e}}e&&(l+=":"+e),c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=o||s,c.getLevel=function(){return a},c.setLevel=function(n,r){if("string"==typeof n&&void 0!==c.levels[n.toUpperCase()]&&(n=c.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=c.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(a=n,!1!==r&&u(n),i.call(c,n,e),typeof console===t&&n<c.levels.SILENT)return"No console available for logging"},c.setDefaultLevel=function(e){d()||c.setLevel(e,!1)},c.enableAll=function(e){c.setLevel(c.levels.TRACE,e)},c.disableAll=function(e){c.setLevel(c.levels.SILENT,e)};var p=d();null==p&&(p=null==r?"WARN":r),c.setLevel(p,!1)}var l=new c,u={};l.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new c(e,l.getLevel(),l.methodFactory)),t};var d=typeof window!==t?window.log:void 0;return l.noConflict=function(){return typeof window!==t&&window.log===l&&(window.log=d),l},l},void 0===(o="function"==typeof r?r.call(t,n,t,e):r)||(e.exports=o)}()},1359:(e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,i,a=[];for(i in"string"!=typeof t&&(t="?"),e)if(n.call(e,i)){if((r=e[i])||null!=r&&!isNaN(r)||(r=""),i=o(i),r=o(r),null===i||null===r)continue;a.push(i+"="+r)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,o={};t=n.exec(e);){var i=r(t[1]),a=r(t[2]);null===i||null===a||i in o||(o[i]=a)}return o}},8989:e=>{!function(t){"use strict";var n,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag",l=t.regeneratorRuntime;if(l)e.exports=l;else{(l=t.regeneratorRuntime=e.exports).wrap=v;var u="suspendedStart",d="suspendedYield",p="executing",f="completed",m={},_={};_[a]=function(){return this};var h=Object.getPrototypeOf,g=h&&h(h(P([])));g&&g!==r&&o.call(g,a)&&(_=g);var E=b.prototype=w.prototype=Object.create(_);I.prototype=E.constructor=b,b.constructor=I,b[c]=I.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===I||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(E),e},l.awrap=function(e){return{__await:e}},O(S.prototype),S.prototype[s]=function(){return this},l.AsyncIterator=S,l.async=function(e,t,n,r){var o=new S(v(e,t,n,r));return l.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},O(E),E[c]="Generator",E[a]=function(){return this},E.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return s.type="throw",s.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function v(e,t,n,r){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new A(r||[]);return i._invoke=function(e,t,n){var r=u;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===o)throw i;return M()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===u)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=y(e,t,n);if("normal"===c.type){if(r=n.done?f:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=f,n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function w(){}function I(){}function b(){}function O(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function S(e){function t(n,r,i,a){var s=y(e[n],e,r);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&o.call(l,"__await")?Promise.resolve(l.__await).then((function(e){t("next",e,i,a)}),(function(e){t("throw",e,i,a)})):Promise.resolve(l).then((function(e){c.value=e,i(c)}),a)}a(s.arg)}var n;this._invoke=function(e,r){function o(){return new Promise((function(n,o){t(e,r,n,o)}))}return n=n?n.then(o,o):o()}}function C(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,C(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=y(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,m;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},3062:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},2225:(e,t,n)=>{"use strict";var r=n(3062),o=n(1359),i=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,a=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(i,"")}var p=[["#","hash"],["?","query"],function(e,t){return _(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function m(e){var t,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},o={},i=typeof(e=e||r);if("blob:"===e.protocol)o=new g(unescape(e.pathname),{});else if("string"===i)for(t in o=new g(e,{}),f)delete o[t];else if("object"===i){for(t in e)t in f||(o[t]=e[t]);void 0===o.slashes&&(o.slashes=s.test(e.href))}return o}function _(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function h(e,t){e=(e=d(e)).replace(a,""),t=t||{};var n,r=l.exec(e),o=r[1]?r[1].toLowerCase():"",i=!!r[2],s=!!r[3],c=0;return i?s?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):s?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===o?c>=2&&(n=n.slice(2)):_(o)?n=r[4]:o?i&&(n=n.slice(2)):c>=2&&_(t.protocol)&&(n=r[4]),{protocol:o,slashes:i||_(o),slashesCount:c,rest:n}}function g(e,t,n){if(e=(e=d(e)).replace(a,""),!(this instanceof g))return new g(e,t,n);var i,s,c,l,f,E,v=p.slice(),y=typeof t,w=this,I=0;for("object"!==y&&"string"!==y&&(n=t,t=null),n&&"function"!=typeof n&&(n=o.parse),i=!(s=h(e||"",t=m(t))).protocol&&!s.slashes,w.slashes=s.slashes||i&&t.slashes,w.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||u.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!_(w.protocol)))&&(v[3]=[/(.*)/,"pathname"]);I<v.length;I++)"function"!=typeof(l=v[I])?(c=l[0],E=l[1],c!=c?w[E]=e:"string"==typeof c?~(f="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(w[E]=e.slice(0,f),e=e.slice(f+l[2])):(w[E]=e.slice(f),e=e.slice(0,f))):(f=c.exec(e))&&(w[E]=f[1],e=e.slice(0,f.index)),w[E]=w[E]||i&&l[3]&&t[E]||"",l[4]&&(w[E]=w[E].toLowerCase())):e=l(e,w);n&&(w.query=n(w.query)),i&&t.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==t.pathname)&&(w.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,o=n[r-1],i=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(i=!0),n.splice(r,1),a--);return i&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(w.pathname,t.pathname)),"/"!==w.pathname.charAt(0)&&_(w.protocol)&&(w.pathname="/"+w.pathname),r(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(~(f=w.auth.indexOf(":"))?(w.username=w.auth.slice(0,f),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(f+1),w.password=encodeURIComponent(decodeURIComponent(w.password))):w.username=encodeURIComponent(decodeURIComponent(w.auth)),w.auth=w.password?w.username+":"+w.password:w.username),w.origin="file:"!==w.protocol&&_(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}g.prototype={set:function(e,t,n){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||o.parse)(t)),i[e]=t;break;case"port":i[e]=t,r(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,c.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";i[e]=t.charAt(0)!==a?a+t:t}else i[e]=t;break;case"username":case"password":i[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(i.username=t.slice(0,s),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=t.slice(s+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<p.length;l++){var u=p[l];u[4]&&(i[u[1]]=i[u[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin="file:"!==i.protocol&&_(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,n=this,r=n.host,i=n.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var a=i+(n.protocol&&n.slashes||_(n.protocol)?"//":"");return n.username?(a+=n.username,n.password&&(a+=":"+n.password),a+="@"):n.password?(a+=":"+n.password,a+="@"):"file:"!==n.protocol&&_(n.protocol)&&!r&&"/"!==n.pathname&&(a+="@"),(":"===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=":"),a+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(a+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(a+=n.hash),a}},g.extractProtocol=h,g.location=m,g.trimLeft=d,g.qs=o,e.exports=g},5715:()=>{},9371:()=>{},6527:()=>{},8839:()=>{},6989:(e,t,n)=>{var r=n(2496),o=n(9859),i=o;i.v1=r,i.v4=o,e.exports=i},3436:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,o=t;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},6825:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)3&t||(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},2496:(e,t,n)=>{var r,o,i=n(6825),a=n(3436),s=0,c=0;e.exports=function(e,t,n){var l=t&&n||0,u=t||[],d=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==p){var f=i();null==d&&(d=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=o=16383&(f[6]<<8|f[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),_=void 0!==e.nsecs?e.nsecs:c+1,h=m-s+(_-c)/1e4;if(h<0&&void 0===e.clockseq&&(p=p+1&16383),(h<0||m>s)&&void 0===e.nsecs&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=m,c=_,o=p;var g=(1e4*(268435455&(m+=122192928e5))+_)%4294967296;u[l++]=g>>>24&255,u[l++]=g>>>16&255,u[l++]=g>>>8&255,u[l++]=255&g;var E=m/4294967296*1e4&268435455;u[l++]=E>>>8&255,u[l++]=255&E,u[l++]=E>>>24&15|16,u[l++]=E>>>16&255,u[l++]=p>>>8|128,u[l++]=255&p;for(var v=0;v<6;++v)u[l+v]=d[v];return t||a(u)}},9859:(e,t,n)=>{var r=n(6825),o=n(3436);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";n(8989)})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{Deferred:()=>L,PubSub:()=>T,bus:()=>x,later:()=>k});var t={};n.r(t),n.d(t,{getArticleFeatures:()=>q,getPageCriteria:()=>z,getPageMetadata:()=>H,getPaywallGeo:()=>Y,setPageMetadata:()=>$});var r={};n.r(r),n.d(r,{default:()=>ae,getLogger:()=>ie,log:()=>oe,logger:()=>J()});var o={};n.r(o),n.d(o,{getExperiments:()=>Re,getStickyNumber:()=>Me});var i={};n.r(i),n.d(i,{LocalStorage:()=>Ue,createLocalStorage:()=>je,getItem:()=>De,removeItem:()=>xe,setItem:()=>ke});var a={};n.r(a),n.d(a,{addArticleRead:()=>Ke,addChannelCount:()=>$e,getChannelCounts:()=>ze,isArticleInRead:()=>Fe});var s={};n.r(s),n.d(s,{manager:()=>Pn,reader:()=>On});var c={};n.r(c),n.d(c,{addInstance:()=>Ko,getConfig:()=>Do,getInstances:()=>Bo,onAddInstance:()=>Vo,onRemoveInstance:()=>Go,removeInstance:()=>Wo,setConfig:()=>ko});var l={};n.r(l),n.d(l,{loadDeferredImgs:()=>Jo,loadScript:()=>Qo,loadStyle:()=>$o,onDocReady:()=>Zo,scrollUtils:()=>ni});var u={};n.r(u),n.d(u,{getHostname:()=>ri,getPathname:()=>oi});var d={};n.r(d),n.d(d,{getConfig:()=>ii});var p={};n.r(p),n.d(p,{config:()=>Jt,fireBidmaxTrackingEvent:()=>_l,googleAnalytics:()=>fl,moduleTracking:()=>cn,nielsen:()=>fn,pageEvents:()=>Ct,ted:()=>To,waitForCMPDecision:()=>bi,waitForCrossDomainReady:()=>gl});var f={};n.r(f),n.d(f,{hideSpinner:()=>yl,initLoadingSpinner:()=>bl,showSpinner:()=>wl});var m={};n.r(m),n.d(m,{after:()=>Sl(),clone:()=>Tl(),compact:()=>Al(),contains:()=>Ml(),debounce:()=>Rl(),each:()=>kl(),extend:()=>Ul(),filter:()=>Bl(),forEach:()=>Gl(),get:()=>Hl(),has:()=>Kl(),isEmpty:()=>zl(),isObject:()=>ql(),keys:()=>Jl(),map:()=>Zl(),merge:()=>ru(),throttle:()=>tu()});var _={};n.r(_),n.d(_,{default:()=>Lu,deviceData:()=>ou,disableScroll:()=>Su,enableScroll:()=>Ou,getMobileVersion:()=>vu,getZoom:()=>yu,isAndroid:()=>du,isAndroidPhone:()=>_u,isAndroidStock:()=>Eu,isAndroidTablet:()=>hu,isChrome:()=>pu,isFirefox:()=>fu,isIDevice:()=>cu,isIPad:()=>uu,isIPhone:()=>lu,isKindleSilk:()=>mu,isLandscape:()=>Iu,isMobile:()=>gu,isPortrait:()=>bu,isWindows:()=>su,isZoomed:()=>wu,onTouchEnd:()=>Tu,parseUserAgent:()=>au,setupMobileClass:()=>Cu});var h={};n.r(h),n.d(h,{checkVendorConsent:()=>md});var g={};n.r(g),n.d(g,{addCookieToReinforce:()=>wd,reinforceCookies:()=>Sd,removeCookieAndStopReinforcing:()=>Od,setCookieAndReinforce:()=>bd,stopReinforcingCookie:()=>Id});var E={};n.r(E),n.d(E,{loaded:()=>rp,smartBanner:()=>tp});var v={};n.r(v),n.d(v,{replaceRelatedElement:()=>yp});var y={};n.r(y),n.d(y,{listenToEvents:()=>Cp});var w={};n.r(w),n.d(w,{getCLSEntries:()=>em,getLCPEntries:()=>Zf,getStandard:()=>Xf,getUpdated:()=>Jf,webVitals:()=>Qf});var I={};n.r(I),n.d(I,{init:()=>dm});var b={};n.r(b),n.d(b,{init:()=>Dm,paywallUtils:()=>km});var O={};n.r(O),n.d(O,{extractArticleId:()=>xm,init:()=>jm,storeSignpostClick:()=>Um});var S={};n.r(S),n.d(S,{isProdDomain:()=>Bm,retrieveXpModuleBody:()=>Hm,retrieveXpModuleHeadJson:()=>Km});var C={};n.r(C),n.d(C,{Log:()=>J(),Nielsen60:()=>fn,externalLinkTracker:()=>I_,getPageMetadata:()=>H,later:()=>k,loadCSS:()=>$o,loadDeferredImgs:()=>Jo,log:()=>oe,molFeArticleRead:()=>a,molFeArticleTimestampChannel:()=>I,molFeAsync:()=>e,molFeClientLogger:()=>r,molFeCmpApi:()=>h,molFeComponents:()=>c,molFeCookieReinforcer:()=>g,molFeDomHelpers:()=>l,molFeLoadingSpinner:()=>f,molFeLocalStorage:()=>i,molFeMiniLodash:()=>m,molFeMobileutils:()=>_,molFeMultivariant:()=>o,molFePageMetadata:()=>t,molFePaywallMasthead:()=>b,molFeRelatedReplace:()=>v,molFeRemixd:()=>y,molFeSegmentation:()=>s,molFeSmartBanner:()=>E,molFeSophiIntegration:()=>O,molFeTracking:()=>p,molFeWebVitals:()=>w,molFeXpModuleDataUtils:()=>S,onDocReady:()=>Zo,pageEvents:()=>Ct,setPageMetadata:()=>$,ted:()=>To,trackSwipe:()=>b_});const T=class{constructor(){this.listeners=new Map}subscribe(e,t){if(!e)throw new Error('Missing required parameter "eventName"');if("function"!=typeof t)throw new Error('Parameter "handler" is not a function');return this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t),{unsubscribe:()=>this.unsubscribe(e,t)}}unsubscribe(e,t){if(!e)throw new Error('Missing required parameter "eventName"');if("function"!=typeof t)throw new Error('Parameter "handler" is not a function');if(this.listeners.has(e)){const n=this.listeners.get(e).filter((e=>e!==t));this.listeners.set(e,n)}}publish(e,...t){if(!e)throw new Error('Missing required parameter "eventName"');this.listeners.has(e)&&setTimeout((()=>{this.listeners.get(e).forEach((n=>n(e,...t)))}),0)}};const L=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},A=function(e,t){return e.has(t)||e.set(t,new L),e.get(t)},P=new Promise((e=>{const t=document.querySelector("#mobile-content .scrollable-content article img");window.PageCriteria&&"article"===window.PageCriteria.pageType&&t?t.complete?e():(t.addEventListener("load",(()=>{e()})),t.addEventListener("error",e)):e()})),M=new Map,N=()=>{},R=function(e,t=N){if("function"!=typeof t)throw new Error('Parameter "callback" is not a function');if(!e)throw new Error('Missing required parameter "eventNames"');let n;if(n=Array.isArray(e)?e:[e],n.some((e=>"string"!=typeof e)))throw new Error('Required parameter "events" is not a string or an array of strings');const r=n.map((e=>A(M,e).promise));return Promise.all([...r,P]).then(t)},D=function(e){A(M,e).resolve()};if(R.go=D,window.DMPlaceholder&&window.DMPlaceholder.laterQueue&&window.DMPlaceholder.laterQueue.length)for(const e of window.DMPlaceholder.laterQueue)R(e.eventNames,e.callback);D("ads");const k=R,x=new T;let U={};const j="AU",B="US",V="CA",G="MX",W="NZ",K="GB",F="IE",H=function(e){return Object.assign({},U,e)},$=function(e){U=e,k.go("PAGE_METADATA_SET")},z=function(){return Object.assign({},window.PageCriteria)},Y=()=>{const{geo:e}=z();return[K,F].includes(e)?K:[j,W].includes(e)?j:[B,V,G].includes(e)?B:"ROW"},q=function(){const e=[],{liveBlog:t,hasLiveBlogHeaderXpmodule:n,hasVideoHeroXpmodule:r,containsVideo:o}=window.PageCriteria;return t&&e.push("liveBlog"),n&&e.push("hasLiveBlogHeaderXpmodule"),r&&e.push("hasVideoHeroXpmodule"),o&&e.push("haseditorialplayer"),e.join(",")};var X=n(5880),J=n.n(X),Q=n(5934),Z=n.n(Q);const ee=Object.keys(J().levels),te=ee.reduce(((e,t)=>(e[J().levels[t]]=t,e)),{}),ne=function(e){const t=window.location.href,n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t)||[];try{return n&&n.length>1?decodeURIComponent(n[2].replace(/\+/g," ")):"object"==typeof localStorage?localStorage[e]:null}catch(e){}return null}("logLevel")||"",re=z().logLevel||"";Z().apply(J(),{nameFormatter:e=>e||"mol-fe",template:"[%n] %l:"}),J().setDefaultLevel(J().levels.ERROR),J().setLevel(J().levels.ERROR),ee.includes(ne.toUpperCase())?J().setLevel(ne,!1):ee.includes(re.toUpperCase())&&J().setLevel(re,!1),console.info(`Current log level: ${te[J().getLevel()]}`),J().log=J().debug;const oe=J().log.bind(J()),ie=(...e)=>{const t=J().getLogger(...e);return t.setLevel(J().getLevel()),t},ae=J();let se=null,ce=null,le=null;const ue=e=>{if(clearTimeout(se),se=null,le&&(le.style.display="none",le=null),ce=e.currentTarget,!ce)return void J().error("No currentTarget on menuHover with event: ",e);ce.children[0].classList.add("link-ccox");const t=ce.querySelector(".nav-secondary-container");t?t.style.display="block":J().error("No secondary nav container on menuHover for currentTarget: ",ce)},de=e=>{ce=e.currentTarget,ce?(ce.children[0].classList.remove("link-ccox"),le=ce.querySelector(".nav-secondary-container"),le?se=setTimeout((()=>{le.style.display="none",le=null,ce=null}),500):J().error("No secondary nav container on menuUnHover for currentTarget: ",ce)):J().error("No currentTarget on menuUnHover")};k("DOM_READY",(()=>{const e=document.querySelector("div.page-header"),t=e.querySelectorAll("ul[data-logout-comp]"),n=e.querySelectorAll("ul[data-login-comp]");if(!e)return;window.DM.isLoggedIn?(t.forEach((t=>{t.style.display="block";const n=e.querySelector("ul.float-r a.js-logout");n&&n.addEventListener("click",(()=>{try{window.localStorage.removeItem("mol-fe-signin-tracking")}catch(e){}}))})),n.forEach((e=>{e.style.display="none"}))):(t.forEach((e=>{e.style.display="none"})),n.forEach((e=>{e.style.display="block"})));const r=e.querySelector("ul.nav-primary");if(!r)return;r.querySelectorAll("li[data-has-menu-on-hover]").forEach((e=>{e.addEventListener("mouseover",ue,!1),e.addEventListener("mouseout",de,!1),e.addEventListener("touchstart",ue,!1),e.addEventListener("touchend",de,!1)}))}));var pe=n(2225),fe=n.n(pe);const me="mol-fe-came-from-mol-session",_e=()=>(e=>{try{if(!("localStorage"in window))return null;const t=window.localStorage.getItem(e);if(t)return JSON.parse(t)}catch(e){}return null})(me),he=e=>((e,t)=>{try{if(!("localStorage"in window))return;window.localStorage.setItem(e,JSON.stringify(t))}catch(e){}})(me,e),ge=()=>{const{renderPlatform:e}=H(),{subchannel:t}=z();return`tim_${e}_${t}`},Ee=(e,t)=>{const n=new(fe())(e,!0),r=n.query||{};return r.ico=t,n.set("query",r),n.href},ve=e=>{const t=document.createElement("li"),n=Ee(e,ge());return t.classList.add("back-to-mol-button"),t.innerHTML=`<a href="${n}"></a>`,t},ye=/dailymail(int)?\.(co\.uk|com)/,we=async e=>{const{renderPlatform:t}=H(),n=document.querySelector(".page-header .masthead, .tim-mobile header");window.timCameFromMolUrl=(e=>{try{return Ee(e,ge())}catch(t){return e}})(e),document.documentElement.classList.add("came-from-mol"),window.adverts||(window.adverts={}),window.adverts.queue||(window.adverts.queue=[]),window.adverts.queue.push({data:{referrer:"dailymail"},scope:"metadata"}),n||await k("DOM_READY"),"mobile"===t?(e=>{const t=Array.from(document.querySelectorAll(".tim-mobile header nav ul li"));if(!t||!t[1])return;const n=t[1],r=ve(e);n.after(r)})(e):"desktop"===t&&(e=>{const t=document.querySelector(".page-header .masthead");if(!t)return;const n=ve(e);t.append(n)})(e)},Ie=()=>{const e=Array.from(document.querySelectorAll(['a[href*="www.thisismoney"][href*="ico=mol_"]:not([data-mutated-tim-url-param])','a[href*="www.thisismoney"][href*="ico=topics_pagination_"]:not([data-mutated-tim-url-param])','a[href*="www.thisismoney"][href*="ico=authors_pagination_"]:not([data-mutated-tim-url-param])'].join(", ")));for(const t of e){const e=t.getAttribute("href"),n=new(fe())(e,!0),r=n.query,o=`${r.ico}-newtab`;r.ico=o,r.molReferrerUrl=location.href,n.set("query",r),t.setAttribute("href",n.href),t.dataset.mutatedTimUrlParam=!0,t.target="_blank";const i=t.parentNode.querySelector(".comments-count > a:not([data-mutated-tim-url-param])");if(i){const e=i.getAttribute("href").split("#")[1];i.setAttribute("href",`${n.href}#${e}`),i.dataset.mutatedTimUrlParam=!0,i.target="_blank"}}setTimeout(Ie,1e3)},be=()=>{const{domain:e}=H();"thisismoney"!==e&&Ie()},Oe=()=>{const{domain:e}=H();if("thisismoney"!==e)return;const t=_e(),{updated:n,referrers:r,origin:o}=t||{},i=r&&document.referrer&&r.includes(document.referrer),a=r&&r.includes(location.href),s=o&&document.referrer&&document.referrer===o;if((i||a||s)&&n&&Date.now()-n<18e5){we(o);const e=a?r:[...r,location.href].slice(-50);return void he({...t,referrers:e,updated:Date.now()})}const c=new(fe())(window.location.href,!0),l=c&&c.query&&c.query.molReferrerUrl||document.referrer,u=l?new(fe())(l,!0):null,d=c&&c.query?c.query.ico:null;u&&u.hostname.match(ye)&&d&&(d.startsWith("mol_")||d.startsWith("topics_pagination_")||d.startsWith("authors_pagination_"))&&(he({origin:l,referrers:[location.href],updated:Date.now()}),we(l))};try{k("PAGE_METADATA_SET",Oe),k("DOM_READY",be)}catch(e){J().error("Error initialising came-from-mol",e)}const Se={autoPuffNews:{criteriaCheck:e=>"desktop"===e.renderPlatform,percentage:.1},autoPuffRec:{criteriaCheck:e=>"desktop"===e.renderPlatform&&"GB"===e.geo,percentage:.05,subSegments:["Retention","Subscriptions","NewUsers","RetentionViews","Golden"]},commerceArticleMailplus:{percentage:.2},googlePrompt:{criteriaCheck:e=>["AU"].includes(e.geo)||location.search.includes("debugGooglePrompt=true"),percentage:1},homepageArticleUI:{criteriaCheck:e=>"desktop"===e.renderPlatform||"mobile"===e.renderPlatform||location.search.includes("debugMV_homepageArticleUI"),percentage:.05,subSegments:["WithTimestamp","WithoutTimestamp"]},morePaywalledRelatedReplace:{criteriaCheck:()=>window.getIsPaywallEligible&&window.getIsPaywallEligible(),percentage:.05},oneTapUK:{criteriaCheck:e=>"GB"===e.geo||location.search.includes("debugOneTap=onetap"),percentage:.06},scrollingNavVariant:{criteriaCheck:e=>["US","GB","AU"].includes(e.geo)&&"mobile"===e.renderPlatform||location.search.includes("debugScrollingNavVariant=true"),percentage:0}},Ce="mol-fe-multivariant-",Te=e=>{try{if(!("localStorage"in window))return null;const t=window.localStorage.getItem(`${Ce}${e}`);if(t)return JSON.parse(t)}catch(e){}return null},Le=1e6,Ae="numbers",Pe=(e,t)=>{let n=Te(Ae);n&&"object"==typeof n||(n={}),n[e]=t,((e,t)=>{try{if(!("localStorage"in window))return;window.localStorage.setItem(`${Ce}${e}`,JSON.stringify(t))}catch(e){}})(Ae,n)},Me=e=>{if(!e)return console.error("[mol-fe-multivariant]","Tried to get sticky number for falsy experimentName"),null;const t=(e=>{try{const t=new URLSearchParams(location.search),n=`debugMV_${e}`,r=t.get(n);if(r)return Number(r)}catch(e){}return null})(e);if("number"==typeof t)return Pe(e,t),t;const n=(e=>{const t=Te(Ae);return t&&"object"==typeof t&&"number"==typeof t[e]?t[e]:null})(e);if("number"==typeof n)return n;const r=Math.floor(Math.random()*Le);return Pe(e,r),r};let Ne=null;const Re=(e=null)=>{const{renderPlatform:t}=e||H(),{geo:n}=e||z(),r={geo:n,renderPlatform:t};if(!Ne){Ne=[];const e=Object.keys(Se);for(const t of e){const{criteriaCheck:e,percentage:n,subSegments:o}=Se[t];if(!e||Boolean(e(r))){const e=Me(t),r=o?o.length:1,i=Le*n*r;if(e<i)if(o){const n=`${t}${o[Math.floor(e/i*o.length)]}`;Ne.push(n)}else Ne.push(t);else if(e>=i&&e<Le*n*(r+1)){const e=`${t}Control`;Ne.push(e)}}}}return Ne||null},De=e=>{try{if(!("localStorage"in window))return null;const t=window.localStorage.getItem(e);if(t)return JSON.parse(t)}catch(e){J().error(e)}return null},ke=(e,t)=>{try{if(!("localStorage"in window))return;window.localStorage.setItem(e,JSON.stringify(t))}catch(e){J().error(e)}},xe=e=>{try{if(!("localStorage"in window))return;window.localStorage.removeItem(e)}catch(e){J().error(e)}};class Ue{constructor(e){this.namespace=e,this.getItem=this.getItem.bind(this),this.setItem=this.setItem.bind(this),this.removeItem=this.removeItem.bind(this),this.clear=this.clear.bind(this)}getItem(e){return De(`${this.namespace}${e}`)}setItem(e,t){return ke(`${this.namespace}${e}`,t)}removeItem(e){return xe(`${this.namespace}${e}`)}clear(){try{if(!("localStorage"in window))return;Object.keys(window.localStorage).filter((e=>e.startsWith(this.namespace))).forEach((e=>window.localStorage.removeItem(e)))}catch(e){J().error(e)}}}const je=e=>new Ue(e),Be=je("mol-fe-article-read-"),Ve=e=>Be.getItem(e),Ge=(e,t)=>Be.setItem(e,t),We="articles",Ke=e=>{const t=Number(e),n=Ve(We)||[];if(n.includes(t))return;let r=[...n,t];r.length>100&&(r=r.slice(r.length-100)),Ge(We,r)},Fe=e=>Boolean((Ve(We)||[]).includes(Number(e))),He="channels",$e=e=>{const t=Ve(He)||{};t[e]=(t[e]||0)+1,Ge(He,t)},ze=()=>Ve(He)||{},Ye="topics",qe=e=>{const t=((e,t)=>{const n=new Set(t),r=Object.entries(e).map((([e,t])=>{const r=n.has(e)?1:0;n.delete(e);const o=t*(1-(e.startsWith("commerce")?.05:.1))+r;return[e,Math.floor(1e3*o)/1e3]}));return n.forEach((e=>{r.push([e,1])})),r.sort(((e,t)=>t[1]-e[1])).slice(0,1e3).reduce(((e,[t,n])=>(e[t]=n,e)),{})})(Ve(Ye)||{},e);Ge(Ye,t)},Xe=()=>{try{const e=z();if("article"!==e.pageType)return;const{articleId:t,channel:n}=e,{topics:r}=H();Ke(Number(t)),$e(n),qe(r)}catch(e){J().error("Error initialising mol-fe-article-read",e)}};try{k("PAGE_METADATA_SET",Xe)}catch(e){J().error("Error initialising mol-fe-article-read",e)}var Je=n(6660),Qe=n.n(Je);const Ze="/api/mol-fe-feeds/v2/articles/rankedForAutoPuff",et={AU:"/auhome",GB:"/home",US:"/ushome"},tt=async({channel:e=null,isUKHome:t=!1}={})=>{try{let n=e&&"string"==typeof e?(e=>`/api/mol-fe-feeds/v2/articles/rankedPaywalled/channel/${e}/withXpModules/true/geo/${Y()}`)(e):`/api/mol-fe-feeds/v2/articles/rankedPaywalled/withXpModules/true/geo/${Y()}`;t&&(n=`${Ze}/geo/gb/paywalledOnly/true`);const r=await Qe().get(n);if(!r||!r.data||!r.data.articles)return[];const{articles:o}=r.data,i=t?o:o.filter((e=>!Fe(e.articleId)));return i.length>=15?i:o}catch(e){J().error("Error fetching paywalled articles for autopuff",e)}return[]},nt=async()=>{const{articleId:e,geo:t}=z(),n=`/api/mol-fe-feeds/v2/articles/rankedByChannel/sport/geo/${Y()}/period/30/size/150`,r=await Qe().get(n);if(!r||!r.data||!r.data.articles)throw new Error("[mol-fe-auto-puff] Invalid sports ranked articles response");const{articles:o}=r.data;return o.filter((n=>!Fe(n.articleId)&&n.articleId!==e&&!((e,t)=>t.subChannel&&"AFL"===t.subChannel&&"AU"!==e)(t,n)))},rt=[4,6,8],ot=async({isUKHome:e=!1,isGolden:t=!1}={})=>{const{articleId:n,cljGeo:r,geo:o}=z(),{domain:i,environment:a}=H(),s="thisismoney"===i?`https://www.dailymail${"production"===a?"":"int"}.co.uk`:"";let c=`${s}/api/mol-fe-feeds/v2/articles/rankedByChannelReferrer${`${et[o]||et.GB}/withXpModules/true`}`;e&&(c=`${s}${Ze}/geo/gb`),t&&(c=`${s}/api/mol-fe-feeds/v2/articles/rankedGoldenMetric/geo/${r.toLowerCase()}`);const l=await Qe().get(c);if(!l||!l.data||!l.data.articles)throw new Error("[mol-fe-auto-puff] Invalid ranked articles response");const{articles:u}=l.data;if(!e)return u.filter((e=>!Fe(e.articleId)&&e.articleId!==n)).slice(0,50);let d=u.filter((e=>Date.now()-new Date(e.firstPubDate).getTime()<18e6)).slice(0,5);d.length<5&&(d=u.slice().sort(((e,t)=>new Date(e.firstPubDate).getTime()-new Date(t.firstPubDate).getTime())).slice(0,5));const p=d.map((e=>e.articleId)),f=u.filter((e=>!p.includes(e.articleId)));let m=f.filter((e=>Date.now()-new Date(e.firstPubDate).getTime()<432e5)).slice(0,10);m.length<10&&(m=f.slice().sort(((e,t)=>new Date(e.firstPubDate).getTime()-new Date(t.firstPubDate).getTime())).slice(0,10));const _=m.map((e=>e.articleId)),h=f.filter((e=>!_.includes(e.articleId))),g=[...d,...m,...h].slice(0,100);try{const e=`${s}/api/mol-fe-feeds/v2/articles/recentForAutoPuff/geo/gb`,t=await Qe().get(e),{articles:n}=t.data,r=g.map((e=>e.articleId));if(n){const e=n.filter((e=>!r.includes(e.articleId)));let t=0;for(const n of rt)e[t]&&g[n]&&(g.splice(n,0,e[t]),t++)}}catch(e){J().error("Error fetching recent articles for autopuff",e)}return g},it={autoPuffRecNewUsers:"newUsers",autoPuffRecRetention:"retention",autoPuffRecRetentionViews:"retentionViews",autoPuffRecSubscriptions:"subscriptions"},at=async({autoPufRecExperimentSegment:e})=>{const{cljGeo:t}=z(),n=(t||"GB").toLowerCase(),r=it[e];if(!r)throw new Error("Invalid Valent experiment segment");const o=`/api/mol-fe-feeds/v2/articles/rankedValent/${r}/geo/${n}`,i=await Qe().get(o);if(!i||!i.data||!i.data.articles)throw new Error("[mol-fe-auto-puff] Invalid ranked articles response");const{articles:a}=i.data;return a},st="lifestyle",ct=(e,{headlineMaxLength:t=160,useSocialHeadline:n=!1}={},r,o)=>{const{domain:i,environment:a,renderPlatform:s}=H(),{channel:c}=z(),l=r?document.createElement("li",{is:"ad-marker-li"}):document.createElement("li");r&&(l.dataset.adMarkerGroup="puff-list"),l.dataset.autoPuffItem=!0,Array.isArray(e.xpModulesUsed)&&e.xpModulesUsed.some((e=>e.startsWith("mol-fe-xpmodule-video-hero")))&&l.classList.add("video-led");let u=n?e.headline:e.fullHeadline||e.headline;u.length>t&&(u=u.substring(0,t)+"...");let d=e.url;if("money"===e.channel&&"thisismoney"!==i){d=`https://www.thisismoney${"integration"===a?"int":""}.co.uk${d}?ico=${`mol_${s}_${c}`}`}if("money"!==e.channel&&"thisismoney"===i){d=`https://www.dailymail${"integration"===a?"int":""}.co.uk${d}?ico=${`tim_autopuff_${s}_${c}`}`}let p=e.propensityLevel;!p&&e.wallDecisions&&(p=e.wallDecisions[o]&&e.wallDecisions[o].propensityLevel);const f=`<span class="is-paywalled"${e.isPaywalled?"":` data-content-propensity="${p??"x"}"`}></span>`;l.innerHTML=`\n    <a href="${d}">\n      <img src="${e.puffImage||e.imgUrl}" height="115" width="154" alt="" loading="lazy">\n      <span class="pufftext">\n        <span class="arrow-small-r"></span>\n        <strong>\n          ${e.neverPaywall?"":f}${u}\n        </strong>\n      </span>\n    </a>\n  `;const{paywalledCountries:m}=e,_=!window.getIsPaywalledForCountry||window.getIsPaywalledForCountry({paywalledCountries:m});return!e.neverPaywall&&e.isPaywalled&&_&&(l.dataset.isPaywalled=!0),l},lt=e=>{try{const t=e.querySelector("a");if(!t)return null;const n=t.href.match(/\/article-(\d+)\//)[1];return Number(n)||null}catch(e){return null}};let ut=!1;const dt={sport:"STARS OF SPORT"},pt=(e,t,n=!1)=>{if(!ut){ut=!0;try{if(e.dataset.trackModule=e.dataset.trackModule.replace(/\^puff/,"^autopuff"),n)return;const r=e.parentNode.classList.contains(st)?st:"femail";e.parentNode.classList.remove(r),e.parentNode.classList.remove("travel"),e.parentNode.classList.add(t||"home"),e.parentNode.dataset.channelColor=t||"home",e.querySelector("h3").innerHTML=t&&dt[t]||"TOP STORIES";const o=document.querySelectorAll(".puff ul")[1];o&&o.parentNode.parentNode.classList.contains("tvshowbiz")&&(o.parentNode.parentNode.classList.remove("tvshowbiz"),o.parentNode.parentNode.classList.add(r),o.parentNode.parentNode.dataset.channelColor=r,o.parentNode.querySelector("h3").innerHTML="DON'T MISS")}catch(e){}}},ft=(e,t)=>{for(const t of Object.keys(e.dataset))delete e.dataset[t];for(const n of Object.keys(t.dataset))e.dataset[n]=t.dataset[n];e.className=t.className,e.innerHTML=t.innerHTML},mt=["britishairwaysholidays"],_t=["news","property","health","sciencetech","travel","sport"],ht=["property"],gt=["news","tv","tvshowbiz","lifestyle","health","sciencetech","travel"],Et=async()=>{try{const{articleStyle:e,channel:t,pageType:n,subchannel:r}=z(),{renderPlatform:o,domain:i}=H(),a=Re(),s=a&&a.includes("autoPuffHome"),c=a&&a.includes("autoPuffNews"),l=a&&a.find((e=>e?.startsWith("autoPuffRec"))),u="autoPuffRecControl"===l,d="autoPuffRecGolden"===l,p=l&&!u&&gt.includes(t),f="channel"===n&&"home"===t&&"home"===r&&"desktop"===o&&s,m="channel"===n&&"news"===t&&"news"===r&&"desktop"===o&&c;if(r&&mt.includes(r))return;if(!(f||m||"article"===n&&"desktop"===o&&"wide"===e))return;if("thisismoney"===i){if("moneycars"!==r)return;if(!document.referrer||!document.referrer.match(/^https:\/\/(www|a|b)\d?\.dailymail(int)?\.co\.uk/i))return}else{if(!f&&!m&&gt.includes(t)&&u)return;if(!(f||m||p||_t.includes(t)||ht.includes(r)))return}const _=window.getIsPaywallEligible&&window.getIsPaywallEligible();let h;h="thisismoney"===i||f||m||!p?"sport"===t?[nt(),_?tt({channel:t}):[]]:[ot({isUKHome:f}),_?tt({isUKHome:f}):[]]:d?[ot({isGolden:!0}),[]]:[at({autoPufRecExperimentSegment:l}),[]],h.push(k("DOM_READY"));const g=Y().toLowerCase(),[E,v]=await Promise.all(h);if(!E||!E.length)return;(({articles:e,paywalledArticles:t=[],channel:n,isAutoPuffRecExperiment:r=!1,isUKHome:o=!1,isNewsChannel:i=!1,geo:a})=>{if(!e||!e.length)return;let s=".puff ul li:not([data-is-sponsored]):not(.exclusive):not(:has(.is-exclusive,.is-breaking-news))",c=".puff ul li[data-is-sponsored],.puff ul li.exclusive,.puff ul li:has(.is-exclusive,.is-breaking-news)";(o||i||r)&&(s=".puff ul li:not([data-is-sponsored])",c=".puff ul li[data-is-sponsored]");const l=document.querySelectorAll(s),u=document.querySelectorAll(c),d=Array.from(l).filter((e=>!(e.closest(".royal_wedding")||(o||i)&&e.closest(".sport")))).filter((e=>e&&e.children&&e.children[0]&&"A"===e.children[0].tagName));if(!d.length)return;const p=Array.from(u).map(lt).filter(Boolean);let f=e.slice().filter((e=>!p.includes(e.articleId))),m=f.map((e=>e.articleId));const _=d.map(lt).filter(Boolean),h=[],g=[];let E=t.filter((e=>!p.includes(e.articleId))).filter((e=>!m.includes(e.articleId)));if((o||i)&&E.length<4&&t.length){E=t.filter((e=>!p.includes(e.articleId)));const e=E.map((e=>e.articleId));f=f.filter((t=>!e.includes(t.articleId))),m=f.map((e=>e.articleId))}let v=1;for(const e of d){const t=Array.from(document.querySelectorAll(".puff ul li")).filter((e=>e&&e.children&&e.children[0]&&"A"===e.children[0].tagName)).indexOf(e)+1,r=(o||i?t%4==0:(v-3)%4==0)&&f.length>0&&E.length>0?E.shift():f.shift(),s=lt(e),c=r&&Number(r.articleId);if(!e.dataset.autoPuffReorder)if(r&&c!==s){const t=ct(r,{},o,a);if(!ut){const t=e.closest(".puff");pt(t,n,o)}if(_.includes(c)){const t=d.find((e=>e.querySelector("a").getAttribute("href")===r.url))||g.find((e=>e.querySelector("a").getAttribute("href")===r.url));if(t){const n=t.cloneNode(!0);t.dataset.autoPuffReorderSource=!0,n.dataset.autoPuffReorderTarget=!0,e.dataset.autoPuffReorderSource||m.includes(s)||h.push(e.cloneNode(!0)),g.push(e.cloneNode(!0)),ft(e,n)}}else e.dataset.autoPuffReorderSource||m.includes(s)||h.push(e.cloneNode(!0)),g.push(e.cloneNode(!0)),ft(e,t)}else if(h.length&&!r){const t=h.shift();t.dataset.autoPuffMoved=!0,e.dataset.autoPuffReorderSource||h.push(e.cloneNode(!0)),g.push(e.cloneNode(!0)),ft(e,t)}v++}})({articles:E,channel:"sport"===t?t:null,geo:g,isAutoPuffRecExperiment:p,isNewsChannel:m,isUKHome:f,paywalledArticles:v})}catch(e){J().error("Error initialising mol-fe-auto-puff",e)}},vt=async({iteration:e=1,topic:t,exclude:n=[]}={})=>{const r=e>1?`/api/mol-fe-feeds/v2/articles/topicArticles/puff/${t}/page/${e-1}/size/200/withXpModules/true`:`/api/mol-fe-feeds/v2/articles/rankedByTopicGroup/${t}/size/200/withXpModules/true/geo/${Y()}`,{domain:o,environment:i}=H(),a=`${"thisismoney"===o?`https://www.dailymail${"production"===i?"":"int"}.co.uk`:""}${r}`,s=await Qe().get(a);if(!s||!s.data||!s.data.articles)throw new Error("Invalid topic puff articles response");const{articles:c}=s.data;return c.filter((e=>!n.includes(e.articleId)))},yt=[{puffSelectorsByEnv:{integration:['.puff[data-track-module="llg-115099675^puff"]','.puff[data-track-module="llg-115970151^puff"]'],production:['.puff[data-track-module="llg-115970151^puff"]']},topic:"royals"}],wt=async()=>{try{const{environment:e,renderPlatform:t}=H(),{pageType:n}=z();if("desktop"!==t)return;const r=Y().toLowerCase();for(const{puffSelectorsByEnv:t,topic:o}of yt){const i=t[e]||t.production,a=Array.from(document.querySelectorAll(i.join(",")));let s=[],c=1,l=await vt({iteration:c,topic:o});s=s.concat(l.map((e=>e.articleId)));let u=0;for(const e of a){const t=e.closest(".beta"),i=t.parentNode.querySelector(".alpha"),a=Array.from(e.querySelectorAll(0===u?"ul li:not([data-is-sponsored]):not(.exclusive)":"ul li")).filter((e=>e&&e.children&&e.children[0]&&"A"===e.children[0].tagName)),d=i?i.offsetHeight-t.offsetHeight:0;let p=Math.min(Math.ceil(d/120)+a.length,1e3);for("article"===n&&(p=Math.max(p,200));p>l.length;){c++;const e=await vt({exclude:s,iteration:c,topic:o});if(!e||!e.length||c>10)break;s=s.concat(e.map((e=>e.articleId))),l=l.concat(e)}if(a.length>p)for(let e=a.length-1;e>=p;e--)a[e].remove();let f=!0,m=0;for(;p>0;){const o=l.shift();if(a[m]){const e=ct(o,{headlineMaxLength:90,useSocialHeadline:!0},!1,r);a[m].replaceWith(e)}else if("article"===n||t.offsetHeight<i.offsetHeight+100){const n=ct(o,{headlineMaxLength:90,useSocialHeadline:!0},f,r);e.querySelector("ul").appendChild(n);const a=i?i.offsetHeight-t.offsetHeight:0;p=a<=0?0:Math.min(Math.ceil(a/120),1e3),a<625&&(f=!1)}m++}u++}}}catch(e){J().error("Error initialising mol-fe-auto-puff royals",e)}};try{k("PAGE_METADATA_SET",Et),k("DOM_READY",wt)}catch(e){J().error("Error initialising mol-fe-auto-puff",e)}k("DOM_READY",(()=>{const{geo:e=""}=z()||{},t=e&&`data-href-geo-${e.toLowerCase()}`,n=t&&document.querySelectorAll(`a[${t}]`);n&&n.forEach((e=>{const n=e.getAttribute(t);n&&e.setAttribute("href",n)}))})),k("DOM_READY").then((()=>{const e=document.body.querySelectorAll('a[href="#top"]:not(.back-to-top)');return Array.from(e).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),window.scrollTo(0,0)}))})),null})).catch((e=>J().error("There was an error loading scrollToTop extension",e)));var It=n(6654),bt=n.n(It);const Ot=class extends T{constructor(e={}){super(),Object.assign(this,e),this.eventsMap=Object.keys(e).reduce(((t,n)=>(t[e[n]]?J().warn(`Conflicting event value for events "${n}" and "map[events[key]]"`):t[e[n]]=n,t)),{})}subscribe(e,t){return e&&!this.eventsMap[e]&&J().warn(`Subscribing to non-standard event "${e}"`),super.subscribe(e,t)}publish(e,t){if(!e)throw new Error('Missing required parameter "eventName"');e&&!this.eventsMap[e]&&J().warn(`Publishing non-standard event "${e}"`),J().trace(`Published PageEvent "${e}"`,t),this.listeners.get(e)&&this.listeners.get(e).forEach((n=>{try{n(e,t)}catch(e){J().error(e)}}))}listen(e,t,n){J().warn('"pageEvents.listen(eventName, function(observable, eventName, data) {...}, context)" has been deprecated.\n  Please use "pageEvents.subscribe(eventName, (eventName, data) => {...})" instead');return this.subscribe(e,((...e)=>{t.call(n,this,...e)}))}fireEvent(e,t){return J().warn('"pageEvents.fireEvent(eventName, data)" has been deprecated. Please use "pageEvents.publish(eventName, data)" instead'),this.publish(e,t)}},St={AD_BILLBOARD_CLOSED:"ad_billboard-closed",AD_SLOT_LOADED_ON_PAGE:"adslot.loaded_on_page",AFFILIATE_CAROUSEL_CLICK:"affiliate.carousel_click",AFFILIATE_CAROUSEL_IMPRESSION:"affiliate.carousel_impression",AFFILIATE_CAROUSEL_VIEWABLE:"affiliate.carousel_viewable",ARTICLE_HERO_AUTHOR_TWITTER_LINK_CLICK:"article_hero.author_twitter_link_click",ARTICLE_HERO_LOZENGE_LINK_CLICK:"article_hero.lozenge_link_click",ARTICLE_PREVIEW_XP_CLICK:"article.preview.xp.click",ARTICLE_PREVIEW_XP_IMPRESSION:"article.preview.xp.impression",ARTICLE_PREVIEW_XP_VIEWABLE:"article.preview.xp.viewable",ARTICLE_RECOMMENDATION_XP_CLICK:"article.recommendation.xp.click",ARTICLE_RECOMMENDATION_XP_IMPRESSION:"article.recommendation.xp.impression",ARTICLE_RECOMMENDATION_XP_VIEWABLE:"article.recommendation.xp.viewable",ARTICLE_TRUNCATION_EXPAND:"article.truncation.expand",ARTICLE_TRUNCATION_INELIGIBLE:"article.truncation.ineligible",ARTICLE_TRUNCATION_READ_NEXT:"article.truncation.read_next",ARTICLE_TRUNCATION_TRUNCATE:"article.truncation.truncate",ARTICLE_TRUNCATION_VIEWABLE:"article.truncation.viewable",BF_BUY_NOW_CAROUSEL_CLICKED:"bf.buy_now_carousel_clicked",BF_BUY_NOW_HEADER_CLICKED:"bf.buy_now_header_clicked",BF_CAROUSEL_IN_VIEW:"bf.carousel_in_view",BF_CAROUSEL_ROTATE_CLICKED:"bf.carousel_clicked",BF_IMPRESSION:"bf.impression",BF_SHOW_MORE_CLICKED:"bf.show_more_clicked",CMP_LEVEL_ONE_ACCEPT:"cmp.cmp_level_1_accept",CMP_LEVEL_ONE_CONVERSION:"cmp.cmp_level_1_conversion",CMP_LEVEL_ONE_LOGIN:"cmp.cmp_level_1_login",CMP_LEVEL_ONE_PRIVACY_SETTINGS:"cmp.cmp_level_1_privacy_settings",CMP_LEVEL_ONE_SUBSCRIBE:"cmp.cmp_level_1_subscribe",CMP_LEVEL_TWO_CONVERSION:"cmp.cmp_level_2_conversion",CMP_LEVEL_TWO_SAVE_EXIT:"cmp.cmp_level_2_save_exit",CMP_LEVEL_TWO_SUBSCRIBE:"cmp.cmp_level_2_subscribe",COMMENT_CTA_CLICK:"commentcta.click",COMMENT_CTA_IMPRESSION:"commentcta.impression",COMMENTS_ADD_COMMENT_CLICK:"comments.add-comment-click",COMMENTS_CLEAR:"comments.clear",COMMENTS_CLICK:"comments.click",COMMENTS_DELETE:"comments.delete",COMMENTS_DOWNVOTE:"comments.downvote",COMMENTS_IMPRESSION:"comments.impression",COMMENTS_LOAD_TIME:"comments.load-time",COMMENTS_LOGIN_REDIRECT:"comments.login-redirect",COMMENTS_MASTHEAD_CLICK:"comments.masthead-click",COMMENTS_NEW_COMMENT_CLICK:"comments.new-comment-click",COMMENTS_NOTIF_CLICK:"comments.notif-click",COMMENTS_OVERLAY_CLOSE:"comments.overlay-close",COMMENTS_OVERLAY_OPEN:"page.comments-overlay-open",COMMENTS_PAGINATION_CLICK:"comments.pagination-click",COMMENTS_PROFILE_CLICK:"comments.profile-click",COMMENTS_REPLY_CLICK:"comments.reply-click",COMMENTS_REPLY_SUBMIT:"comments.reply-submit",COMMENTS_REPLY_SUBMIT_SUCCESS:"comments.reply-submit-success",COMMENTS_REPORT_CLICK:"comments.report-click",COMMENTS_SHOW_MORE_CLICK:"comments.show-more-click",COMMENTS_SUBMIT_COMMENT:"comments.submit-comment",COMMENTS_SUBMIT_SUCCESS:"comments.submit-success",COMMENTS_UPVOTE:"comments.upvote",COMMENTS_VIEW:"comments.view",COMMENTS_VIEW_ALL:"comments.view-all",COMMERCE_XP_CLICK:"commerce_xp.click",COMMERCE_XP_IMPRESSION:"commerce_xp.impression",COMMERCE_XP_VIEW_MORE:"commerce_xp.view_more",COMMERCE_XP_VIEWABLE:"commerce_xp.viewable",COMPANY_REVIEW_IMPRESSION:"company_review.impression",COMPANY_REVIEW_LEARN_MORE_CLICKED:"company_review.learn_more_clicked",COMPANY_REVIEW_LESS_CONTENT_CLICKED:"company_review.less_content_clicked",COMPANY_REVIEW_MORE_CONTENT_CLICKED:"company_review.more_content_clicked",CONTACT_FORM_CAPTCHA_VALID:"mol_fe_contact_form.captcha-valid",CONTACT_FORM_FILE_ADDED:"mol_fe_contact_form.file-added",CONTACT_FORM_FILE_ERROR_CLIENT:"mol_fe_contact_form.file-error-client",CONTACT_FORM_FILE_ERROR_SERVER:"mol_fe_contact_form.file-error-server",CONTACT_FORM_SUBMIT_CLICK:"mol_fe_contact_form.submit-click",CONTACT_FORM_SUBMIT_ERROR:"mol_fe_contact_form.submit-error",CONTACT_FORM_SUBMIT_SUCCESS:"mol_fe_contact_form.submit-success",CONVERSION_MODAL_BENEFITS:"conversion.modal_benefits",CONVERSION_MODAL_CLOSE:"conversion.modal_close",CONVERSION_MODAL_CONTINUE:"conversion.modal_continue",DESKTOP_HOME_PAGE_OVERLAY:"page.desktop_home_page_overlay",ERROR_RENDER_STARTED:"error-page.render-started",ESSENTIAL_ACCOUNT_LINK_COMPLETE:"cmp.essential_account_link_complete",ESSENTIAL_ACCOUNT_LINK_HELP_CLICK:"cmp.essential_account_link_help_click",ESSENTIAL_ACCOUNT_LINK_PROMPT:"cmp.essential_account_link_prompt",ESSENTIAL_ACCOUNT_LINK_RESEND:"cmp.essential_account_link_resend_email_click",ESSENTIAL_RESTORE_PURCHASE_CLICK:"cmp.essential_restore_purchase_click",FACTBOX_READ_MORE_CLICK:"factbox.read-more-click",FEATURE_ARTICLE:"page.feature_article",FIDELITY_CAMPAIGN_EVENT:"fidelity-campaign.event",FIREWORK_VIDEO_CAROUSEL_ERROR:"firework-video-carousel.error",FIREWORK_VIDEO_CAROUSEL_IMPRESSION:"firework-video-carousel.impression",FIREWORK_VIDEO_CAROUSEL_PLAYER_NAVIGATION:"firework-video-carousel.player-navigation",FIREWORK_VIDEO_CAROUSEL_PLAYER_QUIT:"firework-video-carousel.player-quit",FIREWORK_VIDEO_CAROUSEL_PLAYER_TRANSITION:"firework-video-carousel.player-transition",FIREWORK_VIDEO_CAROUSEL_READY:"firework-video-carousel.ready",FIREWORK_VIDEO_CAROUSEL_THUMBNAIL_CLICK:"firework-video-carousel.thumbnail-click",FIREWORK_VIDEO_CAROUSEL_VIDEO_CLICK_CTA:"firework-video-carousel.video-click-cta",FIREWORK_VIDEO_CAROUSEL_VIDEO_CLICK_SHARE:"firework-video-carousel.video-click-share",FIREWORK_VIDEO_CAROUSEL_VIDEO_COMPLETE:"firework-video-carousel.video-complete",FIREWORK_VIDEO_CAROUSEL_VIDEO_FIRST_QUARTILE:"firework-video-carousel.video-first-quartile",FIREWORK_VIDEO_CAROUSEL_VIDEO_IMPRESSION:"firework-video-carousel.video-impression",FIREWORK_VIDEO_CAROUSEL_VIDEO_MID_POINT:"firework-video-carousel.video-mid-point",FIREWORK_VIDEO_CAROUSEL_VIDEO_SESSION:"firework-video-carousel.video-session",FIREWORK_VIDEO_CAROUSEL_VIDEO_START:"firework-video-carousel.video-start",FIREWORK_VIDEO_CAROUSEL_VIDEO_THIRD_QUARTILE:"firework-video-carousel.video-third-quartile",FLOATING_BUTTONS_BACK_TO_TOP:"back-to-top",FOR_YOU_SAVE_PREFERENCES_CLICK:"for-you.save_preferences_click",FRAGMENT_LOADED:"page.fragment-loaded",GALLERY_ADVERT_STATS:"gallery.advert-stats",GALLERY_ADVERT_VIEWED:"gallery.advert.viewed",GALLERY_CLOSED:"gallery.closed",GALLERY_IMAGE_VIEWED:"gallery.image-viewed",GALLERY_OPENED:"gallery.opened",GDPR_EMBEDDED_VIDEO_ACCEPTED:"gdpr.embedded_video_accepted",GDPR_EMBEDDED_VIDEO_DISPLAYED:"gdpr.embedded_video_displayed",GDPR_EMBEDDED_VIDEO_SETTINGS:"gdpr.embedded_video_settings",GDPR_MOBILE_HOME_ACCEPTED:"gdpr.mobile_home_accepted",GDPR_MOBILE_HOME_DISPLAYED:"gdpr.mobile_home_displayed",GDPR_MOBILE_HOME_SETTINGS:"gdpr.mobile_home_settings",GDPR_OVERLAY_ACCEPT_BY_CLICK_SITE:"gdpr.overlay_accept_by_click_site",GDPR_OVERLAY_ACCEPTED:"gdpr.overlay_accepted",GDPR_OVERLAY_DISPLAYED:"gdpr.overlay_displayed",GDPR_OVERLAY_PRIVACY:"gdpr.overlay_privacy",GDPR_SETTINGS_ADVERTISING_ALLOW_ALL:"gdpr.settings_advertising_allow_all",GDPR_SETTINGS_ADVERTISING_LINK_CLICKED:"gdpr.settings_advertising_link_clicked",GDPR_SETTINGS_ADVERTISING_TAB_CLICKED:"gdpr.settings_advertising_tab_clicked",GDPR_SETTINGS_CONFIRMATION_ALLOW:"gdpr.settings_confirmation_allow",GDPR_SETTINGS_CONFIRMATION_DISALLOW:"gdpr.settings_confirmation_disallow",GDPR_SETTINGS_DISALLOW_ADVERTISING_PARTNERS:"gdpr.settings_disallow_advertising_partners",GDPR_SETTINGS_FUNCTION_ALLOW_ALL:"gdpr.settings_function_allow_all",GDPR_SETTINGS_FUNCTION_TAB_CLICKED:"gdpr.settings_function_tab_clicked",GDPR_SETTINGS_POLICY_LINK_CLICKED:"gdpr.settings_policy_link_clicked",GEO_TARGETED_HOMEPAGE_XP_CLICK:"geo.targeted.homepage.xp.click",GEO_TARGETED_HOMEPAGE_XP_IMPRESSION:"geo.targeted.homepage.xp.impression",GEO_TARGETED_HOMEPAGE_XP_VIEWABLE:"geo.targeted.homepage.xp.viewable",GOOGLE_SUBSCRIPTION_DISMISS:"google-subscription.dismiss",GOOGLE_SUBSCRIPTION_LINK:"google-subscription.link",GOOGLE_SUBSCRIPTION_VIEW:"google-subscription.impression",GUESTBOOK_IMPRESSION:"guestbook.impression",GUESTBOOK_LOADING_ERROR:"guestbook.loading_error",GUESTBOOK_SUBMIT_ERROR:"guestbook.submit_error",GUESTBOOK_SUBMIT_SUCCESS:"guestbook.submit_success",IFRAME_EMAIL_IMPRESSION:"iframe.email.impression",IFRAME_EMAIL_SUBMIT:"iframe.email.submit",IFRAME_EMAIL_SUBMIT_NO_EMAIL:"iframe.email.submit_no_email",IFRAME_EMAIL_VIEWABLE:"iframe.email.viewable",LINK_CLICK:"link.click",LIVE_BLOG_LOAD_MORE:"liveblog.load_click_more",MAGAZINE_READ_NOW_CLICK:"magazine.read_now_click",MASTHEAD_CLICK:"masthead_click",MOBILE_HOME_PAGE_NAV:"page.mobile_home_page_nav",MOBILE_HOME_PAGE_OVERLAY:"page.mobile_home_page_overlay",MOBILE_HOME_PAGE_SIGNPOST_CLICK:"page.mobile_home_page_signpost_click",MOBILE_HOME_PAGE_SIGNPOST_DISMISS:"page.mobile_home_page_signpost_dismiss",MOBILE_HOME_PAGE_SIGNPOST_DISPLAY:"page.mobile_home_page_signpost_display",MOBILE_HOME_PAGE_SWIPE:"page.mobile_home_page_swipe",MOBILE_HOME_PAGE_VIEW:"page.mobile_home_page_view",MOBILE_MENU_COMMENT:"menu.mobile_menu_comment",MOBILE_MENU_DESKTOP_SITE:"menu.mobile_menu_desktop_site",MODULE_IMPRESSION:"module.impression",MODULE_INTERACT:"module.interact",MODULE_VIEW:"module.view",MOST_COMMENTED_ARTICLE_CLICKED:"page.most_commented_article_clicked",MOST_COMMENTED_CLOSE_CLICKED:"page.most_commented_close_clicked",MOST_COMMENTED_RADIO_CLICKED:"page.most_commented_radio_clicked",MOST_COMMENTED_SHOWMORE_CLICKED:"page.most_commented_showmore_clicked",NEWSLETTER_ERROR:"newsletter.error",NEWSLETTER_POPUP_SHOW:"newsletter-popup.show",NEWSLETTER_POPUP_SUBMIT:"newsletter-popup.submit",NEWSLETTER_PRIVACY_CLICK:"newsletter-privacy.click",NEWSLETTER_SHOW:"newsletter.show",NEWSLETTER_SUBMIT:"newsletter.submit",ONE_TAP_CLOSE:"onetap.close",ONE_TAP_CONTINUE:"onetap.continue",ONE_TAP_IMPRESSION:"onetap.impression",PAGE_AD_DISPLAYED:"page.ad-displayed",PAGE_AD_ERRORS:"page.ad-errors",PAGE_AD_STATS:"page.ad-stats",PAGE_AUTOREFRESH_EVENT:"page.autorefresh-event",PAGE_COMMENT_FUNNEL_PROGRESSED:"page.comment-funnel-progressed",PAGE_COMMENT_TAB_SWAPPED:"page.comment-tab-swapped",PAGE_EXTERNAL_LINK_CLICKED:"page.external-link-clicked",PAGE_EXTERNAL_LINK_CLICKED_GA:"page.external-link-clicked-ga",PAGE_FOOTBALL_FIXTURES_TAB_SWAPPED:"page.football-fixtures-tab-swapped",PAGE_FURNITURE_CLICKED:"page.furniture-clicked",PAGE_IMAGE_ENLARGED:"page.image-enlarged",PAGE_LOGIN_BUTTON_CLICKED:"page.login-button-clicked",PAGE_LOGIN_OPENED:"page.login-opened",PAGE_MOBILE_TAB_CHANGE:"page.mobile.tab.change",PAGE_MODULE_CLICKED:"page.module-clicked",PAGE_NEWSLETTERS_OPENED:"page.newsletters-opened",PAGE_RENDER_STARTED:"page.render-started",PAYWALL_ACCOUNT_LINK_COMPLETE:"paywall.account-link-complete",PAYWALL_ACCOUNT_LINK_HELP:"paywall.account-link-help",PAYWALL_ACCOUNT_LINK_PROMPT:"paywall.account-link-prompt",PAYWALL_ACCOUNT_LINK_RESEND:"paywall.account-link-resend",PAYWALL_CONVERSION:"paywall.conversion",PAYWALL_CONVERSION_BANNER:"paywall.conversion-banner",PAYWALL_CONVERSION_PROFILE:"paywall.conversion-profile",PAYWALL_HOMEMODULE_ARTICLE_CLICK:"paywall.homemodule-article-click",PAYWALL_HOMEMODULE_ARTICLE_COMMENTS_CLICK:"paywall.homemodule-article-comments-click",PAYWALL_HOMEMODULE_CHANNEL_CLICK:"paywall.homemodule-channel-click",PAYWALL_HOMEMODULE_SIGNUP_CLICK:"paywall.homemodule-signup-click",PAYWALL_IMPRESSION:"paywall.impression",PAYWALL_LOGIN_CLICK:"paywall.login-click",PAYWALL_MASTHEAD_ARTICLE_CLICK:"paywall.masthead-article-click",PAYWALL_MASTHEAD_SIGNUP_CLICK:"paywall.masthead-signup-click",PAYWALL_MASTHEAD_SUBSCRIBED_CLICK:"paywall.masthead-subscribed-click",PAYWALL_PROFILE_SIGNUP_CLICK:"paywall.profile-signup",PAYWALL_RESTORE_PURCHASE_CLICK:"paywall.restore-purchase-click",PAYWALL_SIGN_UP:"paywall.signup",PAYWALL_SOPHI_LOAD:"paywall.sophi-load",PAYWALL_VIEWABLE:"paywall.viewable",PAYWALL_ZEPHR_FAIL_OPEN:"paywall.zephr-fail-open",PREDICTOR_CTA_CLICK:"predictor.cta-click",PRODUCT_BUTTON_LINK:"product.button-link",PRODUCT_IMAGE_LINK:"product.image-link",PRODUCT_PRICE_LINK:"product.price-link",PRODUCT_TITLE_LINK:"product.title-link",PROMOTIONAL_SLOT_EVENT:"promotional.slot-event",PROMOTIONS_XP_CLICK:"promotions.xp.click",PROMOTIONS_XP_IMPRESSION:"promotions.xp.impressions",PROMOTIONS_XP_VIEW_MORE:"promotions.xp.view.more",PROMOTIONS_XP_VIEWABLE:"promotions.xp.viewable",PUZZLE_COMPLETE:"puzzle.complete",PUZZLE_STARTED:"puzzle.started",RC_TAB_SELECT:"rc.tab_select",RELATED_REPLACE_CLICK:"related-replace.click",RELATED_REPLACE_IMPRESSION:"related-replace.impression",RELATED_REPLACE_VIEWABLE:"related-replace.viewable",REMIXD_COMPLETE:"remixd.complete",REMIXD_ERROR:"remixd.error",REMIXD_IMPRESSION:"remixd.impression",REMIXD_MUTE:"remixd.mute",REMIXD_PAUSE:"remixd.pause",REMIXD_PLAY:"remixd.play",SCREENSAVER_DOWNLOADED:"page.screensaver_downloaded",SIGN_IN_LOGIN_SUCCESS:"signin.login-success",SIGN_IN_REGISTRATION_SUCCESS:"signin.registration-success",SIGN_IN_SIGN_IN_CLICK:"signin.sign-in-click",SITE_SEARCH:"site-search",SMART_BANNER_CLICKED:"smart-banner.clicked",SMART_BANNER_SHOWN:"smart-banner.shown",SOCIAL_BUTTON_CLICKED:"social.button-clicked",SOCIAL_LIGHTBOX_BUTTON_CLICKED:"social.lightbox-button-clicked",SOCIAL_SHARE_CLICKED:"social.share-clicked",SOCIAL_SHARE_COMMENTS:"social_share.comments",SOCIAL_SHARE_MENU_OPEN:"social_share.menu_open",SWIPE_BAR_SHOWN:"swipe_bar.shown",SWIPE_TUTORIAL_CLOSE:"swipe_tutorial.close",SWIPE_TUTORIAL_SHOWN:"swipe_tutorial.shown",SYNDSHARE_POST:"page.syndshare_post",TIM_AFFILIATE_BOTTOM_LINK_CLICKED:"timAffiliate.bottom_link_clicked",TIM_AFFILIATE_IMPRESSION:"timAffiliate.impression",TIM_AFFILIATE_LEARN_MORE_CLICKED:"timAffiliate.learn_more_clicked",TIM_ANCHOR_LINK_CLICKED:"tim.anchor.link-clicked",TOAST_OVERLAY_CLICK:"toast-overlay.click",TOAST_OVERLAY_DISMISS:"toast-overlay.dismiss",TOAST_OVERLAY_VIEW:"toast-overlay.view",TOP_STORIES_XP_CLICK:"top.stories.xp.click",TOP_STORIES_XP_IMPRESSION:"top.stories.xp.impression",TOP_STORIES_XP_VIEW_MORE:"top.stories.xp.view.more",TOP_STORIES_XP_VIEWABLE:"top.stories.xp.viewable",USER_AUTH_SITE_REG_ERROR_ONCE:"user_auth.site-reg-error-once",VIDEO_ADVERT_ABORTED:"video.advert-aborted",VIDEO_ADVERT_COMPLETED:"video.advert-completed",VIDEO_ADVERT_FAILED:"video.advert-failed",VIDEO_ADVERT_IMPRESSION:"video.ad-impression",VIDEO_ADVERT_NOT_SHOWN:"video.no-ad-shown",VIDEO_ADVERT_STARTED:"video.advert-started",VIDEO_BRANDED_CONTENT_PROGRESS:"video.branded-content.progress",VIDEO_CAROUSEL_CLICK:"video.carousel-click",VIDEO_CAROUSEL_CLICKED:"video.carousel-clicked",VIDEO_CAROUSEL_SWIPE:"video.carousel-swipe",VIDEO_CLICKED:"video.clicked",VIDEO_CONFIG_CHANGE:"page.video-config-change",VIDEO_CONTENT_ABORTED:"video.content-aborted",VIDEO_CONTENT_COMPLETED:"video.content-completed",VIDEO_CONTENT_STARTED:"video.content-started",VIDEO_DATA_READY:"video.data-ready",VIDEO_EXTRA:"extra",VIDEO_FULLSCREEN_CHANGE:"video.fullscreen-change",VIDEO_PAUSED:"video.paused",VIDEO_PLAYER_READY:"video.player-ready",VIDEO_PROGRESS:"video.progress",VIDEO_RESUMED:"video.resumed",VIDEO_STICKY_CLOSE:"video.sticky-close",VIDEO_STREAM_FAILED:"video.stream-failed",VIDEO_STREAM_STARTED:"video.stream-started",VIDEO_THUMBNAIL_CLICK:"video.thumbnail-click",VIDEO_VOLUME_CHANGE:"video.volume-change",VWO_VARIATION_APPLIED:"vwo.variation-applied",WEB_PULL_NOTIFICATION_CLICK:"web-pull.notification-click",WEB_PUSH_NOTIFICATION_CLICK:"web-push.notification-click",WEB_PUSH_PRE_PROMPT_CLICK:"web-push.pre-prompt-click",WEB_PUSH_PRE_PROMPT_IMPRESSION:"web-push.pre-prompt-impression",WEB_PUSH_PROMPT_CLICK:"web-push.prompt-click",WEB_PUSH_PROMPT_IMPRESSION:"web-push.prompt-impression",WEB_SEARCH:"web-search",XP_BUTTON_LOGO_LINK_CLICK:"xp.button.logo_link_click",XP_BUTTON_LOGO_LINK_IMPRESSION:"xp.button.logo_link_impression",XP_POLLS_CLICK:"xp.polls.click",XP_POLLS_IMPRESSION:"xp.polls.impression",XP_POLLS_SUBSCRIBED:"xp.polls.subscribed",XP_POLLS_VIEW:"xp.polls.show",XP_POLLS_VOTED:"xp.polls.voted"},Ct=new Ot(St),Tt={".mol-desktop #addCommentButton, .mol-desktop #addCommentNarrowButton":"bottom add comment",".mol-desktop #articleIconLinksContainer .comments-count":"top comments click",".mol-desktop #floating-share-bar-container .comments-count":"floating comments click",".mol-mobile .social.bottom .comments-count":"bottom comment click",".mol-mobile .social.top .comments-count":"top comment click"},Lt="mol-fe-puzzle-tracking",At=()=>{try{return JSON.parse(window.localStorage.getItem(Lt))}catch(e){}return null},Pt=e=>{try{window.localStorage.setItem(Lt,JSON.stringify(e))}catch(e){}},Mt=()=>{try{const e=At();if(!e)return"undefined";return e.last-e.first>=72e5?"repeat player":"first time player"}catch(e){}return"undefined"},Nt={puzzle_complete:Ct.PUZZLE_COMPLETE,puzzle_play:Ct.PUZZLE_STARTED,PuzzleComplete:Ct.PUZZLE_COMPLETE,PuzzleStarted:Ct.PUZZLE_STARTED},Rt=()=>{window.VWO=window.VWO||[],window.VWO.event=window.VWO.event||function(){window.VWO.push(["event"].concat([].slice.call(arguments)))},window.VWO.visitor=window.VWO.visitor||function(){window.VWO.push(["visitor"].concat([].slice.call(arguments)))}},Dt=()=>(Rt(),new Promise((e=>{window.VWO.push(["onVWOCampaignsLoaded",t=>{const{bucketed_campaigns:n}=t||{};e(n)}])}))),kt=e=>new Promise((t=>{setTimeout(t,e)})),xt=()=>{try{return window.adsMVTResults&&"off"===window.adsMVTResults.selectedScenarios.vwo}catch(e){return!1}},Ut=async()=>{if(xt())return"";return(await Promise.race([Dt(),kt(1e3)])||[]).map((e=>{const{name:t,variation:n}=e||{};return`${t}:${n}`})).join(",")};var jt=n(6989);const Bt="mol-fe-tracking-scv-session-id";window.singleCustomerPageId=null;const Vt=()=>{try{return window.singleCustomerPageId||(window.singleCustomerPageId=(0,jt.v4)()),window.singleCustomerPageId}catch(e){return null}},Gt=()=>{try{return sessionStorage.getItem(Bt)||null}catch(e){return null}},Wt=function(e,t){const n=Object.keys(t).filter((n=>{let r=!1;return St[n]?(Ct.subscribe(St[n],t[n]),r=!0):J().error(`${e}: Subscribing to invalid event ${n}`),r}));J().debug(`${e}: successfully loaded`,n)},Kt=()=>{window.adverts&&window.adverts.queue&&window.adverts.queue.push((()=>{window.fbq&&window.fbq("track","Subscribe",{currency:"GBP",value:"1.99"})}))},Ft=()=>{window.adverts&&window.adverts.queue&&window.adverts.queue.push((()=>{window.fbq&&window.fbq("trackCustom","SubscribeButtonClicked")}))},Ht=[{PAYWALL_CONVERSION:Kt,PAYWALL_CONVERSION_BANNER:Kt,PAYWALL_CONVERSION_PROFILE:Kt,PAYWALL_MASTHEAD_SIGNUP_CLICK:Ft,PAYWALL_PROFILE_SIGNUP_CLICK:Ft,PAYWALL_SIGN_UP:Ft}];for(const e of Ht)Wt("googleAnalytics",e);const $t="javascript:,dmgt.net,dailymail.co.uk,mailonsunday.co.uk,mailonline.co.uk,localhost,"+location.hostname,zt=new RegExp($t.replace(/\./g,"\\.").replace(/,/g,"|"),"i"),Yt=z(),qt=Yt.isTablet,Xt=Yt.isMobile&&!qt,Jt={geo:Yt.geo,internalDomains:$t,internalDomainsRegex:zt,isMobile:Xt,isTablet:qt},Qt=e=>{let t=e.offsetTop,n=e.offsetParent;for(;n;)Number.isNaN(n.offsetTop)||(t+=n.offsetTop),n=n.offsetParent;return t},Zt=["alpha","beta","gamma"],en=Zt.map((e=>`.${e}`)).join(","),tn=function(e){const t=e.hostname||window.location.hostname;return Jt.internalDomainsRegex.test(t)},nn=function(e){return!tn(e)},rn=function(e){if(!e||1!==e.nodeType)return null;const t=Zt.find((t=>e.classList.contains(t)));if(!t)return"other";return`${t}-${Array.from(document.querySelectorAll("."+t)).indexOf(e)+1}`},on=e=>{const t=e.closest("[data-track-rta]");if(t)try{const{index:e}=JSON.parse(t.dataset.trackRta);return parseInt(e,10)}catch(e){return}},an=function({interaction:e,link:t,moduleElement:n,target:r,trackAs:o,trackLinks:i}){const a=n.closest(en),s={element:t,fromLink:t,interaction:e,linkType:"IMG"===r.nodeName?"image":"text",listPosition:i.indexOf(t)+1,moduleName:n.getAttribute("data-track-module"),pixelDepth:Qt(t),position:n.getAttribute("data-track-pos")||rn(a)||"other",trackingType:o||t.getAttribute("data-track-type")||n.getAttribute("data-track-type")||"ck",videoId:t.getAttribute("data-videoid")};return s.moduleName.includes("-desktop-ap-")&&(s.moduleArticlePositionChannel=(e=>{const t=Array.from(document.querySelectorAll('[data-track-module*="-desktop-ap-"]')).indexOf(e);return-1===t?void 0:t+1})(n)),s.moduleName.startsWith("home-tab-")&&(s.moduleArticlePositionChannel=on(t)),"mobile-channel-page"===s.moduleName&&(s.moduleArticlePositionChannel=on(t)),r.closest(".sponsored")&&(s.moduleName=s.moduleName.replace("^","_sponsored^")),(e=>{if("article"!==z().pageType||"desktop"!==H().renderPlatform||!e||!e.closest(".puff"))return!1;const t=document.querySelector(".article-text .shareArticles"),n=Qt(t);return Qt(e)>n})(r)&&(s.moduleName+="AfterArticle"),t.classList.contains("article-icon-links__topChannel")&&(s.moduleName+="_channel-label"),s},sn=function(e){const{moduleElement:t,shouldProceed:n,target:r}=e,o=t.getAttribute("data-track-selector")||"a",i=Array.from(t.querySelectorAll(o)),a=i.find((e=>e===r||e.contains(r)));if(a&&n(a)){const t=an(Object.assign({link:a,trackLinks:i},e));J().debug("moduleTracking",t),Ct.publish(Ct.PAGE_MODULE_CLICKED,t)}};document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".mol-para-with-font a, .imageCaption a");if(e){const t=[...e].map((e=>e.getAttribute("href").startsWith("/")?e:null)).filter(Boolean);if(t.length>0)for(const e of t)e.outerHTML=`<span data-track-module="internal-body-link">${e.outerHTML}</span>`}})),document.addEventListener("click",(e=>{const t=e.target.closest("[data-track-module]");if(t){const n=t.getAttribute("data-track-external")?nn:tn;sn({interaction:"link-click",moduleElement:t,shouldProceed:n,target:e.target})}}));const cn={externalLinkTracker:function(e,t="el"){const n=document.getElementById(e);Array.from(n.querySelectorAll("a.js-tl")).forEach((e=>e.addEventListener("click",(e=>sn({interaction:"link-click",moduleElement:n,shouldProceed:nn,target:e.target,trackAs:t})))))},trackSwipe:function(e,t){sn({interaction:"swipe",moduleElement:e,shouldProceed:tn,target:t})}},ln=function(e,t){window.trac.slideEvent(t.contentType+"-"+t.threadId)},un={GALLERY_ADVERT_VIEWED:ln,GALLERY_CLOSED:ln,GALLERY_IMAGE_VIEWED:ln,GALLERY_OPENED:ln},dn={PAGE_COMMENT_TAB_SWAPPED:function(e,t){window.trac.slideEvent(t.contentType+"-"+t.tab)}},pn=Object.assign({},un,dn),fn={init:function(){window.trac?Wt("Nielsen",pn):J().error('Nielsen: trying to load nielsen tracking but "trac" global is not present')}},mn={cookieClientSegment:"dm_clientsegment",DMPageMetadataKey:"clientSegmentation",queryOverrideClientSegment:"segment",storageKey:"mol-fe-segmentation.data"},_n={getItem:e=>bt().get(e),removeItem:e=>bt().remove(e),setItem:(e,t,n)=>bt().set(e,t,n)};let hn={getItem:()=>null,removeItem:()=>null,setItem:()=>null};try{hn=window.localStorage}catch(e){}const gn={getItem:e=>function(e){try{return JSON.parse(e)}catch(t){return e}}(hn.getItem(e)),removeItem:e=>hn.removeItem(e),setItem:(e,t)=>hn.setItem(e,function(e){return JSON.stringify(e)}(t))},En=function(){try{const e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(e){return!1}}()?gn:_n,vn=En,yn=function(e,t){const n=new RegExp("[?&]"+e.replace(/[[\]]/g,"\\$&")+"(=([^&#]*)|&|#|$)").exec(t||window.location.href);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};let wn;const In=function(e){return yn(mn.queryOverrideClientSegment,e)||null},bn=function(){return wn=In()||_n.getItem(mn.cookieClientSegment),wn},On={getActiveSegment:function(){return wn||bn()},getSegmentOverride:In,setActiveSegment:bn},Sn=function(){return H()[mn.DMPageMetadataKey]||{}},Cn=function(e={}){const t=Object.keys(e).reduce(((t,n)=>t+e[n].weight),0);return Math.random()*t},Tn=function(e={}){const t=e.segments;let n;if(t){const e=Cn(t);let r;r=0,n=Object.keys(t).find((n=>(r+=t[n].weight,e<r)))}return n},Ln=function(e,t){return e.shuffleNumber!==t.shuffleNumber&&(Number(e.shuffleNumber)||-1/0)<(Number(t.shuffleNumber)||1/0)},An={getRandomSegmentFromConfig:Tn,getRandomSegmentWeight:Cn,run:function(){const e=On.getActiveSegment(),t=_n.getItem(mn.cookieClientSegment),n=vn.getItem(mn.storageKey)||{},r=Sn(),o=Ln(n,r),i=e!==t;if(o||i||!t){const t=o?r:n,a=i?e:Tn(t);a?_n.setItem(mn.cookieClientSegment,a,{expires:1e3}):_n.removeItem(mn.cookieClientSegment),t!==n&&vn.setItem(mn.storageKey,t)}},storedConfigIsOutdated:Ln},Pn=An;k("PAGE_METADATA_SET",(()=>Pn.run()));const Mn=function(){return On.getActiveSegment()||"default"},Nn={geo(){},ito:window.RTA?window.RTA.ito:function(){},tedEvent(e,t={}){t.clientSegment=Mn(),this.i&&(t.ito=this.i),Object.assign(t,function(){const e={},t=H(),n=t&&t.authorName&&t.authorName.split(";");return n&&n.length&&(e.authors=n),e}()),Object.assign(t,function(){const e={},t=H();return e.rp=t.renderPlatform,e}()),t.title||Object.assign(t,function(){const e={},t=H();if(t.articleId){const n=document.head.querySelector('meta[property="twitter:title"]')||document.head.querySelector('meta[property="og:title"]');e.title=n?n.getAttribute("content"):t.articleTitle}return e}()),function(e,t){window.RTA&&window.RTA.tedEvent(e,t)}(e,t)}},Rn=function(e){return function(t,n){Nn.tedEvent("page_event",{action:"store",name:e,value:n})}},Dn={CONTACT_FORM_CAPTCHA_VALID:Rn("mol-fe-contact-form-captcha-valid"),CONTACT_FORM_FILE_ADDED:Rn("mol-fe-contact-form-file-added"),CONTACT_FORM_FILE_ERROR_CLIENT:Rn("mol-fe-contact-form-file-error-client"),CONTACT_FORM_FILE_ERROR_SERVER:Rn("mol-fe-contact-form-file-error-server"),CONTACT_FORM_SUBMIT_CLICK:Rn("mol-fe-contact-form-submit-click"),CONTACT_FORM_SUBMIT_ERROR:Rn("mol-fe-contact-form-submit-error"),CONTACT_FORM_SUBMIT_SUCCESS:Rn("mol-fe-contact-form-submit-success")},kn={FIDELITY_CAMPAIGN_EVENT:function(e,t,n){Nn.tedEvent("page_event",{action:n.action,name:n.name,value:n.value})}},xn={FLOATING_BUTTONS_BACK_TO_TOP:function(e,t){Nn.tedEvent("page_event",{action:"set",name:"backToTop",value:t.value})}},Un=function(e){Nn.tedEvent("page_event",{action:"store",name:e,value:!0})},jn={GDPR_EMBEDDED_VIDEO_ACCEPTED:Un,GDPR_EMBEDDED_VIDEO_DISPLAYED:Un,GDPR_EMBEDDED_VIDEO_SETTINGS:Un,GDPR_MOBILE_HOME_ACCEPTED:Un,GDPR_MOBILE_HOME_DISPLAYED:Un,GDPR_MOBILE_HOME_SETTINGS:Un,GDPR_OVERLAY_ACCEPT_BY_CLICK_SITE:Un,GDPR_OVERLAY_ACCEPTED:Un,GDPR_OVERLAY_DISPLAYED:Un,GDPR_OVERLAY_PRIVACY:Un,GDPR_SETTINGS_ADVERTISING_ALLOW_ALL:Un,GDPR_SETTINGS_ADVERTISING_LINK_CLICKED:Un,GDPR_SETTINGS_ADVERTISING_TAB_CLICKED:Un,GDPR_SETTINGS_CONFIRMATION_ALLOW:Un,GDPR_SETTINGS_CONFIRMATION_DISALLOW:Un,GDPR_SETTINGS_DISALLOW_ADVERTISING_PARTNERS:Un,GDPR_SETTINGS_FUNCTION_ALLOW_ALL:Un,GDPR_SETTINGS_FUNCTION_TAB_CLICKED:Un,GDPR_SETTINGS_POLICY_LINK_CLICKED:Un},Bn=function(e){const t=document.referrer,n=H(),r=new RegExp(`#${e}(\\?.*)?$`);if(/.html([?#].*)?$/.test(t)&&r.test(window.location.hash)&&"article"===n.contentType){const e=t.split("/");return e[e.length-2]}return null},Vn=bt().get("autorefresh");bt().remove("autorefresh");const Gn=()=>Vn,Wn=()=>{try{if("localStorage"in window){const e=window.localStorage.getItem("mol-fe-swipe-funnel-status");if(e){const t=JSON.parse(e);if(t&&"string"==typeof t)return t}}}catch(e){}return null},Kn=()=>{const e=bt().get("mol-home"),{renderPlatform:t}=H();return"mobile"===t||e?"-no-overlay":""},Fn=()=>{const e=Kn();try{const t=bt().get("mol-home");if(t)return`${t}${e}`}catch(e){}return e?`undefined${e}`:null},Hn=e=>{try{if(!("localStorage"in window))return null;const t=window.localStorage.getItem(`mol-fe-home-channel-${e}`);if(t)return JSON.parse(t)}catch(e){}return null},$n="not_loaded",zn=async()=>{const{pageType:e}=z();if("article"!==e)return;return"sophi"===await(window?.molSophiDecisionPromise)&&window.molSophiPaywallOutcome?.isPaywalled?"isPaywalled":(()=>{const{isPaywalled:e,hasBeenPaywalled:t,pageType:n,neverPaywall:r}=z(),o=!window.getIsPaywalledForCountry||window.getIsPaywalledForCountry(),i=window.getIsPaywallEligible&&window.getIsPaywallEligible();if("article"===n)return e||t?!e&&t?"hasBeenPaywalled":!r&&e&&i&&!o?"isPaywalledForOthers":!r&&e&&i&&o?"isPaywalled":r||!e||i?"invalid":"isRestricted":"none"})()},Yn=()=>{try{if(window.getIsPaywallSubscriber&&window.getIsPaywallSubscriber())return"subscriber";if(window.DM.isLoggedIn)return"registered"}catch(e){J().error("Error determining user paywall status",e)}return"none"},qn=()=>{try{return window.getPaywallEntitlements&&window.getPaywallEntitlements()||null}catch(e){J().error("Error determining user paywall entitlements",e)}return null},Xn=()=>{try{return window.getOneAccountUserId&&window.getOneAccountUserId()||null}catch(e){J().error("Error determining oneAccountUserId",e)}return null},Jn=(e,t,n)=>t?n?t[e]||$n:t[e]:$n,Qn=e=>{const t=window?.sophi?.dataLayer,n=window?.molSophiFeatureOff,r=n?$n:e,o={raw_sophi_context:Jn("context",t,n),raw_sophi_decision_source:r,raw_sophi_experiments_code:Jn("experimentsCode",t,n),raw_sophi_inputs:Jn("inputs",t,n),raw_sophi_trace:Jn("trace",t,n),sophi_consent_received:window.molSophiConsentUsed,sophi_context:t?.context,sophi_decision_source:r,sophi_experiments_code:t?.experimentsCode,sophi_inputs:t?.inputs,sophi_trace:t?.trace};return(n||o.sophi_decision_source===$n)&&(delete o.sophi_context,delete o.sophi_experiments_code,delete o.sophi_inputs,delete o.sophi_trace),o};let Zn,er,tr,nr,rr,or=!1;const ir=()=>{try{"localStorage"in window&&!or&&(Zn=window.localStorage.getItem("module_tracking"),er=window.localStorage.getItem("module_tracking_name"),tr=window.localStorage.getItem("module_tracking_list_position"),nr=window.localStorage.getItem("module_tracking_pixel_depth"),rr=window.localStorage.getItem("module_tracking_article_pos_channel"),or=!0,Zn&&window.localStorage.removeItem("module_tracking"),er&&window.localStorage.removeItem("module_tracking_name"),tr&&window.localStorage.removeItem("module_tracking_list_position"),nr&&window.localStorage.removeItem("module_tracking_pixel_depth"),rr&&window.localStorage.removeItem("module_tracking_article_pos_channel"))}catch(e){}return{moduleArticlePositionChannel:rr,moduleListPosition:tr,moduleName:er,modulePixelDepth:nr,moduleTracking:Zn}};let ar=!1;const sr=()=>{try{if("visibilityState"in document&&"visible"===document.visibilityState)return 1}catch(e){}return 2},cr=async function(e,t){const n=H(),r=z(),o=n.dmtvEpisode||null;let i={};Gn()&&!ar&&(ar=!0,i={autoRefresh:sr()});const a=[],s=Re();if(s&&s.length)for(const e of s)a.push(`track:${e}`);n.feTag&&a.push(`feTag:${n.feTag}`);const c=Wn();c&&a.push(`swipe:${c}`);const l=Fn();l&&a.push(`track:mobilehometab${l}`);Hn("signpost-last")&&a.push("track:signpost-shown");const{geo:u,region:d}=r;if("GB"===u&&"SC"===d&&a.push("region:scotland"),window.getIsPaywallPuzzlesUser&&window.getIsPaywallPuzzlesUser()&&a.push("track:mailplus-puzzles-user"),window.getIsPaywallMagazinesUser){await window.getIsPaywallMagazinesUser(!0)&&a.push("track:mailplus-magazines-user")}const p=await(async()=>xt()?[]:(await Promise.race([Dt(),kt(1e3)])||[]).map((e=>{const{name:t,variation:n}=e||{};return`vwo:${t}:${n}`})))();for(const e of p)a.push(e);const f=Yn();if("home"===n.contentType||"topic"===n.contentType){let e=n.subChannel;if(n.channel===n.subChannel&&["/home","/ushome","/auhome"].includes(n.channel)&&"mobile"===n.renderPlatform){e+="showbiz"===(t&&t.mobileHomeTabActive||bt().get("mol-home")||"news")?"/tvshowbiz":""}Nn.tedEvent("cview",{channel:e,dmtvEpisode:o,tags:a.join(","),userStatus:f,...i})}else if("article"===n.contentType){const e=Jt.isMobile||Jt.isTablet?null:Bn("video"),{articleType:t,liveBlog:s,openwebEnabled:c,sources:l,sponsored:u}=r,d="true"===u||!0===u,p=await zn();n.isFeatureArticle?a.push("feature-article"):"permabox"===t?a.push("permabox"):s?a.push("live-blog"):a.push("normal-article"),a.push(e?"videos-link":"no-links"),c&&a.push("track:openwebEnabled"),d&&a.push("sponsored");const m=(()=>{try{const{moduleTracking:e}=ir(),t=e&&e.match(/\^(swipe(bar|tutorial)?)\^/);return t&&t[1]||null}catch(e){return null}})();m&&a.push(`track:${m}`),Nn.tedEvent("view",{dmtvEpisode:o,openwebEnabled:c?1:0,paywallStatus:p,tags:a.join(","),userStatus:f,...i,...l?{sources:l}:{}})}else"profile"!==n.contentType&&"login"!==n.contentType&&"search"!==n.contentType||(a.push(n.contentType),Nn.tedEvent("cview",{authors:[n.authorName],tags:a,...i}))},lr={FEATURE_ARTICLE:function(e,t){Nn.tedEvent("page_event",{actions:[{action:"max",name:"feature-article-page",value:Number(t.pageNumber.split("/")[0])},{action:"set",name:"feature-article-length",value:Number(t.pageNumber.split("/")[1])}]})},GALLERY_ADVERT_STATS:function(e,t){Nn.tedEvent("ad-tracking",{adverts:t.stats,type:t.type})},PAGE_AUTOREFRESH_EVENT:()=>{Nn.tedEvent("page_event",{action:"store",name:"autorefresh",value:"event"})},PAGE_COMMENT_TAB_SWAPPED:function(e,t){Nn.tedEvent("page_event",{action:"store",name:"rc_tab_select",value:{tab:t.tab}})},PAGE_MOBILE_TAB_CHANGE:cr,PAGE_RENDER_STARTED:cr},ur={PAGE_AD_DISPLAYED(e,t){Nn.tedEvent("ad-tracking",{type:t.type})},PAGE_AD_ERRORS(e,t){J().debug("TED Ad Error Event",t),Nn.tedEvent("ad-errors",{errorMsg:JSON.stringify(t),type:"ad-errors"})},PAGE_AD_STATS(e,t){Nn.tedEvent("ad-stats",{stats:JSON.stringify(t),type:"ad-stats"})}},dr=function(e){return(e||"").replace(/[\W_]+/g,"").toLowerCase()},pr=function(e){return e&&!isNaN(e)?e:null},fr=function(e){return{googleplus:"google",gplus:"google",plusone:"google"}[e]||dr(e)},mr={SOCIAL_BUTTON_CLICKED(e,t){Nn.tedEvent("social-event",{"social-event":t.type})},SOCIAL_SHARE_CLICKED(e,t){const n={article:pr(t.articleId),loc:dr(t.placement),on:fr(t.site)};t.videoId&&(n.videoId=t.videoId),t.referenceId&&(n.referenceId=t.referenceId),Nn.tedEvent("share",n)},SYNDSHARE_POST(e,t){Nn.tedEvent("share",{article:pr(t.article),loc:"syndshare",on:"synd_"+t.on})}},_r=function(e,t){const n=t.dmtvEpisode||null;"chromeless"!==t.trackingType&&Nn.tedEvent("video-event",{action:e,adBlockStatus:t.adBlockStatus||"UNKNOWN",adErrorCode:t.adErrorCode,adErrorData:t.adErrorData,adSdk:t.adSDK,autoplay:t.autoplay,currentSrc:t.currentSrc,currentType:t.currentType,dmtvEpisode:n,duration:t.offset,errorMessage:t.errorMessage,id:t.videoId,initial:t.initialVideo,ito:t.ito,module:t.trackingType,percent:0===t.duration?0:t.offset/t.duration*100,play:t.play,recommendationModel:t.recommendationModel,referenceId:t.referenceId,title:t.displayName,version:t.version,videoChannel:t.videoChannel,videoPlayerType:t.playerId})},hr={VIDEO_ADVERT_ABORTED:_r,VIDEO_ADVERT_COMPLETED:_r,VIDEO_ADVERT_FAILED:_r,VIDEO_ADVERT_STARTED:_r,VIDEO_BRANDED_CONTENT_PROGRESS:_r,VIDEO_CONFIG_CHANGE:function(e,t){"chromeless"!==t.trackingType&&Nn.tedEvent("page_event",{action:"set",name:e,play:t.play,value:t.value})},VIDEO_CONTENT_ABORTED:_r,VIDEO_CONTENT_COMPLETED:_r,VIDEO_CONTENT_STARTED:_r,VIDEO_EXTRA:function(e,t){"chromeless"!==t.trackingType&&Nn.tedEvent("video-event",{action:e,adBlockStatus:t.adBlockStatus||"UNKNOWN",adSdk:t.adSDK,autoplay:t.autoplay,currentSrc:t.currentSrc,currentType:t.currentType,duration:t.offset,extra:{advertPlaying:t.advertPlaying,articleLinkClicked:t.articleLinkClicked,articleLinkHovered:t.articleLinkHovered,articleUrl:t.articleUrl,contentPlaying:t.contentPlaying,expand:t.fullscreen,mute:t.muted,playerClosed:t.playerClosed,timeSinceStartOfPlayer:t.timeSinceStartOfPlayer},id:t.videoId,initial:t.initialVideo,module:t.trackingType,percent:0===t.duration?0:t.offset/t.duration*100,play:t.play,referenceId:t.referenceId,title:t.displayName,version:t.version,videoChannel:t.videoChannel,videoPlayerType:t.playerId})},VIDEO_PROGRESS:function(e,t){"chromeless"!==t.trackingType&&t&&0!==t.ratio&&Nn.tedEvent("video-event",{action:e,duration:t.offset,id:t.videoId,ito:t.ito,module:t.trackingType,percent:100*t.ratio,play:t.play,recommendationModel:t.recommendationModel,title:t.displayName,version:t.version,videoPlayerType:t.playerId})},VIDEO_STREAM_FAILED:_r,VIDEO_STREAM_STARTED:_r},gr={},Er="carousel_swipe",vr=(e,t)=>(n,r)=>{gr[t]||(gr[t]=0),gr[t]++;const o={video_player_type:"mobile up next"};t===Er?o.swipes=gr[t]:(r&&r.videoPosition&&(o.module_click_list_position=Number(r.videoPosition)),o.clicks=gr[t]),Nn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:o})},yr={VIDEO_CAROUSEL_CLICK:vr("video","carousel_click"),VIDEO_CAROUSEL_SWIPE:vr("video",Er),VIDEO_THUMBNAIL_CLICK:vr("video","thumbnail_click")},wr=function(e,t){Nn.tedEvent("push",t)},Ir={WEB_PULL_NOTIFICATION_CLICK:function(e,t){Nn.tedEvent("pull",t)},WEB_PUSH_NOTIFICATION_CLICK:wr,WEB_PUSH_PRE_PROMPT_CLICK:wr,WEB_PUSH_PRE_PROMPT_IMPRESSION:wr,WEB_PUSH_PROMPT_CLICK:wr,WEB_PUSH_PROMPT_IMPRESSION:wr},br=e=>{Nn.tedEvent("page_event",{action:"set",name:`remixd_${e}`,value:Date.now()})},Or={REMIXD_COMPLETE:()=>br("complete"),REMIXD_ERROR:()=>br("error"),REMIXD_IMPRESSION:()=>br("impression"),REMIXD_MUTE:()=>br("mute"),REMIXD_PAUSE:()=>br("pause"),REMIXD_PLAY:()=>br("play")},Sr=(e,t)=>(n,r)=>{const{campaignId:o}=r;Nn.tedEvent("page_event",{action:"set",name:`${e}_${o}_${t}`,value:Date.now()})},Cr={GUESTBOOK_IMPRESSION:Sr("guestbook","impression"),GUESTBOOK_LOADING_ERROR:Sr("guestbook","loading_error"),GUESTBOOK_SUBMIT_ERROR:Sr("guestbook","submit_error"),GUESTBOOK_SUBMIT_SUCCESS:Sr("guestbook","submit_success")},Tr={PROMOTIONAL_SLOT_EVENT:(e,t)=>{if(!t||"string"!=typeof t.xpModuleName||"string"!=typeof t.eventName)return J().error("[mol-fe/mol-fe-tracking] ted.promotionalSlot.createHandler.invalidProps",t),null;const n=t.xpModuleName.substring(0,t.xpModuleName.indexOf("@")),{eventName:r}=t;return Nn.tedEvent("page_event",{action:"set",name:`promotional_slot_${n}_${r}`,value:Date.now()}),!0}},Lr=(e,t)=>()=>{Nn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:Date.now()})},Ar={SWIPE_BAR_SHOWN:Lr("swipe_bar","shown"),SWIPE_TUTORIAL_CLOSE:Lr("swipe_tutorial","close"),SWIPE_TUTORIAL_SHOWN:Lr("swipe_tutorial","shown")},Pr={},Mr=e=>(t,n)=>((e,t)=>{Pr[e]||(Pr[e]=0),Pr[e]++,Nn.tedEvent("page_event",{action:"set",name:`comments_${e}`,value:t&&void 0!==t.value?t.value:Pr[e]})})(e,n),Nr={COMMENTS_ADD_COMMENT_CLICK:Mr("add_comment_click"),COMMENTS_CLEAR:Mr("clear"),COMMENTS_CLICK:Mr("click"),COMMENTS_DELETE:Mr("delete"),COMMENTS_DOWNVOTE:Mr("downvote"),COMMENTS_IMPRESSION:Mr("impression"),COMMENTS_LOAD_TIME:Mr("load_time"),COMMENTS_LOGIN_REDIRECT:Mr("login_redirect"),COMMENTS_MASTHEAD_CLICK:Mr("masthead_click"),COMMENTS_NEW_COMMENT_CLICK:Mr("new_comment_click"),COMMENTS_NOTIF_CLICK:Mr("notif_click"),COMMENTS_OVERLAY_CLOSE:Mr("overlay_close"),COMMENTS_OVERLAY_OPEN:Mr("overlay_open"),COMMENTS_PAGINATION_CLICK:Mr("pagination_click"),COMMENTS_PROFILE_CLICK:Mr("profile_click"),COMMENTS_REPLY_CLICK:Mr("reply_click"),COMMENTS_REPLY_SUBMIT:Mr("reply_submit"),COMMENTS_REPLY_SUBMIT_SUCCESS:Mr("reply_submit_success"),COMMENTS_REPORT_CLICK:Mr("report"),COMMENTS_SHOW_MORE_CLICK:Mr("show_more"),COMMENTS_SUBMIT_COMMENT:Mr("submit"),COMMENTS_SUBMIT_SUCCESS:Mr("submit_success"),COMMENTS_UPVOTE:Mr("upvote"),COMMENTS_VIEW:Mr("view"),COMMENTS_VIEW_ALL:Mr("view_all"),SOCIAL_SHARE_COMMENTS:Mr("added")};var Rr,Dr;const kr={MASTHEAD_CLICK:(Rr="masthead",Dr="click",(e,t)=>{const{mastheadName:n}=t;Nn.tedEvent("page_event",{action:"set",name:`${Rr}_${n}_${Dr}`,value:Date.now()})})},xr=(e,t)=>(n,r)=>{const{value:o}=r||{};Nn.tedEvent("page_event",{action:"set",name:`${e}_${t}${o?`_${o}`:""}`,value:Date.now()})},Ur={COMMERCE_XP_CLICK:xr("commerce_xp","click"),COMMERCE_XP_IMPRESSION:xr("commerce_xp","impression"),COMMERCE_XP_VIEW_MORE:xr("commerce_xp","view_more"),COMMERCE_XP_VIEWABLE:xr("commerce_xp","viewable")},jr=(e,t)=>()=>{Nn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:Date.now()})},Br={COMMENT_CTA_CLICK:jr("commentcta","click"),COMMENT_CTA_IMPRESSION:jr("commentcta","impression")},Vr={},Gr=e=>(t,n)=>{return Vr[r=e]||(Vr[r]=0),Vr[r]++,void Nn.tedEvent("page_event",{action:"set",name:`mobile_menu_${r}`,value:Vr[r]});var r},Wr={MOBILE_MENU_COMMENT:Gr("comment"),MOBILE_MENU_DESKTOP_SITE:Gr("desktop_site")},Kr={},Fr={PAGE_FURNITURE_CLICKED:(e,t)=>{const n=t&&t.furnitureName;if(!n)return;const r=n.replace(/\s/g,"_");Kr[r]||(Kr[r]=0),Kr[r]++,Nn.tedEvent("page_event",{action:"set",name:`furniture_${r}`,value:Kr[r]})}},Hr={},$r=e=>{Hr[e]||(Hr[e]=0),Hr[e]++,Nn.tedEvent("page_event",{action:"set",name:`mobile_homepage_${e}`,value:Hr[e]})},zr={MOBILE_HOME_PAGE_NAV:(e,t)=>{const{action:n}=t;$r(`puff_module_${n.replace(/\s/g,"_")}`)},MOBILE_HOME_PAGE_OVERLAY:()=>$r("overlay_display"),MOBILE_HOME_PAGE_SIGNPOST_CLICK:()=>$r("signpost_click"),MOBILE_HOME_PAGE_SIGNPOST_DISMISS:()=>$r("signpost_dismiss"),MOBILE_HOME_PAGE_SIGNPOST_DISPLAY:()=>$r("signpost_display"),MOBILE_HOME_PAGE_SWIPE:(e,t)=>{const{action:n,label:r}=t;$r(`${n}_${r}`)},MOBILE_HOME_PAGE_VIEW:(e,t)=>{const{actionSource:n}=t,r=bt().get("mol-home"),o=bt().get("mol-home-default-channel");$r(`${n||"overlay"}_choice_${r}${o?`_geo_${o.toLowerCase()}`:""}`)}},Yr=zr,qr={},Xr=e=>(t,n)=>((e,t)=>{qr[e]||(qr[e]=0),qr[e]++,Nn.tedEvent("page_event",{...t,action:"set",name:`firework_video_carousel_${e}`,value:qr[e]})})(e,n),Jr={FIREWORK_VIDEO_CAROUSEL_ERROR:Xr("error"),FIREWORK_VIDEO_CAROUSEL_IMPRESSION:Xr("carousel_impression"),FIREWORK_VIDEO_CAROUSEL_PLAYER_NAVIGATION:Xr("player_navigation"),FIREWORK_VIDEO_CAROUSEL_PLAYER_QUIT:Xr("player_quit"),FIREWORK_VIDEO_CAROUSEL_PLAYER_TRANSITION:Xr("player_transition"),FIREWORK_VIDEO_CAROUSEL_READY:Xr("carousel_ready"),FIREWORK_VIDEO_CAROUSEL_THUMBNAIL_CLICK:Xr("thumbnail_click"),FIREWORK_VIDEO_CAROUSEL_VIDEO_CLICK_CTA:Xr("video_click_cta"),FIREWORK_VIDEO_CAROUSEL_VIDEO_CLICK_SHARE:Xr("video_click_share"),FIREWORK_VIDEO_CAROUSEL_VIDEO_COMPLETE:Xr("video_complete"),FIREWORK_VIDEO_CAROUSEL_VIDEO_FIRST_QUARTILE:Xr("video_first_quartile"),FIREWORK_VIDEO_CAROUSEL_VIDEO_IMPRESSION:Xr("video_impression"),FIREWORK_VIDEO_CAROUSEL_VIDEO_MID_POINT:Xr("video_mid_point"),FIREWORK_VIDEO_CAROUSEL_VIDEO_SESSION:Xr("video_session"),FIREWORK_VIDEO_CAROUSEL_VIDEO_START:Xr("video_start"),FIREWORK_VIDEO_CAROUSEL_VIDEO_THIRD_QUARTILE:Xr("video_third_quartile")},Qr={},Zr=(e,t)=>()=>{Qr[t]||(Qr[t]=0),Qr[t]++,Nn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:Qr[t]})},eo={PUZZLE_COMPLETE:Zr("puzzle","complete"),PUZZLE_STARTED:Zr("puzzle","started")},to=(e,t)=>(n,r)=>{const{value:o}=r||{};Nn.tedEvent("page_event",{action:"set",name:`${e}_${t}${o?`_${o}`:""}`,value:Date.now()})},no={ARTICLE_PREVIEW_XP_CLICK:to("article_preview_xp","click"),ARTICLE_PREVIEW_XP_IMPRESSION:to("article_preview_xp","impression"),ARTICLE_PREVIEW_XP_VIEWABLE:to("article_preview_xp","viewable")},ro={},oo=(e,t)=>(n,r)=>{ro[t]||(ro[t]=0),ro[t]++,Nn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:r||ro[t]})},io={RELATED_REPLACE_CLICK:oo("related_replace","click"),RELATED_REPLACE_IMPRESSION:oo("related_replace","impression"),RELATED_REPLACE_VIEWABLE:oo("related_replace","viewable")},ao={},so=e=>()=>{ao[e]||(ao[e]=0),ao[e]++,Nn.tedEvent("page_event",{action:"set",name:e,value:ao[e]})},co={...{CMP_LEVEL_ONE_ACCEPT:so("cmp_level_1_accept"),CMP_LEVEL_ONE_CONVERSION:so("cmp_level_1_conversion"),CMP_LEVEL_ONE_LOGIN:so("cmp_level_1_login"),CMP_LEVEL_ONE_PRIVACY_SETTINGS:so("cmp_level_1_privacy_settings"),CMP_LEVEL_ONE_SUBSCRIBE:so("cmp_level_1_subscribe"),CMP_LEVEL_TWO_CONVERSION:so("cmp_level_2_conversion"),CMP_LEVEL_TWO_SAVE_EXIT:so("cmp_level_2_save_exit"),CMP_LEVEL_TWO_SUBSCRIBE:so("cmp_level_2_subscribe")},...{ESSENTIAL_ACCOUNT_LINK_COMPLETE:so("essential_account_link_complete"),ESSENTIAL_ACCOUNT_LINK_HELP_CLICK:so("essential_account_link_help_click"),ESSENTIAL_ACCOUNT_LINK_PROMPT:so("essential_account_link_prompt"),ESSENTIAL_ACCOUNT_LINK_RESEND:so("essential_account_link_resend_email_click"),ESSENTIAL_RESTORE_PURCHASE_CLICK:so("essential_restore_purchase_click")}},lo={},uo=(e,t)=>(n,r)=>{lo[t]||(lo[t]=0),lo[t]++,Nn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:lo[t]}),"conversion"===t&&Nn.tedEvent("page_event",{action:"set",name:"paywall_transaction_id",value:r.transactionId||"unknown"})},po={PAYWALL_ACCOUNT_LINK_COMPLETE:uo("paywall","account_link_complete"),PAYWALL_ACCOUNT_LINK_HELP:uo("paywall","account_link_help"),PAYWALL_ACCOUNT_LINK_PROMPT:uo("paywall","account_link_prompt"),PAYWALL_ACCOUNT_LINK_RESEND:uo("paywall","account_link_resend"),PAYWALL_CONVERSION:uo("paywall","conversion"),PAYWALL_CONVERSION_BANNER:uo("paywall","conversion"),PAYWALL_CONVERSION_PROFILE:uo("paywall","conversion"),PAYWALL_HOMEMODULE_ARTICLE_CLICK:uo("paywall","article_click"),PAYWALL_HOMEMODULE_ARTICLE_COMMENTS_CLICK:uo("paywall","article_comments_click"),PAYWALL_HOMEMODULE_CHANNEL_CLICK:uo("paywall","channel_click"),PAYWALL_HOMEMODULE_SIGNUP_CLICK:uo("paywall","signup_homemodule"),PAYWALL_IMPRESSION:uo("paywall","impression"),PAYWALL_LOGIN_CLICK:uo("paywall","login_click"),PAYWALL_MASTHEAD_SIGNUP_CLICK:uo("paywall","signup_masthead"),PAYWALL_PROFILE_SIGNUP_CLICK:uo("paywall","signup_profile"),PAYWALL_RESTORE_PURCHASE_CLICK:uo("paywall","restore_purchase_click"),PAYWALL_SIGN_UP:uo("paywall","signup_article"),PAYWALL_VIEWABLE:uo("paywall","viewable"),PAYWALL_ZEPHR_FAIL_OPEN:uo("paywall","zephr_fail_open")},fo={},mo={FACTBOX_READ_MORE_CLICK:((e,t)=>(n,r)=>{fo[t]||(fo[t]=0),fo[t]++,Nn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:r||fo[t]})})("factbox","read_more_click")},_o=mo,ho={},go=(e,t)=>(n,r)=>{ho[t]||(ho[t]=0),ho[t]++,Nn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:r||ho[t]})},Eo={IFRAME_EMAIL_IMPRESSION:go("iframe_email","impression"),IFRAME_EMAIL_SUBMIT:go("iframe_email","submit"),IFRAME_EMAIL_SUBMIT_NO_EMAIL:go("iframe_email","submit_no_email"),IFRAME_EMAIL_VIEWABLE:go("iframe_email","viewable")},vo=(e,t,n,r)=>(o,i)=>{const{pageType:a}=z(),{datasetId:s,type:c}=i,l={event_category:e,event_label:c||n,non_interaction:Boolean(r),...s&&c?{type_of_newsletter:`${c}_${s}_${a}`}:{}};Nn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:l})},yo={NEWSLETTER_ERROR:vo("newsletter","submit_error",null,!0),NEWSLETTER_POPUP_SHOW:vo("newsletter","start","newsletter_popup",!0),NEWSLETTER_POPUP_SUBMIT:vo("newsletter","submit_success","newsletter_popup"),NEWSLETTER_PRIVACY_CLICK:vo("newsletter","privacy_click",null),NEWSLETTER_SHOW:vo("newsletter","start",null,!0),NEWSLETTER_SUBMIT:vo("newsletter","submit_success",null,!0)},wo=(e,t,n)=>(r,o)=>{const{pageType:i}=z(),{datasetId:a,pollId:s,question:c,answer:l,href:u,channel:d}=o||{},p="newsletter"===e,f={channel:d,event_category:e,event_label:p?"poll":c,href:u,non_interaction:Boolean(n),poll_answer:l,poll_id:s?String(s):s,poll_name:c,url_channel:d,...p&&a?{type_of_newsletter:`news_${a}_${"article"===i?"poll-article":"poll-channel"}`}:{}};Nn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:f})},Io={XP_POLLS_CLICK:wo("poll","click"),XP_POLLS_IMPRESSION:wo("poll","impression",!0),XP_POLLS_SUBSCRIBED:wo("newsletter","submit_success"),XP_POLLS_VIEW:wo("poll","view",!0),XP_POLLS_VOTED:wo("poll","submit_success")},bo={},Oo=(e,t)=>()=>{bo[t]||(bo[t]=0),bo[t]++,Nn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:bo[t]})},So={XP_BUTTON_LOGO_LINK_CLICK:Oo("xp_button_logo_link","click"),XP_BUTTON_LOGO_LINK_IMPRESSION:Oo("xp_button_logo_link","impression")},Co=Object.assign({},Dn,kn,xn,Jr,jn,lr,ur,mr,hr,yr,Ir,Or,Cr,Tr,kr,Ur,Ar,Nr,Br,Wr,Fr,Yr,eo,no,po,io,co,_o,Eo,yo,Io,So);Wt("TED",Co);const To=Nn,Lo="mol-fe-signin-return-flow-variant";let Ao;const Po=()=>{if(Ao)return Ao;const e=new URLSearchParams(window.location.search),t=(e=>{try{if("localStorage"in window){const t=window.localStorage.getItem(e);return t?JSON.parse(t):null}}catch(e){}return null})(Lo)||e.get("flowVariant")||e.get("flow_variant");return Ao=t&&t.replace(/[^\w_].*/,""),(()=>{try{"localStorage"in window&&window.localStorage.removeItem(Lo)}catch(e){}})(),Ao},Mo=function(e,t){return e[t]||(e[t]=new L),e[t]},No=function(e,t,n){if(typeof t!==n)throw new Error(`Missing or invalid param ${e}`)},Ro={},Do=function(e){return No("projectName",e,"string"),Mo(Ro,e).promise},ko=function(e,t){t&&Mo(Ro,e).resolve(t)},xo=new T,Uo={},jo=[],Bo=function(e){return No("componentName",e,"string"),Uo[e]||(Uo[e]=[]),Uo[e]},Vo=function(e,t){No("componentName",e,"string"),No("cb",t,"function");const n=xo.subscribe(`${e}.add`,((e,n)=>t(n)));return jo.push(n),n},Go=function(e,t){No("componentName",e,"string"),No("cb",t,"function");const n=xo.subscribe(`${e}.remove`,((e,n)=>t(n)));return jo.push(n),n},Wo=function(e,t){No("componentName",e,"string"),t&&Uo[e]&&(Uo[e]=Uo[e].filter((e=>e!==t)),xo.publish(`${e}.remove`,t))},Ko=function(e,t){return No("componentName",e,"string"),Uo[e]||(Uo[e]=[]),t&&!Uo[e].includes(t)&&(Uo[e].push(t),xo.publish(`${e}.add`,t)),{remove:()=>Wo(e,t)}},Fo=()=>{(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?k.go("DOM_READY"):(document.addEventListener("DOMContentLoaded",(()=>k.go("DOM_READY"))),window.addEventListener("load",(()=>k.go("DOM_READY"))))},Ho=()=>{document.body?k.go("BODY_READY"):setTimeout(Ho,5)};Fo(),Ho();const $o=function(e,t={}){if(!e)throw new Error('loadStyle: Missing required "href" parameter');const n=function(e,t="all"){return Array.from(document.styleSheets).find((({href:n,ownerNode:r})=>n===e&&r.media===t))}(e,t.media);return n?Promise.resolve(n.ownerNode):new Promise(((n,r)=>{const o=document.createElement("link"),i=t.before||document.querySelector("script");o.media="only x",o.rel="stylesheet",o.href=e;const a=()=>{Array.from(document.styleSheets).some((({ownerNode:e})=>e===o))?n(o):setTimeout(a,10)};o.onload=()=>n(o),o.onerror=()=>r(new URIError(`The stylesheet "${e}" is not accessible.`)),k("BODY_READY",(()=>{i.parentNode.insertBefore(o,i)})),a()})).then((e=>(e.media=t.media||"all",e)))},zo=()=>{Array.from(document.querySelectorAll("link[rel=preload][as=style]")).forEach((e=>{e.rel=null,$o(e.href,{before:e}).then((()=>e.parentNode.removeChild(e))).catch((e=>J().error(e)))}))},Yo=()=>{if((()=>{try{return document.createElement("link").relList.supports("preload")}catch(e){return!1}})())return J().debug('"Resource Hints: preload" is supported'),!1;if(J().debug('Polyfilling "Resource Hints: preload"'),zo(),"complete"!==document.readyState){const e=setInterval(zo,100);window.addEventListener("load",(()=>clearInterval(e)))}return!0},qo=function(e){J().warn(`${e} has been deprecated`)},Xo=function(){qo("loadDeferredImgs")};Xo.pause=function(){qo("loadDeferredImgs.pause")},Xo.resume=function(){qo("loadDeferredImgs.resume")},Xo.load=function(){qo("loadDeferredImgs.load")},Xo.imagesCache={getImages(){qo("loadDeferredImgs.imagesCache.getImages")},popImages(){qo("loadDeferredImgs.imagesCache.popImages")},resetCache(){qo("loadDeferredImgs.imagesCache.resetCache")}};const Jo=Xo,Qo=function(e,t={}){if(!e)throw new Error('loadScript: Missing required "src" parameter');return new Promise(((n,r)=>{const o=document.createElement("script");let i;o.type=t.type||"text/javascript",t.async&&(o.async=!0),t.defer&&(o.defer=!0),o.onerror=()=>r(new URIError(`The script ${e} is not accessible.`)),o.onload=()=>n(o),i=t.beforeCurrentScript&&document.currentScript?document.currentScript:document.querySelector("script"),i.parentNode.insertBefore(o,i),o.src=e}))};Fo(),Ho();const Zo=e=>(J().warn('"onDocReady" has been deprecated. please use "later(\'DOM_READY\', callback);" instead'),k("DOM_READY",e));var ei=n(416);let ti=()=>{};Promise.all([Do("molFeDomHelperScroll"),k("DOM_READY")]).then((([e])=>{e.enableTracking&&(ti=(0,ei.io)())})).catch((e=>{throw new Error(e)}));const ni={createInteractionMethod:ei.gW,createLegacyInteractionMethod:async e=>{try{ti(),await e;const{enableTracking:t}=await Do("molFeDomHelperScroll");t&&(ti=(0,ei.io)())}catch(e){throw new Error(e)}},getScrollLeft:ei.v_,getScrollTop:ei.hY,reenableWindowScrollMethods:ti,scroll:ei.W2,scrollBy:ei.HN,scrollByLines:ei.M$,scrollByPages:ei.Tw,scrollTo:ei.VG,scrollToElement:ei.PA,scrollToElementIfNeeded:ei.Dn,setHash:ei.hd,setScrollLeft:ei.ND,setScrollTop:ei.LR};Fo(),Ho(),Yo();const ri=e=>{try{if("string"==typeof e){return new URL(e).hostname}}catch(e){J().error("Failed to get hostname",e)}},oi=e=>{try{if("string"==typeof e){return new URL(e).pathname}}catch(e){J().error("Failed to get pathname",e)}},ii=()=>new Promise((e=>{k("GA_CONFIG_READY",(()=>{e(Do("GA_CONFIG_PROPS"))}))})),ai=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"],si=e=>ai.includes(e),ci=e=>"GB"===e,li=["CA","VA","CO","CT","UT","TX","OR","MT","IA","DE","TN","IN"],ui=(e,t)=>"US"===e&&li.includes(t),di=()=>{const{geo:e,region:t}=z(),n=si(e),r=ui(e,t),o=ci(e);return{geo:e,isGdprApplicable:o||n||r,isInEu:n,isInGb:o,isInUsStateWithGdprLaws:r,region:t}},pi=()=>{const e=(()=>{try{const e=window.localStorage.getItem("mol-fe-paywall-entitlement");if(!e)return null;const t=JSON.parse(e),n=t?.registeredUserId;if(n)return n}catch(e){}return null})();if(!e)return null;const t=window.localStorage.getItem(`dmg.ads.consentOrPay.${e}.mol-reject-all.tcf.cache`);if(!t)return null;try{const e=JSON.parse(t);if(e)return e}catch(e){}return null},fi="consented",mi="do not sell",_i="not enforced",hi="partial consented",gi="rejected",Ei="undecided",vi=()=>{try{const e=pi();if(e)return e;const t=(()=>{const e=window.localStorage.getItem("mol.ads.cmp.tcf.cache");if(e)try{const t=JSON.parse(e);if(t)return t}catch(e){}return null})();if(t)return t}catch(e){}return null},yi=()=>{switch((()=>{let e;try{e=window.localStorage.getItem("mol.ads.cmp.consent")}catch(e){}return e})()){case"yes":return fi;case"no":return mi;default:return Ei}},wi=()=>{const{isGdprApplicable:e,isInGb:t,isInEu:n,isInUsStateWithGdprLaws:r}=di();return e?t||n?(()=>{const e=vi();if(!e)return Ei;switch(e?.getConsentDegree){case"yes":return fi;case"no":return gi;case"partial":return hi;default:return Ei}})():r?yi():_i:_i},Ii=e=>new Promise((t=>setTimeout((()=>t(!1)),e))),bi=()=>new Promise((async e=>{if(!window.__tcfapi){let t=!1;for(let e=0;e<10;e++)if(await Ii(500),window.__tcfapi){t=!0;break}if(!t)return void e()}{const t=await Promise.race([new Promise((e=>{window.__tcfapi("getTCData",2,(()=>{e(!0)}))})),Ii(5e3)]);if(!t)return void e()}window.__tcfapi("getValidTCData",2,(()=>{e()}))})),Oi="G-C9F47K6NW6",Si=`https://www.googletagmanager.com/gtag/js?id=${Oi}&l=molFeDataLayer`,Ci="http://fbia.facebook.com/",Ti=je("mol-fe-tracking-"),{getHostname:Li,getPathname:Ai}=u,Pi="lastNonInternalReferrer",Mi="referrer-session",Ni="referrer-external-session",Ri=e=>{if(!e)return!1;const t=Li(e);return t&&t.match(/^www\d?\.(thisismoney|thisismoneyint)\./i)},Di=e=>{if(!e)return!1;const t=Li(e);return t&&t.match(/^www\d?\.(dailymail|dailymailint)\./i)},ki=e=>!!e&&(!(!Ri(e)&&!Di(e))||Li(location.href)===Li(e)),xi=()=>{const e=document.referrer;if(ki(e))return Ti.getItem(Pi)||null;const t=e||"undefined";return Ti.setItem(Pi,t),t},Ui=()=>{const e=document.referrer;if(!ki(e))return;return Ai(e).split("/")[1]||void 0},ji="google",Bi=["duckduckgo","yahoo","bing"],Vi=[ji,...Bi],Gi=["instagram","reddit","pinterest","/t.co/","facebook","snapchat"],Wi=["dailymail","dailymailint","thisismoney","thisismoneyint","mailonsunday"],Ki=["mailsubscriptions","themailsubscriptions","mymailaccount","stagingmailplussubs.coderush","uat-dlv.nonprod-mailsubscriptions.gcpp","main-mma-preprod.coderush"],Fi="news.google",Hi="com.google",$i=["drudgereport","upday","newsnow","flipboard","msn"],zi="Search",Yi="Direct",qi="newsletter",Xi="Internal Traffic",Ji="internal/autorefresh",Qi="Other Websites",Zi={bing:"bing",duckduckgo:"duckduckgo",google:"google websearch",googleApp:"google app",googleNews:"google news",pushNotifications:"push notifications",widgetNotifications:"widget notifications",yahoo:"yahoo"},ea={"/t.co/":"twitter",facebook:"facebook",instagram:"instagram",pinterest:"pinterest",reddit:"reddit",snapchat:"snapchat"},ta=e=>e?e.toLowerCase().includes("windows-widget")?Zi.widgetNotifications:e.toLowerCase().includes("push-notif")?Zi.pushNotifications:null:null,na=(e,t,n)=>t.includes(e)||n.includes(e),ra=e=>{const t=document.referrer||"",n=xi()||"",r=((e,t)=>{let n=null;return Bi.some((r=>!!na(r,e,t)&&(n=Zi[r],!0))),n||(na(Hi,e,t)?Zi.googleApp:na(Fi,e,t)?Zi.googleNews:na(ji,e,t)&&![Hi,Fi].some((n=>na(n,e,t)))?Zi.google:n)})(n,t),o=((e,t)=>{let n=null;return Gi.some((r=>!!na(r,e,t)&&(n=ea[r],!0))),n})(n,t),i=ta(e);return i||(r||(o||(Wi.some((e=>t.includes(e)))?Xi:document.referrer||e?((e,t)=>{for(const n of $i)if(na(n,e,t))return n;return Qi})(n,t):Yi)))},oa=()=>{const e=Ti.getItem(Ni);if(!e)return null;const{updatedAt:t}=e;return Date.now()-t>15552e6?null:e},ia=e=>{return e?.toLowerCase?.().includes?.("newsletter")?{referrerGroup:qi,referrerType:qi}:(t=document.referrer,Ki.some((e=>t.includes(e)))&&!De("mol-fe-paywall-came-from-purchase")?{referrerGroup:"internal/mailsubs",referrerType:Xi}:((e,t)=>Di(e)&&Ri(t)||Ri(e)&&Di(t))(document.location.toString(),document.referrer)?{referrerGroup:Di(document.referrer)?"internal/mol":"internal/tim",referrerType:Xi}:null);var t},aa=e=>{const t=ia(e);if(t)return(({referrerGroup:e,referrerType:t})=>{const n=oa();Ti.setItem(Mi,{createdAt:Date.now(),referrerGroup:e,referrerType:t,updatedAt:Date.now()}),Ti.setItem(Ni,{...n||{createdAt:Date.now()},referrerGroup:e,referrerType:t,updatedAt:Date.now()})})(t),t;const n=(()=>{const e=Ti.getItem(Mi);if(!e)return null;const{updatedAt:t}=e;return Date.now()-t>18e5?null:e})(),r=oa();var o;if((o=document.referrer)&&o.match(/^https:\/\/www\.dailymail(int)?\.co\.uk\/.*\/amp\/.*/i)){const e=zi,t=Zi.google;return Ti.setItem(Mi,{createdAt:Date.now(),referrerGroup:t,referrerType:e,updatedAt:Date.now()}),Ti.setItem(Ni,{...r||{createdAt:Date.now()},referrerGroup:t,referrerType:e,updatedAt:Date.now()}),{referrerGroup:t,referrerType:e}}if(n&&n.referrerGroup!==Ji){if(n.updatedAt=Date.now(),Ti.setItem(Mi,n),![Xi,Yi].includes(n.referrerType)||!r)return Ti.setItem(Ni,{...r||{createdAt:Date.now()},referrerGroup:n.referrerGroup,referrerType:n.referrerType,updatedAt:Date.now()}),{referrerGroup:n.referrerGroup,referrerType:n.referrerType};if(r&&r.referrerGroup!==Ji)return{referrerGroup:r.referrerGroup,referrerType:r.referrerType}}const i=ra(e),a=(e=>{const t=document.referrer||"",n=xi()||"",r=e=>na(e,n,t);return ta(e)?"Push Channels":Vi.some(r)?zi:Gi.some(r)?"Social":Wi.some((e=>t.includes(e)))?Xi:document.referrer||e?Qi:Yi})(e),s=Date.now();return Ti.setItem(Mi,{createdAt:s,referrerGroup:i,referrerType:a,updatedAt:s}),[Xi,Yi].includes(a)&&r&&r.referrerGroup!==Ji?{referrerGroup:r.referrerGroup,referrerType:r.referrerType}:(Ti.setItem(Ni,{...r||{createdAt:Date.now()},referrerGroup:i,referrerType:a,updatedAt:s}),{referrerGroup:i,referrerType:a})},sa="mol-fe-previous-render-platform";let ca=null;const la=()=>{if(ca)return ca;ca=ki(document.referrer)?(()=>{try{return window.localStorage.getItem(sa)}catch(e){}return null})():null;const e=navigator.userAgent.match(/snapchat/i),t=navigator.userAgent.match(/BytedanceWebview/i);let{renderPlatform:n}=H();return e&&(n="snapchat"),t&&(n="tiktok"),(e=>{try{window.localStorage.setItem(sa,e)}catch(e){}})(n),ca},ua=(e,t=[])=>{if("object"!=typeof e||null===e||Array.isArray(e))return"string"==typeof e?e.toLowerCase():e;const n={};let r=t=>{n[t]=ua(e[t])};return Array.isArray(t)&&t.length&&(r=r=>{t.includes(r)?n[r]=e[r]:n[r]=ua(e[r])}),Object.keys(e).forEach(r),n},da=e=>"string"!=typeof e||e.startsWith("/")?e:`/${e.trim()}`,pa=()=>{const e=new Date,t=("0"+e.getDate()).slice(-2),n=("0"+(e.getMonth()+1)).slice(-2);return`${e.getFullYear()}-${n}-${t} ${("0"+e.getHours()).slice(-2)}:${("0"+e.getMinutes()).slice(-2)}:${("0"+e.getSeconds()).slice(-2)}`};var fa=n(2304);const ma=()=>{if(fa.Register.isWebPushSupported())switch(Notification.permission){case"default":return"eligible";case"denied":return"denied";case"granted":return"subscribed"}return"not_supported"},_a="FB Logged-In User",ha="FB Logged-out User",ga="FB Registering User",Ea="Google Logged-In User",va="Google Logged-out User",ya="Google Registering User",wa="Guest",Ia="Twitter Logged-In User",ba="Twitter Logged-out User",Oa="Twitter Registering User",Sa=function(){return bt().get("_as")||wa},Ca=function(){switch(Sa()){case _a:case ha:case ga:return"facebook";case Ea:case va:case ya:return"google";case Ia:case ba:case Oa:return"twitter";default:return"default"}},Ta=()=>`${Sa()}|${bt().get("_rs")||""}`,La="mol-fe-last-user-id",Aa=()=>{let e=null;return window.DM&&window.DM.userId?(e=window.DM.userId,((e,t)=>{try{"localStorage"in window&&window.localStorage.setItem(e,JSON.stringify(t))}catch(e){}})(La,e)):e=(e=>{let t=null;try{"localStorage"in window&&(t=JSON.parse(window.localStorage.getItem(e)))}catch(e){}return t})(La),e},Pa=e=>{if(e){const{asyncBundleVersion:t,bundleVersion:n,feTag:r,syncBundleVersion:o,videoBundleVersion:i,renderPlatform:a}=e,s="mobile"===a;return`${s?"":n}:${o}:${t}:${i}:${r}:${s?n:""}`}return":::::"},Ma=e=>{if(e instanceof Date)return e.toISOString().split("T")[0]},Na=e=>{if(e instanceof Date)return e.toISOString().split("T")[1].split(":")[0]},Ra=()=>{try{const e=new URLSearchParams(window.location.search).get("searchPhrase");if("string"==typeof e)return e.toLowerCase()}catch(e){}},Da=(e,t)=>{if(t<0)throw new RangeError("Exponent must be positive");if(!t)return t+window.BigInt(1);let n=e,r=t;for(;--r;)n*=e;return n},ka=e=>{let t=e;const n=(e=>e.includes(":")?6:e.includes(".")?4:null)(t);let r=window.BigInt(0),o=window.BigInt(0);if(4===n){for(const e of t.split(".").map(Number).reverse())r+=window.BigInt(e)*Da(window.BigInt(2),window.BigInt(o)),o+=window.BigInt(8);return{number:r,version:n}}if(6===n){const e={};if(t.includes(".")&&(e.ipv4mapped=!0,t=t.split(":").map((e=>{if(e.includes(".")){const t=e.split(".").map((e=>Number(e).toString(16).padStart(2,"0")));return`${t[0]}${t[1]}:${t[2]}${t[3]}`}return e})).join(":")),t.includes("%")){let n;[,t,n]=/(.+)%(.+)/.exec(t),e.scopeid=n}const i=t.split(":"),a=i.indexOf("");if(-1!==a)for(;i.length<8;)i.splice(a,0,"");for(const e of i.map((e=>e?`0x${e}`:"0")).map(Number).reverse())r+=window.BigInt(e)*Da(window.BigInt(2),window.BigInt(o)),o+=window.BigInt(16);return e.number=r,e.version=n,e}return null},xa=[["8.27.67.23","223"],["104.28.4.1","33623"],["146.75.128.0","32256"],["172.224.224.0","97285"],["2606:54c0:180::","425542349672951312235364352"],["2606:54c0:400::","425541906951093543206125568"],["2606:54c0:680::","6615242103377994917701746688"],["2606:54c0:1d00::","14507110001396246759860076544"],["2606:54c0:4d80::","14042882486664229156772904960"],["2a02:26f7:b3c0:4000::","22370038001675620477608919040"],["2a04:4e41:0000:0000::","94298445985973994482827264"]],Ua=()=>{const{clientIP:e}=z();return(e=>{try{if(!("BigInt"in window))return!1;const{number:t,version:n}=ka(e)||{};if(!t)return!1;for(const e of xa.filter((([e])=>e.includes(":")===(6===n)))){const[n,r]=e,{number:o}=ka(n),i=o+window.BigInt(r);if(t>o&&t<i)return!0}}catch(e){}return!1})(e)},ja=()=>{try{const e=new URLSearchParams(window.location.search),t=e.get("trackingPagePath"),n=e.get("trackingPageTitle");if(!t&&!n||window.parent===window||!document.referrer)return null;const r={};return t&&(r.page_location=`${document.referrer}${t.replace(/^\//,"")}`),n&&(r.page_title=n),r}catch(e){}return null},Ba=()=>{try{return Object.entries(window.adsMVTResults.selectedScenarios).map((([e,t])=>`${e}=${t}`)).join(",")}catch(e){J().error("Error getting ads test scenario for GA",e)}return null},Va=async()=>{if("cookieDeprecationLabel"in navigator){return await navigator.cookieDeprecationLabel.getValue()}},Ga=je("mol-fe-tracking-sailthru-"),Wa="session",Ka=()=>{const e=(()=>{const e=Ga.getItem(Wa);return!e||!e.updatedAt||Date.now()-e.updatedAt>18e5?null:e})(),t=new URLSearchParams(window.location.search),n=t.get("st_profile")||e&&e.sailthruUserId||void 0,r=t.get("st_blast")||e&&e.sailthruBlastId||void 0;return(n||r)&&(({sailthruBlastId:e,sailthruUserId:t})=>{const n=Ga.getItem(Wa);Ga.setItem(Wa,{...n||{createdAt:Date.now()},sailthruBlastId:e,sailthruUserId:t,updatedAt:Date.now()})})({sailthruBlastId:r,sailthruUserId:n}),{sailthruBlastId:r,sailthruUserId:n}},{getHostname:Fa}=u,Ha="puzzlesus",$a="none",za="mol-sophi-signpost-click";let Ya=null;const qa=e=>{if(Ya)return Ya;const t=localStorage.getItem(za);return Ya=((e,t)=>{const{isPaywalled:n,neverPaywall:r,headlineTag:o}=z(),i=o?.toLowerCase()||"",a={articleLabel:i||$a,articleLabelSource:$a};if(e){const o=e.split("-");if(3!==o.length)return a;if(t===o[0]){const e=!window.getIsPaywalledForCountry||window.getIsPaywalledForCountry();if(n&&e&&!r)return{articleLabel:"mailplus"+(i?` ${i}`:""),articleLabelSource:"override"};const t=o[1]===$a?"":`${o[1]} `;let a=i;return t||a||(a=$a),{articleLabel:`${t}${a}`,articleLabelSource:o[2]}}}return a})(t,e),localStorage.removeItem(za),Ya};window.molSophiDecisionPromise=null;const Xa=async()=>{const e=H(),{articleId:t,articleTitle:n,authorName:r,channel:o,contentType:i,domain:a,loggedInStatus:s,partnerSite:c,publishedDate:l,subChannel:u,subChannel2:d,subChannel3:p,topics:f}=e,{cljGeo:m,geo:_,isPaywalled:h,openwebEnabled:g,pageType:E,paywalledCountries:v,sponsored:y,sponsorLabel:w,sponsorName:I,neverPaywall:b}=z();let O=e.renderPlatform;const S=navigator.userAgent.match(/snapchat/i),C=navigator.userAgent.match(/BytedanceWebview/i);O=location.href.includes("/embed/gamp-video/")?"mobile amp":O,O=location.href.includes("/embed/fbia-video/")?"mobile fbia":O,S&&(O="snapchat"),C&&(O="tiktok");const T="true"===y||!0===y,L=O&&"mobile fbia"===O.toLowerCase(),A=L?Ci:document.referrer,P=L&&Ci||xi()||A,{ico:M,ito:N,utm_source:R}=(()=>{try{const e=location.href;return new(fe())(e,!0).query||{}}catch(e){return{}}})();let D,x;N&&!R&&(D={medium:"ito",source:N});const U=Ua();window.applePrivateRelay=U;const{moduleName:j,moduleTracking:B,moduleListPosition:V,modulePixelDepth:G,moduleArticlePositionChannel:W}=ir(),{referrerType:K,referrerGroup:F}=(e=>{const t=aa(e);return"internal traffic"===t.referrerType?{...t,referrerType:Xi}:t})(N),$=Ti.getItem(Mi),{sailthruBlastId:Y,sailthruUserId:X}=Ka(),J=Re();try{if("channel"===E&&o===u&&["/home","/ushome","/auhome"].includes(o)&&"mobile"===O){x=bt().get("mol-home")||"news";const e=document.querySelector(".home-tabs-container");e&&"showbiz"===e.dataset.selectedHpTab&&(x="showbiz")}}catch(e){}const Q=g||"article"!==E,Z=o===Ha||o===`/${Ha}`,ee=await(async()=>{try{if(!window.RTA.ids)return null;const t=await Promise.race([window.RTA.ids,(e=2e3,new Promise((t=>setTimeout(t,e))))]);return t&&t.page&&t.visit?{...t,visit:parseInt(t.visit,10)}:null}catch{return null}var e})();let te=null;window.molSophiDecisionPromise||(window.molSophiDecisionPromise=(async(e,t)=>{const n=await Promise.race([k("SOPHI_DECISION_READY").then((()=>"sophi")),k("OVERRIDE_READY").then((()=>"override")),new Promise((n=>setTimeout((()=>n("not_loaded")),e||t?1e3:3e3)))]);return window.molSophiDecisionSourceOnPageView=n,"not_loaded"===n&&(window.molSophiFeatureOff=!0),n})(b,h)),te=await window.molSophiDecisionPromise;const ne=qa(t),re=await zn(),oe={abm:bt().get("gab"),acp:bt().get("gac"),ads_mvt_test_scenario:Ba(),akamai_geo:_||"undefined",article_status:re,article_features:q(),article_id:Z?"88888888":t,article_title:n,article_label:ne.articleLabel,sophi_article_label_decision_source:ne.articleLabelSource,author_name:r,bundle_version:Pa(e),campaign:D,url_channel:da(o),chrome_sandbox_label:await Va(),clojure_geo:m||"undefined",content_group1:i,content_type:i,domain:a,ico_internal_hit:M,internal_search_terms:Ra(),ito_external_hit:N,last_referrer_group:$&&$.referrerGroup||"undefined",last_referrer_type:$&&$.referrerType||"undefined",logged_in_status:(ie=s,ie&&ie.replace(/\s+/g,"")),icoInternalHit:M,icoInternalSession:M,itoExternalHit:N,itoExternalSession:N,mobile_home_tab_active:x,mobile_home_tab_choice:Fn()||"undefined",module_click_article_pos_channel:W&&parseInt(W,10)||void 0,module_click_list_position:V,module_name:j,module_pixel_depth:G&&parseInt(G,10)||void 0,module_tracking:B,multivariant_experiments:J&&J.length?J.join(","):"undefined",one_account_user_id:Xn(),openweb_enabled:Q?"true":"false",page_id:Vt()||"undefined",page_id_rta:ee?.page||"undefined",page_url:location.href||"",partner_site:c||void 0,previous_page_rendered_platform:la()||"undefined",article_published_date:Ma(l),article_published_hour:Na(l),puzzle_user_type:Mt(),referrer:A,referrer_type:K,referrer_group:F,referring_channel:Ui()?da(Ui()):"undefined",registration_id:Aa()||"undefined",rendered_platform:O,sailthru_blast_id:Y,sailthru_user_id:X,scv_id:Gt()||"undefined",scv_id_rta:ee?.visit||"undefined",sponsor_name:I||w||T&&"sponsored"||void 0,url_subchannel_level_1:da(u),url_subchannel_level_2:da(d),url_subchannel_level_3:da(p),referringDomain:"undefined"===P?P:Fa(P),referringUrl:P,subscription_entitlements:qn()||"undefined",swipe_funnel_status:Wn()||"undefined",article_tags:f&&f.length>0?f.sort(((e,t)=>e.localeCompare(t))).join(","):void 0,user_type:Yn(),user_agent:navigator.userAgent,user_login_details:Ta(),user_local_server_date:pa(),push_notification_status:ma(),push_notification_campaign_id:new URLSearchParams(window.location.search).get("ci")||"undefined",paywall_countries:v?.length&&v.slice().sort().join(",")||(!b&&h?"all":"undefined"),vwo_mol_campaigns_loaded:await Ut()||"undefined",...ja()||{},...Qn(te)};var ie;for(const e of["ito_external_hit","ito_external_session","referring_url","referring_domain","itoExternalHit","itoExternalSession","referringUrl","referringDomain"])oe[e]||(oe[e]="undefined");return(e=>{for(const t of Object.keys(e))e[t]||delete e[t];return e})(oe)},Ja=e=>new Promise((t=>{Za("get",e,"client_id",(e=>{t(e)}))})),Qa=()=>{const e=navigator.userAgent.match(/snapchat/i),t=navigator.userAgent.match(/BytedanceWebview/i);return e||t?{ga4Id:"G-K7GKTZV547"}:{ga4Id:Oi,ga4IdInDigital:"AW-670087309"}},Za=function(){window.molFeDataLayer.push(arguments)};let es;const ts=(e,t)=>{try{window.VWO&&window.VWO.event&&es&&window.VWO.event(e,{...es,...t})}catch(e){J().error("Error sending event to VWO",e)}},ns=async()=>{const{ga4Id:e,ga4IdInDigital:t}=Qa(),n=await Xa();ko("GA_CONFIG_PROPS",n),k.go("GA_CONFIG_READY");const r=ua(n,["referrer_type","last_referrer_type"]),{environment:o}=H(),i="production"===o?["dailymail.co.uk","thisismoney.co.uk","mailsubscriptions.co.uk","themailsubscriptions.co.uk","mymailaccount.co.uk"]:["dailymailint.co.uk","thisismoneyint.co.uk","stagingmailplussubs.coderush.io","uat-dlv.nonprod-mailsubscriptions.gcpp.io","main-mma-preprod.coderush.io"],{registration_id:a,puzzle_user_type:s,sailthru_user_id:c,one_account_user_id:l,...u}=r,d=await(e=>{try{return Promise.race([Ja(e),(t=1e3,new Promise((e=>setTimeout(e,t))))])}catch(e){return void J().error("Error getting client id",e)}var t})(e),p=(()=>{try{const e=De("MOL-FE-WEB-PUSH_SUBSCRIPTION_STATUS");if(e){const{state:t,metadata:{crossOrgUserIds:n}}=e;if("ready"===t&&Array.isArray(n)&&n.length)return n[n.length-1]}return null}catch(e){return J().error("Error getting cross org user id",e),null}})(),f={client_id:d,one_account_user_id:l,puzzle_user_type:s,registration_id:a,sailthru_user_id:c,...p?{push_notif_user_id:p}:{}};if(Za("config",e,{clientId:d,linker:{accept_incoming:!0,domains:i},send_page_view:!1,user_properties:f,...u,consent_state:wi()}),es=u,window.VWO&&window.VWO.visitor)try{window.VWO.visitor(f)}catch(e){J().error("Error sending visitor var to VWO",e)}ko("molFeGAProps",r),(async e=>{e&&(await bi(),Za("config",e))})(t).catch((e=>{J().error("Error initialising ga4InDigital",e)}))};let rs=null;const os=()=>(rs||(rs=ns()),rs),is=async e=>{const{ga4Id:t}=Qa(),n={...ua(e),consent_state:wi(),send_to:t};await os();const r=await(async()=>{const{pageType:e}=z();if("article"!==e)return;return{hasBeenPaywalled:"has_been_paywalled_article_views",isPaywalled:"paywall_article_views",isPaywalledForOthers:"is_paywalled_for_others_article_views",isRestricted:"is_restricted_article_views",none:"free_article_views"}[await zn()]})();r&&(n[r]=1),Za("event","page_view",n),window.molSophiPageViewSent=performance.now().toFixed(2),ts("page_view",n)},as=async(e,t,n,r=!0)=>{const{ga4Id:o}=Qa();await os();let i=n;if(!i){const n=t&&t.event_category||"unknown";i=`${n}_${e}`.replace(/\s/g,"_"),i.length>40&&(i=i.substring(0,40))}const a={...ua(t),consent_state:wi(),send_to:o};i&&(r?(Za("event",i,a),ts(i,a)):setTimeout((()=>{Za("event",i,a),ts(i,a)}),500))},ss=()=>{try{return"visibilityState"in document?document.visibilityState:"unsupported"}catch(e){return"unsupported"}},cs=["home","ushome","auhome"],ls=async(e,t)=>{const n=Gn(),{contentType:r}=H(),{channel:o,subchannel:i,pageType:a}=z(),s=((e,t)=>"article"===e||"article"===t)(a,r),c="channel"===a,l=c&&o===i&&cs.includes(o),u=s?1:void 0,d=c&&!l?1:void 0,p=l?1:void 0;if(n){const e={auto_refreshes:1,event_category:"auto refresh",visibility_state:ss()};as(`auto refresh ${n}`,e,`auto_refresh_${n}`)}else{const e={article_views:u,channel_views:d,homepage_views:p,mobile_home_tab_active:t&&t.mobileHomeTabActive};is(e)}},us={PAGE_MOBILE_TAB_CHANGE:ls,PAGE_RENDER_STARTED:ls},ds=e=>{const t=e.pageMetadata||H()||{},n=t.articleTitle||e.articleTitle,r=t.articleId||e.articleId,o=t.channel,i=t.subChannel;let a,s,c,l,u;if(e.version&&"videoplayer"===e.placement&&(u=`${e.placement}_${e.version}`),e.id&&e.nthPosition&&(s="image "+(e.nthPosition-1)+" image share",a=e.id),e.videoTitle&&(l=e.videoTitle),e.videoId&&(c=e.videoId),"video-lead"===e.placement&&!l&&!c)try{const e=document.querySelector(".video-lead-info .video-headline"),t=e&&e.querySelector("a"),n=t?t.getAttribute("href"):window.location.href;l=e.innerText.trim().replace("Video: ",""),c=n&&n.match(/video-(\d+)/)[1]}catch(e){}return{article_id:r,article_title:n,channel:o,event_category:"social share",gallery_image_action:s,gallery_image_id:a,non_interaction:!1,url_channel:o,url_subchannel_level_1:i,video_internal_id:c,video_player_version:u,video_title:l}},ps={SOCIAL_SHARE_CLICKED:(e=>(t,n)=>{const r=ds(n),o=n.site+"_share_article-"+n.placement;as(e,{...r,event_label:o,social_share_clicks:1,social_share_type:o},"social_share")})("click"),SOCIAL_SHARE_MENU_OPEN:(e=>(t,n)=>{const r=ds(n),o="overlay_open";as(e,{...r,event_label:`share_${o}`,social_share_type:o},"social_share")})("menu_open")},fs=e=>{let t=`${e.playerType} ${e.playerId}`;e.fullscreen&&(t+="-fullscreen");const n=e.autoplay?"autoplay":"click to play",r=e.displayName,o=e.referenceId,i=e.videoId,a=e.adsEnabled?"true":"false";let s,c,l,u,d,p,f;const m=e.animatedPreviewEnabled?"withpreview":"nopreview",_=e.initialVideo?"inline":"related",h=e.pageMetadata.articleId?"article":"non-article";return"gampembedded"===e.playerId&&(s="mobile amp"),"fbiaembedded"===e.trackingType&&(s="mobile fbia",c=Ci),e.version&&(l="videoplayer_"+e.version),"thirdPartyEmbedded"===e.trackingType?(u="video_module^embedded^"+_+"^offsite",d="offsite^"+_,c=document.referrer,s="Offsite"):"image_gallery"===e.trackingType?(d=e.pageMetadata.channel+"^"+e.pageMetadata.articleId,u="video_module^"+h+"^"+e.trackingType+"^"+e.pageMetadata.subChannel):e.playlist||"commercialVideoPlayer"===e.trackingType||"editorialVideoPlayer"===e.trackingType||"autoplayInlineVideoPlayer"===e.trackingType?(d=e.pageMetadata.channel+"^"+e.trackingType,u="video_module^"+e.trackingType+"^"+e.channelShortName+"^"+e.pageMetadata.subChannel):(d=e.pageMetadata.channel+"^"+(""===e.pageMetadata.articleId?_:e.pageMetadata.articleId),u="video_module^"+h+"^"+_+"^"+e.pageMetadata.subChannel),u?u.includes("^"+m)||(u+="^"+m):u="video_module^"+m,"dmtv-promo-xp-module"!==e.trackingType||u.includes("^dmtv-promo-xp-module")||(u+="^dmtv-promo-xp-module"),e.pageMetadata.articleId&&("embedded"===e.trackingType||u.match(/\^article\^(inline|image_gallery)\^/))?(p=e.pageMetadata.articleId,f=e.pageMetadata.articleTitle):(p="video not embedded within the article",f="video not embedded within the article"),{article_id:p,article_title:f,content_type:"video",event_category:"video",event_label:n,non_interaction:!0,play_method:n,referrer:c,rendered_platform:s,video_ads_enabled:a,video_channel_article_id:d,video_external_id:i,video_in_viewport:`${e.videoInViewport}`,video_in_viewport_percentage:`${e.videoInViewportPercentage}`,video_internal_id:o,video_module:u,video_player_type:t,video_player_version:l,video_title:r}},ms={"M:25-50":"25","M:50-100":"50"},_s={"M:25-50":"video_25_views","M:50-100":"video_50_views"},hs={"M:25-50":"video25Increase","M:50-100":"video50Increase"},gs=["M:25-50","M:50-100"],Es=(e=>{const t={};for(const n of Object.keys(e))t[n]=(t,r)=>{"string"==typeof r.trackingType&&r.trackingType.includes("chromeless")||e[n](t,r)};return t})({VIDEO_ADVERT_ABORTED:function(e,t){const n=fs(t);as("advert abort",n)},VIDEO_ADVERT_COMPLETED:function(e,t){const n=fs(t);as("advert complete",n)},VIDEO_ADVERT_STARTED:function(e,t){const n=fs(t);as("advert start",{...n,video_advert_starts:1})},VIDEO_CONTENT_ABORTED:function(e,t){const n=fs(t);as("abort",n)},VIDEO_CONTENT_COMPLETED:function(e,t){const n=fs(t);as("content complete",{...n,video_completes:1})},VIDEO_CONTENT_STARTED:function(e,t){const n=fs(t);as("content start",n)},VIDEO_PROGRESS:function(e,t){if(!t.segment||!gs.includes(t.segment))return;const n=ms[t.segment],r=fs(t),o=_s[t.segment],i=hs[t.segment];as(n,{...r,[o]:1,[i]:1})},VIDEO_STICKY_CLOSE:(e=>(t,n)=>{const r=fs(n);as(e,r)})("sticky close"),VIDEO_STREAM_STARTED:function(e,t){const n=t.continuePlayList?"stream continuous play":"stream start",r=fs(t);as(n,{...r,non_interaction:!t.autoplay,video_views:1})}}),vs=e=>(t,n={})=>{const r={event_category:"video",non_interaction:!1},{videoPlayerType:o,videoPosition:i}=n;o&&(r.video_player_type=o),i&&(r.module_click_list_position=Number(i)),as(e,r)},ys={VIDEO_CAROUSEL_CLICK:vs("carousel click"),VIDEO_CAROUSEL_SWIPE:vs("carousel swipe"),VIDEO_THUMBNAIL_CLICK:vs("thumbnail click")},ws=function(){if(fa.Register.isWebPushSupported())switch(Notification.permission){case"default":return"eligible";case"denied":return"denied";case"granted":return"subscribed"}return"not_supported"},Is=e=>{const t={...e,event_category:"push notification",push_notification_status:ws()};return delete t.__numberOfAttempts,delete t.channel,delete t.subChannel,JSON.parse(JSON.stringify(t))},bs={WEB_PULL_NOTIFICATION_CLICK:function(e,t){const n={...t,event_category:"pull notification"};delete n.__numberOfAttempts,delete n.channel,delete n.subChannel,as("click",{...n,event_label:`${t.campaignId}:${t.crossOrgUserId}`,non_interaction:!1,pull_notification_campaign_id:t.campaignId})},WEB_PUSH_NOTIFICATION_CLICK:function(e,t){const n=`${t.campaignId}:${t.subscriptionId}`;as("click",{...Is(t),event_label:n,non_interaction:!1,push_notification_campaign_id:t.campaignId,push_notification_id:n})},WEB_PUSH_PRE_PROMPT_CLICK:function(e,t){const n="granted"===t.permission?"granted":"closed";as("pre prompt choice",{...Is(t),event_label:n,non_interaction:!1,pre_prompt_choice:n})},WEB_PUSH_PRE_PROMPT_IMPRESSION:function(e,t){as("pre prompt impression",{...Is(t),non_interaction:!0})},WEB_PUSH_PROMPT_CLICK:function(e,t){const n="default"===t.permission?"closed":t.permission;as("prompt choice",{...Is(t),event_label:n,non_interaction:!1,prompt_choice:n})},WEB_PUSH_PROMPT_IMPRESSION:function(e,t){as("prompt impression",{...Is(t),non_interaction:!0})}},Os={AFFILIATE_CAROUSEL_CLICK:(e=>(t,n)=>{as(n.hrefTxt,{event_category:e,event_label:n.hrefUrl,link_text:n.hrefTxt,link_url:n.hrefUrl,non_interaction:!1},"affiliate_click")})("affiliate click")},Ss=(e,t)=>{var n;return{fff_actions:["BF",t,e.bfSource||"",(n=e.position,parseFloat(n)||0),"",e.mainProductId||"",e.relatedProductId||"",e.category||"","","",""].join("^").replace(/\^+$/,""),fff_layout:["inline",e.bfSource||"",e.articleId||""].join("^").replace(/\^+$/,"")}},Cs=(e,t,n)=>(r,o)=>{as(t,{event_category:e,non_interaction:Boolean(n),...Ss(o,t)})},Ts={BF_BUY_NOW_CAROUSEL_CLICKED:Cs("bf","alternative product buynow clicked"),BF_BUY_NOW_HEADER_CLICKED:Cs("bf","main product buynow click"),BF_CAROUSEL_IN_VIEW:Cs("bf","product view",!0),BF_CAROUSEL_ROTATE_CLICKED:Cs("bf","carousel use"),BF_IMPRESSION:Cs("bf","product impression",!0),BF_SHOW_MORE_CLICKED:Cs("bf","showmore click")},Ls={AD_BILLBOARD_CLOSED:((e,t)=>()=>{as(t,{event_category:e,non_interaction:!1})})("billboard ad","close")},As={FIDELITY_CAMPAIGN_EVENT:(e=>(t,n)=>{const r=n.name.replace("fidelity-campaign-","").replaceAll("_"," ").replaceAll("-"," ");as(r,{event_category:e,event_label:n.value,non_interaction:!1,type_of_fidelity_campaign:n.value},"fidelity_campaign_click")})("fidelity campaign click")},Ps={SCREENSAVER_DOWNLOADED:((e,t)=>()=>{as(t,{event_category:e,non_interaction:!1})})("screensaver","download click")},Ms=(e,t)=>(n,r)=>{let o={event_category:e,event_label:r.searchTerm,non_interaction:!1,search_term:r.searchTerm};"site search"===e&&(o={...o,internal_search_terms:r.searchTerm,internal_searches:1}),as(e,o,t)},Ns={SITE_SEARCH:Ms("site search","site_search"),WEB_SEARCH:Ms("web search","web_search")},Rs=(e,t,n)=>()=>{as(t,{event_category:e,non_interaction:Boolean(n)})},Ds={REMIXD_COMPLETE:Rs("remixd audio player","complete",!0),REMIXD_ERROR:Rs("remixd audio player","error",!0),REMIXD_IMPRESSION:Rs("remixd audio player","present on page",!0),REMIXD_MUTE:Rs("remixd audio player","mute"),REMIXD_PAUSE:Rs("remixd audio player","pause"),REMIXD_PLAY:Rs("remixd audio player","play")},ks=(e,t,n,r)=>(o,i)=>{const{pageType:a}=z(),{datasetId:s,type:c}=i;as(t,{event_category:e,event_label:c||n,non_interaction:Boolean(r),...s&&c?{type_of_newsletter:`${c}_${s}_${a}`}:{}})},xs={NEWSLETTER_ERROR:ks("newsletter","submit error",null),NEWSLETTER_POPUP_SHOW:ks("newsletter","start","newsletter popup",!0),NEWSLETTER_POPUP_SUBMIT:ks("newsletter","submit success","newsletter popup"),NEWSLETTER_PRIVACY_CLICK:ks("newsletter","privacy click",null),NEWSLETTER_SHOW:ks("newsletter","start",null,!0),NEWSLETTER_SUBMIT:ks("newsletter","submit success",null)},Us={PAGE_MODULE_CLICKED:(e,t)=>{if(!("localStorage"in window))return;const{element:n,moduleName:r,position:o,interaction:i,linkType:a,listPosition:s,pixelDepth:c,trackingType:l,videoId:u,moduleArticlePositionChannel:d}=t,p=[],f=H(),m=l||"ck";if(p.push(r,o,f.channel),p.push(f.subChannel||""),p.push(f.subChannel2||""),p.push(f.pageName),p.push(s||""),p.push(a||""),p.push(f.contentType||""),p.push(u?"video":f.articleId||""),p.push(i||""),"el"!==m){const e=n.href.split("/");p.push(e.slice(3,6).join("/"))}else n&&n.href?p.push(n.href):p.push("");window.localStorage.setItem("module_tracking",p.join("^")),window.localStorage.setItem("module_tracking_name",r),s&&window.localStorage.setItem("module_tracking_list_position",s),c&&window.localStorage.setItem("module_tracking_pixel_depth",c),d&&window.localStorage.setItem("module_tracking_article_pos_channel",d)}},js=(e,t)=>(n,r)=>{const o={event_category:r.contentType,gallery_image_action:r.galleryTitle,gallery_image_id:r.threadId,gallery_image_swipe_count:r.galleryId,non_interaction:!1};"image"===r.contentType&&(o.image_views=1);const i="videoimage"===r.contentType?"video_image":r.contentType;as(e,o,`gallery_${i}_${t||e}`)},Bs={GALLERY_IMAGE_VIEWED:js("view",null),GALLERY_OPENED:js("start view","view_start")},Vs=(e,t,n=!1)=>()=>{as(t,{event_category:e,non_interaction:n})},Gs={DESKTOP_HOME_PAGE_OVERLAY:Vs("desktop homepage overlay","display",!0),MOBILE_HOME_PAGE_NAV:(e,t)=>{const{action:n,label:r}=t;as(n,{event_category:"mobile homepage nav",event_label:r,non_interaction:!1,selected_value:r},"bell icon click"===t.action&&"mobile_bell_icon_click"),"bell icon click"===n&&is({mobile_home_tab_active:"alerts-overlay"})},MOBILE_HOME_PAGE_OVERLAY:Vs("mobile homepage overlay","display",!0),MOBILE_HOME_PAGE_SIGNPOST_CLICK:Vs("mobile homepage signpost","click"),MOBILE_HOME_PAGE_SIGNPOST_DISMISS:Vs("mobile homepage signpost","dismiss"),MOBILE_HOME_PAGE_SIGNPOST_DISPLAY:Vs("mobile homepage signpost","display",!0),MOBILE_HOME_PAGE_SWIPE:(e,t)=>{const{action:n,label:r}=t;as("choice",{event_action:n,event_category:"mobile homepage nav",event_label:r,non_interaction:!1,selected_value:r},"mobile_homepage_nav_choice_"+("news"===r?"news":"showbiz"))},MOBILE_HOME_PAGE_VIEW:(e,t)=>{const n=t.swipe||bt().get("mol-home"),r=bt().get("mol-home-default-channel");let o="Mobile Landing Homepage";switch(n){case"news":o="Just the News";break;case"showbiz":o="Just the Showbiz";break;case"desktop":o="Full Homepage",r&&(o+=` ${r}-CA`)}t.actionSource&&(o+=` ${t.actionSource}`),as("choice",{event_category:"mobile homepage overlay",event_label:o,mobile_home_preference:o,non_interaction:!1,selected_value:o})}},Ws="Successfully Logged In",Ks="Registration Activated",Fs="Registration Started",Hs="Registration Submitted",$s={PAGE_RENDER_STARTED:()=>{const e=H(),t=Ca(),n={event_category:"account",event_label:t,non_interaction:!1,registration_method:t};switch(e.registrationEntry){case Ks:as("activate registration",n);break;case Fs:as("new registration",n);break;case Hs:as("submit registration",n);break;case Ws:as("login success",n)}},USER_AUTH_SITE_REG_ERROR_ONCE:((e,t)=>()=>{as(t,{event_category:e,event_label:Ca(),non_interaction:!1})})("account","registration error")},zs=(e,t,n=!1)=>(r,o)=>{const i={event_category:e,event_label:o&&o.tab||o&&o.label||void 0,non_interaction:n,selected_value:o&&o.tab||o&&o.label||void 0};o&&void 0!==o.value&&(i.value=o.value,"load time"===t&&(i.load_time=o.value)),as(t,i)},Ys={COMMENTS_ADD_COMMENT_CLICK:zs("comment","add comment click"),COMMENTS_CLEAR:zs("comment","clear"),COMMENTS_CLICK:zs("comment","click"),COMMENTS_DELETE:zs("comment","delete"),COMMENTS_DOWNVOTE:zs("comment","downvote"),COMMENTS_IMPRESSION:zs("comment","impression",!0),COMMENTS_LOAD_TIME:zs("comment","load time",!0),COMMENTS_LOGIN_REDIRECT:zs("comment","login redirect"),COMMENTS_MASTHEAD_CLICK:zs("comment","masthead click"),COMMENTS_NEW_COMMENT_CLICK:zs("comment","new comment click"),COMMENTS_NOTIF_CLICK:zs("comment","notif click"),COMMENTS_OVERLAY_CLOSE:zs("comment","overlay close"),COMMENTS_OVERLAY_OPEN:zs("comment","overlay open"),COMMENTS_PAGINATION_CLICK:zs("comment","pagination click"),COMMENTS_PROFILE_CLICK:zs("comment","profile click"),COMMENTS_REPLY_CLICK:zs("comment","reply click"),COMMENTS_REPLY_SUBMIT:zs("comment","reply submit"),COMMENTS_REPLY_SUBMIT_SUCCESS:zs("comment","reply submit success"),COMMENTS_REPORT_CLICK:zs("comment","report"),COMMENTS_SHOW_MORE_CLICK:zs("comment","show more"),COMMENTS_SUBMIT_COMMENT:zs("comment","submit"),COMMENTS_SUBMIT_SUCCESS:zs("comment","submit success"),COMMENTS_UPVOTE:zs("comment","upvote"),COMMENTS_VIEW:zs("comment","view"),COMMENTS_VIEW_ALL:zs("comment","view all click"),PAGE_COMMENT_TAB_SWAPPED:zs("comment tab","view"),SOCIAL_SHARE_COMMENTS:zs("comment","added")},qs={PAGE_EXTERNAL_LINK_CLICKED_GA:(e,t)=>{as(t.innerText,{event_category:"outbound click",event_label:t.href,link_text:t.innerText,link_url:t.href,non_interaction:!1},"outbound_click",!0)}},Xs=(e,t,n)=>(t,r)=>{const{productName:o,location:i}=r;as("bar"===i?"bar click":"click",{event_category:e,event_label:o,non_interaction:Boolean(n)})},Js={PRODUCT_BUTTON_LINK:Xs("product",0,!1),PRODUCT_IMAGE_LINK:Xs("product",0,!1),PRODUCT_PRICE_LINK:Xs("product",0,!1),PRODUCT_TITLE_LINK:Xs("product",0,!1)},Qs={PAGE_RENDER_STARTED:()=>{const{betwayBannerPresent:e}=H();e&&as("display betway breaking news",{event_category:"banner",non_interaction:!0})}},Zs=(e,t,n)=>(r,o)=>{as(t,{event_category:e,event_label:o.type,non_interaction:Boolean(n),type_of_smart_banner:o.type})},ec={SMART_BANNER_CLICKED:Zs("smart banner","click"),SMART_BANNER_SHOWN:Zs("smart banner","impression",!0)},tc=(e,t,n)=>(r,o)=>{const{campaignId:i}=o;as(t,{campaign_id:i,event_category:e,event_label:i,non_interaction:Boolean(n)})},nc={GUESTBOOK_IMPRESSION:tc("guestbook","impression",!0),GUESTBOOK_LOADING_ERROR:tc("guestbook","load error",!0),GUESTBOOK_SUBMIT_ERROR:tc("guestbook","submit error"),GUESTBOOK_SUBMIT_SUCCESS:tc("guestbook","submit success")},rc={LIVE_BLOG_LOAD_MORE:((e,t)=>()=>{as(t,{event_category:e,non_interaction:!1})})("live blog","load more click")},oc=["click","viewable"],ic=["impression","viewable"],ac={PROMOTIONAL_SLOT_EVENT:(e,t)=>{const{eventName:n,xpModuleName:r,campaignId:o}=t;if(ic.includes(n))return;const i=`${r}${o?`|${o}`:""}`;as(n,{event_category:"promotional slot click",event_label:i,non_interaction:Boolean(!oc.includes(n)),type_of_promotional_slot:i})}},sc=(e,t,n)=>(r,o)=>{const{promotion:i,urlClicked:a,articlePosition:s}=o;as(t,{article_position:s,event_category:e,event_label:i,non_interaction:Boolean(n),type_of_promotions_module:i,url_clicked:a})},cc={PROMOTIONS_XP_CLICK:sc("promotions module","click"),PROMOTIONS_XP_VIEW_MORE:sc("promotions module","view more")},lc=(e,t,n,r)=>(o,i)=>{const{company:a,headline:s}=i;as(t,{event_category:e,event_label:r||"impression"===t?s:a,non_interaction:Boolean(n),type_of_tim_affiliate:r||"impression"===t?s:a})},uc={TIM_AFFILIATE_BOTTOM_LINK_CLICKED:lc("affiliate","click",!1,!0),TIM_AFFILIATE_IMPRESSION:lc("affiliate","impression",!0),TIM_AFFILIATE_LEARN_MORE_CLICKED:lc("affiliate","click",!1)},dc=(e,t,n)=>(r,o)=>{const{company:i}=o;as(t,{company_name:i,event_category:e,event_label:i,non_interaction:Boolean(n)})},pc={COMPANY_REVIEW_LEARN_MORE_CLICKED:dc("companyReview","click"),COMPANY_REVIEW_LESS_CONTENT_CLICKED:dc("companyReview","click"),COMPANY_REVIEW_MORE_CONTENT_CLICKED:dc("companyReview","click")},fc=(e,t,n)=>(r,o)=>{const{label:i}=o;as(t,{event_category:e,event_label:i,non_interaction:Boolean(n),type_of_article_hero:i})},mc={ARTICLE_HERO_AUTHOR_TWITTER_LINK_CLICK:fc("articleHero","click"),ARTICLE_HERO_LOZENGE_LINK_CLICK:fc("articleHero","click")},_c=(e,t,n)=>(r,o)=>{const{label:i,value:a,modulePixelDepth:s}=o||{};as(t,{event_category:e,event_label:i,module_pixel_depth:s,non_interaction:Boolean(n),value:a})},hc={COMMERCE_XP_CLICK:_c("commercexp","click"),COMMERCE_XP_IMPRESSION:_c("commercexp","impression",!0),COMMERCE_XP_VIEW_MORE:_c("commercexp","view more"),COMMERCE_XP_VIEWABLE:_c("commercexp","view",!0)},gc=(e,t,n)=>(r,o)=>{const{channel:i,urlClicked:a,articlePosition:s}=o;as(t,{article_position:s,event_category:e,event_label:i,non_interaction:Boolean(n),url_clicked:a})},Ec={TOP_STORIES_XP_CLICK:gc("top stories module","click"),TOP_STORIES_XP_IMPRESSION:gc("top stories module","impression",!0),TOP_STORIES_XP_VIEW_MORE:gc("top stories module","view more"),TOP_STORIES_XP_VIEWABLE:gc("top stories module","view",!0)},vc={AD_SLOT_LOADED_ON_PAGE:((e,t,n)=>(r,o)=>{const{slotType:i}=o;as(t,{event_category:e,event_label:i,non_interaction:Boolean(n)})})("ad slot","load",!0)},yc=(e,t,n)=>()=>{as(t,{event_category:e,non_interaction:Boolean(n)})},wc={SWIPE_TUTORIAL_CLOSE:yc("swipe tutorial","dismiss"),SWIPE_TUTORIAL_SHOWN:yc("swipe tutorial","impression",!0)},Ic={TIM_ANCHOR_LINK_CLICKED:((e,t)=>(n,r)=>{const{linkText:o}=r;as(t,{event_category:e,event_label:o,link_text:o,non_interaction:!1})})("decisionary anchor","click")},bc=(e,t,n)=>()=>{as(t,{event_category:e,non_interaction:Boolean(n)})},Oc={COMMENT_CTA_CLICK:bc("comment cta","click"),COMMENT_CTA_IMPRESSION:bc("comment cta","impression",!0)},Sc=(e,t,n)=>()=>{as(t,{event_category:e,non_interaction:Boolean(n)})},Cc={MOBILE_MENU_COMMENT:Sc("mobile menu","comment click"),MOBILE_MENU_DESKTOP_SITE:Sc("mobile menu","desktop site")},Tc={PAGE_FURNITURE_CLICKED:(e,t)=>{const n=t&&t.furnitureName;if(!n)return;as(n,{event_category:"furniture",furniture_name:n,non_interaction:!1})}},Lc=(e,t,n)=>(r,o)=>{const{urlClicked:i,articlePosition:a}=o;as(t,{article_position:a,event_category:e,non_interaction:Boolean(n),url_clicked:i})},Ac={ARTICLE_RECOMMENDATION_XP_CLICK:Lc("article recommendation module","click"),ARTICLE_RECOMMENDATION_XP_IMPRESSION:Lc("article recommendation module","impression",!0),ARTICLE_RECOMMENDATION_XP_VIEWABLE:Lc("article recommendation module","view",!0)},Pc=(e,t,n)=>(r,o)=>{const{pageType:i}=z(),{datasetId:a,pollId:s,question:c,answer:l,href:u,channel:d}=o||{},p="newsletter"===e;as(t,{channel:d,event_category:e,event_label:p?"poll":c,href:u,non_interaction:Boolean(n),poll_answer:l,poll_id:s?String(s):s,poll_name:c,url_channel:d,...p&&a?{type_of_newsletter:`news_${a}_${"article"===i?"poll-article":"poll-channel"}`}:{}},p?"newsletter_submit_success":void 0)},Mc={XP_POLLS_CLICK:Pc("poll","click"),XP_POLLS_IMPRESSION:Pc("poll","impression",!0),XP_POLLS_SUBSCRIBED:Pc("newsletter","successful submits"),XP_POLLS_VIEW:Pc("poll","view",!0),XP_POLLS_VOTED:Pc("poll","submit success")},Nc=(e,t,n)=>(r,o)=>{const{channel:i,clickUrl:a,position:s}=o;as(t,{click_url:a,event_category:e,event_label:i,non_interaction:Boolean(n),position:s})},Rc={GEO_TARGETED_HOMEPAGE_XP_CLICK:Nc("scotland section","click"),GEO_TARGETED_HOMEPAGE_XP_IMPRESSION:Nc("scotland section","impression",!0),GEO_TARGETED_HOMEPAGE_XP_VIEWABLE:Nc("scotland section","view",!0)},Dc=(e,t,n)=>(r,o)=>{var i;i={puzzle_user_type:Mt()},Za("set","user_properties",{...i||{},consent_state:wi()}),as(t,{event_category:e,event_label:o&&o.puzzleName,non_interaction:Boolean(n),puzzle_name:o&&o.puzzleName,puzzle_user_type:Mt()})},kc={PUZZLE_COMPLETE:Dc("puzzle","complete"),PUZZLE_STARTED:Dc("puzzle","started")},xc=(e,t,n)=>(r,o)=>{as(t,{event_category:e,module_name:o&&o.moduleName||void 0,non_interaction:Boolean(n)})},Uc={MODULE_IMPRESSION:xc("module","impression",!0),MODULE_INTERACT:xc("module","interact"),MODULE_VIEW:xc("module","view",!0)},jc=(e,t,n)=>(r,o)=>{const{label:i,value:a,modulePixelDepth:s}=o||{};as(t,{event_category:e,event_label:i,module_pixel_depth:s,non_interaction:Boolean(n),value:a})},Bc={ARTICLE_PREVIEW_XP_CLICK:jc("article preview xp","click"),ARTICLE_PREVIEW_XP_IMPRESSION:jc("article preview xp","impression",!0),ARTICLE_PREVIEW_XP_VIEWABLE:jc("article preview xp","viewable",!0)},Vc=je("mol-fe-signin-"),Gc=({clickLocation:e,referringModule:t})=>{try{Vc.setItem("meta",{clickLocation:e,referringModule:t,updatedAt:Date.now()})}catch(e){J().error("Error in setSignInMeta",e)}},Wc=()=>{try{const{authenticationPlatform:e,flowVariant:t}=(()=>{const e=new URLSearchParams(window.location.search);if("1"===e.get("onetap")){const t=JSON.parse(e.get("param_info"));if(t.flowVariant)return{authenticationPlatform:t.signinMethod,flowVariant:t.flowVariant}}const t=window.getFlowVariant&&window.getFlowVariant();return t?{authenticationPlatform:e.get("signinMethod"),flowVariant:t}:{}})();if(!t)return;const n=t.split("_")[1];if(!n||!["signin","registration"].includes(n))return;const r=Vc.getItem("meta")||{},{clickLocation:o,referringModule:i}=r,a=Vc.getItem("tracking")??!1;if(!("password"===e&&!document.referrer)&&!a){const r="registration"===n?Ct.SIGN_IN_REGISTRATION_SUCCESS:Ct.SIGN_IN_LOGIN_SUCCESS;Ct.publish(r,{authenticationPlatform:e,clickLocation:o,flowVariant:t,referringModule:i}),Vc.setItem("tracking","true")}Vc.removeItem("meta")}catch(e){J().error("Error in listenToSignInLand",e)}},Kc=["masthead click","profile click","paywall click"],Fc=(e,t,n,r)=>(o,i)=>{const{paywallOutcomeLabel:a,referringModule:s,referringPageType:c,flowVariant:l,productType:u,clickLocation:d}=i||{};let p=s;const f={event_category:e,non_interaction:Boolean(n)};a&&(f.paywall_variant=a),s&&(f.referring_module=s,p=s),c&&(f.referring_page_type=c),l&&(f.flow_variant=l),u&&(f.product_type=u),d&&(f.click_location=d),"paywall impression"===t&&(f.paywall_impressions=1),"paywall viewable"===t&&(f.paywall_views=1,i.sophiPaywall&&(f.sophi_paywall_views=1)),"paywall click"===t&&(f.paywall_clicks=1),"paywall conversion"===t&&(f.paywall_conversions=1),"account conversion"===t&&(f.account_conversions=1),"banner conversion"===t&&(f.banner_conversions=1),t.includes("conversion")&&(f.order_id=i.transactionId||"unknown"),"module"===e&&(f.product_type="mailplus",f.referring_module="homemodule",p="homemodule"),Kc.includes(t)&&(p||("paywall click"===t&&(p="paywall"),"masthead click"===t&&"mailplus"===e&&(p="masthead"),"profile click"===t&&(p="profile")),Gc({clickLocation:d||p,referringModule:p})),as(t,f,r,!0)},Hc={PAYWALL_ACCOUNT_LINK_COMPLETE:Fc("mailplus","account link complete"),PAYWALL_ACCOUNT_LINK_HELP:Fc("mailplus","account link help click"),PAYWALL_ACCOUNT_LINK_PROMPT:Fc("mailplus","account link prompt"),PAYWALL_ACCOUNT_LINK_RESEND:Fc("mailplus","account link resend email click"),PAYWALL_CONVERSION:Fc("mailplus","paywall conversion"),PAYWALL_CONVERSION_BANNER:Fc("mailplus","banner conversion"),PAYWALL_CONVERSION_PROFILE:Fc("mailplus","account conversion"),PAYWALL_HOMEMODULE_ARTICLE_CLICK:Fc("module","article click"),PAYWALL_HOMEMODULE_ARTICLE_COMMENTS_CLICK:Fc("module","article comments click"),PAYWALL_HOMEMODULE_CHANNEL_CLICK:Fc("module","channel click"),PAYWALL_HOMEMODULE_SIGNUP_CLICK:Fc("module","masthead click"),PAYWALL_IMPRESSION:Fc("mailplus","paywall impression",!0),PAYWALL_LOGIN_CLICK:Fc("mailplus","paywall login click"),PAYWALL_MASTHEAD_SIGNUP_CLICK:Fc("mailplus","masthead click"),PAYWALL_PROFILE_SIGNUP_CLICK:Fc("mailplus","account click"),PAYWALL_RESTORE_PURCHASE_CLICK:Fc("mailplus","restore purchase click"),PAYWALL_SIGN_UP:Fc("mailplus","paywall click"),PAYWALL_SOPHI_LOAD:((e,t)=>(n,r)=>{const o={article_id:r?.articleId,event_category:e,non_interaction:!0,script_delay_ms:r.difference||null,script_detect_ms:r.sophiScriptReady||null};as(t,o,"sophi_load",!0)})("mailplus","sophi load"),PAYWALL_VIEWABLE:Fc("mailplus","paywall viewable",!0),PAYWALL_ZEPHR_FAIL_OPEN:Fc("mailplus","zephr fail open",!0)},$c=()=>{(async(e,t,n=null)=>{const{ga4IdInDigital:r}=Qa();r&&(await os(),Za("event",e,{...t,consent_state:wi(),send_to:`${r}${n||""}`}))})("conversion",{currency:"GBP",non_interaction:!1,value:1.99},"/MGkxCJf_5sQZEI3xwr8C")},zc={PAYWALL_CONVERSION:$c,PAYWALL_CONVERSION_BANNER:$c,PAYWALL_CONVERSION_PROFILE:$c},Yc=(e,t)=>()=>{as(t,{event_category:e})},qc={ONE_TAP_CLOSE:Yc("onetap","close"),ONE_TAP_CONTINUE:Yc("onetap","continue"),ONE_TAP_IMPRESSION:Yc("onetap","impression")},Xc=["cmp level 1 conversion","cmp level 2 conversion"],Jc=(e,t)=>(n,r)=>{const{productType:o,flowVariant:i}=r||{},a={event_category:"cmp",non_interaction:!1};i&&(a.flow_variant=i),o&&(a.product_type=o),Xc.includes(e)&&(a.cmp_conversions=1),as(e,a,e.replace(/\s/g,"_"),t)},Qc={...{CMP_LEVEL_ONE_ACCEPT:Jc("cmp level 1 accept"),CMP_LEVEL_ONE_CONVERSION:Jc("cmp level 1 conversion"),CMP_LEVEL_ONE_LOGIN:Jc("cmp level 1 login",!0),CMP_LEVEL_ONE_PRIVACY_SETTINGS:Jc("cmp level 1 privacy settings"),CMP_LEVEL_ONE_SUBSCRIBE:Jc("cmp level 1 subscribe",!0),CMP_LEVEL_TWO_CONVERSION:Jc("cmp level 2 conversion"),CMP_LEVEL_TWO_SAVE_EXIT:Jc("cmp level 2 save exit",!0),CMP_LEVEL_TWO_SUBSCRIBE:Jc("cmp level 2 subscribe",!0)},...{ESSENTIAL_ACCOUNT_LINK_COMPLETE:Jc("essential account link complete"),ESSENTIAL_ACCOUNT_LINK_HELP_CLICK:Jc("essential account link help click"),ESSENTIAL_ACCOUNT_LINK_PROMPT:Jc("essential account link prompt"),ESSENTIAL_ACCOUNT_LINK_RESEND:Jc("essential account link resend email click"),ESSENTIAL_RESTORE_PURCHASE_CLICK:Jc("essential restore purchase click")}},Zc={FOR_YOU_SAVE_PREFERENCES_CLICK:((e,t,n,r)=>()=>{as(t,{event_category:e,event_label:n,non_interaction:!1},r)})("for you","click","save preferences","for_you_save_preferences_click")},el=(e,t)=>(n,r)=>{const{promptCount:o}=r||{};as(t,{event_category:e,non_interaction:!1,prompt_count:String(o??0)})},tl={GOOGLE_SUBSCRIPTION_DISMISS:el("google account link","dismiss"),GOOGLE_SUBSCRIPTION_LINK:el("google account link","complete"),GOOGLE_SUBSCRIPTION_VIEW:el("google account link","prompt")},nl=(e,t)=>()=>{as(t,{event_category:e,non_interaction:!1})},rl={TOAST_OVERLAY_CLICK:nl("toast overlay","click"),TOAST_OVERLAY_DISMISS:nl("toast overlay","dismiss"),TOAST_OVERLAY_VIEW:nl("toast overlay","view")},ol=(e,t,n,r)=>(o,i)=>{const{authenticationPlatform:a,clickLocation:s,flowVariant:c,referringModule:l}=i||{},u={event_category:e,non_interaction:Boolean(n)};a&&(u.authentication_platform=a),s&&(u.click_location=s),l&&(u.referring_module=l),c&&(u.flow_variant=c),"loginsuccess"===t&&(u.login_success=1),"registrationsuccess"===t&&(u.registration_success=1),"signinclick"===t&&Gc({clickLocation:s,referringModule:l}),as(t,u,r,!0)},il={SIGN_IN_LOGIN_SUCCESS:ol("signin","loginsuccess"),SIGN_IN_REGISTRATION_SUCCESS:ol("signin","registrationsuccess"),SIGN_IN_SIGN_IN_CLICK:ol("signin","signinclick")},al={PREDICTOR_CTA_CLICK:((e,t,n=!1)=>()=>{as(t,{event_category:e,non_interaction:n})})("predictor cta","click")},sl={VWO_VARIATION_APPLIED:((e,t,n)=>(r,o)=>{const{campaignName:i,variationName:a}=o;as(t,{event_category:e,non_interaction:Boolean(n),vwo_mol_variation_applied:`${i}:${a}`})})("vwo","mol variation applied",!0)},cl=(e,t,n,r)=>()=>{as(t,{event_category:e},r,!0)},ll={CONVERSION_MODAL_BENEFITS:cl("conversion","modal_benefits"),CONVERSION_MODAL_CLOSE:cl("conversion","modal_close"),CONVERSION_MODAL_CONTINUE:cl("conversion","modal_continue")},ul={MAGAZINE_READ_NOW_CLICK:((e,t)=>(n,r)=>{as(t,{event_category:e,link_url:r.linkURL,non_interaction:!1,page_url:r.pageURL})})("magazine","read now click")},dl=[Os,Bc,Ts,Qs,Ls,ll,As,Bs,ul,Us,xs,Ys,qs,us,Gs,Js,Ds,Ps,Ns,rc,ec,ps,rl,$s,Es,ys,bs,nc,ac,cc,uc,mc,pc,hc,Ec,vc,wc,Ic,Oc,Cc,Tc,Ac,Mc,Rc,kc,Uc,Hc,zc,qc,Qc,Zc,il,tl,al,sl],pl=(e,t,n,r)=>{let o=e;for(;o&&o!==t;){const e=o.getAttribute(n);if(e)return e;o=o.parentElement}return o&&o.getAttribute(n)||r};(async()=>{window.molFeDataLayer=window.molFeDataLayer||[],window.gtag=Za,Za("js",new Date);try{await Qo(Si)}catch(e){J().error("Error loading gtag JS",e)}})().catch();for(const e of dl)Wt("googleAnalytics",e);document.addEventListener("click",(e=>{const t=e.Element||e.srcElement,n=t&&(e=>{let t=e;for(;t&&"A"!==t.tagName.toUpperCase()&&"BODY"!==t.tagName.toUpperCase();)t=t.parentElement;return t&&"A"===t.tagName.toUpperCase()?t:null})(t);if(n){const e=pl(t,n,"data-tracking-href",n.href),r=pl(t,n,"data-tracking-inner-text",n.innerText);(e=>{try{return new URL(e).hostname!==window.location.hostname}catch(e){return!1}})(e)&&Ct.fireEvent(Ct.PAGE_EXTERNAL_LINK_CLICKED_GA,{href:e,innerText:r})}}),!1);const fl={gtag:Za};k("PAGE_METADATA_SET",(()=>{try{window.getFlowVariant=Po}catch(e){}Wc()}));const ml=["impression","click","viewable"],_l=(e,t,n={})=>{if(ml.includes(e))if(t&&"string"==typeof t)try{const{environment:r,renderPlatform:o}=H(),i={environment:r,event:e,module:t,renderPlatform:o,...n};window.postMessage(`__bidmax\n${JSON.stringify(i)}`,"*")}catch(e){J().error(`[mol-fe-tracking] Unable to fire bidmax tracking for ${t}`,e)}else J().error("[mol-fe-tracking] Module name is required ");else J().error(`[mol-fe-tracking] Event name has to be one of 'impression', 'click', 'viewable', event name provided: ${e}`)},hl=e=>new Promise((t=>setTimeout(t,e))),gl=async()=>{if(window.__dmgCrossDomain&&"function"==typeof window.__dmgCrossDomain.configure&&"function"==typeof window.__dmgCrossDomain.getSession)return!0;for(let e=0;e<10;e++){await hl(500);const e=window.__dmgCrossDomain;if(e&&"function"==typeof e.configure&&"function"==typeof e.getSession)return!0}return!1};(()=>{try{document.addEventListener("click",(e=>{const t=Object.keys(Tt).find((t=>e.target.closest(t)));if(!t)return;const n=Tt[t];Ct.publish(Ct.PAGE_FURNITURE_CLICKED,{furnitureName:n})}))}catch(e){J().error("Error initialising furniture tracking",e)}})(),(()=>{try{window.addEventListener("message",(e=>{if(!e||!e.data||"object"!=typeof e.data||"puzzles track event"!==e.data.msg)return;const{eventData:t,eventName:n}=e.data,r=t&&(t.PuzzleName||t.object_name)||"unknown",o=Nt[n];o?("PuzzleStarted"!==n&&"puzzle_play"!==n||(()=>{try{const e=At();if(!e)return void Pt({first:Date.now(),last:Date.now()});Pt({...e,last:Date.now()})}catch(e){}})(),Ct.publish(o,{puzzleName:r})):J().warn("Unknown puzzle event name",n)}))}catch(e){J().error("Error initialising puzzle tracking",e)}})(),(()=>{try{const e=new URLSearchParams(location.search);if("tiktok-comments"!==e.get("ito"))return;!function(e,t,n){e.TiktokAnalyticsObject=n;var r=e[n]=e[n]||[];r.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],r.setAndDefer=function(e,t){e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}};for(var o=0;o<r.methods.length;o++)r.setAndDefer(r,r.methods[o]);r.instance=function(e){for(var t=r._i[e]||[],n=0;n<r.methods.length;n++)r.setAndDefer(t,r.methods[n]);return t},r.load=function(e,t){var o="https://analytics.tiktok.com/i18n/pixel/events.js";r._i=r._i||{},r._i[e]=[],r._i[e]._u=o,r._t=r._t||{},r._t[e]=+new Date,r._o=r._o||{},r._o[e]=t||{};var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=o+"?sdkid="+e+"&lib="+n;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(i,a)},r.load("CP67633C77U51CVDQIUG"),r.page()}(window,document,"ttq")}catch(e){J().error("Error loading Tiktok Pixel",e)}})(),(()=>{try{window.addEventListener("message",(e=>{if(!e.data||"object"!=typeof e.data)return;const t=e.data;if("@mol-fe/mol-fe-cmp"===t.ns)switch(t.action){case"cmp_level_1_accept":Ct.publish(Ct.CMP_LEVEL_ONE_ACCEPT);break;case"cmp_level_2_save_exit":Ct.publish(Ct.CMP_LEVEL_TWO_SAVE_EXIT);break;case"cmp_level_1_privacy_settings":Ct.publish(Ct.CMP_LEVEL_ONE_PRIVACY_SETTINGS);break;case"cmp_level_1_login":Ct.publish(Ct.CMP_LEVEL_ONE_LOGIN);break;case"cmp_level_1_subscribe":Ct.publish(Ct.CMP_LEVEL_ONE_SUBSCRIBE);break;case"cmp_level_2_subscribe":Ct.publish(Ct.CMP_LEVEL_TWO_SUBSCRIBE)}}))}catch(e){J().error("Error initialising mol-fe-cmp tracking",e)}})(),(()=>{try{Rt(),window.VWO.push(["onVariationApplied",e=>{if(!e)return;const[t,n,r]=e,o=window._vwo_exp&&window._vwo_exp[n],i=o&&o.comb_n[r],a=o&&o.name;i&&Ct.publish(Ct.VWO_VARIATION_APPLIED,{campaignId:n,campaignName:a,variationId:r,variationName:i})}])}catch(e){J().error("Error initialising VWO variation applied listener",e)}})(),(async()=>{try{await k("DOM_READY");const{contentType:e,renderPlatform:t}=H();if("mobile"!==t||"home"!==e)return;const n=document.querySelector("#infinite-list");if(!n)return;n.dataset.trackModule="mobile-channel-page"}catch(e){J().error("Error initialising mobile channel tracking",e)}})(),(()=>{const e=Gt()||(0,jt.v4)();try{sessionStorage.setItem(Bt,e)}catch(e){J().error("singleCustomer: Unable to set session storage values",e)}window.singleCustomer={getSingleCustomerPageId:Vt,getSingleCustomerSessionId:Gt}})();let El=1;const vl="mol-fe-loading-spinner",yl=()=>{const e=document.getElementById(vl);e&&e.remove()},wl=e=>{let t=document.getElementById(vl);t||(t=document.createElement("div"),t.id=vl,t.className=vl,document.body.appendChild(t),"number"==typeof e&&setTimeout((()=>yl()),e))},Il=["travel","femail","lifestyle"],bl=()=>{const{channel:e}=z();Il.includes(e)&&document.addEventListener("click",(e=>{e.target.closest('.article a[href*="/article-"],.article-preview a[href*="/article-"],.puff a[href*="/article-"],.mol-fe-related-replace a[href*="/article-')&&wl(3e3)}))};var Ol=n(3029),Sl=n.n(Ol),Cl=n(6108),Tl=n.n(Cl),Ll=n(6238),Al=n.n(Ll),Pl=n(7526),Ml=n.n(Pl),Nl=n(2784),Rl=n.n(Nl),Dl=n(4642),kl=n.n(Dl),xl=n(4015),Ul=n.n(xl),jl=n(7581),Bl=n.n(jl),Vl=n(3657),Gl=n.n(Vl),Wl=n(2103),Kl=n.n(Wl),Fl=n(6123),Hl=n.n(Fl),$l=n(3514),zl=n.n($l),Yl=n(1580),ql=n.n(Yl),Xl=n(1211),Jl=n.n(Xl),Ql=n(105),Zl=n.n(Ql),eu=n(7331),tu=n.n(eu),nu=n(2451),ru=n.n(nu);const ou={},iu=(e,t)=>{let n=(e.match(t)||[])[1]||"";return n=n.split(/[._]/g),{build:parseInt(n[2]||-1,10),major:parseInt(n[0]||-1,10),minor:parseInt(n[1]||-1,10)}},au=()=>{const e=navigator.userAgent;ou.ua=e,ou.isWindows=Boolean(e.match(/Windows Phone|iemobile|WPDesktop/i));try{ou.isIPad=(Boolean(e.match(/iPad/i))||"iPad"===navigator.platform||"MacIntel"===navigator.platform&&"ontouchend"in document)&&!ou.isWindows}catch(e){ou.isIPad=!1}ou.isIDevice=(Boolean(e.match(/(iPad|iPhone|iPod)/i))||ou.isIPad)&&!ou.isWindows,ou.isIPhone=Boolean(e.match(/iPhone/i))&&!ou.isWindows,ou.isAndroid=Boolean(e.match(/Android/i))&&!ou.isWindows,ou.isChrome=Boolean(e.match(/Chrome/i)),ou.isFirefox=Boolean(e.match(/Firefox/i)),ou.isKindleSilk=Boolean(e.match(/Silk|Kindle/i)),ou.isAndroidPhone=ou.isAndroid&&Boolean(e.match(/Mobile/i)),ou.isAndroidTablet=ou.isAndroid&&!Boolean(e.match(/Mobile/i)),ou.isMobile=ou.isIDevice||ou.isAndroid||ou.isWindows,ou.isAndroidStock=ou.isAndroid&&!ou.isChrome&&!ou.isFirefox&&!ou.isKindleSilk;try{ou.isIDevice?(ou.mobileName=e.match(/(iPad|iPhone|iPod)/i)?e.match(/(iPad|iPhone|iPod)/i)[0]:"iPad",ou.mobileVersion=iu(e,/OS ((?:\d+[._]?)+)/i)):ou.isAndroid?(ou.mobileName="Android",ou.mobileVersion=iu(e,/Android ((?:\d+[._]?)+)/i)):ou.isWindows?(ou.mobileName="Windows Phone",ou.mobileVersion=iu(e,/Windows Phone ((?:\d+[._]?)+)/i)):(ou.mobileName=null,ou.mobileVersion={build:-1,major:-1,minor:-1})}catch(e){J().error("Failed to parse mobile name and version",e),ou.mobileName="unknown"}},su=()=>ou.isWindows,cu=()=>ou.isIDevice,lu=()=>ou.isIPhone,uu=()=>ou.isIPad,du=()=>ou.isAndroid,pu=()=>ou.isChrome,fu=()=>ou.isFirefox,mu=()=>ou.isKindleSilk,_u=()=>ou.isAndroidPhone,hu=()=>ou.isAndroidTablet,gu=()=>ou.isMobile,Eu=()=>ou.isAndroidStock,vu=()=>ou.mobileVersion,yu=()=>{if(J().warn('"getZoom" function has been deprecated as it does not provide reliable values'),screen.deviceXDPI&&screen.logicalXDPI)return screen.deviceXDPI/screen.logicalXDPI;if(document.width)return document.width/window.innerWidth;if(screen.width&&window.innerWidth)return screen.width/window.innerWidth;return Math.max(document.documentElement.clientWidth,document.body.offsetWidth,document.body.scrollWidth)/(window.innerWidth||document.documentElement.clientWidth)},wu=()=>yu()>1,Iu=()=>window.matchMedia?window.matchMedia("(orientation:landscape)").matches:(window.innerWidth||document.documentElement.clientWidth)>(window.innerHeight||document.documentElement.clientHeight),bu=()=>!Iu(),Ou=()=>{document.body.style.overflow="auto",document.ontouchmove=()=>!0},Su=()=>{document.body.style.overflow="hidden",document.ontouchmove=e=>e.preventDefault()},Cu=()=>{if(J().warn('"setupMobileClass" has been deprecated and "features detection" should be prefered over "device detection"'),ou.mobileName){const e=ou.mobileName.toLowerCase().replace(/ /,"-");document.body.classList.add(e)}},Tu=e=>(setTimeout(e,400),e());try{au(),ou.isAndroidStock&&(J().debug("Executing Android Stock browser Orientation bug fix"),window.addEventListener("orientationchange",(()=>{const e=document.querySelector("meta[name=viewport]");if(e){const t=e.getAttribute("content");e.setAttribute("content","width=10000, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0"),setTimeout((()=>{e.setAttribute("content",t)}),0)}})))}catch(e){J().error("Error parsing user agent",e)}const Lu={deviceData:ou,disableScroll:Su,enableScroll:Ou,getMobileVersion:vu,getZoom:yu,isAndroid:du,isAndroidPhone:_u,isAndroidStock:Eu,isAndroidTablet:hu,isChrome:pu,isFirefox:fu,isIDevice:cu,isIPad:uu,isIPhone:lu,isKindleSilk:mu,isLandscape:Iu,isMobile:gu,isPortrait:bu,isWindows:su,isZoomed:wu,onTouchEnd:Tu,parseUserAgent:au,setupMobileClass:Cu},Au=()=>{const e=document.head,t=document.createElement("link");t.rel="preconnect",t.href="https://fonts.googleapis.com";const n=document.createElement("link");n.rel="preconnect",n.href="https://fonts.gstatic.com",n.crossOrigin=!0;const r=document.createElement("link");r.href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap",r.rel="stylesheet",e.appendChild(t),e.appendChild(n),e.appendChild(r)};(()=>{Au()})();const Pu=e=>null==e,Mu=e=>{if(e instanceof Date)return e.toISOString();if("object"==typeof e&&null!==e)try{return JSON.stringify(e)}catch{return"[Unserializable]"}return String(e)},Nu="https://crossdomain-uat.coderush.io",Ru="https://crossdomain.mailplus.co.uk",Du=["dailymailint.co.uk","thisismoneyint.co.uk","stagingmailplussubs.coderush.io","uat-dlv.nonprod-mailsubscriptions.gcpp.io","main-mma-preprod.coderush.io"],ku=["dailymail.co.uk","thisismoney.co.uk","mailsubscriptions.co.uk","themailsubscriptions.co.uk","mymailaccount.co.uk"],xu=()=>{const e=(()=>{const e=window.location&&window.location.host;return!e||!e.includes("int")})(),t=document.createElement("script"),n=`${e?Ru:Nu}/sdk/latest@1/script.js`;t.id="crossDomainSdk",t.type="text/javascript",t.src=n,t.async=!0,t.onerror=e=>J().error("[CrossDomainSDK] failed to load script",e),document.head.appendChild(t)},Uu=e=>Array.isArray(e)?e:"[object Arguments]"===Object.prototype.toString.call(e)?Array.from(e):[],ju=e=>{if(null===e||"object"!=typeof e||Array.isArray(e))return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t},Bu=()=>{const e=window?.Zephr?.outcomes?.article?.outcomeLabel;return{paywall_variant:e}},Vu=()=>{const e=window.molFeDataLayer,t=Object.create(null);Object.assign(t,...(e=>(e||[]).map(Uu).flat().filter(ju))(e));const n={...Fu(t),...Bu(),sophi_context:window?.sophi?.dataLayer?.context,sophi_decision_source:window?.molSophiFeatureOff?"not_loaded":window?.molSophiDecisionSourceOnPageView||"not_loaded",sophi_experiments_code:window?.sophi?.dataLayer?.experimentsCode,sophi_inputs:window?.sophi?.dataLayer?.inputs,sophi_trace:window?.sophi?.dataLayer?.trace},r=(o=n,Object.fromEntries(Object.entries(o).filter((([,e])=>!Pu(e)))));var o;if(0===Object.keys(r).length)return null;const i=(e=>Object.fromEntries(Object.entries(e).map((([e,t])=>[e,Mu(t)]))))(r);return{ga_dimensions:i}},Gu=e=>{if("undefined"!==e&&!Pu(e))return e},Wu=(e,t)=>{for(const r of t){const t=Gu((n=e,r.split(".").reduce(((e,t)=>e?.[t]),n)));if(void 0!==t)return t}var n},Ku={article_id:["article_id"],authentication_platform:["authentication_platform"],device_id:["device_id"],flow_variant:["flow_variant"],ico_internal_hit:["ico_internal_hit"],module_click_list_position:["module_click_list_position"],module_tracking:["module_tracking"],mol_click_source:["mol_click_source"],multivariant_experiments:["multivariant_experiments"],oa_journey:["oa_journey"],oa_page:["oa_page"],payment_type:["payment_type"],paywall_variant:["paywall_variant"],product_type:["product_type"],push_notif_user_id:["push_notif_user_id"],referring_page_type:["referring_page_type"],registration_id:["registration_id"],rendered_platform:["rendered_platform"],service_id:["service_id"],storefront_variant:["storefront_variant"],subscription_entitlements:["subscription_entitlements"],user_type:["user_type"],utm_campaign:["utm_campaign"],utm_medium:["utm_medium"],utm_source:["utm_source"],vwo_campaigns:["vwo_campaigns"],ito_external_hit:["ito_external_hit","itoExternalHit"],oa_client_id:["oa_client_id","clientId","user_properties.client_id"],one_account_id:["one_account_id","user_properties.one_account_user_id"],referrer_group:["referrer_group","last_referrer_group"],referrer_type:["referrer_type","last_referrer_type"],referring_module:["referring_module","module_name"],sailthru_id:["sailthru_id","user_properties.sailthru_user_id"]},Fu=e=>Object.fromEntries(Object.entries(Ku).map((([t,n])=>[t,Wu(e,n)]))),Hu=["gb","us","mx","ca","au","nz","ie"],$u=e=>{try{if("localStorage"in window){const t=window.localStorage.getItem(`mol-fe-paywall-${e}`);return t?JSON.parse(t):null}}catch(e){}return null},zu=2592e5,Yu=()=>{const e=$u("entitlement");if(!e)return!1;const{allow_access:t,storedAt:n,registeredUserId:r}=e;return!(Date.now()-n>zu||"DM"in window&&"isLoggedIn"in window.DM&&r!==window.DM.userId)&&(t||!1)},qu=["IN","IR","CU","KP","SY","VE","AF","BY","BI","CF","CN","HK","CD","EG","ER","ET","IQ","LB","LY","ML","MM","NI","GN","GW","RU","SO","SS","SD","TN","TR","UA","YE","ZW"],Xu=()=>{try{return window.PageCriteria&&window.PageCriteria.geo&&!qu.includes(window.PageCriteria.geo)||(()=>{try{if(location.hostname&&location.hostname.startsWith("cc"))return!0;if("about:srcdoc"===location.href)return!0}catch(e){}return!1})()}catch(e){}return!1},Ju=()=>{const e=$u("entitlement");return e&&e.entitlements||null},Qu=["mailplus-puzzles","mailplus-puzzles-experiment"],Zu=["mailplus-magazines"],ed=()=>{const e=Ju();return Yu()&&e&&Qu.some((t=>e.includes(t)))},td=async e=>{let t;e?(await k("REFRESHED_PAYWALL_ENTITLEMENT"),t=Ju()):t=Ju();return Yu()&&t&&Zu.some((e=>t.includes(e)))},nd=()=>"/puzzles/index.html",rd=()=>"/magazines/index.html",od=()=>{const e=$u("entitlement"),t=Xu(),n=window.mailplusPurchaseOutcome||location.search.includes("mailplusPurchaseOutcome"),r="DM"in window&&"isLoggedIn"in window.DM&&window.DM.isLoggedIn||location.search.includes("login"),o="DM"in window&&"userId"in window.DM&&e&&e.registeredUserId!==window.DM.userId;return!!t&&(!!n||(!!(r&&!e||o)||!!(e&&Date.now()-e.storedAt>zu)))},id=()=>{const e=Ju(),t=Yu(),n=e&&e.includes("mailplus-ad-lite");return t?n?"subscriber-ad-lite":"subscriber":"none"},ad=({paywalledCountries:e}={})=>{if(!window.PageCriteria)return!0;const t=e||window.PageCriteria.paywalledCountries;if(!t||!t.length)return!0;const n=window.PageCriteria.geo&&window.PageCriteria.geo.toLowerCase();if(Array.isArray(t)&&t.includes(n))return!0;const r=t.includes("gb")&&"ie"===n,o=t.includes("us")&&["ca","mx"].includes(n),i=t.includes("au")&&"nz"===n,a=t.includes("row")&&!Hu.includes(n);return r||o||i||a},sd=e=>new Promise((t=>{setTimeout(t,e)})),cd=async()=>{try{const t=await(async()=>{const{environment:e}=H(),t="production"===e,n=window.__dmgCrossDomain;if(n){if(n.isConfigured)return n;try{return await n.configure({apiOrigin:t?Ru:Nu,domainAllowList:t?ku:Du,sessionParam:"_cds"}),n}catch(e){J().error("[CrossDomainSDK] configure failed",e)}}else J().error("[CrossDomainSDK] SDK not loaded")})();if(!t)return null;const n=await(async()=>{try{return await Promise.race([sd(1e3),new Promise((e=>{window.__uspapi?window.__uspapi("getUSPData",1,(t=>{const{uspString:n}=t||{};e(n?{cmp:{usp:{uspString:String(n)}}}:null)})):window.__tcfapi?window.__tcfapi("hasUserConsentedToAll",2,(t=>{window.__tcfapi("getTCData",2,(n=>{const{molGvlVersion:r,acmVersion:o,nrvVersion:i,tcString:a}=n||{};e(a?{cmp:{tcf:{acmVersion:String(o),didConsentToAll:String(t),molGvlVersion:String(r),nrvVersion:String(i)}}}:null)}))})):e(null)}))])}catch(e){return null}})(),r=Vu(),o={...n,...r};if(null==(e=o)||"object"==typeof e&&!Array.isArray(e)&&0===Object.keys(e).length)return null;const i=await t.addAttributes(o);return i?.session??null}catch{return null}var e},ld=async e=>{try{const t=e&&new URL(e,location.origin),n=await cd();return n&&t.searchParams.set("_cds",n),t&&t.href||e}catch(t){return e}},ud=()=>{const e=$u("entitlement");if(!e)return null;const{oneAccountUserId:t,registeredUserId:n}=e;return"DM"in window&&"isLoggedIn"in window.DM&&n!==window.DM.userId?null:t||null},dd=()=>{const{isPaywalled:e,neverPaywall:t}=window.PageCriteria||{},n=ad(),r=Xu();return!t&&e&&r&&n},pd=()=>{const e=dd(),t=Yu();return e&&!t},fd=()=>{const{isPaywalled:e,hasBeenPaywalled:t,pageType:n,neverPaywall:r}=window.PageCriteria||{},o=ad(),i=Xu();if("article"===n)return e||t?!e&&t?"hasBeenPaywalled":!r&&e&&i&&!o?"isPaywalledForOthers":!r&&e&&i&&o?"isPaywalled":r||!e||i?"invalid":"isRestricted":"none"},md=(e,t,n)=>new Promise(((r,o)=>{const i="number"==typeof n&&n>0?setTimeout((()=>o(new Error("CMP consent check timed out"))),n):null;(window.__dmgCmp||(window.__dmgCmp=[])).push({data:{onConsent:()=>{clearTimeout(i),r(!0)},onDissent:()=>{clearTimeout(i),r(!1)},onError:e=>{clearTimeout(i),o(new Error(`Unable to retrieve CMP consent/dissent decision: ${e?.message||e}`))},vendorId:t,vendorRegistry:e},scope:"checkVendor"})})),_d=()=>{try{window.rumv=window.rumv||function(){(window.rumv.q=window.rumv.q||[]).push(arguments)};const e=sessionStorage.getItem("rumv"),t=e?JSON.parse(e):{pageviews:0};t.pageviews++;const n=new URL(document.location).searchParams;if(!(n&&n.get("forceRumVision"))&&(t.dnt||!t.urls&&!(e=>{const t=[["^/(news|news/royals|home|auhome|ushome|sport|tv|tvshowbiz|lifestyle|health|sciencetech|money|travel)/index.html$",2],["^/[a-z]+/[a-z]+/article-([0-9]+)/([^.]+).html$",2]];for(let n=0;n<t.length;n++)if(e.match(t[n][0]))return Math.floor(100*Math.random())<t[n][1];return!1})(window.location.pathname)))return t.dnt=1,sessionStorage.setItem("rumv",JSON.stringify(t));window.rumv.storage=t;const r=document.querySelector("head"),o=document.createElement("script");o.src=`https://d5yoctgpv4cpx.cloudfront.net/RUM-61D37643D0/v4-${window.location.hostname}.js`,r.appendChild(o)}catch(e){J().error("[RumVisionSDK] failed to load script",e)}};n(9371),n(6527),n(5715),n(8839);const hd=e=>{if(!e.href)return!1;try{const t=new URL(e.href),n=/.*amazon./;return Boolean(t.hostname.match(n)&&t.searchParams.has("tag"))}catch(e){return!1}},gd=(e,t,n)=>{const r=new URLSearchParams(e),o=((e,t)=>Boolean(e&&e.startsWith(t)))(t,n),i=o?"internal":"external",a=r.get("ico"),s=r.get("ito"),c=r.get("utm_source");if(a)return`${i}_ico_${a}`;if(s)return`${i}_ito_${s}`;if(c)return`${i}_${c}`;if(t){if(n&&o){return`${i}_${new URL(t).pathname}`}return`${i}_${ri(t)}`}return"direct"},Ed=(e,t)=>{const{referrer:n}=t;return{asc_campaign:(r=e,r&&r.tagName&&"a"===r.tagName.toLowerCase()&&Boolean(r.closest(".mol-product"))?"product":"standard"),asc_refurl:location.href,asc_source:gd(location.search,n,location.origin)};var r},{getConfig:vd}=d;k("DOM_READY",(async()=>{try{const e=Array.from(document.getElementsByTagName("a")).filter(hd),t=await vd();for(const n of e){const e=await Ed(n,t),r=new URL(n.href);for(const t in e)e[t]&&!r.searchParams.has(t)&&r.searchParams.set(t,e[t]);n.href=r.href}}catch(e){J().error("Error adding asc params to the amazon links",e)}})),(()=>{try{window.OBREvents=window.OBREvents||[],window.OBREvents.push({callback:e=>{requestAnimationFrame((()=>(e=>{const{element:t}=e,{renderPlatform:n}=H(),r=document.getElementById("reader-comments");if(!((window.location.hash&&window.location.hash.startsWith("#comments")||window.location.search&&window.location.search.match(/spot_im_scroll_to_comments=true/)||window.location.search&&window.location.search.match(/spot_im_highlight_immediate=true/))&&t&&t.parentNode&&r&&"desktop"===n))return;const{top:o,height:i}=t.getBoundingClientRect();if(o>window.innerHeight)return;const{top:a}=r.getBoundingClientRect();if(o>a)return;const s=i+24;s>a||(window.scrollTo(0,window.pageYOffset+s),requestAnimationFrame((()=>{const{bottom:e,top:t}=r.getBoundingClientRect();(e<300||t>window.innerHeight-300)&&(r.scrollIntoView(),window.scrollTo(0,window.pageYOffset-100))})))})(e)))},name:"rendered",widgetId:"all"})}catch(e){J().error("Error initialising outbrain comments scroll fix",e)}})();const yd="mol-fe-cookie-reinforcer",wd=(e,t,n=null)=>{try{if(!("localStorage"in window))return;const r=JSON.parse(window.localStorage.getItem(yd)||"{}");r[e]={expireDate:n,value:t},window.localStorage.setItem(yd,JSON.stringify(r))}catch(e){J().error("Error adding cookie to reinforce",e)}},Id=e=>{try{if(!("localStorage"in window))return;const t=JSON.parse(window.localStorage.getItem(yd)||"{}");delete t[e],window.localStorage.setItem(yd,JSON.stringify(t))}catch(e){J().error("Error removing cookie from reinforcer",e)}},bd=(e,t,n=null)=>{try{bt().set(e,t,{expires:n,path:"/"}),wd(e,t,n)}catch(e){J().error("Error setting cookie and adding to reinforce list",e)}},Od=e=>{try{bt().remove(e),Id(e),"mol-home"===e&&window.localStorage.setItem("mol-fe-home-channel-actioned-last",Date.now())}catch(e){J().error("Error removing cookie and stopping reinforcement",e)}},Sd=()=>{try{if(!("localStorage"in window))return;const e=JSON.parse(window.localStorage.getItem(yd)||"{}"),t={};for(const n of Object.keys(e)){const{expireDate:r,value:o}=e[n],i=r&&new Date(r);"mol-home"===n&&"desktop"===o||(!i||i.getTime()>Date.now())&&(bt().set(n,o,{expires:i,path:"/"}),t[n]={expireDate:i,value:o})}window.localStorage.setItem(yd,JSON.stringify(t))}catch(e){J().error("Error reinforcing cookies",e)}};Sd();const Cd="smartBanner_ZE1ll",Td="view_m0SUe",Ld="timLogo_kYALc logo_ITOxq",Ad="molLogo_DCFLV logo_ITOxq",Pd="molffLogo_B8cW6 logo_ITOxq",Md="close_MJ3Qe",Nd="androidLogo_gP0Oe",Rd="storeLogo_oeO19",Dd="info_a32mm",kd="name_C8GmV",xd=function(){const e=/(Windows *[a-zA-Z]*) ([^; )]+)/i.exec(navigator.userAgent);return e&&e.length>1&&"windows nt"===e[1].toLowerCase()&&parseFloat(e[2])>=6.4},Ud=function(){return document.body.classList.contains("mol-desktop")},jd=["/registration/profile.html","/home/search.html"],Bd=["article","channel"],Vd="fantasyfootball",Gd="tim",Wd="smart-banner",Kd={inited:!1};let Fd,Hd,$d,zd,Yd;const qd=function(){try{return(xd()?"windows10":ou.mobileName.toLowerCase())+" banner"}catch(e){return"unknown banner"}},Xd=e=>{zd&&(e?zd.classList.add("home-mobile-banner-visible"):zd.classList.remove("home-mobile-banner-visible"))},Jd=function(){J().debug("smartBanner: hiding"),document.body.classList.remove("smart-banner"),Hd||Xd(!1)},Qd=function(){(bt().get(Wd)||!xd()&&Iu())&&document.body.classList.contains("smart-banner")&&Jd(),bt().get(Wd)||!xd()&&Iu()||document.body.classList.contains("smart-banner")||Yd&&(J().debug("smartBanner: showing"),document.body.classList.add("smart-banner-shown"),document.body.classList.add("smart-banner"),Hd||Xd(!0),Ct.publish(Ct.SMART_BANNER_SHOWN,{type:qd()}))},Zd=Rl()(Qd,50),ep=function(e){if(!e)return null;if(window.location.search&&window.location.search.match(/[?&]source=newzit\.app/))return null;const t=(xd()?"windows10":ou.mobileName.toLowerCase())+"_banner",n=`\n<a data-google-interstitial="false" class="${Md}"></a>\n<div class="${(e=>{let t;switch(e){case Vd:t=Pd;break;case Gd:t=Ld;break;default:t=Ad}return t})(e.app)}"></div>\n<div class="${Dd}">\n  <div class="${kd}">${e.trackCensoredName}</div>\n  <div class="${(()=>{let e=Rd;return(ou.isAndroidPhone||ou.isIPhone)&&(e+=" "+Nd),e})()}"></div>\n</div>\n<a href="${e.storeUrl}" rel="noskim" data-google-interstitial="false" class="${Td} js-tl">View</a>`,r=document.createElement("div");let o;return r.setAttribute("id","smartBanner"),r.setAttribute("data-track-module",t+"^smart-banner"),r.setAttribute("data-track-pos","static"),r.setAttribute("data-track-type","cl"),r.setAttribute("data-track-selector",`a.${Td}`),r.classList.add(Cd),r.innerHTML=n,document.body.appendChild(r),cn.externalLinkTracker("smartBanner"),Kd.banner=r,Kd.bannerName=t,Kd.inited=!0,Kd.banner=r,Hd&&(o=setInterval(Qd,1e3)),r.querySelector(`.${Md}`).addEventListener("click",(e=>{e.preventDefault(),function(){const e=new Date(Date.now()+2592e6);bd(Wd,"closed",e)}(),Jd(),o&&(clearInterval(o),o=null)})),r.querySelector(`.${Td}`).addEventListener("click",(()=>{Ct.publish(Ct.SMART_BANNER_CLICKED,{type:qd()})})),window.addEventListener("orientationchange",Zd),Qd(),J().info("###### SMARTBANNER RENDERED"),Kd.banner};Kd.init=function(e){return J().info("######INIT SMARTBANNER",e),Kd.initPromise||(Kd.initPromise=k("BODY_READY").then((()=>((()=>{const{pageType:e}=z();Fd=e,Hd=Ud(),$d=document.body.getAttribute("itemid"),zd=document.querySelector(".mobile-search"),Yd=-1===jd.indexOf($d)&&Bd.includes(Fd)&&(ou.isAndroidPhone||ou.isIPhone)})(),ep(e))))),Kd.initPromise};const tp=Kd,np=/^https?:\/\/t\.co(\/.*)?$/.test(document.referrer),rp=Do("molFeSmartBanner").then((e=>ou.isMobile&&np?null:tp.init(e))),op={AU:"/auhome",GB:"/home",US:"/ushome"},ip=["sport"];let ap=[];const sp=e=>Boolean(e.url&&e.imgUrl&&e.headline),cp=(e,t)=>String(e.articleId)!==String(t),lp=e=>{const{articleId:t}=z();return cp(e,t)&&sp(e)&&!Fe(e.articleId)&&!ap.includes(e.articleId)},up=async({topicGroup:e=null,paywalled:t=!1})=>{const{articleId:n,geo:r,channel:o}=z();let i=`/api/mol-fe-feeds/v2/articles/rankedByChannelReferrer${op[r]||op.GB}`;const a=ip.includes(o);t?i=`/api/mol-fe-feeds/v2/articles/rankedPaywalled/geo/${Y()}`:e?i=`/api/mol-fe-feeds/v2/articles/rankedByTopicGroup/${encodeURIComponent(e)}/geo/${Y()}`:a&&(i=`/api/mol-fe-feeds/v2/articles/rankedByChannel/${o}/geo/${Y()}/period/1440`);const s=await Qe().get(i);if(!s||!s.data||!s.data.articles)throw new Error("[mol-fe-related-replace] Invalid ranked articles response");const{articles:c}=s.data,l=c.filter((e=>e.url.startsWith(`/${o}`))),u=c.filter((e=>!e.url.startsWith(`/${o}`))),d=l.concat(u).filter(lp).slice(0,5);return d.length<1&&t?l.concat(u).filter((e=>cp(e,n)&&sp(e))).slice(0,5):d},dp="mol-fe-related-replace";let pp=!1;const fp=()=>{const{renderPlatform:e}=H(),{articleStyle:t}=z();return"desktop"===e&&"extraWide"===t?5:3},mp=e=>{e&&e.classList.contains("related-replace-placeholder")&&e.remove()},_p=({relatedElement:e,articles:t,instanceIndex:n=0,topicGroup:r=null,isInlinePaywall:o=!1,geo:i})=>{const a=fp();if(!e||!t||!t.length||t.length<a)return void mp(e);const s=(({articles:e,geo:t,instanceIndex:n=0,topicGroup:r=null,isInlinePaywall:o=!1})=>{const i=fp(),a=document.createElement("div"),s=document.createElement("div");let c="related-replace"+(n>0?`-${n+1}`:"");s.classList.add("mol-fe-related-replace"),s.classList.add("ccox"),5===i&&s.classList.add("related-replace-desktop-xwide"),"royals"===r&&a.classList.add("royal_wedding"),o&&(c="related-replace-paywall",a.classList.add("home"),a.classList.add("related-replace-paywall")),s.dataset.trackModule=c;const l=e.slice(0,i).map((e=>(({article:e,geo:t})=>{const{imgUrl:n,url:r,headline:o,viewCountTrending:i,isPaywalled:a,wallDecisions:s,neverPaywall:c}=e;let l=e.propensityLevel;return!l&&s&&(l=s[t]&&s[t].propensityLevel),`\n    <a class="related-replace-article" href="${r}" ">\n      <div class="related-replace-image">\n        <img src="${n}" alt="" width="636" height="382" loading="lazy" />\n      </div>\n      <div class="related-replace-info">\n        <div class="related-replace-headline">${c?"":`<span class="is-paywalled"${a?"":` data-content-propensity="${l??"x"}"`}></span>`}${o}</div>\n        ${i?`\n        <div class="related-replace-count-wrap">\n          <div class="related-replace-count wocc">${u=i,u<1e3?u:`${(u/1e3).toFixed(1).replace(/\.0$/,"")}k`} viewing now</div>\n        </div>\n        `:""}\n      </div>\n    </a>\n  `;var u})({article:e,geo:t}))).join("");return s.innerHTML=`\n    <div class="related-replace-title wocc">${n>0?"MORE ":""}TRENDING</div>\n    <div class="related-replace-articles">\n      ${l}\n    </div>\n  `,Array.from(s.children[1].children).forEach(((e,t)=>{e.addEventListener("click",(()=>{const n={clickUrl:e.href,position:t+1};_l("click",dp,n),Ct.publish(Ct.RELATED_REPLACE_CLICK,n)}))})),a.appendChild(s),new IntersectionObserver(((e,t)=>{for(const n of e)n.isIntersecting&&(pp||(_l("viewable",dp),Ct.publish(Ct.RELATED_REPLACE_VIEWABLE),pp=!0),t.unobserve(s))})).observe(s),a})({articles:t,geo:i,instanceIndex:n,isInlinePaywall:o,topicGroup:r});var c;e.replaceWith(s),c=t.slice(0,a).map((e=>e.articleId)),ap=ap.concat(c)},hp=(e=null)=>{const t=document.querySelector('#mobile-content .scrollable-content > article, #page-container .article-text [itemprop="articleBody"]');if(!t)return null;const{renderPlatform:n}=H(),r="mobile"===n;let o=0,i=r&&!e?-1:0,a=null,s=Array.from(t.children);if(e){const t=s.findIndex((t=>t===e||t.contains(e)));-1!==t&&(s=s.slice(t+1))}const c=document.documentElement.classList.contains("fb-webview")&&!e;let l=0;for(const e of s){const t=e.matches("figure, .image-wrap, .mol-img, .mol-img-group"),n=e.matches("p, .mol-para-with-font"),s=!r&&e.matches(".floatRHS, .floatLHS, .halfRHS, .halfLHS, .floatXWHalfRHS, .floatXWHalfLHS"),u=e.querySelector(".vjs-video-container")||e.matches(".vjs-video-container"),d=e.matches(":empty")&&!e.id&&(!e.className||"clear"===e.className);if(s&&(l=e.offsetHeight+32),t&&c&&i>=0)return a;if(o>=4&&i>=1&&!t&&!u&&!d&&a&&l<=0)return a;n&&o++,t&&i++,l>0&&!s&&(l-=e.offsetHeight+(t?4:16)),a=e}return null},gp=(e=null,t=null)=>{const n=t||hp(e);if(!n)return null;const r=document.createElement("div");return r.classList.add("related-replace-placeholder"),n.after(r),r},Ep=(e,t,n=!1)=>{let r=0,o=t;for(let i=t;n?i>0:i<e.length;n?i--:i++){if(e[i].matches("p, .mol-para-with-font")&&(r++,o=i),r>=4)break}return o},vp=e=>{const t=(()=>{const{renderPlatform:e}=H(),{articleStyle:t,geo:n}=z(),r=["US","AU"].includes(n)?`_${n.toLowerCase()}`:"",o=document.createElement("div");o.dataset.trackModule="royals-promo-related";let i=358,a=465,s="mobile";"desktop"===e&&("wide"===t&&(i=636,a=184,s="wide"),"extraWide"===t&&(i=964,a=184,s="xwide"));const c=`https://i.dailymail.co.uk/static/mol-fe/static/royals/promo/${s}${r}.jpg`;return o.innerHTML=`\n    <a class="royals-promo-related" href="/news/royals/index.html">\n      <img width="${i}" height="${a}" loading="lazy" src="${c}">\n    </a>\n  `,o})();e.replaceWith(t)},yp=async({relatedElement:e,geo:t,instanceIndex:n=0,topicGroup:r=null,isInlinePaywall:o=!1})=>{if("royals"===r&&1===n)return void vp(e);const i=await(async({topicGroup:e=null})=>{const t=window.getIsPaywallEligible&&window.getIsPaywallEligible(),{isPaywalled:n,articleStyle:r,neverPaywall:o}=z(),{renderPlatform:i}=H(),a=Re(),s="desktop"===i&&"extraWide"===r?5:3,c=!o&&n&&a&&a.includes("morePaywalledRelatedReplace"),l=c?"desktop"===i&&"extraWide"===r?3:2:1,u=c,d=[t?up({paywalled:!0}).catch((()=>[])):[]];d.unshift(up({topicGroup:e}));const[p,f]=await Promise.all(d);if(!p.length)return f;if(!f.length)return p;const m=[];let _=f.slice(),h=p.slice(),g=0;for(let e=0;e<s;e++){const t=(u?e%2==0:e%2!=0)&&_.length&&g<l,n=t?_.shift():h.shift();if(t&&g++,!n)break;m.push(n);const r=m.map((e=>e.articleId));_=_.filter((e=>!r.includes(e.articleId))),h=h.filter((e=>!r.includes(e.articleId)))}return m})({topicGroup:r});_p({articles:i,geo:t,instanceIndex:n,isInlinePaywall:o,relatedElement:e,topicGroup:r})},wp=["Mail Best","Mail Best US"],Ip=["sportsbets","britishairwaysholidays"],bp=["buyline","buylineus","buylineau"],Op=async()=>{try{const{articleType:e,pageType:t,channel:n,sponsored:r,subchannel:o}=z(),{domain:i,topics:a}=H();if("article"!==t||"feature"===e||"thisismoney"===i||"money"===n||"true"===r||!0===r)return;if(bp.includes(n))return;if(Ip.includes(o))return;if(a&&wp.some((e=>a.includes(e))))return;if("home"===n&&"home"===o)return;await k("DOM_READY");const s=Y().toLowerCase(),c=((e=2,t=[])=>{const n=t||[];for(let t=n.length;t<e;t++){const e=gp(n[t-1]||null);if(!e)break;n.push(e)}return n})(1,Array.from(document.querySelectorAll(".related-with-thumbs, .related-carousel")));if(!c.length)return;const l=a&&a.includes("Royals")?"royals":null;c.forEach(((e,t)=>{if(t>0&&(e=>{const t=document.querySelector('#mobile-content .scrollable-content > article, #page-container .article-text [itemprop="articleBody"]');if(!t)return!1;const n=t.querySelector(".molad_mpu_mobile_promotions");if(!n)return!1;const r=Array.from(t.children),o=r.indexOf(n.parentNode),i=r.indexOf(e),a=Ep(r,o,!1);return i>Ep(r,o,!0)&&i<a})(e))return void mp(e);_l("impression",dp),Ct.publish(Ct.RELATED_REPLACE_IMPRESSION);new IntersectionObserver(((n,r)=>{for(const o of n)if(o.isIntersecting)return yp({geo:s,instanceIndex:t,relatedElement:e,topicGroup:l}),void r.unobserve(e)}),{rootMargin:"2000px"}).observe(e)}))}catch(e){J().error("[mol-fe-related-replace] Error initialising ",e)}};try{k("PAGE_METADATA_SET",Op)}catch(e){J().error("Error initialising mol-fe-related-replace",e)}const Sp={"remixd-player-complete":Ct.REMIXD_COMPLETE,"remixd-player-error":Ct.REMIXD_ERROR,"remixd-player-impression":Ct.REMIXD_IMPRESSION,"remixd-player-mute":Ct.REMIXD_MUTE,"remixd-player-pause":Ct.REMIXD_PAUSE,"remixd-player-play":Ct.REMIXD_PLAY},Cp=()=>{try{window.addEventListener("message",(e=>{if(!e.data||"remixd"!==e.data.scope||!e.data.data)return;const t=e.data.data,n=t&&String(t.event),r=t&&String(t.error),o=Sp[n];o&&Ct.publish(o,{errorMessage:r})}))}catch(e){J().error("Error initialising Remixd event listener",e)}};Cp();var Tp,Lp,Ap,Pp,Mp,Np=-1,Rp=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Np=t.timeStamp,e(t))}),!0)},Dp=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},kp=function(){var e=Dp();return e&&e.activationStart||0},xp=function(e,t){var n=Dp(),r="navigate";return Np>=0?r="back-forward-cache":n&&(document.prerendering||kp()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Up=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},jp=function(e,t,n,r){var o,i;return function(a){t.value>=0&&(a||r)&&((i=t.value-(o||0))||void 0===o)&&(o=t.value,t.delta=i,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Bp=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Vp=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},Gp=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},Wp=-1,Kp=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Fp=function(e){"hidden"===document.visibilityState&&Wp>-1&&(Wp="visibilitychange"===e.type?e.timeStamp:0,$p())},Hp=function(){addEventListener("visibilitychange",Fp,!0),addEventListener("prerenderingchange",Fp,!0)},$p=function(){removeEventListener("visibilitychange",Fp,!0),removeEventListener("prerenderingchange",Fp,!0)},zp=function(){return Wp<0&&(Wp=Kp(),Hp(),Rp((function(){setTimeout((function(){Wp=Kp(),Hp()}),0)}))),{get firstHiddenTime(){return Wp}}},Yp=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},qp=[1800,3e3],Xp=function(e,t){t=t||{},Yp((function(){var n,r=zp(),o=xp("FCP"),i=Up("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(i.disconnect(),e.startTime<r.firstHiddenTime&&(o.value=Math.max(e.startTime-kp(),0),o.entries.push(e),n(!0)))}))}));i&&(n=jp(e,o,qp,t.reportAllChanges),Rp((function(r){o=xp("FCP"),n=jp(e,o,qp,t.reportAllChanges),Bp((function(){o.value=performance.now()-r.timeStamp,n(!0)}))})))}))},Jp=[.1,.25],Qp=function(e,t){t=t||{},Xp(Gp((function(){var n,r=xp("CLS",0),o=0,i=[],a=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=i[0],n=i[i.length-1];o&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,i.push(e)):(o=e.value,i=[e])}})),o>r.value&&(r.value=o,r.entries=i,n())},s=Up("layout-shift",a);s&&(n=jp(e,r,Jp,t.reportAllChanges),Vp((function(){a(s.takeRecords()),n(!0)})),Rp((function(){o=0,r=xp("CLS",0),n=jp(e,r,Jp,t.reportAllChanges),Bp((function(){return n()}))})),setTimeout(n,0))})))},Zp={passive:!0,capture:!0},ef=new Date,tf=function(e,t){Tp||(Tp=t,Lp=e,Ap=new Date,of(removeEventListener),nf())},nf=function(){if(Lp>=0&&Lp<Ap-ef){var e={entryType:"first-input",name:Tp.type,target:Tp.target,cancelable:Tp.cancelable,startTime:Tp.timeStamp,processingStart:Tp.timeStamp+Lp};Pp.forEach((function(t){t(e)})),Pp=[]}},rf=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){tf(e,t),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,Zp),removeEventListener("pointercancel",r,Zp)};addEventListener("pointerup",n,Zp),addEventListener("pointercancel",r,Zp)}(t,e):tf(t,e)}},of=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,rf,Zp)}))},af=[100,300],sf=function(e,t){t=t||{},Yp((function(){var n,r=zp(),o=xp("FID"),i=function(e){e.startTime<r.firstHiddenTime&&(o.value=e.processingStart-e.startTime,o.entries.push(e),n(!0))},a=function(e){e.forEach(i)},s=Up("first-input",a);n=jp(e,o,af,t.reportAllChanges),s&&Vp(Gp((function(){a(s.takeRecords()),s.disconnect()}))),s&&Rp((function(){var r;o=xp("FID"),n=jp(e,o,af,t.reportAllChanges),Pp=[],Lp=-1,Tp=null,of(addEventListener),r=i,Pp.push(r),nf()}))}))},cf=0,lf=1/0,uf=0,df=function(e){e.forEach((function(e){e.interactionId&&(lf=Math.min(lf,e.interactionId),uf=Math.max(uf,e.interactionId),cf=uf?(uf-lf)/7+1:0)}))},pf=function(){return Mp?cf:performance.interactionCount||0},ff=function(){"interactionCount"in performance||Mp||(Mp=Up("event",df,{type:"event",buffered:!0,durationThreshold:0}))},mf=[200,500],_f=0,hf=function(){return pf()-_f},gf=[],Ef={},vf=function(e){var t=gf[gf.length-1],n=Ef[e.interactionId];if(n||gf.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};Ef[r.id]=r,gf.push(r)}gf.sort((function(e,t){return t.latency-e.latency})),gf.splice(10).forEach((function(e){delete Ef[e.id]}))}},yf=function(e,t){t=t||{},Yp((function(){var n;ff();var r,o=xp("INP"),i=function(e){e.forEach((function(e){e.interactionId&&vf(e),"first-input"===e.entryType&&!gf.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&vf(e)}));var t,n=(t=Math.min(gf.length-1,Math.floor(hf()/50)),gf[t]);n&&n.latency!==o.value&&(o.value=n.latency,o.entries=n.entries,r())},a=Up("event",i,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});r=jp(e,o,mf,t.reportAllChanges),a&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&a.observe({type:"first-input",buffered:!0}),Vp((function(){i(a.takeRecords()),o.value<0&&hf()>0&&(o.value=0,o.entries=[]),r(!0)})),Rp((function(){gf=[],_f=pf(),o=xp("INP"),r=jp(e,o,mf,t.reportAllChanges)})))}))},wf=[2500,4e3],If={},bf=function(e,t){t=t||{},Yp((function(){var n,r=zp(),o=xp("LCP"),i=function(e){var t=e[e.length-1];t&&t.startTime<r.firstHiddenTime&&(o.value=Math.max(t.startTime-kp(),0),o.entries=[t],n())},a=Up("largest-contentful-paint",i);if(a){n=jp(e,o,wf,t.reportAllChanges);var s=Gp((function(){If[o.id]||(i(a.takeRecords()),a.disconnect(),If[o.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return setTimeout(s,0)}),!0)})),Vp(s),Rp((function(r){o=xp("LCP"),n=jp(e,o,wf,t.reportAllChanges),Bp((function(){o.value=performance.now()-r.timeStamp,If[o.id]=!0,n(!0)}))}))}}))},Of=[800,1800],Sf=function e(t){document.prerendering?Yp((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},Cf=function(e,t){t=t||{};var n=xp("TTFB"),r=jp(e,n,Of,t.reportAllChanges);Sf((function(){var o=Dp();if(o){var i=o.responseStart;if(i<=0||i>performance.now())return;n.value=Math.max(i-kp(),0),n.entries=[o],r(!0),Rp((function(){n=xp("TTFB",0),(r=jp(e,n,Of,t.reportAllChanges))(!0)}))}}))};const Tf=e=>{try{"adverts"in window&&"DM"in window&&(e=>{const t={...e,module:"webVitalsCls"};window.postMessage("__bidmax\n"+JSON.stringify(t),"*")})(e)}catch(e){}},Lf={CLS:null,FCP:null,FID:null,INP:null,LCP:null,TTFB:null},Af={CLS:null,FCP:null,FID:null,INP:null,LCP:null,TTFB:null},Pf=["CLS","LCP"];let Mf=!1,Nf=!1;const Rf=({name:e,value:t})=>{Af[e]=t,Nf||(!Mf&&Pf.includes(e)&&(Mf=!0,k.go("mol-fe-web-vitals-partial")),Lf[e]=t)},Df=e=>{const t=e.id?`#${e.id.substr(0,15)}`:"",n=Array.from(e.classList),r=n.length?`.${n.join(".")}`:"";return`${e.tagName.toLowerCase()}${t}${r}`.substr(0,30)};let kf=!1;const xf=({name:e,value:t,entries:n})=>{Rf({name:e,value:t});try{const e=n&&n[0]&&n[0].target;if(t&&t>=100&&!kf&&e){kf=!0;const t=`${e.parentNode?Df(e.parentNode):"null"} > ${Df(e)}`;Tf({event:"fidElement",fidElementSelector:t,fidValue:Af.FID})}}catch(e){}};let Uf=!1;const jf=({name:e,value:t,entries:n})=>{Rf({name:e,value:t});try{const e=n&&n[0]&&n[0].target;if(t&&!Uf&&e){Uf=!0;const t=`${e.parentNode?Df(e.parentNode):"null"} > ${Df(e)}`;Tf({event:"inpElement",inpElementSelector:t,inpValue:Af.INP})}}catch(e){}};let Bf=[];const Vf=({name:e,value:t,entries:n})=>{Rf({name:e,value:t}),Bf=n};let Gf=0,Wf=0;const Kf=()=>{try{return window.location.hash||"none"}catch(e){return"none"}},Ff=()=>{if(!(Gf>=2))try{const e=.08;if(Af.CLS&&Af.CLS>e&&Af.CLS>Wf&&Af.CLS-Wf>.1){Wf=Af.CLS;const e=.01;for(const t of Bf.filter((t=>t.value>=e&&!t.hadRecentInput))){const e=t.sources.slice(0,2).map((e=>Df(e.node))).join(",");Tf({clsElementSelector:e,clsElementValue:t.value,clsHash:Kf(),clsSendCount:Gf,clsTotal:Af.CLS,event:"clsElement"})}Gf++}}catch(e){}};let Hf=[];const $f=({name:e,value:t,entries:n})=>{Rf({name:e,value:t}),Hf=n};let zf=0,Yf=0;const qf=()=>{if(!(zf>=2))try{const e=2400;if(Af.LCP&&Af.LCP>e&&Af.LCP>Yf&&Af.LCP-Yf>1e3){Yf=Af.LCP;const e=Hf[Hf.length-1];if(!e)return;const t=e.element&&Df(e.element)||e.url||"unknown";Tf({event:"lcpElement",lcpElementSelector:t,lcpSendCount:zf,lcpValue:Af.LCP}),zf++}}catch(e){}},Xf=()=>Lf,Jf=()=>Af,Qf={getCLS:Qp,getFCP:Xp,getFID:sf,getLCP:bf,getTTFB:Cf,onCLS:Qp,onFCP:Xp,onFID:sf,onINP:yf,onLCP:bf,onTTFB:Cf},Zf=()=>Hf,em=()=>Bf;(async()=>{try{Qp(Vf,{reportAllChanges:!0}),sf(xf,{reportAllChanges:!0}),bf($f,{reportAllChanges:!0}),yf(jf,{reportAllChanges:!0}),Cf(Rf,{reportAllChanges:!0}),Xp(Rf,{reportAllChanges:!0}),await k("DOM_READY"),setInterval(Ff,1e4),setInterval(qf,1e4),await(e=1e4,new Promise((t=>{setTimeout(t,e)}))),Nf=!0,k.go("mol-fe-web-vitals-standard")}catch(e){J().error("Error initialising mol-fe-web-vitals",e)}var e})();const tm=e=>({channel:e.getAttribute("data-channel")||"",channelUrl:e.getAttribute("data-channel-url")||"",pubDate:e.getAttribute("data-pub-date")||""}),nm=e=>{try{const t=new Date(e),n=(new Date).getTime()-t.getTime();return Math.floor(n/6e4)<1440}catch{return!1}},rm=(e,t)=>{const n=document.createElement("a");return n.className="article-icon-links__topChannel",n.href=t,n.textContent=e,n},om=e=>{const t=(e=>{try{const t=new Date(e),n=(new Date).getTime()-t.getTime(),r=Math.floor(n/6e4);return r>=1440?"":r<1?"now":r<60?`${r}m ago`:`${Math.floor(r/60)}h ago`}catch{return""}})(e);if(!t)return null;const n=document.createElement("span");n.className="article-icon-links__separator",n.innerHTML='<span class="separator-dot" aria-hidden="true"></span>';const r=document.createElement("time");return r.className="article-icon-links__pubDate",r.setAttribute("datetime",e),r.textContent=t,{separator:n,timeElement:r}},im=(e,t)=>{const{isMobile:n}=z(),r=document.createElement("img");r.src=t,r.alt="",r.className="comments-icon-svg",r.width=13,r.height=13;const o=e&&"0"!==e;if(!(!n||o))return{linkText:null,svgImg:r};const i=document.createElement("span");i.className="readerCommentNo",i.textContent=o?e:"comments";const a=document.createElement("span");return a.className="linktext",a.appendChild(i),{linkText:a,svgImg:r}},am=(e,t,n)=>{const r=e.parentElement;return!r||(!(!t||!r.classList.contains(t))||!(!n||!e.closest(n)))},sm=e=>{try{const t=new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{if(t.nodeType===Node.ELEMENT_NODE&&(t.classList&&t.classList.contains("home-preview")&&(am(t,"article-preview-first-black",".mol-fe-latest-headlines--content")||e(t)),t.querySelectorAll)){t.querySelectorAll(".home-preview").forEach((t=>{am(t,"article-preview-first-black",".mol-fe-latest-headlines--content")||e(t)}))}}))}))}));return t.observe(document.body,{childList:!0,subtree:!0}),t}catch(e){return J().error("Error setting up mobile observer",e),null}},cm="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMyAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMuNjAzNTIgMTIuMTIzQzMuNDAwMzkgMTIuMTIzIDMuMjQyMTkgMTIuMDU0NyAzLjEyODkxIDExLjkxOEMzLjAxOTUzIDExLjc4NTIgMi45NjQ4NCAxMS42MDU1IDIuOTY0ODQgMTEuMzc4OVY5Ljg1NTQ3SDIuNjgzNTlDMi4xMDE1NiA5Ljg1NTQ3IDEuNjExMzMgOS43NTE5NSAxLjIxMjg5IDkuNTQ0OTJDMC44MTQ0NTMgOS4zMzM5OCAwLjUxMTcxOSA5LjAyOTMgMC4zMDQ2ODggOC42MzA4NkMwLjEwMTU2MiA4LjIzMjQyIDAgNy43NDYwOSAwIDcuMTcxODhWMi42ODM1OUMwIDIuMTA5MzggMC4xMDE1NjIgMS42MjMwNSAwLjMwNDY4OCAxLjIyNDYxQzAuNTExNzE5IDAuODI2MTcyIDAuODE0NDUzIDAuNTIzNDM3IDEuMjEyODkgMC4zMTY0MDZDMS42MTEzMyAwLjEwNTQ2OSAyLjEwMTU2IDAgMi42ODM1OSAwSDEwLjIzMDVDMTAuODEyNSAwIDExLjMwMjcgMC4xMDU0NjkgMTEuNzAxMiAwLjMxNjQwNkMxMi4wOTk2IDAuNTIzNDM3IDEyLjQwMDQgMC44MjYxNzIgMTIuNjAzNSAxLjIyNDYxQzEyLjgxMDUgMS42MjMwNSAxMi45MTQxIDIuMTA5MzggMTIuOTE0MSAyLjY4MzU5VjcuMTcxODhDMTIuOTE0MSA3Ljc0NjA5IDEyLjgxMDUgOC4yMzI0MiAxMi42MDM1IDguNjMwODZDMTIuNDAwNCA5LjAyOTMgMTIuMDk5NiA5LjMzMzk4IDExLjcwMTIgOS41NDQ5MkMxMS4zMDI3IDkuNzUxOTUgMTAuODEyNSA5Ljg1NTQ3IDEwLjIzMDUgOS44NTU0N0g2LjQ2ODc1TDQuNDQ3MjcgMTEuNjU0M0M0LjI3MTQ4IDExLjgxMDUgNC4xMjMwNSAxMS45Mjc3IDQuMDAxOTUgMTIuMDA1OUMzLjg4MDg2IDEyLjA4NCAzLjc0ODA1IDEyLjEyMyAzLjYwMzUyIDEyLjEyM1pNMy44NDM3NSAxMS4wNTA4TDUuNzE4NzUgOS4xODc1QzUuODI4MTIgOS4wNzQyMiA1LjkzMzU5IDkgNi4wMzUxNiA4Ljk2NDg0QzYuMTM2NzIgOC45Mjk2OSA2LjI2OTUzIDguOTEyMTEgNi40MzM1OSA4LjkxMjExSDEwLjIzMDVDMTAuODIwMyA4LjkxMjExIDExLjI1NzggOC43NjU2MiAxMS41NDMgOC40NzI2NkMxMS44MjgxIDguMTc1NzggMTEuOTcwNyA3Ljc0MDIzIDExLjk3MDcgNy4xNjYwMlYyLjY4MzU5QzExLjk3MDcgMi4xMTMyOCAxMS44MjgxIDEuNjgxNjQgMTEuNTQzIDEuMzg4NjdDMTEuMjU3OCAxLjA5MTggMTAuODIwMyAwLjk0MzM1OSAxMC4yMzA1IDAuOTQzMzU5SDIuNjgzNTlDMi4wODk4NCAwLjk0MzM1OSAxLjY1MDM5IDEuMDkxOCAxLjM2NTIzIDEuMzg4NjdDMS4wODM5OCAxLjY4MTY0IDAuOTQzMzU5IDIuMTEzMjggMC45NDMzNTkgMi42ODM1OVY3LjE2NjAyQzAuOTQzMzU5IDcuNzQwMjMgMS4wODM5OCA4LjE3NTc4IDEuMzY1MjMgOC40NzI2NkMxLjY1MDM5IDguNzY1NjIgMi4wODk4NCA4LjkxMjExIDIuNjgzNTkgOC45MTIxMUgzLjQwNDNDMy41NjQ0NSA4LjkxMjExIDMuNjc3NzMgOC45NDUzMSAzLjc0NDE0IDkuMDExNzJDMy44MTA1NSA5LjA3ODEyIDMuODQzNzUgOS4xOTE0MSAzLjg0Mzc1IDkuMzUxNTZWMTEuMDUwOFpNMy41OTE4IDUuNzY1NjJDMy4zNjEzMyA1Ljc2NTYyIDMuMTY0MDYgNS42ODM1OSAzIDUuNTE5NTNDMi44MzU5NCA1LjM1NTQ3IDIuNzUzOTEgNS4xNTgyIDIuNzUzOTEgNC45Mjc3M0MyLjc1MzkxIDQuNjk3MjcgMi44MzU5NCA0LjUgMyA0LjMzNTk0QzMuMTY0MDYgNC4xNzE4OCAzLjM2MTMzIDQuMDg5ODQgMy41OTE4IDQuMDg5ODRDMy44MjYxNyA0LjA4OTg0IDQuMDIzNDQgNC4xNzE4OCA0LjE4MzU5IDQuMzM1OTRDNC4zNDc2NiA0LjUgNC40Mjk2OSA0LjY5NzI3IDQuNDI5NjkgNC45Mjc3M0M0LjQyOTY5IDUuMTU4MiA0LjM0NzY2IDUuMzU1NDcgNC4xODM1OSA1LjUxOTUzQzQuMDIzNDQgNS42ODM1OSAzLjgyNjE3IDUuNzY1NjIgMy41OTE4IDUuNzY1NjJaTTYuNDYyODkgNS43NjU2MkM2LjIyODUyIDUuNzY1NjIgNi4wMjkzIDUuNjgzNTkgNS44NjUyMyA1LjUxOTUzQzUuNzAxMTcgNS4zNTU0NyA1LjYxOTE0IDUuMTU4MiA1LjYxOTE0IDQuOTI3NzNDNS42MTkxNCA0LjY5NzI3IDUuNzAxMTcgNC41IDUuODY1MjMgNC4zMzU5NEM2LjAyOTMgNC4xNzE4OCA2LjIyODUyIDQuMDg5ODQgNi40NjI4OSA0LjA4OTg0QzYuNjkzMzYgNC4wODk4NCA2Ljg5MDYyIDQuMTcxODggNy4wNTQ2OSA0LjMzNTk0QzcuMjE4NzUgNC41IDcuMzAwNzggNC42OTcyNyA3LjMwMDc4IDQuOTI3NzNDNy4zMDA3OCA1LjE1ODIgNy4yMTg3NSA1LjM1NTQ3IDcuMDU0NjkgNS41MTk1M0M2Ljg5MDYyIDUuNjgzNTkgNi42OTMzNiA1Ljc2NTYyIDYuNDYyODkgNS43NjU2MlpNOS4zMjgxMiA1Ljc2NTYyQzkuMDk3NjYgNS43NjU2MiA4LjkwMDM5IDUuNjgzNTkgOC43MzYzMyA1LjUxOTUzQzguNTcyMjcgNS4zNTU0NyA4LjQ5MDIzIDUuMTU4MiA4LjQ5MDIzIDQuOTI3NzNDOC40OTAyMyA0LjY5NzI3IDguNTcyMjcgNC41IDguNzM2MzMgNC4zMzU5NEM4LjkwMDM5IDQuMTcxODggOS4wOTc2NiA0LjA4OTg0IDkuMzI4MTIgNC4wODk4NEM5LjU1ODU5IDQuMDg5ODQgOS43NTU4NiA0LjE3MTg4IDkuOTE5OTIgNC4zMzU5NEMxMC4wODQgNC41IDEwLjE2NiA0LjY5NzI3IDEwLjE2NiA0LjkyNzczQzEwLjE2NiA1LjE1ODIgMTAuMDg0IDUuMzU1NDcgOS45MTk5MiA1LjUxOTUzQzkuNzU1ODYgNS42ODM1OSA5LjU1ODU5IDUuNzY1NjIgOS4zMjgxMiA1Ljc2NTYyWiIgZmlsbD0iIzMzMzMzMyIvPgo8L3N2Zz4K",lm=e=>{try{if(e.hasAttribute("data-timestamp-processed"))return;e.setAttribute("data-timestamp-processed","true");const{channel:t,pubDate:n,channelUrl:r}=tm(e);if(!t)return;const o=document.createElement("div");o.className="article-icon-links__pubInfo";const i=rm(t,r);if(o.appendChild(i),n&&nm(n)){const e=om(n);if(e){const{separator:t,timeElement:n}=e;o.appendChild(t),o.appendChild(n)}}const a=e.querySelector(".comments-count");if(a){const e=a.querySelector("a");if(e){e.className="comments-link";const t=e.querySelector("em"),n=t?t.textContent.trim():"",{svgImg:r,linkText:o}=im(n,cm);o?e.replaceChildren(r,o):e.replaceChildren(r)}}const s=document.createElement("div");s.className="article-icon-links",s.appendChild(o),a&&s.appendChild(a),e.replaceChildren(s)}catch(e){J().error("Error processing home-preview element",e)}},um=e=>{try{if(e.hasAttribute("data-timestamp-processed"))return;e.setAttribute("data-timestamp-processed","true");const{channel:t,channelUrl:n}=tm(e);if(!t)return;const r=document.createElement("div");r.className="article-icon-links__pubInfo";const o=rm(t,n);r.appendChild(o);const i=e.querySelector(".comments-count");if(i){const e=i.querySelector("a");if(e){e.className="comments-link";const t=e.querySelector("em"),n=t?t.textContent.trim():"",{svgImg:r,linkText:o}=im(n,cm);o?e.replaceChildren(r,o):e.replaceChildren(r)}}const a=document.createElement("div");a.className="article-icon-links",a.appendChild(r),i&&a.appendChild(i),e.replaceChildren(a)}catch(e){J().error("Error processing home-preview element",e)}},dm=()=>{try{const{channel:e,subchannel:t}=z(),n=["home","ushome","auhome"];if(!n.includes(e)||!n.includes(t))return;const r=Re();if(!r)return;const o=r.includes("homepageArticleUIWithTimestamp"),i=r.includes("homepageArticleUIWithoutTimestamp"),a=r.includes("homepageArticleUIControl");if(!o&&!i&&!a)return;a||((()=>{try{const e=document.querySelector(".article-tri-headline");e&&e.classList.add("article-tri-headline--first");const t=document.querySelectorAll(".article-icon-links");if(0===t.length)return;t.forEach((e=>{e.querySelectorAll("li").forEach((e=>{e.classList.contains("article-icon-links__pubInfo")||e.querySelector(".comments-link")||e.remove()}))}))}catch(e){J().error("Error applying shared logic in mol-fe-article-timestamp-channel",e)}})(),(()=>{try{const e=document.querySelectorAll(".article-icon-links .comments-link");if(0===e.length)return;e.forEach((e=>{const t=e.querySelector(".icon");if(t){const e=document.createElement("img");e.src=cm,e.alt="",e.className="comments-icon-svg",e.width=13,e.height=13,t.parentNode.replaceChild(e,t)}const n=e.querySelector(".linktext");if(n){const e=n.querySelector(".readerCommentNo");if("comments"===n.textContent.trim()&&n.remove(),e){const t=e.textContent.trim();t&&"0"!==t&&(n.textContent="",n.appendChild(e))}}}))}catch(e){J().error("Error processing comments links in mol-fe-article-timestamp-channel",e)}})()),o?((()=>{try{document.body.classList.add("homepage-article-ui--with-timestamp");const e=document.querySelectorAll("li.article-icon-links__pubInfo");if(0===e.length)return;e.forEach((e=>{const{channel:t,pubDate:n,channelUrl:r}=tm(e);if(!t)return;e.replaceChildren();const o=rm(t,r);if(e.appendChild(o),n&&nm(n)){const t=om(n);if(t){const{separator:n,timeElement:r}=t;e.appendChild(n),e.appendChild(r)}}}))}catch(e){J().error("Error initialising WithTimestamp variant",e)}})(),(()=>{try{document.querySelectorAll(".home-preview").forEach((e=>{am(e,"article-preview-first-black",".mol-fe-latest-headlines--content")||lm(e)})),sm(lm)}catch(e){J().error("Error initialising mobile WithTimestamp variant",e)}})()):i&&((()=>{try{document.body.classList.add("homepage-article-ui--without-timestamp");const e=document.querySelectorAll("li.article-icon-links__pubInfo");if(0===e.length)return;e.forEach((e=>{const{channel:t,channelUrl:n}=tm(e);if(!t)return;e.replaceChildren();const r=rm(t,n);e.appendChild(r)}))}catch(e){J().error("Error initialising WithoutTimestamp variant",e)}})(),(()=>{try{document.querySelectorAll(".home-preview").forEach((e=>{am(e,"article-preview-first-black",".mol-fe-latest-headlines--content")||um(e)})),sm(um)}catch(e){J().error("Error initialising mobile WithoutTimestamp variant",e)}})())}catch(e){J().error("Error initialising mol-fe-article-timestamp-channel",e)}};try{k("DOM_READY",dm)}catch(e){J().error("Error initialising mol-fe-article-timestamp-channel",e)}const pm="mol-fe-paywall-",fm=(e,t)=>{try{"localStorage"in window&&window.localStorage.setItem(`${pm}${e}`,JSON.stringify(t))}catch(e){}},mm=()=>"/snippet/money/investing/header.html"===location.pathname,_m=()=>{const{domain:e}=H();return"thisismoney"===e||mm()},hm={integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/111204/get-more-from-dailymail.com",production:"https://www.mailsubscriptions.co.uk/info/418990/choose-your-subscription"},gm={default:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/109171/get-more-from-the-mail",production:"https://www.mailsubscriptions.co.uk/info/409273/choose-your-subscription"},AU:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/110515/get-more-from-the-mail",production:"https://www.mailsubscriptions.co.uk/info/419105/choose-your-subscription"},GB:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/products/107245/read-more-see-more-enjoy-more",production:"https://www.mailsubscriptions.co.uk/info/409273/choose-your-subscription"},US:hm,CA:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/111204/get-more-from-dailymail.com",production:"https://www.mailsubscriptions.co.uk/info/419106/choose-your-subscription"},MX:hm,IE:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/109873/get-more-from-the-mail",production:"https://www.mailsubscriptions.co.uk/info/365671/get-more-from-the-mail"},NZ:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/110515/get-more-from-the-mail",production:"https://www.mailsubscriptions.co.uk/info/419105/choose-your-subscription"}},Em={default:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/109173/first-month-free-then-4.99",production:"https://www.mailsubscriptions.co.uk/info/348363/first-month-free-then-4.99"},AU:{integration:null,production:null},GB:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/products/107260/the-best-financial-articles-with-all-the-mails-best-content",production:"https://www.mailsubscriptions.co.uk/info/362596/1.99-per-month-for-your-first-year-then-4.99-per-month"},US:{integration:null,production:null},CA:{integration:null,production:null},MX:{integration:null,production:null},IE:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/109874/first-month-free-then-4.99",production:"https://www.mailsubscriptions.co.uk/info/365672/get-more-from-this-is-money-with-mail"},NZ:{integration:null,production:null}},vm=async()=>{const{environment:e}=H(),{geo:t}=z(),n=_m()?Em:gm,r=n[t]||n.default;return r[e]||r.production},ym=e=>{try{const t=e&&new URL(e);return t&&t.searchParams.set("molclicksource","banner"),t&&t.href||e}catch(t){return e}},wm=()=>{const{geo:e}=z();return _m()?"/money/mailplus/index.html":["AU","NZ"].includes(e)?"/mailplus/au/index.html":["US","CA","MX"].includes(e)?"/mailplus/us/index.html":"/mailplus/index.html"},Im=()=>{const{pageType:e,channel:t,subchannel:n}=z(),r=["aumailplus","mailplus","usmailplus","mailplusus"];return"channel"===e&&(r.includes(t)||r.includes(n)||"mailplusmoney"===n)},bm=({referringModule:e,referringPageType:t,returnUrl:n})=>{fm("return-url",n||`${location.origin}${wm()}`),fm("purchase-meta",{referringModule:e,referringPageType:t})},Om=async e=>{const{pageType:t,channel:n,subchannel:r,geo:o}=z();if("channel"!==t||n!==r||!["auhome","home","ushome"].includes(n)||location.pathname.startsWith("/registration"))return;if(window.getIsPaywallSubscriber&&window.getIsPaywallSubscriber()){const t=document.querySelector("[data-paywall-home-masthead]");return void(t&&(t.remove(),e.style.backgroundImage=""))}const i=await(async()=>{const e=await vm();return ym(e)})();if(!i)return;const a=document.querySelector("[data-paywall-home-masthead]")||document.createElement("a");a.href=i,a.dataset.paywallHomeMasthead=!0,a.dataset.geo=o,a.dataset.channel=n,a.addEventListener("click",(async e=>{e.preventDefault();let t=a.href;t=window.addCrossDomainParamsToUrl?await window.addCrossDomainParamsToUrl(t):t,t=ym(t),window.location.href=t,Ct.publish(Ct.PAYWALL_MASTHEAD_SIGNUP_CLICK,{clickLocation:"navigation",referringModule:"navigation"}),bm({referringModule:"masthead",referringPageType:"home"})})),e.appendChild(a),await bi(),await gl()},Sm=e=>{const t=window.getIsPaywallEligible&&window.getIsPaywallEligible(),{pageType:n,isPaywalled:r,geo:o,neverPaywall:i}=z(),a=!window.getIsPaywalledForCountry||window.getIsPaywalledForCountry(),s=!i&&r&&a,c=_m(),l="article"===n&&s,u=Im();if(!l&&!u||!u&&!t)return;let d="https://i.dailymail.co.uk/static/mol-fe/static/configs/mol-fe-paywall/mastheads/DailyMailPlusBanner.png";["US","CA","MX"].includes(o)&&(e=>{const t=document.querySelector(".page-header .masthead > a");t&&(t.href=e)})(wm()),c&&(d="https://i.dailymail.co.uk/static/mol-fe/static/configs/mol-fe-paywall/mastheads/TIM_masthead_new.png");const p="cover",f=(()=>{const{geo:e}=z(),t=["US","CA","MX"].includes(e);if(Im()&&!t)return null;const n=t?"/ushome/index.html":wm(),r=t?"350px":"300px",o=document.querySelector("[data-paywall-article-masthead]")||document.createElement("a");return o.href=n,o.dataset.paywallArticleMasthead=!0,o.style.position="absolute",o.style.zIndex=10,o.style.top="0px",o.style.right="0px",o.style.height="91px",o.style.width=r,o.addEventListener("click",(()=>{Ct.publish(Ct.PAYWALL_MASTHEAD_ARTICLE_CLICK)})),o})();f&&e.appendChild(f),e.style.backgroundImage=`url(${d})`,p&&(e.style.backgroundSize=p),e.classList.add("masthead-paywalled"),document.documentElement.classList.add(c?"has-mailplus-masthead-tim":"has-mailplus-masthead"),c||document.documentElement.classList.add("has-mailplus-theme")},Cm=e=>{if(!e)return;if("undefined"==typeof window)return;const t=window.location?.href;t!==e&&window.location.replace(e)},Tm=({isSelected:e=!1,topNav:t=!1}={})=>{const{geo:n}=z(),r=["US","CA","MX"].includes(n),o=document.createElement("li");return o.classList.add("mailplus-nav"),o.innerHTML=`\n    <span class="${e&&t?"link-wocc linkro-wocc":"link-gr6ox linkro-ccox"} ${e?"selected":""}">\n      <a class="${e&&t?"no-border":""}" href="${wm()}">\n        DailyMail+\n      </a>\n    </span>\n  `,r&&o.classList.add("mailplus-nav-us"),o},Lm=({isSelected:e=!1,topNav:t=!1}={})=>{const n=document.createElement("li");return n.classList.add("mailplus-nav"),n.innerHTML=`\n      <a class="${e&&t?"current bdrcc":""}" href="${wm()}">\n        DailyMail+\n      </a>\n  `,n},Am=()=>document.querySelector(".page-header .masthead"),Pm=async()=>{try{const e=_m();let t=Am();if(t||await k("DOM_READY"),t=Am(),!t)return;if(!(window.getIsPaywallEligible&&window.getIsPaywallEligible()))return void Sm(t);await Om(t),Sm(t),e?(async()=>{const{pageType:e,isPaywalled:t,subchannel:n,neverPaywall:r}=z(),o=!window.getIsPaywalledForCountry||window.getIsPaywalledForCountry(),i="article"===e&&!r&&t&&o||"channel"===e&&"mailplusmoney"===n,a=document.querySelector(".page-header >.money.nav-secondary-container .nav-secondary ul.float-l"),s=a.querySelector("li:first-child a");s&&"Money Home"===s.textContent&&(s.textContent="Home"),a.appendChild(Lm({isSelected:i,topNav:!0})),await k("DOM_READY");const c=document.querySelector(".footer .nav-secondary");if(c){const e=c.querySelector("li:first-child a");e&&"Money Home"===e.textContent&&(e.textContent="Home"),c.appendChild(Lm({isSelected:i,topNav:!1}))}})():(async()=>{const{pageType:e,isPaywalled:t,channel:n,subchannel:r,geo:o,neverPaywall:i}=z(),a=!window.getIsPaywalledForCountry||window.getIsPaywalledForCountry(),s=!i&&t&&a,c="magazines"===r,l=!c&&"channel"===e&&["mailplus","aumailplus","usmailplus","mailplusus"].includes(n),u="article"===e&&s||l||c||"puzzlesus"===n,d=document.querySelector(".page-header .nav-primary"),p=document.querySelector(".page-header > .nav-secondary-container"),f="GB"===o,m=window.getIsPaywallPuzzlesUser(),_=await window.getIsPaywallMagazinesUser(c),h=f&&_;if(u){const e=d.querySelector("span.selected"),t=d.querySelector("li:not(:first-child) .no-border");if(e&&(e.classList.remove("link-wocc","linkro-wocc","selected"),e.classList.add("link-gr6ox","linkro-ccox")),t&&t.classList.remove("no-border"),c){if(!h){const e=wm();return void Cm(e)}const e=document.querySelector(".h1-page-last-updated");e&&e.classList.add("white-text")}if(p){const e=p.querySelector("ul");if(e){e.innerHTML="";const t=document.createElement("li"),r=document.createElement("li"),o=window.getPaywallPuzzlesUrl();if(t.classList.add("first"),t.innerHTML=`<a href="${wm()}" ${l?'class="current"':""}>DailyMail+ Home</a>`,r.innerHTML=`<a href="${o}" ${"puzzlesus"===n?'class="current"':""}>Puzzles</a>`,e.appendChild(t),e.appendChild(r),h){const t=document.createElement("li"),n=window.getMagazinesUrl();t.innerHTML=`<a href="${n}" ${c?'class="current"':""}>Magazines</a>`,e.appendChild(t)}}p.classList.add("mailplus")}}else if(m){const e=window.getPaywallPuzzlesUrl(),t=d.querySelector('a[href="/puzzles/index.html"]')||p&&p.querySelector('a[href="/puzzles/index.html"]');t&&t.setAttribute("href",e)}if("CA"===o){const e=d.querySelector('a[href*="/puzzles/index.html"]'),t=e&&e.closest("li");t&&t.remove();const r=d.querySelector('a[href="/wellness-us/index.html"]'),o=r&&r.closest("li"),i=o&&o.querySelector("span"),a="podcasts"===n,s=o&&o.nextElementSibling.querySelector("a");o&&(r.innerHTML="Podcasts",r.setAttribute("href","/podcasts/index.html"),o.classList.remove("wellness"),o.classList.add("podcasts"),a&&(i.classList.remove("link-gr6ox","linkro-ccox"),i.classList.add("link-wocc","linkro-wocc"),i.classList.add("selected"),s&&s.classList.add("no-border")))}d.appendChild(Tm({isSelected:u,topNav:!0})),await k("DOM_READY");const g=document.querySelector(".footer .nav-primary");if(g){if("CA"===o){const e=g.querySelector('a[href="/puzzles/index.html"]'),t=e&&e.closest("li");t&&t.remove();const r=g.querySelector('a[href="/wellness-us/index.html"]'),o=r&&r.closest("li"),i=o&&o.querySelector("span"),a="podcasts"===n,s=o&&o.nextElementSibling.querySelector("a");o&&(r.innerHTML="Podcasts",r.setAttribute("href","/podcasts/index.html"),o.classList.remove("wellness"),o.classList.add("podcasts"),a&&(i.classList.remove("link-gr6ox","linkro-ccox"),i.classList.add("link-wocc","linkro-wocc"),i.classList.add("selected"),s&&s.classList.add("no-border")))}g.appendChild(Tm({isSelected:u,topNav:!1}))}})();const n=window.getIsPaywallSubscriber&&window.getIsPaywallSubscriber();await k("REFRESHED_PAYWALL_ENTITLEMENT");n!==(window.getIsPaywallSubscriber&&window.getIsPaywallSubscriber())&&await Om(t)}catch(e){J().error("Error initialising paywall masthead desktop",e)}},Mm=e=>{const t=window.getIsPaywallEligible&&window.getIsPaywallEligible(),{pageType:n,isPaywalled:r,geo:o,neverPaywall:i}=z(),a=["US","CA","MX"].includes(o),s=!window.getIsPaywalledForCountry||window.getIsPaywalledForCountry(),c=!i&&r&&s,l=_m(),u="article"===n&&c,d=Im();if(!u&&!d||!d&&!t)return;e.classList.add(l?"mailplus-menubar-tim":"mailplus-menubar"),l||document.documentElement.classList.add("has-mailplus-theme");const p=e.querySelector('[data-track-module*="masthead-channel"] span'),f=e.querySelector('[data-track-module*="masthead-channel"] a')||document.createElement("a");f.setAttribute("href",wm()),f.innerHTML="DailyMail+",f.classList.add("mailplus-channel-link"),a&&f.classList.add("mailplus-channel-link-us"),p&&p.replaceWith(f),(()=>{const e=document.querySelector('meta[name="theme-color"]')||document.createElement("meta");e.setAttribute("name","theme-color"),e.setAttribute("content","#1e3264"),document.head.appendChild(e)})()},Nm=()=>document.querySelector("#mobile-content > header"),Rm=async()=>{try{let e=Nm();if(e||await k("DOM_READY"),e=Nm(),!e)return;if(!(window.getIsPaywallEligible&&window.getIsPaywallEligible()))return void Mm(e);Mm(e),(async()=>{const{geo:e,subchannel:t}=z(),n=["US","CA","MX"].includes(e),r="GB"===e,o=document.querySelector("#nav"),i=document.createElement("li"),a=o.querySelector("li:nth-child(3)"),s=_m(),c="magazines"===t,l=await window.getIsPaywallMagazinesUser(c),u=r&&l;if(!c||u){if(i.classList.add("mailplus-nav"),i.innerHTML=`\n    <span>\n      <a class="main-nav home" href="${wm()}" data-google-interstitial="false">\n        DailyMail+\n      </a>\n    </span>\n  `,n&&i.classList.add("mailplus-nav-us"),s&&i.classList.add("full-width"),a.after(i),!s){const e=window.getPaywallPuzzlesUrl(),t=document.createElement("li");if(t.classList.add("mailplus-nav"),t.classList.add("mailplus-puzzles-nav"),t.innerHTML=`\n      <span>\n        <a class="main-nav home" href="${e}" data-google-interstitial="false">\n          Puzzles\n        </a>\n      </span>\n    `,i.after(t),u){const e=window.getMagazinesUrl(),t=document.createElement("li");t.classList.add("mailplus-nav"),t.classList.add("mailplus-magazines-nav"),t.innerHTML=`\n      <span>\n        <a class="main-nav home" href="${e}" data-google-interstitial="false">\n          Magazines\n        </a>\n      </span>\n    `,i.after(t)}}}else{const e=wm();Cm(e)}})()}catch(e){J().error("Error initialising paywall masthead mobile",e)}},Dm=async()=>{try{if(window.getPaywallPurchaseUrl=vm,mm())return await Pm(),void document.body.classList.add("mailplus-tim");await k("PAGE_METADATA_SET");const{renderPlatform:e}=H();"desktop"===e?await Pm():"mobile"===e&&await Rm(),_m()&&(await k("DOM_READY"),document.body.classList.add("mailplus-tim"))}catch(e){J().error("Error initialising paywall masthead",e)}},km={getMailplusChannelUrl:wm,getPurchaseUrl:vm,initZephrMasthead:e=>{const t=window.Zephr?.outcomes?.masthead?.outcomeLabel;e.addEventListener("click",(async n=>{n.preventDefault();let r=e.href;r=window.addCrossDomainParamsToUrl?await window.addCrossDomainParamsToUrl(r):r,r=ym(r),window.location.href&&(window.location.href=r),Ct.publish(Ct.PAYWALL_MASTHEAD_SIGNUP_CLICK,{paywallOutcomeLabel:t}),bm({paywallOutcomeLabel:t,referringModule:"masthead",referringPageType:"home"})}))},setPaywallPurchaseMeta:bm};Dm().catch((()=>{}));const xm=e=>{if(!e)return null;const t=e.match(/article-(\d+)/);return Array.isArray(t)&&t[1]?t[1]:null},Um=()=>{document.addEventListener("click",(e=>{const t=e.target.closest("a");if(!t)return;const n=xm(t.href);if(!n)return;let r=t.querySelector("[data-content-propensity]");const o=[...t.parentElement.children].find((e=>e!==t&&e.classList.contains("is-paywalled")));!r&&o&&o.hasAttribute("data-content-propensity")&&(r=o);const i=o&&!o.hasAttribute("data-content-propensity"),a=r?.getAttribute("data-content-propensity");let s="none",c="none";"mailplus"===(window.molSophiPaywallSignpostOutcomes&&window.molSophiPaywallSignpostOutcomes[a])?(s="mailplus",c="sophi"):r||!t.querySelector(".is-paywalled")&&!i||(s="mailplus",c="override"),localStorage.setItem("mol-sophi-signpost-click",`${n}-${s}-${c}`)}))},jm=async()=>{try{if(window.molSophiLoadedWithConsent=!1,window?.location.hostname.includes("thisismoney")||(()=>{try{return window.adsMVTResults&&"off"===window.adsMVTResults.selectedScenarios.sophitruecontrol}catch(e){return!1}})())return window.molSophiFeatureOff=!0,window.molSophiConsentUsed="not-used",void k.go("SOPHI_LOAD_ABORTED");let e=!1;(()=>{try{(window.__dmgCmp||(window.__dmgCmp=[])).push({data:async e=>{"n/a"===e?window.demeter&&window.demeter("enableAllFeatures"):await md("nrv","29")&&window.demeter&&window.demeter("enableAllFeatures")},scope:"isReady"})}catch(e){}})(),window.molSophiConsentUsed="no-consent";const t=await new Promise(((e,t)=>{let n=!1;const r=setTimeout((()=>{n=!0,console.error("CMP readiness check timed out, API not available to determine consent status, fallback to no-consent"),e(!1)}),500);(window.__dmgCmp||(window.__dmgCmp=[])).push({data:t=>{clearTimeout(r),n||e(t)},scope:"isReady"})}));"n/a"===t?(e=!0,window.molSophiConsentUsed="consent-n/a"):"yes"===t&&(e=await md("nrv","29",1e3),window.molSophiConsentUsed=!0===e?"consent-user":"dissent-user");try{Um()}catch(e){console.error("Error storing signpost click: ",e)}await Promise.race([new Promise((e=>{window.molSophiDataLayerEventFired?e(window.molSophiDataLayerEventFired):window.addEventListener("sophiDataLayerReady",(t=>{window.molSophiDataLayerEventFired=t,e(t)}),{once:!0})})),new Promise(((e,t)=>setTimeout((()=>t(new Error("Timed out on sophi data layer"))),1e3)))]),!0===e&&window.demeter("enableAllFeatures"),window.molSophiScriptReady=performance.now().toFixed(2),window.molSophiLoadedWithConsent=e,e&&!window.molSophiPageViewSent?window.molSophiPaywallOutcome=await(async()=>{try{const{outcome:e}=await Promise.race([window.demeter("getDecision",{args:{visitor:window.DM.isLoggedIn?"registered":"anonymous"}}),new Promise(((e,t)=>setTimeout((()=>t(new Error("Sophi getDecision timeout"))),500)))]);return{isPaywalled:e&&"paywall"===e.wallType&&"always"===e.wallVisibility,source:"sophi"}}catch(e){console.error("Error from getting a paywall decision from Sophi:",e)}return{isPaywalled:!1,source:"not_loaded"}})():window.molSophiFeatureOff=!0,k.go("SOPHI_LOADED")}catch(e){const t=e&&e.message?e.message.replace(/\s+/g,"-").slice(0,30):"unknown-error";window.molSophiFeatureOff=!0,k.go("SOPHI_LOAD_ABORTED");const n=`feature-error-${t}-CRBE-${window.molSophiConsentUsed||"not-used"}`;window.molSophiConsentUsed=n,console.error("Error loading Sophi integration script: ",e)}};jm();const Bm=e=>/^(live-(us|uk|au)\.(andweb\.dmgt\.net|mol\.dmgt\.net|mailonline\.co\.uk)|(?:www\.)?(dailymail|thisismoney)\.(co\.uk|com))$/.test(e),Vm="mol-fe-xp-module-data-utils",Gm=Bm(window.location.hostname)?"www.dailymail.co.uk":"www.dailymailint.co.uk",Wm="retrieveXpModuleHeadJson",Km=async({name:e,env:t,values:n})=>{let r;const o=`https://${Gm}/xpmodules/${e}/renderHeadJson?data=`,i={env:t,values:n};try{r=`${o}${encodeURIComponent(JSON.stringify(i))}`}catch(t){return console.error(`[${Vm}] ${Wm}.urlError`,{error:t,hostname:Gm,name:e,...i}),null}try{const e=(await Qe().get(r,{timeout:1e4})).data;return e?(Array.isArray(e.scripts)||(e.scripts=[]),Array.isArray(e.styles)||(e.styles=[]),e):{scripts:[],styles:[]}}catch(e){return console.error(`[${Vm}] ${Wm}.thrownError`,{error:e,url:r}),null}},Fm="retrieveXpModuleBody",Hm=async({name:e,env:t,values:n})=>{let r;const o=`https://${Gm}/xpmodules/${e}/renderBody?data=`,i={env:t,values:n};try{r=`${o}${encodeURIComponent(JSON.stringify(i))}`}catch(t){return console.error(`[${Vm}] ${Fm}.urlError`,{error:t,hostname:Gm,name:e,...i}),null}try{const{data:e}=await Qe().get(r,{timeout:1e4});return"string"!=typeof e||""===e?(console.error(`[${Vm}] ${Fm}.invalidBody`,{body:e,url:r}),null):e}catch(e){return console.error(`[${Vm}] ${Fm}.thrownError`,{error:e,url:r}),null}},$m="notificationWrapper_CURMH",zm="notificationClose_ODVwA",Ym="notificationBody_fgixb",qm="notificationBanner_Smyug",Xm="notificationBreakingNews_MQsxC",Jm="notificationSecondWord_nuQ0U",Qm="notificationTitle_HWtWy",Zm=()=>{const e=document.body.querySelectorAll(`.${$m}`);if(e.length>0)for(const t of Array.from(e))document.body.removeChild(t)},e_=(e,t,n)=>{Zm();const r=`\n      <div class="${Ym}">\n        <div class="${qm}">\n          <span class="${Xm}">\n            BREAKING <span class="${Jm}">NEWS</span>\n          </span>\n        </div>\n        <span class="${Qm}">\n          ${t.title}\n        </span>\n      </div>\n      <div class="${zm}">\n      </div>`,o=setTimeout(Zm,e),i=document.createElement("div");i.classList.add($m),i.innerHTML=r;const a=()=>{document.body.contains(i)&&(document.body.removeChild(i),clearTimeout(o))},s=i.querySelector(`.${Ym}`),c=i.querySelector(`.${zm}`);s.onclick=()=>{window.open(t.clickThroughUrl,"_blank").focus(),n&&"function"==typeof n.onClick&&n.onClick(),a()},c.onclick=a,document.body.appendChild(i)},t_="prePrompt_nIc9z",n_="prePromptWrapper_SrdCF",r_="prePromptLogo_NeBBl",o_="prePromptCloseBtn_QTaG4",i_="prePromptMain_ZNuKI",a_="prePromptBell_cxJUW",s_="prePromptText_XKZPC",c_="prePromptConfirmBtn_M4juw",l_={buylineuk:"Buyline",buylineus:"Buyline",femail:"Femail",health:"Health",lifestyle:"Lifestyle",money:"Money",news:"Breaking",royals:"Royal",sciencetech:"Science",sport:"Sport",travel:"Travel",tvshowbiz:"Showbiz"},u_="pre-prompt",d_=()=>{const e=document.getElementById(u_);e&&document.body.contains(e)&&document.body.removeChild(e)},p_=(e,t)=>{if(document.getElementById(u_))return;const n=`Sign up to ${l_[e]||"Breaking"} News notifications`,r=document.createElement("div");r.id=u_,r.classList.add(t_),r.dataset.channelColor=e,r.innerHTML=`<div class="${n_}">\n    <button class="${o_}"></button>\n    <div class="${r_}">\n      <svg xmlns="http://www.w3.org/2000/svg" width="120" height="20" viewBox="0 0 120 20" fill="none">\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M19.661 0.194706C20.0835 -0.158707 20.1989 0.0769828 20.1989 0.0769828L24.5423 2.67059C24.888 2.90632 24.7343 2.98518 24.7343 2.98518V15.0093C24.888 16.503 26.1178 17.0921 26.1178 17.0921C26.4638 17.367 26.3104 17.5635 26.3104 17.5635L22.9663 20C20.0835 19.0177 19.8144 16.6207 19.8144 16.6207V5.1068C19.7378 4.55684 19.469 4.6351 19.469 4.6351L17.2405 3.46051L17.2544 8.56647L19.6438 8.56712L17.2645 12.0905L17.2758 16.3186L18.9308 17.4846C19.1613 17.76 18.8154 17.7995 18.8154 17.7995L15.3564 20L10.2059 17.2098C9.7448 16.8955 10.0905 16.699 10.0905 16.699L11.2052 15.9921V12.298H8.77015L8.78292 17.0448L9.59081 17.5635C9.85994 17.8389 9.55256 18.0355 9.55256 18.0355L6.13185 20L1.63472 17.6029C1.25048 17.3281 1.67329 17.1315 1.67329 17.1315L2.94171 16.3847V5.73595L0.482 3.92798L0.366577 3.88855C-0.325048 3.49604 0.174337 3.29917 0.174337 3.29917L3.71043 0.980963C3.90243 0.823525 4.0561 1.05921 4.0561 1.05921L7.28485 2.98518C7.28485 2.98518 11.6405 0.606634 11.9357 0.425838C12.1277 0.307831 12.2813 0.465269 12.2813 0.465269L15.9712 2.55262L19.661 0.194706ZM45.5663 5.85334C45.5663 5.85334 45.7968 5.57851 46.1036 5.85334C46.2328 5.96872 47.0581 6.43656 47.9729 6.94096L48.3993 7.1752C49.5415 7.80064 50.678 8.40785 50.678 8.40785C50.678 8.40785 50.9856 8.60411 50.6394 8.8398C50.2935 9.07581 49.8712 9.18865 49.8712 9.18865C49.8712 9.18865 49.7168 9.03638 49.6022 9.50776C49.4748 10.0265 49.6404 15.9921 49.6404 15.9921C49.6404 15.9921 49.5636 16.2276 49.794 16.3452C50.0245 16.463 51.3546 17.2492 51.3546 17.2492C51.3546 17.2492 51.6237 17.4846 51.3546 17.6029C51.2391 17.6534 50.6042 18.1009 49.9162 18.5958L49.57 18.8456C48.7619 19.4302 47.9874 20 47.9874 20L43.4139 17.6424C43.4139 17.6424 43.1751 17.3687 43.4903 17.0921C43.7598 16.8561 44.264 16.455 44.264 16.455C44.264 16.455 44.2979 16.0309 44.2593 15.8738L44.1824 9.82207C44.1824 9.82207 44.2979 9.62609 43.9516 9.50776C43.6057 9.39008 42.3377 8.56467 42.3377 8.56467C42.3377 8.56467 42.1454 8.40785 42.3759 8.05382C42.6067 7.70074 45.5663 5.85334 45.5663 5.85334ZM35.6883 5.30339C36.1494 4.98908 36.342 5.26391 36.342 5.26391C36.342 5.26391 41.2996 7.77899 41.5687 8.0933C41.8378 8.40785 41.6841 8.64354 41.6841 8.64354L40.877 9.31122C40.6847 9.35126 40.7229 9.62609 40.7229 9.62609V15.5596L42.8376 17.0138C43.068 17.2887 42.914 17.5635 42.914 17.5635L39.8779 20L34.8813 17.5246C34.6505 17.2887 34.4968 17.5635 34.4968 17.5635L31.5371 20C27.4821 19.4637 26.821 16.4866 26.7344 15.9521L26.7317 15.9357C26.7255 15.8939 26.7225 15.869 26.7225 15.869C26.4487 11.499 28.1168 10.4117 28.1168 10.4117C30.269 7.5433 35.6883 5.30339 35.6883 5.30339ZM58.2498 0.941533L58.2493 0.987414C58.2428 1.60758 58.173 8.37283 58.1685 12.6091L58.1686 13.4949C58.1707 14.8924 58.1828 15.8664 58.2111 15.9921C58.3266 16.503 58.557 16.3847 58.557 16.3847C58.557 16.3847 58.8454 16.591 59.1674 16.812L59.4112 16.9776C59.6534 17.14 59.8786 17.2838 59.9795 17.3281C60.2482 17.4458 60.0945 17.7207 60.0945 17.7207L57.2886 19.9605C57.2886 19.9605 56.1395 19.4426 54.9453 18.8938L54.4975 18.6876C53.4577 18.2073 52.489 17.7501 52.3309 17.6424C51.8692 17.3281 52.1769 17.1315 52.1769 17.1315L52.9837 16.3064L52.9842 16.2619C52.9888 15.8954 53.0203 13.3209 53.0307 10.6013L53.0335 9.61948L53.0335 8.3279C53.029 6.0054 52.9978 4.0178 52.9072 3.77087C52.6764 3.14201 51.9461 2.90632 51.9461 2.90632C51.7924 2.63149 51.9847 2.59206 51.9847 2.59206C51.9847 2.59206 56.9809 0.941533 57.6348 0.784704C58.2884 0.627266 58.2498 0.941533 58.2498 0.941533ZM68.6932 1.98611C72.9117 1.98611 75.0542 4.87652 75.0542 10.1606V11.0639C75.0542 16.4834 72.7573 19.1254 68.6932 19.1254C64.9164 19.1254 62.3322 16.5963 62.3322 11.109V10.1606C62.3322 4.85398 64.6733 1.98611 68.6932 1.98611ZM114.721 5.89269C118.034 5.89269 120 8.24117 120 12.0575V12.9607H110.635C110.635 16.4609 112.491 17.9963 115.097 17.9963C117.085 17.9963 118.454 17.4093 119.139 17.0254V18.1319C118.277 18.7641 116.621 19.1029 114.854 19.1029C112.314 19.1029 109.31 17.635 109.31 13.0059V12.1026C109.31 8.17346 111.607 5.89269 114.721 5.89269ZM103.457 5.91532C105.732 5.91532 107.212 7.20242 107.212 9.5961V18.8545H105.909V9.34768C105.909 7.97024 104.849 6.9992 103.082 6.9992C101.315 6.9992 99.6803 8.01537 98.9293 9.70898V18.8545H97.6262V6.32175H98.8409L98.8851 8.62506C99.4153 7.31534 101.094 5.91532 103.457 5.91532ZM94.8433 6.18629V18.8545H93.5402V6.18629H94.8433ZM83.0053 5.91532C85.2803 5.91532 86.7601 7.20242 86.7601 9.5961V18.8545H85.457V9.34768C85.457 7.97024 84.3967 6.9992 82.6299 6.9992C80.8628 6.9992 79.2285 8.01537 78.4775 9.70898V18.8545H77.1744V6.32175H78.3891L78.4333 8.62506C78.9635 7.31534 80.6419 5.91532 83.0053 5.91532ZM90.6912 2.21195V18.8545H89.4105V2.21195H90.6912ZM68.6932 3.07003C65.4685 3.07003 63.7017 5.26046 63.7017 10.3864V10.7929C63.7017 15.806 65.4904 18.019 68.6932 18.019C71.9179 18.019 73.6846 16.1221 73.6846 10.838V10.3864C73.6846 5.44109 72.1165 3.07003 68.6932 3.07003ZM32.5747 8.01468C30.6536 8.87927 30.5767 10.5689 30.5767 10.5689C30.1857 12.0753 30.7343 13.4816 30.9921 14.024C32.0083 15.8168 33.9592 16.8173 33.9592 16.8173C34.8041 17.2098 35.1501 16.6207 35.1501 16.6207L35.1884 9.8075L32.5747 8.01468ZM8.4384 3.52847C7.90716 3.54071 7.80621 3.85449 7.78821 3.94389L7.78451 3.96746L7.7459 16.3847C7.78451 16.6595 7.93818 16.503 7.93818 16.503L8.47522 16.8476L8.4384 3.52847ZM16.9574 12.298H16.3939V15.7167C16.4708 15.9921 16.7014 15.9133 16.7014 15.9133L16.9681 16.1013L16.9574 12.298ZM114.765 7.04437C112.468 7.04437 110.679 8.62506 110.635 11.922H118.675C118.675 8.62506 117.173 7.04437 114.765 7.04437ZM8.74611 3.59736L8.76808 11.6348L10.7824 8.56467L11.2052 8.56529V5.1068C11.1078 4.67454 10.9549 4.72076 10.9102 4.74522L10.8975 4.75339L8.74611 3.59736ZM16.9328 3.31402C16.2504 3.09863 16.3554 3.53486 16.3554 3.53486L16.3939 8.21155V8.56647H16.9473L16.9328 3.31402ZM47.2193 0.548689C47.2193 0.548689 47.9297 0.0769828 48.8718 0.666412C48.8718 0.666412 49.948 1.13779 49.4863 2.86689C49.4863 2.86689 48.756 4.6351 46.9502 5.38192C46.9502 5.38192 46.5271 5.46082 46.3731 5.0677C46.3731 5.0677 45.5663 3.84973 45.8354 2.31689C45.8354 2.31689 46.1231 1.15781 47.2193 0.548689ZM94.9981 2.84423V4.76364H93.3416V2.84423H94.9981Z" fill="currentColor"/>\n      </svg>\n    </div>\n    <div class="${i_}">\n      <div class="${a_}">\n        <svg xmlns="http://www.w3.org/2000/svg" width="42" height="40" viewBox="0 0 42 40" fill="none">\n          <path fill-rule="evenodd" clip-rule="evenodd" d="M33.8463 32.9194C26.2075 24.5494 29.2825 16.1195 29.2825 13.6621C29.2825 7.89756 24.6365 3.16072 18.6631 2.51017V1.24872C18.6631 0.558908 18.0662 0 17.3287 0C16.591 0 15.9944 0.559189 15.9944 1.24872V2.49743C8.9082 3.17806 4.09318 9.64216 5.50295 15.8725C5.50295 16.0688 7.87153 25.0485 0.81895 32.9067C0.0850103 33.7185 0.698998 34.9548 1.83334 34.9548C5.13431 34.9486 31.6524 34.9666 32.8467 34.9672C33.9807 34.9672 34.5935 33.7188 33.8463 32.9194ZM13.322 36.2412C13.322 38.318 15.1194 40 17.3385 40C19.5577 40 21.3551 38.318 21.3551 36.2412V36.2131L13.322 36.2036V36.2412Z" fill="currentColor"/>\n          <path d="M32.4912 19.5833C36.9143 19.5833 40.5 16.0389 40.5 11.6667C40.5 7.29441 36.9143 3.75 32.4912 3.75C28.068 3.75 24.4823 7.29441 24.4823 11.6667C24.4823 16.0389 28.068 19.5833 32.4912 19.5833Z" fill="var(--pre-prompt-bell-fill-color)" stroke="white" stroke-width="2.5"/>\n        </svg>\n      </div>\n      <div class="${s_}">${n}</div>\n    </div>\n    <button class="${c_}">Sign up</button>\n  </div>`;const o=r.querySelector(`.${o_}`),i=r.querySelector(`.${c_}`);o&&o.addEventListener("click",(()=>{d_(),t(!1)})),i&&i.addEventListener("click",(()=>{d_(),t(!0)})),document.body.append(r)},f_=async()=>{const{webPush:{baseEndpoint:e}}=H();if(!window.hulk)try{await Qo(`${e}v1/static/latest/mol-fe-web-push-browser-register/register.js`,{beforeCurrentScript:!0,defer:!0})}catch(e){J().error("There was a problem attempting to loading register.js",e)}return window.hulk},m_=()=>{try{return decodeURIComponent(document.cookie.match(/s_(m|v|a|f)id\%3D(.+?)\%3B/)[2]).split("|")[0]}catch(e){J().warn("could not find Omniture visitor ID for Hulk")}},__=(e,t)=>{const n=document.querySelector('meta[name="keywords"]'),r=n&&n.content?n.content.split(","):[],o=location.host.split(".")[1];return r.filter((n=>n!==e&&n!==t&&n!==o))},h_=({isMobile:e,isTablet:t}={})=>{switch(!0){case t:return"tablet";case e:return"mobile"}return"desktop"},g_=()=>{const{environment:e,webPush:{promptFrequency:t},syncBundleLocation:n}=H(),{isMobile:r,isTablet:o,channel:i,geo:a,subchannel:s}=z(),c=new URL(document.location).searchParams,l=i?[i]:[],u=s?[s]:[],d="push-notification"===(c&&c.get("ito"))?__(l[0],u[0]):void 0,p=m_(),f=p?[p]:[],m=!0;return{environment:e,metadata:{channels:l,geo:a,keywords:d,organisation:"mol",platform:h_({isMobile:r,isTablet:o}),profilingAllowed:m,subChannels:u,userAgent:navigator.userAgent,visitorIds:f},notificationMacros:{impression:[]},promptFrequency:t,swUrl:`${n}/sw.js`}},E_=e=>e.scrollTop||document.documentElement.scrollTop||document.body.scrollTop,v_=5e3,y_=async()=>{try{const{webPush:e,articleId:t,contentType:n}=H(),{channel:r,isMobile:o,subchannel:i}=z(),{hostname:a,prePromptDelayTTL:s=v_,promptEnabled:c,pullNotificationEnabled:l,pullNotificationTTL:u=3e5,pullNotificationScrollThreshold:d}=e||{},{Register:p}=await f_(),f=g_();if(a&&location.hostname.includes(a)){const e=new p(f);if(e.on("error",J().error),p.isWebPushSupported()&&(e.on("notification_click",(e=>Ct.publish(Ct.WEB_PUSH_NOTIFICATION_CLICK,e))),e.on("prompt_pre_prompt_impression",(e=>Ct.publish(Ct.WEB_PUSH_PRE_PROMPT_IMPRESSION,e))),e.on("prompt_pre_prompt_click",(e=>Ct.publish(Ct.WEB_PUSH_PRE_PROMPT_CLICK,e))),e.on("prompt_impression",(e=>Ct.publish(Ct.WEB_PUSH_PROMPT_IMPRESSION,e))),e.on("prompt_click",(e=>Ct.publish(Ct.WEB_PUSH_PROMPT_CLICK,e))),await e.init(),c)){const t=!o&&(()=>{const e=/Version\/([0-9.]+) ?Safari\/[0-9.]+/.exec(navigator.userAgent);if(e){const t=parseFloat(e[1]);return!isNaN(t)&&t>=16}return!1})();setTimeout((()=>{e.showPrompt(t?p_.bind(null,r):void 0)}),s)}!l||"home"===n&&r===i&&["home","ushome","auhome"].includes(r)||(e.on("pull_notification_click",(e=>Ct.publish(Ct.WEB_PULL_NOTIFICATION_CLICK,e))),await k("DOM_READY"),"number"==typeof d&&d>0&&await((e,t)=>{if(!e||"number"!=typeof e)throw new TypeError("missing or wrong required threshold number");return new Promise((n=>{if(E_(t)>=e)return void n();const r=()=>{E_(t)>=e&&(n(),t.removeEventListener("scroll",r))};t.addEventListener("scroll",r)}))})(d,document),await e.initPullNotifications({canRender:e=>"object"==typeof e&&(!e.assetId||e.assetId!==t),renderPullNotification:e_.bind(null,u)}))}}catch(e){J().error(`Error initializing web push: ${e}`)}},{ccRender:w_}=z();k("PAGE_METADATA_SET",(()=>{w_||y_()}));const{externalLinkTracker:I_,trackSwipe:b_}=cn,{pageEvents:O_}=p;O_.getPageMetadata=(...e)=>(J().warn('"pageEvents.getPageMetadata" has been deprecated. Please use "DM.molFePageMetadata.getPageMetadata" instead'),H(...e));const{isLoggedIn:S_,userData:C_,userId:T_}=window.DM||{};window.DM={...C,isLoggedIn:S_,userData:C_,userId:T_},window._=m,window.MobileUtils=_,window.isAdFreeEntitled=()=>!1,Object.freeze(window.DM.pageEvents),document.addEventListener("click",(e=>{const t=e.target.closest("[data-social-first-article-links] .facebook, [data-social-first-article-links] .twitter");if(t){e.preventDefault();const n=t.classList.contains("twitter")?"twitter":"facebook",r=t.classList.contains("twitter")?"tw":"fb",o=t.querySelector("button").getAttribute("data-url"),i=H(),a=t.closest(".article").querySelector("a"),s=a.textContent,c=a.getAttribute("href").match(/\/(article|fb)-(\d+)\//)[2],l=bt().get("social-share-platform");let u="";t.querySelector("button").hasAttribute("data-preferred-shared-network-enabled")&&("twitter"===l?u="twitter_preferred-":"facebook"===l&&(u="facebook_preferred-")),window.open(o,"share-article-"+r+"-"+El++,"resizable=1,scrollbars=1,status=1,width=1050,height=650"),"twitter"===n?l||bt().set("social-share-platform",n,{path:"/"}):"facebook"===n&&bt().set("social-share-platform",n,{path:"/"}),Ct.publish(Ct.SOCIAL_SHARE_CLICKED,{articleId:c,articleTitle:s,pageMetadata:i,placement:u+"home",site:n,type:n+"-type"})}})),bl(),k("PAGE_METADATA_SET",(()=>{try{const e=Re();e&&e.length&&(window.molMVTest=(window.molMVTest?window.molMVTest+",":"")+e.join(","))}catch(e){J().error("Error setting multivariant experiments to ads MVT",e)}}));try{(()=>{try{window.getIsPaywallEligible=Xu,window.getIsPaywallSubscriber=Yu,window.getPaywallEntitlements=Ju,window.getPaywallEntitlementsMightChange=od,window.getPaywallSubscriberType=id,window.paywallSubscriberType=id(),window.getIsPaywallPuzzlesUser=ed,window.getIsPaywallMagazinesUser=td,window.getPaywallPuzzlesUrl=nd,window.getMagazinesUrl=rd,window.getIsPaywalledForCountry=ad,window.addCrossDomainParamsToUrl=ld,window.getOneAccountUserId=ud,window.getPageIsPaywalledForUserIgnoringSubscription=dd,window.getPageIsPaywalledForUserIncludingSubscription=pd,window.getPaywallStatus=fd}catch(e){}})();Xu()||document.documentElement.classList.add("paywall-ineligible"),(async()=>{try{if("off"===window?.adsMVTResults?.selectedScenarios.vwo)return;if(await md("nrv","27")){const e=document.createElement("script");window.location.hostname.includes(".dailymailint.")||window.location.hostname.includes(".thisismoneyint.")||window.location.hostname.includes("liveint"),e.id="vwoCode",e.type="text/javascript",e.innerHTML="\n  window._vwo_code || (function() {\nvar account_id=1072524,\nversion=2.1,\nsettings_tolerance=2000,\nhide_element='',\nhide_element_style = 'opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;transition:none !important;',\n/* DO NOT EDIT BELOW THIS LINE */\nf=false,w=window,d=document,v=d.querySelector('#vwoCode'),cK='_vwo_'+account_id+'_settings',cc={};try{var c=JSON.parse(localStorage.getItem('_vwo_'+account_id+'_config'));cc=c&&typeof c==='object'?c:{}}catch(e){}var stT=cc.stT==='session'?w.sessionStorage:w.localStorage;code={nonce:v&&v.nonce,use_existing_jquery:function(){return typeof use_existing_jquery!=='undefined'?use_existing_jquery:undefined},library_tolerance:function(){return typeof library_tolerance!=='undefined'?library_tolerance:undefined},settings_tolerance:function(){return cc.sT||settings_tolerance},hide_element_style:function(){return'{'+(cc.hES||hide_element_style)+'}'},hide_element:function(){if(performance.getEntriesByName('first-contentful-paint')[0]){return''}return typeof cc.hE==='string'?cc.hE:hide_element},getVersion:function(){return version},finish:function(e){if(!f){f=true;var t=d.getElementById('_vis_opt_path_hides');if(t)t.parentNode.removeChild(t);if(e)(new Image).src='https://dev.visualwebsiteoptimizer.com/ee.gif?a='+account_id+e}},finished:function(){return f},addScript:function(e){var t=d.createElement('script');t.type='text/javascript';if(e.src){t.src=e.src}else{t.text=e.text}v&&t.setAttribute('nonce',v.nonce);d.getElementsByTagName('head')[0].appendChild(t)},load:function(e,t){var n=this.getSettings(),i=d.createElement('script'),r=this;t=t||{};if(n){i.textContent=n;d.getElementsByTagName('head')[0].appendChild(i);if(!w.VWO||VWO.caE){stT.removeItem(cK);r.load(e)}}else{var o=new XMLHttpRequest;o.open('GET',e,true);o.withCredentials=!t.dSC;o.responseType=t.responseType||'text';o.onload=function(){if(t.onloadCb){return t.onloadCb(o,e)}if(o.status===200||o.status===304){_vwo_code.addScript({text:o.responseText})}else{_vwo_code.finish('&e=loading_failure:'+e)}};o.onerror=function(){if(t.onerrorCb){return t.onerrorCb(e)}_vwo_code.finish('&e=loading_failure:'+e)};o.send()}},getSettings:function(){try{var e=stT.getItem(cK);if(!e){return}e=JSON.parse(e);if(Date.now()>e.e){stT.removeItem(cK);return}return e.s}catch(e){return}},init:function(){if(d.URL.indexOf('__vwo_disable__')>-1)return;var e=this.settings_tolerance();w._vwo_settings_timer=setTimeout(function(){_vwo_code.finish();stT.removeItem(cK)},e);var t;if(this.hide_element()!=='body'){t=d.createElement('style');var n=this.hide_element(),i=n?n+this.hide_element_style():'',r=d.getElementsByTagName('head')[0];t.setAttribute('id','_vis_opt_path_hides');v&&t.setAttribute('nonce',v.nonce);t.setAttribute('type','text/css');if(t.styleSheet)t.styleSheet.cssText=i;else t.appendChild(d.createTextNode(i));r.appendChild(t)}else{t=d.getElementsByTagName('head')[0];var i=d.createElement('div');i.style.cssText='z-index: 2147483647 !important;position: fixed !important;left: 0 !important;top: 0 !important;width: 100% !important;height: 100% !important;background: white !important;display: block !important;';i.setAttribute('id','_vis_opt_path_hides');i.classList.add('_vis_hide_layer');t.parentNode.insertBefore(i,t.nextSibling)}var o=window._vis_opt_url||d.URL,s='https://dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(o)+'&vn='+version;if(w.location.search.indexOf('_vwo_xhr')!==-1){this.addScript({src:s})}else{this.load(s+'&x=true')}}};w._vwo_code=code;code.init();})();\n",document.head.appendChild(e)}}catch(e){}})(),xu(),_d()}catch(e){}})()})();
//# sourceMappingURL=desktop.js.map