/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={45:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r;r="__tcfapiLocator",e.exports=function(){for(var e,n=[],o=window,i=window,s=!1;i;){try{if(i.frames[r]){e=i;break}}catch(e){}if(i===o.top)break;i=i.parent}e||(function e(){var t=o.document;if(!o.frames[r])if("interactive"===t.readyState||"complete"===t.readyState){var n=t.createElement("iframe");n.style.display="none",n.name=r,t.body.appendChild(n),s&&(t.removeEventListener("readystatechange",e),s=!1)}else"function"==typeof t.addEventListener?(t.addEventListener("readystatechange",e),s=!0):setTimeout(e,5)}(),o.__tcfapi=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];if(!r.length)return n;var i=r[2];switch(r[0]){case"setGdprApplies":r.length>3&&2===parseInt(r[1],10)&&"boolean"==typeof r[3]&&(e=r[3],"function"==typeof i&&i("set",!0));break;case"ping":"function"==typeof i&&i({gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"});break;default:n.push(r)}},o.addEventListener("message",(function(e){if(e&&e.source&&e.source.postMessage){var r="string"==typeof e.data,n=e.data;if(r)try{n=JSON.parse(e.data)}catch(e){return}if("object"===t(n)&&n.__tcfapiCall){var o=n.__tcfapiCall;window.__tcfapi(o.command,o.version,(function(t,n){var i={__tcfapiReturn:{returnValue:t,success:n,callId:o.callId}};e.source.postMessage(r?JSON.stringify(i):i,"*")}),o.parameter)}}}),!1))}},863:(e,t,r)=>{var n=9007199254740991,o="[object Arguments]",i="[object Function]",s="[object GeneratorFunction]",a="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=a||c||Function("return this")();function l(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var p=Object.prototype,d=p.hasOwnProperty,h=p.toString,f=u.Symbol,v=p.propertyIsEnumerable,y=f?f.isConcatSpreadable:void 0,m=Math.max;function g(e,t,r,n,o){var i=-1,s=e.length;for(r||(r=b),o||(o=[]);++i<s;){var a=e[i];t>0&&r(a)?t>1?g(a,t-1,r,n,o):l(o,a):n||(o[o.length]=a)}return o}function b(e){return S(e)||function(e){return function(e){return E(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?h.call(e):"";return t==i||t==s}(e)}(e)}(e)&&d.call(e,"callee")&&(!v.call(e,"callee")||h.call(e)==o)}(e)||!!(y&&e&&e[y])}function w(e){if("string"==typeof e||function(e){return"symbol"==typeof e||E(e)&&"[object Symbol]"==h.call(e)}(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var S=Array.isArray;function E(e){return!!e&&"object"==typeof e}var O,L,C=(O=function(e,t){return null==e?{}:function(e,t){return function(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var s=t[n],a=e[s];r(0,s)&&(i[s]=a)}return i}(e=Object(e),t,(function(t,r){return r in e}))}(e,function(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(g(t,1),w))},L=m(void 0===L?O.length-1:L,0),function(){for(var e=arguments,t=-1,r=m(e.length-L,0),n=Array(r);++t<r;)n[t]=e[L+t];t=-1;for(var o=Array(L+1);++t<L;)o[t]=e[t];return o[L]=n,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(O,this,o)});e.exports=C}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,o="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function f(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function v(e){var t=new FileReader,r=f(t);return t.readAsArrayBuffer(e),r}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){var r;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&o&&(r=e)&&DataView.prototype.isPrototypeOf(r)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return h(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(o)return this.blob().then(v);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,n,o,i=h(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,r=f(t=new FileReader),o=(n=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?n[1]:"utf-8",t.readAsText(e,o),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=u(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},d.prototype.delete=function(e){delete this.map[u(e)]},d.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},d.prototype.set=function(e,t){this.map[u(e)]=l(t)},d.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),p(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),p(e)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var g=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function b(t,r){if(!(this instanceof b))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,o,i=(r=r||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,r.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=r.credentials||this.credentials||"same-origin",!r.headers&&this.headers||(this.headers=new d(r.headers)),this.method=(o=(n=r.method||this.method||"GET").toUpperCase(),g.indexOf(o)>-1?o:n),this.mode=r.mode||this.mode||null,this.signal=r.signal||this.signal||function(){if("AbortController"in e)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==r.cache&&"no-cache"!==r.cache)){var s=/([?&])_=[^&]*/;s.test(this.url)?this.url=this.url.replace(s,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function S(e,t){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},m.call(b.prototype),m.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var E=[301,302,303,307,308];S.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})};var O=e.DOMException;try{new O}catch(e){(O=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),O.prototype.constructor=O}function L(t,r){return new Promise((function(n,i){var a=new b(t,r);if(a.signal&&a.signal.aborted)return i(new O("Aborted","AbortError"));var c=new XMLHttpRequest;function p(){c.abort()}if(c.onload=function(){var e,t,r={statusText:c.statusText,headers:(e=c.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();try{t.append(n,o)}catch(e){console.warn("Response "+e.message)}}})),t)};0===a.url.indexOf("file://")&&(c.status<200||c.status>599)?r.status=200:r.status=c.status,r.url="responseURL"in c?c.responseURL:r.headers.get("X-Request-URL");var o="response"in c?c.response:c.responseText;setTimeout((function(){n(new S(o,r))}),0)},c.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},c.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request timed out"))}),0)},c.onabort=function(){setTimeout((function(){i(new O("Aborted","AbortError"))}),0)},c.open(a.method,function(t){try{return""===t&&e.location.href?e.location.href:t}catch(e){return t}}(a.url),!0),"include"===a.credentials?c.withCredentials=!0:"omit"===a.credentials&&(c.withCredentials=!1),"responseType"in c&&(o?c.responseType="blob":s&&(c.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof d||e.Headers&&r.headers instanceof e.Headers)){var h=[];Object.getOwnPropertyNames(r.headers).forEach((function(e){h.push(u(e)),c.setRequestHeader(e,l(r.headers[e]))})),a.headers.forEach((function(e,t){-1===h.indexOf(t)&&c.setRequestHeader(t,e)}))}else a.headers.forEach((function(e,t){c.setRequestHeader(t,e)}));a.signal&&(a.signal.addEventListener("abort",p),c.onreadystatechange=function(){4===c.readyState&&a.signal.removeEventListener("abort",p)}),c.send(void 0===a._bodyInit?null:a._bodyInit)}))}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V(n.key),n)}}function V(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}L.polyfill=!0,e.fetch||(e.fetch=L,e.Headers=d,e.Request=b,e.Response=S);var A,P,T,x,j,_,k,M,U=window,R=function(){return e=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"app",n=arguments.length>2?arguments[2]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ns=t,this.id=n&&String(n)||Math.random().toString(36).substring(2),this.sender=r},t=[{key:"emit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={ns:this.ns,id:this.id,sender:this.sender,action:e,payload:t};U.postMessage(r,"*")}},{key:"on",value:function(e,t){var r=this,n=function(n){var o=n.data;o.ns===r.ns&&o.id===r.id&&o.action===e&&o.sender!==r.sender&&t(o.payload,e)};return U.addEventListener("message",n),function(){return U.removeEventListener("message",n)}}},{key:"once",value:function(e,t){var r=this.on(e,(function(){t(),r()}))}}],t&&I(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();!function(e){e.PING="ping",e.GET_TC_DATA="getTCData",e.GET_IN_APP_TC_DATA="getInAppTCData",e.GET_VENDOR_LIST="getVendorList",e.ADD_EVENT_LISTENER="addEventListener",e.REMOVE_EVENT_LISTENER="removeEventListener"}(A||(A={})),function(e){e.STUB="stub",e.LOADING="loading",e.LOADED="loaded",e.ERROR="error"}(P||(P={})),function(e){e.VISIBLE="visible",e.HIDDEN="hidden",e.DISABLED="disabled"}(T||(T={})),function(e){e.TC_LOADED="tcloaded",e.CMP_UI_SHOWN="cmpuishown",e.USER_ACTION_COMPLETE="useractioncomplete"}(x||(x={}));class N{listenerId;callback;next;param;success=!0;constructor(e,t,r,n){Object.assign(this,{callback:e,listenerId:r,param:t,next:n});try{this.respond()}catch(e){this.invokeCallback(null)}}invokeCallback(e){const t=null!==e;"function"==typeof this.next?this.callback(this.next,e,t):this.callback(e,t)}}class D extends N{respond(){this.throwIfParamInvalid(),this.invokeCallback(new W(this.param,this.listenerId))}throwIfParamInvalid(){if(!(void 0===this.param||Array.isArray(this.param)&&this.param.every(Number.isInteger)))throw new Error("Invalid Parameter")}}class G{eventQueue=new Map;queueNumber=0;add(e){return this.eventQueue.set(this.queueNumber,e),this.queueNumber++}remove(e){return this.eventQueue.delete(e)}exec(){this.eventQueue.forEach(((e,t)=>{new D(e.callback,e.param,t,e.next)}))}clear(){this.queueNumber=0,this.eventQueue.clear()}get size(){return this.eventQueue.size}}class F{static apiVersion="2";static tcfPolicyVersion;static eventQueue=new G;static cmpStatus=P.LOADING;static disabled=!1;static displayStatus=T.HIDDEN;static cmpId;static cmpVersion;static eventStatus;static gdprApplies;static tcModel;static tcString;static reset(){delete this.cmpId,delete this.cmpVersion,delete this.eventStatus,delete this.gdprApplies,delete this.tcModel,delete this.tcString,delete this.tcfPolicyVersion,this.cmpStatus=P.LOADING,this.disabled=!1,this.displayStatus=T.HIDDEN,this.eventQueue.clear()}}class B{cmpId=F.cmpId;cmpVersion=F.cmpVersion;gdprApplies=F.gdprApplies;tcfPolicyVersion=F.tcfPolicyVersion}class H extends B{cmpStatus=P.ERROR}class W extends B{tcString;listenerId;eventStatus;cmpStatus;isServiceSpecific;useNonStandardTexts;publisherCC;purposeOneTreatment;outOfBand;purpose;vendor;specialFeatureOptins;publisher;constructor(e,t){if(super(),this.eventStatus=F.eventStatus,this.cmpStatus=F.cmpStatus,this.listenerId=t,F.gdprApplies){const t=F.tcModel;this.tcString=F.tcString,this.isServiceSpecific=t.isServiceSpecific,this.useNonStandardTexts=t.useNonStandardTexts,this.purposeOneTreatment=t.purposeOneTreatment,this.publisherCC=t.publisherCountryCode,!1===this.isServiceSpecific&&(this.outOfBand={allowedVendors:this.createVectorField(t.vendorsAllowed,e),disclosedVendors:this.createVectorField(t.vendorsDisclosed,e)}),this.purpose={consents:this.createVectorField(t.purposeConsents),legitimateInterests:this.createVectorField(t.purposeLegitimateInterests)},this.vendor={consents:this.createVectorField(t.vendorConsents,e),legitimateInterests:this.createVectorField(t.vendorLegitimateInterests,e),disclosedVendors:this.createVectorField(t.vendorsDisclosed,e)},this.specialFeatureOptins=this.createVectorField(t.specialFeatureOptins),this.publisher={consents:this.createVectorField(t.publisherConsents),legitimateInterests:this.createVectorField(t.publisherLegitimateInterests),customPurpose:{consents:this.createVectorField(t.publisherCustomConsents),legitimateInterests:this.createVectorField(t.publisherCustomLegitimateInterests)},restrictions:this.createRestrictions(t.publisherRestrictions)}}}createRestrictions(e){const t={};if(e.numRestrictions>0){const r=e.getMaxVendorId();for(let n=1;n<=r;n++){const r=n.toString();e.getRestrictions(n).forEach((e=>{const n=e.purposeId.toString();t[n]||(t[n]={}),t[n][r]=e.restrictionType}))}}return t}createVectorField(e,t){return t?t.reduce(((t,r)=>(t[String(r)]=e.has(Number(r)),t)),{}):[...e].reduce(((e,t)=>(e[t[0].toString(10)]=t[1],e)),{})}}class $ extends W{constructor(e){super(e),delete this.outOfBand}createVectorField(e){return[...e].reduce(((e,t)=>e+(t[1]?"1":"0")),"")}createRestrictions(e){const t={};if(e.numRestrictions>0){const r=e.getMaxVendorId();e.getRestrictions().forEach((e=>{t[e.purposeId.toString()]="_".repeat(r)}));for(let n=0;n<r;n++){const r=n+1;e.getRestrictions(r).forEach((e=>{const r=e.restrictionType.toString(),o=e.purposeId.toString(),i=t[o].substr(0,n),s=t[o].substr(n+1);t[o]=i+r+s}))}}return t}}class J extends B{cmpLoaded=!0;cmpStatus=F.cmpStatus;displayStatus=F.displayStatus;apiVersion=String(F.apiVersion);gvlVersion;constructor(){super(),F.tcModel&&F.tcModel.vendorListVersion&&(this.gvlVersion=+F.tcModel.vendorListVersion)}}class Q extends N{respond(){this.invokeCallback(new J)}}class K extends D{respond(){this.throwIfParamInvalid(),this.invokeCallback(new $(this.param))}}class Y extends Error{constructor(e){super(e),this.name="DecodingError"}}class z extends Error{constructor(e){super(e),this.name="EncodingError"}}class q extends Error{constructor(e){super(e),this.name="GVLError"}}class X extends Error{constructor(e,t,r=""){super(`invalid value ${t} passed for ${e} ${r}`),this.name="TCModelError"}}class Z{static DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]);static BASIS=6;static LCM=24;static encode(e){if(!/^[0-1]+$/.test(e))throw new z("Invalid bitField");const t=e.length%this.LCM;e+=t?"0".repeat(this.LCM-t):"";let r="";for(let t=0;t<e.length;t+=this.BASIS)r+=this.DICT[parseInt(e.substr(t,this.BASIS),2)];return r}static decode(e){if(!/^[A-Za-z0-9\-_]+$/.test(e))throw new Y("Invalidly encoded Base64URL string");let t="";for(let r=0;r<e.length;r++){const n=this.REVERSE_DICT.get(e[r]).toString(2);t+="0".repeat(this.BASIS-n.length)+n}return t}}class ee{static langSet=new Set(["AR","BG","BS","CA","CS","CY","DA","DE","EL","EN","ES","ET","EU","FI","FR","GL","HE","HI","HR","HU","ID","IS","IT","JA","KA","KO","LT","LV","MK","MS","MT","NL","NO","PL","PT-BR","PT-PT","RO","RU","SK","SL","SQ","SR-LATN","SR-CYRL","SV","SW","TH","TL","TR","UK","VI","ZH","ZH-HANT"]);has(e){return ee.langSet.has(e)}parseLanguage(e){const t=(e=e.toUpperCase()).split("-")[0];if(e.length>=2&&2==t.length){if(ee.langSet.has(e))return e;if(ee.langSet.has(t))return t;const r=t+"-"+t;if(ee.langSet.has(r))return r;for(const r of ee.langSet)if(-1!==r.indexOf(e)||-1!==r.indexOf(t))return r}throw new Error(`unsupported language ${e}`)}forEach(e){ee.langSet.forEach(e)}get size(){return ee.langSet.size}}class te{static cmpId="cmpId";static cmpVersion="cmpVersion";static consentLanguage="consentLanguage";static consentScreen="consentScreen";static created="created";static supportOOB="supportOOB";static isServiceSpecific="isServiceSpecific";static lastUpdated="lastUpdated";static numCustomPurposes="numCustomPurposes";static policyVersion="policyVersion";static publisherCountryCode="publisherCountryCode";static publisherCustomConsents="publisherCustomConsents";static publisherCustomLegitimateInterests="publisherCustomLegitimateInterests";static publisherLegitimateInterests="publisherLegitimateInterests";static publisherConsents="publisherConsents";static publisherRestrictions="publisherRestrictions";static purposeConsents="purposeConsents";static purposeLegitimateInterests="purposeLegitimateInterests";static purposeOneTreatment="purposeOneTreatment";static specialFeatureOptins="specialFeatureOptins";static useNonStandardTexts="useNonStandardTexts";static vendorConsents="vendorConsents";static vendorLegitimateInterests="vendorLegitimateInterests";static vendorListVersion="vendorListVersion";static vendorsAllowed="vendorsAllowed";static vendorsDisclosed="vendorsDisclosed";static version="version"}class re{clone(){const e=new this.constructor;return Object.keys(this).forEach((t=>{const r=this.deepClone(this[t]);void 0!==r&&(e[t]=r)})),e}deepClone(e){const t=typeof e;if("number"===t||"string"===t||"boolean"===t)return e;if(null!==e&&"object"===t){if("function"==typeof e.clone)return e.clone();if(e instanceof Date)return new Date(e.getTime());if(void 0!==e[Symbol.iterator]){const t=[];for(const r of e)t.push(this.deepClone(r));return e instanceof Array?t:new e.constructor(t)}{const t={};for(const r in e)e.hasOwnProperty(r)&&(t[r]=this.deepClone(e[r]));return t}}}}!function(e){e[e.NOT_ALLOWED=0]="NOT_ALLOWED",e[e.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",e[e.REQUIRE_LI=2]="REQUIRE_LI"}(j||(j={}));class ne extends re{static hashSeparator="-";purposeId_;restrictionType;constructor(e,t){super(),void 0!==e&&(this.purposeId=e),void 0!==t&&(this.restrictionType=t)}static unHash(e){const t=e.split(this.hashSeparator),r=new ne;if(2!==t.length)throw new X("hash",e);return r.purposeId=parseInt(t[0],10),r.restrictionType=parseInt(t[1],10),r}get hash(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return`${this.purposeId}${ne.hashSeparator}${this.restrictionType}`}get purposeId(){return this.purposeId_}set purposeId(e){this.purposeId_=e}isValid(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===j.NOT_ALLOWED||this.restrictionType===j.REQUIRE_CONSENT||this.restrictionType===j.REQUIRE_LI)}isSameAs(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType}}class oe extends re{bitLength=0;map=new Map;gvl_;has(e){return this.map.has(e)}isOkToHave(e,t,r){let n=!0;if(this.gvl?.vendors){const o=this.gvl.vendors[r];if(o)if(e===j.NOT_ALLOWED)n=o.legIntPurposes.includes(t)||o.purposes.includes(t);else if(o.flexiblePurposes.length)switch(e){case j.REQUIRE_CONSENT:n=o.flexiblePurposes.includes(t)&&o.legIntPurposes.includes(t);break;case j.REQUIRE_LI:n=o.flexiblePurposes.includes(t)&&o.purposes.includes(t)}else n=!1;else n=!1}return n}add(e,t){if(this.isOkToHave(t.restrictionType,t.purposeId,e)){const r=t.hash;this.has(r)||(this.map.set(r,new Set),this.bitLength=0),this.map.get(r).add(e)}}restrictPurposeToLegalBasis(e){const t=Array.from(this.gvl.vendorIds),r=e.hash,n=t[t.length-1],o=[...Array(n).keys()].map((e=>e+1));if(this.has(r))for(let e=1;e<=n;e++)this.map.get(r).add(e);else this.map.set(r,new Set(o)),this.bitLength=0}getVendors(e){let t=[];if(e){const r=e.hash;this.has(r)&&(t=Array.from(this.map.get(r)))}else{const e=new Set;this.map.forEach((t=>{t.forEach((t=>{e.add(t)}))})),t=Array.from(e)}return t.sort(((e,t)=>e-t))}getRestrictionType(e,t){let r;return this.getRestrictions(e).forEach((e=>{e.purposeId===t&&(void 0===r||r>e.restrictionType)&&(r=e.restrictionType)})),r}vendorHasRestriction(e,t){let r=!1;const n=this.getRestrictions(e);for(let e=0;e<n.length&&!r;e++)r=t.isSameAs(n[e]);return r}getMaxVendorId(){let e=0;return this.map.forEach((t=>{e=Math.max(Array.from(t)[t.size-1],e)})),e}getRestrictions(e){const t=[];return this.map.forEach(((r,n)=>{e?r.has(e)&&t.push(ne.unHash(n)):t.push(ne.unHash(n))})),t}getPurposes(){const e=new Set;return this.map.forEach(((t,r)=>{e.add(ne.unHash(r).purposeId)})),Array.from(e)}remove(e,t){const r=t.hash,n=this.map.get(r);n&&(n.delete(e),0==n.size&&(this.map.delete(r),this.bitLength=0))}set gvl(e){this.gvl_||(this.gvl_=e,this.map.forEach(((e,t)=>{const r=ne.unHash(t);Array.from(e).forEach((t=>{this.isOkToHave(r.restrictionType,r.purposeId,t)||e.delete(t)}))})))}get gvl(){return this.gvl_}isEmpty(){return 0===this.map.size}get numRestrictions(){return this.map.size}}!function(e){e.COOKIE="cookie",e.WEB="web",e.APP="app"}(_||(_={})),function(e){e.CORE="core",e.VENDORS_DISCLOSED="vendorsDisclosed",e.VENDORS_ALLOWED="vendorsAllowed",e.PUBLISHER_TC="publisherTC"}(k||(k={}));class ie{static ID_TO_KEY=[k.CORE,k.VENDORS_DISCLOSED,k.VENDORS_ALLOWED,k.PUBLISHER_TC];static KEY_TO_ID={[k.CORE]:0,[k.VENDORS_DISCLOSED]:1,[k.VENDORS_ALLOWED]:2,[k.PUBLISHER_TC]:3}}class se extends re{bitLength=0;maxId_=0;set_=new Set;*[Symbol.iterator](){for(let e=1;e<=this.maxId;e++)yield[e,this.has(e)]}values(){return this.set_.values()}get maxId(){return this.maxId_}has(e){return this.set_.has(e)}unset(e){Array.isArray(e)?e.forEach((e=>this.unset(e))):"object"==typeof e?this.unset(Object.keys(e).map((e=>Number(e)))):(this.set_.delete(Number(e)),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach((e=>{this.maxId_=Math.max(this.maxId,e)}))))}isIntMap(e){let t="object"==typeof e;return t=t&&Object.keys(e).every((t=>{let r=Number.isInteger(parseInt(t,10));return r=r&&this.isValidNumber(e[t].id),r=r&&void 0!==e[t].name,r})),t}isValidNumber(e){return parseInt(e,10)>0}isSet(e){let t=!1;return e instanceof Set&&(t=Array.from(e).every(this.isValidNumber)),t}set(e){if(Array.isArray(e))e.forEach((e=>this.set(e)));else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map((e=>Number(e))));else{if(!this.isValidNumber(e))throw new X("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0}}empty(){this.set_=new Set,this.maxId_=0}forEach(e){for(let t=1;t<=this.maxId;t++)e(this.has(t),t)}get size(){return this.set_.size}setAll(e){this.set(e)}}class ae{static[te.cmpId]=12;static[te.cmpVersion]=12;static[te.consentLanguage]=12;static[te.consentScreen]=6;static[te.created]=36;static[te.isServiceSpecific]=1;static[te.lastUpdated]=36;static[te.policyVersion]=6;static[te.publisherCountryCode]=12;static[te.publisherLegitimateInterests]=24;static[te.publisherConsents]=24;static[te.purposeConsents]=24;static[te.purposeLegitimateInterests]=24;static[te.purposeOneTreatment]=1;static[te.specialFeatureOptins]=12;static[te.useNonStandardTexts]=1;static[te.vendorListVersion]=12;static[te.version]=6;static anyBoolean=1;static encodingType=1;static maxId=16;static numCustomPurposes=6;static numEntries=12;static numRestrictions=12;static purposeId=6;static restrictionType=2;static segmentType=3;static singleOrRange=1;static vendorId=16}class ce{static encode(e,t){let r;if("string"==typeof e&&(e=parseInt(e,10)),r=e.toString(2),r.length>t||e<0)throw new z(`${e} too large to encode into ${t}`);return r.length<t&&(r="0".repeat(t-r.length)+r),r}static decode(e,t){if(t!==e.length)throw new Y("invalid bit length");return parseInt(e,2)}}class ue{static encode(e,t){return ce.encode(Math.round(e.getTime()/100),t)}static decode(e,t){if(t!==e.length)throw new Y("invalid bit length");const r=new Date;return r.setTime(100*ce.decode(e,t)),r}}class le{static encode(e){return String(Number(e))}static decode(e){return"1"===e}}class pe{static encode(e,t){let r="";for(let n=1;n<=t;n++)r+=le.encode(e.has(n));return r}static decode(e,t){if(e.length!==t)throw new Y("bitfield encoding length mismatch");const r=new se;for(let n=1;n<=t;n++)le.decode(e[n-1])&&r.set(n);return r.bitLength=e.length,r}}class de{static encode(e,t){const r=(e=e.toUpperCase()).charCodeAt(0)-65,n=e.charCodeAt(1)-65;if(r<0||r>25||n<0||n>25)throw new z(`invalid language code: ${e}`);if(t%2==1)throw new z(`numBits must be even, ${t} is not valid`);return t/=2,ce.encode(r,t)+ce.encode(n,t)}static decode(e,t){let r;if(t!==e.length||e.length%2)throw new Y("invalid bit length for language");{const t=65,n=e.length/2,o=ce.decode(e.slice(0,n),n)+t,i=ce.decode(e.slice(n),n)+t;r=String.fromCharCode(o)+String.fromCharCode(i)}return r}}class he{static encode(e){let t=ce.encode(e.numRestrictions,ae.numRestrictions);if(!e.isEmpty()){const r=(t,r)=>{for(let n=t+1;n<=r;n++)if(e.gvl.vendorIds.has(n))return n;return t};e.getRestrictions().forEach((n=>{t+=ce.encode(n.purposeId,ae.purposeId),t+=ce.encode(n.restrictionType,ae.restrictionType);const o=e.getVendors(n),i=o.length;let s=0,a=0,c="";for(let e=0;e<i;e++){const t=o[e];if(0===a&&(s++,a=t),e===i-1||o[e+1]>r(t,o[i-1])){const e=!(t===a);c+=le.encode(e),c+=ce.encode(a,ae.vendorId),e&&(c+=ce.encode(t,ae.vendorId)),a=0}}t+=ce.encode(s,ae.numEntries),t+=c}))}return t}static decode(e){let t=0;const r=new oe,n=ce.decode(e.substr(t,ae.numRestrictions),ae.numRestrictions);t+=ae.numRestrictions;for(let o=0;o<n;o++){const n=ce.decode(e.substr(t,ae.purposeId),ae.purposeId);t+=ae.purposeId;const o=ce.decode(e.substr(t,ae.restrictionType),ae.restrictionType);t+=ae.restrictionType;const i=new ne(n,o),s=ce.decode(e.substr(t,ae.numEntries),ae.numEntries);t+=ae.numEntries;for(let n=0;n<s;n++){const n=le.decode(e.substr(t,ae.anyBoolean));t+=ae.anyBoolean;const o=ce.decode(e.substr(t,ae.vendorId),ae.vendorId);if(t+=ae.vendorId,n){const n=ce.decode(e.substr(t,ae.vendorId),ae.vendorId);if(t+=ae.vendorId,n<o)throw new Y(`Invalid RangeEntry: endVendorId ${n} is less than ${o}`);for(let e=o;e<=n;e++)r.add(e,i)}else r.add(o,i)}}return r.bitLength=t,r}}!function(e){e[e.FIELD=0]="FIELD",e[e.RANGE=1]="RANGE"}(M||(M={}));class fe{static encode(e){const t=[];let r,n=[],o=ce.encode(e.maxId,ae.maxId),i="";const s=ae.maxId+ae.encodingType,a=s+e.maxId,c=2*ae.vendorId+ae.singleOrRange+ae.numEntries;let u=s+ae.numEntries;return e.forEach(((o,s)=>{i+=le.encode(o),r=e.maxId>c&&u<a,r&&o&&(e.has(s+1)?0===n.length&&(n.push(s),u+=ae.singleOrRange,u+=ae.vendorId):(n.push(s),u+=ae.vendorId,t.push(n),n=[]))})),r?(o+=String(M.RANGE),o+=this.buildRangeEncoding(t)):(o+=String(M.FIELD),o+=i),o}static decode(e,t){let r,n=0;const o=ce.decode(e.substr(n,ae.maxId),ae.maxId);n+=ae.maxId;const i=ce.decode(e.charAt(n),ae.encodingType);if(n+=ae.encodingType,i===M.RANGE){if(r=new se,1===t){if("1"===e.substr(n,1))throw new Y("Unable to decode default consent=1");n++}const o=ce.decode(e.substr(n,ae.numEntries),ae.numEntries);n+=ae.numEntries;for(let t=0;t<o;t++){const t=le.decode(e.charAt(n));n+=ae.singleOrRange;const o=ce.decode(e.substr(n,ae.vendorId),ae.vendorId);if(n+=ae.vendorId,t){const t=ce.decode(e.substr(n,ae.vendorId),ae.vendorId);n+=ae.vendorId;for(let e=o;e<=t;e++)r.set(e)}else r.set(o)}}else{const t=e.substr(n,o);n+=o,r=pe.decode(t,o)}return r.bitLength=n,r}static buildRangeEncoding(e){const t=e.length;let r=ce.encode(t,ae.numEntries);return e.forEach((e=>{const t=1===e.length;r+=le.encode(!t),r+=ce.encode(e[0],ae.vendorId),t||(r+=ce.encode(e[1],ae.vendorId))})),r}}function ve(){return{[te.version]:ce,[te.created]:ue,[te.lastUpdated]:ue,[te.cmpId]:ce,[te.cmpVersion]:ce,[te.consentScreen]:ce,[te.consentLanguage]:de,[te.vendorListVersion]:ce,[te.policyVersion]:ce,[te.isServiceSpecific]:le,[te.useNonStandardTexts]:le,[te.specialFeatureOptins]:pe,[te.purposeConsents]:pe,[te.purposeLegitimateInterests]:pe,[te.purposeOneTreatment]:le,[te.publisherCountryCode]:de,[te.vendorConsents]:fe,[te.vendorLegitimateInterests]:fe,[te.publisherRestrictions]:he,segmentType:ce,[te.vendorsDisclosed]:fe,[te.vendorsAllowed]:fe,[te.publisherConsents]:pe,[te.publisherLegitimateInterests]:pe,[te.numCustomPurposes]:ce,[te.publisherCustomConsents]:pe,[te.publisherCustomLegitimateInterests]:pe}}class ye{1={[k.CORE]:[te.version,te.created,te.lastUpdated,te.cmpId,te.cmpVersion,te.consentScreen,te.consentLanguage,te.vendorListVersion,te.purposeConsents,te.vendorConsents]};2={[k.CORE]:[te.version,te.created,te.lastUpdated,te.cmpId,te.cmpVersion,te.consentScreen,te.consentLanguage,te.vendorListVersion,te.policyVersion,te.isServiceSpecific,te.useNonStandardTexts,te.specialFeatureOptins,te.purposeConsents,te.purposeLegitimateInterests,te.purposeOneTreatment,te.publisherCountryCode,te.vendorConsents,te.vendorLegitimateInterests,te.publisherRestrictions],[k.VENDORS_DISCLOSED]:[te.vendorsDisclosed],[k.PUBLISHER_TC]:[te.publisherConsents,te.publisherLegitimateInterests,te.numCustomPurposes,te.publisherCustomConsents,te.publisherCustomLegitimateInterests],[k.VENDORS_ALLOWED]:[te.vendorsAllowed]}}class me{1=[k.CORE];2=[k.CORE];constructor(e,t){if(2===e.version)if(e.isServiceSpecific)this[2].push(k.VENDORS_DISCLOSED),this[2].push(k.PUBLISHER_TC);else{const r=!(!t||!t.isForVendors);r&&!0!==e[te.supportOOB]||this[2].push(k.VENDORS_DISCLOSED),r&&(e[te.supportOOB]&&e[te.vendorsAllowed].size>0&&this[2].push(k.VENDORS_ALLOWED),this[2].push(k.PUBLISHER_TC))}}}class ge{static fieldSequence=new ye;static encode(e,t){let r;try{r=this.fieldSequence[String(e.version)][t]}catch(r){throw new z(`Unable to encode version: ${e.version}, segment: ${t}`)}let n="";t!==k.CORE&&(n=ce.encode(ie.KEY_TO_ID[t],ae.segmentType));const o=ve();return r.forEach((r=>{const i=e[r],s=o[r];let a=ae[r];void 0===a&&this.isPublisherCustom(r)&&(a=Number(e[te.numCustomPurposes]));try{n+=s.encode(i,a)}catch(e){throw new z(`Error encoding ${t}->${r}: ${e.message}`)}})),Z.encode(n)}static decode(e,t,r){const n=Z.decode(e);let o=0;r===k.CORE&&(t.version=ce.decode(n.substr(o,ae[te.version]),ae[te.version])),r!==k.CORE&&(o+=ae.segmentType);const i=this.fieldSequence[String(t.version)][r],s=ve();return i.forEach((e=>{const r=s[e];let i=ae[e];if(void 0===i&&this.isPublisherCustom(e)&&(i=Number(t[te.numCustomPurposes])),0!==i){const s=n.substr(o,i);if(t[e]=r===fe?r.decode(s,t.version):r.decode(s,i),Number.isInteger(i))o+=i;else{if(!Number.isInteger(t[e].bitLength))throw new Y(e);o+=t[e].bitLength}}})),t}static isPublisherCustom(e){return 0===e.indexOf("publisherCustom")}}class be{static processor=[e=>e,(e,t)=>{e.publisherRestrictions.gvl=t,e.purposeLegitimateInterests.unset([1,3,4,5,6]);const r=new Map;return r.set("legIntPurposes",e.vendorLegitimateInterests),r.set("purposes",e.vendorConsents),r.forEach(((r,n)=>{r.forEach(((o,i)=>{if(o){const o=t.vendors[i];if(!o||o.deletedDate)r.unset(i);else if(0===o[n].length)if("legIntPurposes"===n&&0===o.purposes.length&&0===o.legIntPurposes.length&&o.specialPurposes.length>0)r.set(i);else if("legIntPurposes"===n&&o.purposes.length>0&&0===o.legIntPurposes.length&&o.specialPurposes.length>0)r.set(i);else if(e.isServiceSpecific)if(0===o.flexiblePurposes.length)r.unset(i);else{const t=e.publisherRestrictions.getRestrictions(i);let o=!1;for(let e=0,r=t.length;e<r&&!o;e++)o=t[e].restrictionType===j.REQUIRE_CONSENT&&"purposes"===n||t[e].restrictionType===j.REQUIRE_LI&&"legIntPurposes"===n;o||r.unset(i)}else r.unset(i)}}))})),e}];static process(e,t){const r=e.gvl;if(!r)throw new z("Unable to encode TCModel without a GVL");if(!r.isReady)throw new z("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(e=e.clone()).consentLanguage=r.language.slice(0,2).toUpperCase(),t?.version>0&&t?.version<=this.processor.length?e.version=t.version:e.version=this.processor.length;const n=e.version-1;if(!this.processor[n])throw new z(`Invalid version: ${e.version}`);return this.processor[n](e,r)}}class we{static absCall(e,t,r,n){return new Promise(((o,i)=>{const s=new XMLHttpRequest;s.withCredentials=r,s.addEventListener("load",(()=>{if(s.readyState==XMLHttpRequest.DONE)if(s.status>=200&&s.status<300){let e=s.response;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}o(e)}else i(new Error(`HTTP Status: ${s.status} response type: ${s.responseType}`))})),s.addEventListener("error",(()=>{i(new Error("error"))})),s.addEventListener("abort",(()=>{i(new Error("aborted"))})),null===t?s.open("GET",e,!0):s.open("POST",e,!0),s.responseType="json",s.timeout=n,s.ontimeout=()=>{i(new Error("Timeout "+n+"ms "+e))},s.send(t)}))}static post(e,t,r=!1,n=0){return this.absCall(e,JSON.stringify(t),r,n)}static fetch(e,t=!1,r=0){return this.absCall(e,null,t,r)}}class Se extends re{static LANGUAGE_CACHE=new Map;static CACHE=new Map;static LATEST_CACHE_KEY=0;static DEFAULT_LANGUAGE="EN";static consentLanguages=new ee;static baseUrl_;static set baseUrl(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new q("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");e.length>0&&"/"!==e[e.length-1]&&(e+="/"),this.baseUrl_=e}static get baseUrl(){return this.baseUrl_}static latestFilename="vendor-list.json";static versionedFilename="archives/vendor-list-v[VERSION].json";static languageFilename="purposes-[LANG].json";readyPromise;gvlSpecificationVersion;vendorListVersion;tcfPolicyVersion;lastUpdated;purposes;specialPurposes;features;specialFeatures;isReady_=!1;vendors_;vendorIds;fullVendorList;byPurposeVendorMap;bySpecialPurposeVendorMap;byFeatureVendorMap;bySpecialFeatureVendorMap;stacks;dataCategories;lang_;cacheLang_;isLatest=!1;constructor(e,t){super();let r=Se.baseUrl,n=t?.language;if(n)try{n=Se.consentLanguages.parseLanguage(n)}catch(e){throw new q("Error during parsing the language: "+e.message)}if(this.lang_=n||Se.DEFAULT_LANGUAGE,this.cacheLang_=n||Se.DEFAULT_LANGUAGE,this.isVendorList(e))this.populate(e),this.readyPromise=Promise.resolve();else{if(!r)throw new q("must specify GVL.baseUrl before loading GVL json");if(e>0){const t=e;Se.CACHE.has(t)?(this.populate(Se.CACHE.get(t)),this.readyPromise=Promise.resolve()):(r+=Se.versionedFilename.replace("[VERSION]",String(t)),this.readyPromise=this.fetchJson(r))}else Se.CACHE.has(Se.LATEST_CACHE_KEY)?(this.populate(Se.CACHE.get(Se.LATEST_CACHE_KEY)),this.readyPromise=Promise.resolve()):(this.isLatest=!0,this.readyPromise=this.fetchJson(r+Se.latestFilename))}}static emptyLanguageCache(e){let t=!1;return null==e&&Se.LANGUAGE_CACHE.size>0?(Se.LANGUAGE_CACHE=new Map,t=!0):"string"==typeof e&&this.consentLanguages.has(e.toUpperCase())&&(Se.LANGUAGE_CACHE.delete(e.toUpperCase()),t=!0),t}static emptyCache(e){let t=!1;return Number.isInteger(e)&&e>=0?(Se.CACHE.delete(e),t=!0):void 0===e&&(Se.CACHE=new Map,t=!0),t}cacheLanguage(){Se.LANGUAGE_CACHE.has(this.cacheLang_)||Se.LANGUAGE_CACHE.set(this.cacheLang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,dataCategories:this.dataCategories})}async fetchJson(e){try{this.populate(await we.fetch(e))}catch(e){throw new q(e.message)}}getJson(){return{gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.clonePurposes(),specialPurposes:this.cloneSpecialPurposes(),features:this.cloneFeatures(),specialFeatures:this.cloneSpecialFeatures(),stacks:this.cloneStacks(),...this.dataCategories?{dataCategories:this.cloneDataCategories()}:{},vendors:this.cloneVendors()}}cloneSpecialFeatures(){const e={};for(const t of Object.keys(this.specialFeatures))e[t]=Se.cloneFeature(this.specialFeatures[t]);return e}cloneFeatures(){const e={};for(const t of Object.keys(this.features))e[t]=Se.cloneFeature(this.features[t]);return e}cloneStacks(){const e={};for(const t of Object.keys(this.stacks))e[t]=Se.cloneStack(this.stacks[t]);return e}cloneDataCategories(){const e={};for(const t of Object.keys(this.dataCategories))e[t]=Se.cloneDataCategory(this.dataCategories[t]);return e}cloneSpecialPurposes(){const e={};for(const t of Object.keys(this.specialPurposes))e[t]=Se.clonePurpose(this.specialPurposes[t]);return e}clonePurposes(){const e={};for(const t of Object.keys(this.purposes))e[t]=Se.clonePurpose(this.purposes[t]);return e}static clonePurpose(e){return{id:e.id,name:e.name,description:e.description,...e.descriptionLegal?{descriptionLegal:e.descriptionLegal}:{},...e.illustrations?{illustrations:Array.from(e.illustrations)}:{}}}static cloneFeature(e){return{id:e.id,name:e.name,description:e.description,...e.descriptionLegal?{descriptionLegal:e.descriptionLegal}:{},...e.illustrations?{illustrations:Array.from(e.illustrations)}:{}}}static cloneDataCategory(e){return{id:e.id,name:e.name,description:e.description}}static cloneStack(e){return{id:e.id,name:e.name,description:e.description,purposes:Array.from(e.purposes),specialFeatures:Array.from(e.specialFeatures)}}static cloneDataRetention(e){return{..."number"==typeof e.stdRetention?{stdRetention:e.stdRetention}:{},purposes:{...e.purposes},specialPurposes:{...e.specialPurposes}}}static cloneVendorUrls(e){return e.map((e=>({langId:e.langId,privacy:e.privacy,...e.legIntClaim?{legIntClaim:e.legIntClaim}:{}})))}static cloneVendor(e){return{id:e.id,name:e.name,purposes:Array.from(e.purposes),legIntPurposes:Array.from(e.legIntPurposes),flexiblePurposes:Array.from(e.flexiblePurposes),specialPurposes:Array.from(e.specialPurposes),features:Array.from(e.features),specialFeatures:Array.from(e.specialFeatures),...e.overflow?{overflow:{httpGetLimit:e.overflow.httpGetLimit}}:{},..."number"==typeof e.cookieMaxAgeSeconds||null===e.cookieMaxAgeSeconds?{cookieMaxAgeSeconds:e.cookieMaxAgeSeconds}:{},...void 0!==e.usesCookies?{usesCookies:e.usesCookies}:{},...e.policyUrl?{policyUrl:e.policyUrl}:{},...void 0!==e.cookieRefresh?{cookieRefresh:e.cookieRefresh}:{},...void 0!==e.usesNonCookieAccess?{usesNonCookieAccess:e.usesNonCookieAccess}:{},...e.dataRetention?{dataRetention:this.cloneDataRetention(e.dataRetention)}:{},...e.urls?{urls:this.cloneVendorUrls(e.urls)}:{},...e.dataDeclaration?{dataDeclaration:Array.from(e.dataDeclaration)}:{},...e.deviceStorageDisclosureUrl?{deviceStorageDisclosureUrl:e.deviceStorageDisclosureUrl}:{},...e.deletedDate?{deletedDate:e.deletedDate}:{}}}cloneVendors(){const e={};for(const t of Object.keys(this.fullVendorList))e[t]=Se.cloneVendor(this.fullVendorList[t]);return e}async changeLanguage(e){let t=e;try{t=Se.consentLanguages.parseLanguage(e)}catch(e){throw new q("Error during parsing the language: "+e.message)}const r=e.toUpperCase();if((t.toLowerCase()!==Se.DEFAULT_LANGUAGE.toLowerCase()||Se.LANGUAGE_CACHE.has(r))&&t!==this.lang_)if(this.lang_=t,Se.LANGUAGE_CACHE.has(r)){const e=Se.LANGUAGE_CACHE.get(r);for(const t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}else{const e=Se.baseUrl+Se.languageFilename.replace("[LANG]",this.lang_.toLowerCase());try{await this.fetchJson(e),this.cacheLang_=r,this.cacheLanguage()}catch(e){throw new q("unable to load language: "+e.message)}}}get language(){return this.lang_}isVendorList(e){return void 0!==e&&void 0!==e.vendors}populate(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.dataCategories=e.dataCategories,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&Se.CACHE.set(Se.LATEST_CACHE_KEY,this.getJson()),Se.CACHE.has(this.vendorListVersion)||Se.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}mapVendors(e){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((e=>{this.byPurposeVendorMap[e]={legInt:new Set,consent:new Set,flexible:new Set}})),Object.keys(this.specialPurposes).forEach((e=>{this.bySpecialPurposeVendorMap[e]=new Set})),Object.keys(this.features).forEach((e=>{this.byFeatureVendorMap[e]=new Set})),Object.keys(this.specialFeatures).forEach((e=>{this.bySpecialFeatureVendorMap[e]=new Set})),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map((e=>+e))),this.vendorIds=new Set(e),this.vendors_=e.reduce(((e,t)=>{const r=this.vendors_[String(t)];return r&&void 0===r.deletedDate&&(r.purposes.forEach((e=>{this.byPurposeVendorMap[String(e)].consent.add(t)})),r.specialPurposes.forEach((e=>{this.bySpecialPurposeVendorMap[String(e)].add(t)})),r.legIntPurposes.forEach((e=>{this.byPurposeVendorMap[String(e)].legInt.add(t)})),r.flexiblePurposes&&r.flexiblePurposes.forEach((e=>{this.byPurposeVendorMap[String(e)].flexible.add(t)})),r.features.forEach((e=>{this.byFeatureVendorMap[String(e)].add(t)})),r.specialFeatures.forEach((e=>{this.bySpecialFeatureVendorMap[String(e)].add(t)})),e[t]=r),e}),{})}getFilteredVendors(e,t,r,n){const o=e.charAt(0).toUpperCase()+e.slice(1);let i;const s={};return i="purpose"===e&&r?this["by"+o+"VendorMap"][String(t)][r]:this["by"+(n?"Special":"")+o+"VendorMap"][String(t)],i.forEach((e=>{s[String(e)]=this.vendors[String(e)]})),s}getVendorsWithConsentPurpose(e){return this.getFilteredVendors("purpose",e,"consent")}getVendorsWithLegIntPurpose(e){return this.getFilteredVendors("purpose",e,"legInt")}getVendorsWithFlexiblePurpose(e){return this.getFilteredVendors("purpose",e,"flexible")}getVendorsWithSpecialPurpose(e){return this.getFilteredVendors("purpose",e,void 0,!0)}getVendorsWithFeature(e){return this.getFilteredVendors("feature",e)}getVendorsWithSpecialFeature(e){return this.getFilteredVendors("feature",e,void 0,!0)}get vendors(){return this.vendors_}narrowVendorsTo(e){this.mapVendors(e)}get isReady(){return this.isReady_}clone(){const e=new Se(this.getJson());return this.lang_!==Se.DEFAULT_LANGUAGE&&e.changeLanguage(this.lang_),e}static isInstanceOf(e){return"object"==typeof e&&"function"==typeof e.narrowVendorsTo}}class Ee extends re{static consentLanguages=Se.consentLanguages;isServiceSpecific_=!0;supportOOB_=!1;useNonStandardTexts_=!1;purposeOneTreatment_=!1;publisherCountryCode_="AA";version_=2;consentScreen_=0;policyVersion_=5;consentLanguage_="EN";cmpId_=0;cmpVersion_=0;vendorListVersion_=0;numCustomPurposes_=0;gvl_;created;lastUpdated;specialFeatureOptins=new se;purposeConsents=new se;purposeLegitimateInterests=new se;publisherConsents=new se;publisherLegitimateInterests=new se;publisherCustomConsents=new se;publisherCustomLegitimateInterests=new se;customPurposes;vendorConsents=new se;vendorLegitimateInterests=new se;vendorsDisclosed=new se;vendorsAllowed=new se;publisherRestrictions=new oe;constructor(e){super(),e&&(this.gvl=e),this.updated()}set gvl(e){Se.isInstanceOf(e)||(e=new Se(e)),this.gvl_=e,this.publisherRestrictions.gvl=e}get gvl(){return this.gvl_}set cmpId(e){if(e=Number(e),!(Number.isInteger(e)&&e>1))throw new X("cmpId",e);this.cmpId_=e}get cmpId(){return this.cmpId_}set cmpVersion(e){if(e=Number(e),!(Number.isInteger(e)&&e>-1))throw new X("cmpVersion",e);this.cmpVersion_=e}get cmpVersion(){return this.cmpVersion_}set consentScreen(e){if(e=Number(e),!(Number.isInteger(e)&&e>-1))throw new X("consentScreen",e);this.consentScreen_=e}get consentScreen(){return this.consentScreen_}set consentLanguage(e){this.consentLanguage_=e}get consentLanguage(){return this.consentLanguage_}set publisherCountryCode(e){if(!/^([A-z]){2}$/.test(e))throw new X("publisherCountryCode",e);this.publisherCountryCode_=e.toUpperCase()}get publisherCountryCode(){return this.publisherCountryCode_}set vendorListVersion(e){if((e=0|Number(e))<0)throw new X("vendorListVersion",e);this.vendorListVersion_=e}get vendorListVersion(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_}set policyVersion(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new X("policyVersion",e)}get policyVersion(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_}set version(e){this.version_=parseInt(e,10)}get version(){return this.version_}set isServiceSpecific(e){this.isServiceSpecific_=e}get isServiceSpecific(){return this.isServiceSpecific_}set useNonStandardTexts(e){this.useNonStandardTexts_=e}get useNonStandardTexts(){return this.useNonStandardTexts_}set supportOOB(e){this.supportOOB_=e}get supportOOB(){return this.supportOOB_}set purposeOneTreatment(e){this.purposeOneTreatment_=e}get purposeOneTreatment(){return this.purposeOneTreatment_}setAllVendorConsents(){this.vendorConsents.set(this.gvl.vendors)}unsetAllVendorConsents(){this.vendorConsents.empty()}setAllVendorsDisclosed(){this.vendorsDisclosed.set(this.gvl.vendors)}unsetAllVendorsDisclosed(){this.vendorsDisclosed.empty()}setAllVendorsAllowed(){this.vendorsAllowed.set(this.gvl.vendors)}unsetAllVendorsAllowed(){this.vendorsAllowed.empty()}setAllVendorLegitimateInterests(){this.vendorLegitimateInterests.set(this.gvl.vendors)}unsetAllVendorLegitimateInterests(){this.vendorLegitimateInterests.empty()}setAllPurposeConsents(){this.purposeConsents.set(this.gvl.purposes)}unsetAllPurposeConsents(){this.purposeConsents.empty()}setAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.set(this.gvl.purposes)}unsetAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.empty()}setAllSpecialFeatureOptins(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}unsetAllSpecialFeatureOptins(){this.specialFeatureOptins.empty()}setAll(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}unsetAll(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}get numCustomPurposes(){let e=this.numCustomPurposes_;if("object"==typeof this.customPurposes){const t=Object.keys(this.customPurposes).sort(((e,t)=>Number(e)-Number(t)));e=parseInt(t.pop(),10)}return e}set numCustomPurposes(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new X("numCustomPurposes",e)}updated(){const e=new Date,t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()));this.created=t,this.lastUpdated=t}}class Oe{static encode(e,t){let r,n="";return e=be.process(e,t),r=Array.isArray(t?.segments)?t.segments:new me(e,t)[""+e.version],r.forEach(((t,o)=>{let i="";o<r.length-1&&(i="."),n+=ge.encode(e,t)+i})),n}static decode(e,t){const r=e.split("."),n=r.length;t||(t=new Ee);for(let e=0;e<n;e++){const n=r[e],o=Z.decode(n.charAt(0)).substr(0,ae.segmentType),i=ie.ID_TO_KEY[ce.decode(o,ae.segmentType).toString()];ge.decode(n,t,i)}return t}}class Le extends N{respond(){const e=F.tcModel,t=e.vendorListVersion;let r;void 0===this.param&&(this.param=t),r=this.param===t&&e.gvl?e.gvl:new Se(this.param),r.readyPromise.then((()=>{this.invokeCallback(r.getJson())}))}}class Ce extends D{respond(){this.listenerId=F.eventQueue.add({callback:this.callback,param:this.param,next:this.next}),super.respond()}}class Ie extends N{respond(){this.invokeCallback(F.eventQueue.remove(this.param))}}class Ve{static[A.PING]=Q;static[A.GET_TC_DATA]=D;static[A.GET_IN_APP_TC_DATA]=K;static[A.GET_VENDOR_LIST]=Le;static[A.ADD_EVENT_LISTENER]=Ce;static[A.REMOVE_EVENT_LISTENER]=Ie}class Ae{static set_=new Set([0,2,void 0,null]);static has(e){return"string"==typeof e&&(e=Number(e)),this.set_.has(e)}}const Pe="__tcfapi";class Te{callQueue;customCommands;constructor(e){if(e){let t=A.ADD_EVENT_LISTENER;if(e?.[t])throw new Error(`Built-In Custom Commmand for ${t} not allowed: Use ${A.GET_TC_DATA} instead`);if(t=A.REMOVE_EVENT_LISTENER,e?.[t])throw new Error(`Built-In Custom Commmand for ${t} not allowed`);e?.[A.GET_TC_DATA]&&(e[A.ADD_EVENT_LISTENER]=e[A.GET_TC_DATA],e[A.REMOVE_EVENT_LISTENER]=e[A.GET_TC_DATA]),this.customCommands=e}try{this.callQueue=window[Pe]()||[]}catch(e){this.callQueue=[]}finally{window[Pe]=this.apiCall.bind(this),this.purgeQueuedCalls()}}apiCall(e,t,r,...n){if("string"!=typeof e&&"function"==typeof r)r(null,!1);else if(Ae.has(t)){if("function"!=typeof r)throw new Error("invalid callback function");F.disabled?r(new H,!1):this.isCustomCommand(e)||this.isBuiltInCommand(e)?this.isCustomCommand(e)&&!this.isBuiltInCommand(e)?this.customCommands[e](r,...n):e===A.PING?this.isCustomCommand(e)?new Ve[e](this.customCommands[e],n[0],null,r):new Ve[e](r,n[0]):void 0===F.tcModel?this.callQueue.push([e,t,r,...n]):this.isCustomCommand(e)&&this.isBuiltInCommand(e)?new Ve[e](this.customCommands[e],n[0],null,r):new Ve[e](r,n[0]):r(null,!1)}else r(null,!1)}purgeQueuedCalls(){const e=this.callQueue;this.callQueue=[],e.forEach((e=>{window[Pe](...e)}))}isCustomCommand(e){return this.customCommands&&"function"==typeof this.customCommands[e]}isBuiltInCommand(e){return void 0!==Ve[e]}}class xe{callResponder;isServiceSpecific;numUpdates=0;constructor(e,t,r=!0,n){this.throwIfInvalidInt(e,"cmpId",2),this.throwIfInvalidInt(t,"cmpVersion",0),F.cmpId=e,F.cmpVersion=t,F.tcfPolicyVersion=5,this.isServiceSpecific=!!r,this.callResponder=new Te(n)}throwIfInvalidInt(e,t,r){if(!("number"==typeof e&&Number.isInteger(e)&&e>=r))throw new Error(`Invalid ${t}: ${e}`)}update(e,t=!1){if(F.disabled)throw new Error("CmpApi Disabled");F.cmpStatus=P.LOADED,t?(F.displayStatus=T.VISIBLE,F.eventStatus=x.CMP_UI_SHOWN):void 0===F.tcModel?(F.displayStatus=T.DISABLED,F.eventStatus=x.TC_LOADED):(F.displayStatus=T.HIDDEN,F.eventStatus=x.USER_ACTION_COMPLETE),F.gdprApplies=null!==e,F.gdprApplies?(""===e?(F.tcModel=new Ee,F.tcModel.cmpId=F.cmpId,F.tcModel.cmpVersion=F.cmpVersion):F.tcModel=Oe.decode(e),F.tcModel.isServiceSpecific=this.isServiceSpecific,F.tcfPolicyVersion=Number(F.tcModel.policyVersion),F.tcString=e):F.tcModel=null,0===this.numUpdates?this.callResponder.purgeQueuedCalls():F.eventQueue.exec(),this.numUpdates++}disable(){F.disabled=!0,F.cmpStatus=P.ERROR}}var je,_e=r(45),ke=r.n(_e);function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ue=null===(je=r.g.location)||void 0===je||null===(je=je.search)||void 0===je||null===(je=je.substr(1))||void 0===je||null===(je=je.split("&"))||void 0===je?void 0:je.some((function(e){var t,r,n=(t=e.split("="),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return"adsDebug"===decodeURIComponent(o)&&(!0===i||"all"===i||decodeURIComponent(i).split(",").includes("tcfv2"))}));function Re(){return Ue?function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=console).log.apply(e,["[mol-ads-cmp]"].concat(r))}:function(){}}var Ne=[{type:"purposes",id:1,isConsentImmutable:!0},{type:"stacks",id:10,isConsentImmutable:!0,isLIImmutable:!1},{type:"stacks",id:45,isConsentImmutable:!0,isLIImmutable:!1},{type:"stacks",id:14,isConsentImmutable:!1,isLIImmutable:!1},{type:"specialFeatures",id:1,isOptInImmutable:!0},{type:"specialFeatures",id:2,isOptInImmutable:!0}],De=[{type:"purposes",id:1},{type:"stacks",id:42}];function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Fe(e){return function(e){if(Array.isArray(e))return He(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Be(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,t){if(e){if("string"==typeof e)return He(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?He(e,t):void 0}}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function We(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$e(n.key),n)}}function $e(e){var t=function(e,t){if("object"!=Ge(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ge(t)?t:t+""}function Je(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var Qe=Re(),Ke=new WeakSet,Ye=function(){return e=function e(t){var r=t.gvl,n=t.molGvlVersion,o=t.model,i=t.specialPurposeOnlyDeclared,s=void 0===i?[]:i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}(this,Ke),this.gvl=r,this.model=o,this.molGvlVersion=n.replace(/\//g,"."),this.specialPurposeOnlyDeclared=s,this.byPurposeVendorMap=this.byPurposeVendorMap.bind(this),this.gvlIsReady=this.gvlIsReady.bind(this),this.updated=this.updated.bind(this),this.tcString=this.tcString.bind(this),this.updateUserPreferences=this.updateUserPreferences.bind(this),this.consentAll=this.consentAll.bind(this),this.dissentAll=this.dissentAll.bind(this),this.hasUserDissentedToAll=this.hasUserDissentedToAll.bind(this),this.hasUserConsentedToAll=this.hasUserConsentedToAll.bind(this),this.consentedVendorCheck=this.consentedVendorCheck.bind(this),this.model.setAllVendorsDisclosed()},(t=[{key:"reload",value:function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||Be(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(wt(this.gvl,e),2),r=t[0],n=t[1];Qe("reloading tcModel",e,r),this.model=r,this.specialPurposeOnlyDeclared=n}},{key:"byPurposeVendorMap",value:function(){return this.model.gvl.byPurposeVendorMap}},{key:"gvlIsReady",value:function(){return this.model.gvl.readyPromise}},{key:"updated",value:function(){this.model.updated()}},{key:"tcString",value:function(){return Qe("encoding",this.model),Oe.encode(this.model)}},{key:"updateUserPreferences",value:function(e){var t=e.vendorConsents,r=e.vendorLegitimateInterests,n=e.purposeConsents,o=e.purposeLegitimateInterests,i=e.specialFeatureOptins,s=e.consentScreen,a=e.created,c=e.lastUpdated;this.model.vendorConsents.empty(),this.model.vendorConsents.set(t),Je(Ke,this,ze).call(this,r),this.model.purposeConsents.empty(),this.model.purposeConsents.set(n),this.model.purposeLegitimateInterests.empty(),this.model.purposeLegitimateInterests.set(o),this.model.specialFeatureOptins.empty(),this.model.specialFeatureOptins.set(i),this.model.consentScreen=s,this.model.updated(),a&&(this.model.created=a),c&&(this.model.lastUpdated=c),this.model=Oe.decode(Oe.encode(this.model)),this.model.gvl=this.gvl}},{key:"consentAll",value:function(e){var t=e.consentScreen;this.model.setAll(),Je(Ke,this,ze).call(this),this.model.consentScreen=t,this.model.updated(),this.model=Oe.decode(Oe.encode(this.model)),this.model.gvl=this.gvl}},{key:"dissentAll",value:function(e){var t=e.consentScreen;this.model.unsetAll(),this.model.setAllPurposeLegitimateInterests(),Je(Ke,this,ze).call(this),this.model.consentScreen=t,this.model.updated(),this.model=Oe.decode(Oe.encode(this.model)),this.model.gvl=this.gvl}},{key:"hasUserDissentedToAll",value:function(){return!this.model.specialFeatureOptins.size&&!this.model.purposeConsents.size&&!this.model.vendorConsents.size}},{key:"hasUserConsentedToAll",value:function(){return Je(Ke,this,qe).call(this)&&Je(Ke,this,Xe).call(this)&&Je(Ke,this,Ze).call(this)}},{key:"hasUserConsentedToMandatory",value:function(){var e=this,t=Ne.filter((function(e){return"purposes"===e.type})).map((function(e){return e.id})),r=Ne.filter((function(e){var t=e.type,r=e.isConsentImmutable;return"stacks"===t&&r})).map((function(t){var r,n=t.id;return null===(r=e.model.gvl.stacks)||void 0===r||null===(r=r[n])||void 0===r?void 0:r.purposes})).flat(),n=[].concat(Fe(t),Fe(r)).every((function(t){return e.model.purposeConsents.has(t)}));return Je(Ke,this,qe).call(this)&&n&&Je(Ke,this,Ze).call(this)}},{key:"consentedVendorCheck",value:function(){var e=this,t=Object.keys(this.model.gvl.purposes).map((function(e){return parseInt(e)})),r=this.model.publisherRestrictions.getRestrictions(),n=Oe.decode(Oe.encode(this.model));n.gvl=this.gvl;var o=new Set(t.filter((function(e){return!n.purposeConsents.has(e)})).map((function(t){return Array.from(e.model.gvl.byPurposeVendorMap[t]&&e.model.gvl.byPurposeVendorMap[t].consent||[])})).flat());return Array.from(this.model.gvl.vendorIds).map((function(e){var t=function(e){return r.some((function(t){return n.publisherRestrictions.vendorHasRestriction(e,t)&&!n.purposeConsents.has(t.purposeId)}))}(e),i=r.some((function(t){return n.publisherRestrictions.vendorHasRestriction(e,t)})),s=(i?n.vendorConsents.has(e):n.vendorConsents.has(e)||n.vendorLegitimateInterests.has(e))&&!o.has(e)&&!t;return{id:e,hasConsented:s,consentedTests:{consented:n.vendorConsents.has(e),legitimateInterest:n.vendorLegitimateInterests.has(e),vendorRestrictedToConsent:i,dissentedByPurpose:o.has(e),constrainedByFlexPurpose:t}}}))}},{key:"consentedVendors",value:function(){return this.consentedVendorCheck().filter((function(e){return e.hasConsented})).map((function(e){return e.id}))}},{key:"consentedVendorsDetails",value:function(){return this.consentedVendorCheck()}}])&&We(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function ze(e){if(this.model.vendorLegitimateInterests.empty(),e)this.model.vendorLegitimateInterests.set(e);else{var t=Object.values(this.model.gvl.vendors).filter((function(e){return e.legIntPurposes.length>0&&!e.deletedDate})).map((function(e){return e.id}));this.model.vendorLegitimateInterests.set(t)}this.model.vendorLegitimateInterests.set(this.specialPurposeOnlyDeclared.map((function(e){return e.id})))}function qe(){var e=this;return Object.keys(this.model.gvl.vendors).filter((function(t){return e.model.gvl.vendors[t].purposes.length>0})).map((function(e){return parseInt(e)})).every((function(t){return e.model.vendorConsents.has(t)}))}function Xe(){var e=this;return Object.keys(this.model.gvl.purposes).map((function(e){return parseInt(e)})).every((function(t){return e.model.purposeConsents.has(t)}))}function Ze(){var e=this;return Object.keys(this.model.gvl.specialFeatures).map((function(e){return parseInt(e)})).every((function(t){return e.model.specialFeatureOptins.has(t)}))}const et=JSON.parse('{"r2":{"version":16}}');function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){ot(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ot(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=tt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function it(){it=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,s=Object.create(i.prototype),a=new T(n||[]);return o(s,"_invoke",{value:I(e,r,a)}),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",h="suspendedYield",f="executing",v="completed",y={};function m(){}function g(){}function b(){}var w={};u(w,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(x([])));E&&E!==r&&n.call(E,s)&&(w=E);var O=b.prototype=m.prototype=Object.create(w);function L(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,s,a){var c=p(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==tt(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function I(t,r,n){var o=d;return function(i,s){if(o===f)throw Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var c=V(a,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var u=p(t,r,n);if("normal"===u.type){if(o=n.done?v:h,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function V(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,V(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var s=i.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function x(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(tt(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},L(C.prototype),u(C.prototype,a,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new C(l(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},L(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return a.type="throw",a.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:x(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function st(e){return function(e){if(Array.isArray(e))return ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||at(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){if(e){if("string"==typeof e)return ct(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ct(e,t):void 0}}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ut(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function lt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){ut(i,n,o,s,a,"next",e)}function a(e){ut(i,n,o,s,a,"throw",e)}s(void 0)}))}}var pt=et.r2,dt=Re();function ht(e){return ft.apply(this,arguments)}function ft(){return(ft=lt(it().mark((function e(t){var r,n,o,i,s,a,c;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.gvlRaw,n=t.publisherConsents,o=t.publisherRestrictions,dt("creating TCModel for new user"),(i=new Ee).cmpId=27,i.cmpVersion=pt.version||2,i.isServiceSpecific=!0,i.publisherCountryCode="GB",s=new Se(r.json),i.gvl=s,i.publisherConsents.set(n.purposes||[1,2,3,4,5,6,7,8,9,10]),i.publisherLegitimateInterests.set(n.legIntPurposes||[5,6,8,10]),e.next=13,i.gvl.readyPromise;case 13:return a=Object.values(i.gvl.vendors).map((function(e){var t=e.id,r=e.flexiblePurposes,n=e.legIntPurposes;return{vendorId:t,flexiblePurposes:new Set(r),legIntPurposes:new Set(n)}})),2===s.tcfPolicyVersion&&o.forEach((function(e){var t=new ne;t.purposeId=e,t.restrictionType=j.REQUIRE_CONSENT,a.forEach((function(r){var n=r.vendorId,o=r.flexiblePurposes,s=r.legIntPurposes;try{o.has(e)&&s.has(e)&&(dt("restricting purposeId: ".concat(e," for vendorId: ").concat(n)),i.publisherRestrictions.add(n,t))}catch(t){dt("unable to restrict",e,n)}}))})),c=Object.values(i.gvl.vendors).filter((function(e){return 0===e.purposes.length&&0===e.legIntPurposes.length&&e.specialPurposes.length>0})),dt("specialPurposeOnly",c),e.abrupt("return",new Ye({gvl:s,molGvlVersion:r.version.toString(),model:i,specialPurposeOnlyDeclared:c}));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(e,t){var r,n,o=new Se(e.json),i=(r=wt(o,t),n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(r,n)||at(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=i[0],a=i[1];return new Ye({gvl:o,molGvlVersion:e.version.toString(),model:s,specialPurposeOnlyDeclared:a})}function yt(e){return mt.apply(this,arguments)}function mt(){return(mt=lt(it().mark((function e(t){var r,n,o,i,s,a,c,u;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.gvlRaw,n=t.existingTcModel,o=t.keepDate,i=void 0!==o&&o,s=t.publisherRestrictions,a=t.publisherConsents,e.next=3,ht({gvlRaw:r,publisherRestrictions:s,publisherConsents:a});case 3:return c=e.sent,u=gt(n),i&&(u=nt(nt({},u),{},{created:n.model.created,lastUpdated:n.model.lastUpdated})),c.updateUserPreferences(u),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gt(e){return{consentScreen:e.model.consentScreen,vendorConsents:t("vendorConsents"),vendorLegitimateInterests:t("vendorLegitimateInterests"),purposeConsents:t("purposeConsents"),purposeLegitimateInterests:t("purposeLegitimateInterests"),specialFeatureOptins:t("specialFeatureOptins")};function t(t){return Array.from(e.model[t].set_).map((function(e){return parseInt(e)}))}}function bt(e){var t=e.existingGvlRaw,r=e.newGvlRaw,n=vt(t,e.tcString),o={purposes:st(n.model.publisherConsents.values()),legIntPurposes:st(n.model.publisherLegitimateInterests.values())},i=n.model.publisherRestrictions.getPurposes();return yt({gvlRaw:r,existingTcModel:n,keepDate:!0,publisherRestrictions:i,publisherConsents:o})}function wt(e,t){dt("creating TCModel from tcString");var r=Oe.decode(t);0===r.consentScreen&&(r.consentScreen=1),r.gvl=e;var n=Object.values(r.gvl.vendors).filter((function(e){return 0===e.purposes.length&&0===e.legIntPurposes.length&&e.specialPurposes.length>0}));return dt("specialPurposeOnly",n),[r,n]}var St=function(){var e=lt(it().mark((function e(t){var r,n,o,i,s,a,c;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.gvl,n=t.newGvl,o=t.type,i=t.tcString,s=t.existingTcModel,a=t.publisherRestrictions,c=t.publisherConsents,e.t0=o,e.next="newUser"===e.t0?4:"existingUser"===e.t0?8:"repromptedUser"===e.t0?12:"exitingUserSimplifiedGvl"===e.t0?16:20;break;case 4:if(!r){e.next=7;break}return dt("newUser"),e.abrupt("return",ht({gvlRaw:r,publisherConsents:c,publisherRestrictions:a}));case 7:case 11:case 15:case 19:return e.abrupt("break",20);case 8:if(!r||!i){e.next=11;break}return dt("existingUser"),e.abrupt("return",vt(r,i));case 12:if(!n||!s){e.next=15;break}return dt("repromptedUser"),e.abrupt("return",yt({gvlRaw:n,existingTcModel:s,keepDate:!1,publisherRestrictions:a,publisherConsents:c}));case 16:if(!(r&&n&&i)){e.next=19;break}return dt("exitingUserSimplifiedGvl"),e.abrupt("return",bt({existingGvlRaw:r,newGvlRaw:n,tcString:i}));case 20:return e.abrupt("return",ht({gvlRaw:r,publisherRestrictions:a,publisherConsents:c}));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ot(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ot(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function Ct(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kt(n.key),n)}}function It(e,t,r){Vt(e,t),t.set(e,r)}function Vt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function At(e,t){return e.get(Tt(e,t))}function Pt(e,t,r){return e.set(Tt(e,t),r),r}function Tt(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){_t(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _t(e,t,r){return(t=kt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kt(e){var t=function(e,t){if("object"!=Lt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Lt(t)?t:t+""}var Mt=new WeakMap,Ut=new WeakMap,Rt=new WeakMap,Nt=new WeakMap,Dt=new WeakMap,Gt=new WeakSet,Ft=function(){return e=function e(t){var r,n=t.vendorList,o=t.consentString,i=t.vendorListVersion;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Vt(this,r=Gt),r.add(this),It(this,Mt,void 0),It(this,Ut,void 0),It(this,Rt,void 0),It(this,Nt,void 0),It(this,Dt,void 0),Pt(Rt,this,n.reduce((function(e,t){var r=t.provider_id,n=t.provider_name,o=t.policy_url;return jt(jt({},e),{},_t({},r,{id:r,name:n,policyUrl:o}))}),{})),Pt(Dt,this,Object.keys(At(Rt,this)).map((function(e){return parseInt(e)})));var s=new Set(At(Dt,this));Pt(Mt,this,{}),this.updateModel=this.updateModel.bind(this),this.getConsents=this.getConsents.bind(this),Pt(Ut,this,"1~".concat(o?o.substr(2).split(".").map((function(e){return parseInt(e)})).filter((function(e){return e})).filter((function(e){return s.has(e)})).join("."):"")),Pt(Mt,this,Tt(Gt,this,Ht).call(this)),Pt(Nt,this,i)},(t=[{key:"updateModel",value:function(e){Pt(Mt,this,e),Pt(Ut,this,Tt(Gt,this,Bt).call(this))}},{key:"getConsents",value:function(){return At(Mt,this)}},{key:"getConsentString",value:function(){return At(Ut,this)}},{key:"consentToAll",value:function(){Pt(Mt,this,Object.keys(At(Rt,this)).reduce((function(e,t){return jt(jt({},e),{},_t({},t,{consent:!0}))}),{})),Pt(Ut,this,Tt(Gt,this,Bt).call(this))}},{key:"dissentToAll",value:function(){Pt(Mt,this,{}),Pt(Ut,this,Tt(Gt,this,Bt).call(this))}},{key:"hasUserConsentedToAll",value:function(){var e=this;return Object.keys(At(Rt,this)).every((function(t){return At(Mt,e)[t]&&At(Mt,e)[t].consent}))}},{key:"hasUserDissentedToAll",value:function(){var e=this;return Object.keys(At(Rt,this)).every((function(t){return!(At(Mt,e)[t]&&At(Mt,e)[t].consent)}))}},{key:"getUiModel",value:function(){return{cvl:At(Rt,this),consents:this.getConsents(),vendorIds:At(Dt,this)}}},{key:"getVendors",value:function(){return At(Rt,this)}},{key:"getVendorListVersion",value:function(){return At(Nt,this)}}])&&Ct(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Bt(){var e;if(e=At(Mt,this),!Object.keys(e).length)return"1~";var t=Object.entries(At(Mt,this)).filter((function(e){var t=Et(e,2);return t[0],t[1].consent})).map((function(e){var t=Et(e,2),r=t[0];return t[1],r})).join(".");return"1~".concat(t)}function Ht(){return"1~"===At(Ut,this)?{}:At(Ut,this).substr(2).split(".").map((function(e){return parseInt(e)})).filter((function(e){return e})).reduce((function(e,t){return jt(jt({},e),_t({},t,{consent:!0}))}),{})}var Wt=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};function $t(e){return 4===e.length}function Jt(e){return 3===e.length}function Qt(e,t){if($t(e)){var r=Wt(e,4),n=r[0],o=r[2],i=r[3];return"".concat(n,"/").concat(t,"/").concat(o,"/").concat(i)}if(function(e){return 2===e.length}(e))return n=Wt(e,1)[0],"".concat(n,"/").concat(t);if(Jt(e)){var s=Wt(e,3);return o=s[1],i=s[2],"".concat(t,"/").concat(o,"/").concat(i)}return"".concat(t)}function Kt(e){if($t(e)){var t=Wt(e,2),r=t[0],n=t[1];return["".concat(r,"/").concat(n),[r,n]]}if(Jt(e))return n=Wt(e,1)[0],["".concat(n),[n]]}function Yt(e){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}function zt(){zt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,s=Object.create(i.prototype),a=new T(n||[]);return o(s,"_invoke",{value:I(e,r,a)}),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",h="suspendedYield",f="executing",v="completed",y={};function m(){}function g(){}function b(){}var w={};u(w,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(x([])));E&&E!==r&&n.call(E,s)&&(w=E);var O=b.prototype=m.prototype=Object.create(w);function L(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,s,a){var c=p(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Yt(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function I(t,r,n){var o=d;return function(i,s){if(o===f)throw Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var c=V(a,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var u=p(t,r,n);if("normal"===u.type){if(o=n.done?v:h,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function V(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,V(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var s=i.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function x(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Yt(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},L(C.prototype),u(C.prototype,a,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new C(l(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},L(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return a.type="throw",a.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:x(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function qt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Xt(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function Xt(e,t){if(e){if("string"==typeof e)return Zt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zt(e,t):void 0}}function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function er(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function tr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){er(i,n,o,s,a,"next",e)}function a(e){er(i,n,o,s,a,"throw",e)}s(void 0)}))}}var rr=Re();function nr(e){return or.apply(this,arguments)}function or(){return(or=tr(zt().mark((function e(t){var r,n,o,i,s;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t[0].key,e.prev=1,n=qt(t.filter((function(e){return e}))),e.prev=3,i=zt().mark((function e(){var t,r,n,i,s;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.value,r=t.key,n=t.url,i=t.versionFn,e.next=3,fetch(n);case 3:if(404!==(s=e.sent).status){e.next=9;break}return rr("unable to find",n),e.abrupt("return",0);case 9:return e.t0=r,e.next=12,s.json().then((function(e){return{version:i(e),json:e}}));case 12:return e.t1=e.sent,e.t2=[e.t0,e.t1],e.abrupt("return",{v:e.t2});case 15:case"end":return e.stop()}}),e)})),n.s();case 6:if((o=n.n()).done){e.next=15;break}return e.delegateYield(i(),"t0",8);case 8:if(0!==(s=e.t0)){e.next=11;break}return e.abrupt("continue",13);case 11:if(!s){e.next=13;break}return e.abrupt("return",s.v);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(3),n.e(e.t1);case 20:return e.prev=20,n.f(),e.finish(20);case 23:e.next=29;break;case 25:return e.prev=25,e.t2=e.catch(1),console.error("error fetch vendor-list:",e.t2.message),e.abrupt("return",[r,"error"]);case 29:return e.abrupt("return",[r,"error"]);case 30:case"end":return e.stop()}}),e,null,[[1,25],[3,17,20,23]])})))).apply(this,arguments)}var ir="//cmp.dmgmediaprivacy.co.uk/gvl",sr="vendor-list.json";function ar(e,t){return cr.apply(this,arguments)}function cr(){return(cr=tr(zt().mark((function e(t,r){var n,o,i,s,a,c;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.toString().split("/"),o=[{key:t,url:"".concat(ir,"/").concat(r,"/").concat(sr),versionFn:function(e){return Qt(n,e.vendorListVersion)}}],(i=Kt(n))&&(l=2,s=function(e){if(Array.isArray(e))return e}(u=i)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(u,l)||Xt(u,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=s[0],c=s[1],o.push({key:t,url:"".concat(ir,"/").concat(a,"/").concat(sr),versionFn:function(e){return Qt(c,e.vendorListVersion)}})),e.abrupt("return",nr(o));case 5:case"end":return e.stop()}var u,l}),e)})))).apply(this,arguments)}function ur(e){return lr.apply(this,arguments)}function lr(){return(lr=tr(zt().mark((function e(t){var r,n,o,i,s,a,c;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.gvlVersion,n=t.cvlVersion,o=t.nrvVersion,i=t.migratedGvlVersion,s="//cmp.dmgmediaprivacy.co.uk/custom/".concat(n,"/vendor-list.json"),a="//cmp.dmgmediaprivacy.co.uk/nrv/".concat(o,"/vendor-list.json"),c=[ar("gvl",r),nr([{key:"cvl",url:s,versionFn:function(){return n}}]),nr([{key:"nrv",url:a,versionFn:function(){return o}}])],i&&c.push(ar("newGvl",i)),e.t0=Object,e.next=8,Promise.all(c);case 8:return e.t1=e.sent,e.abrupt("return",e.t0.fromEntries.call(e.t0,e.t1));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pr(e){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pr(e)}function dr(e,t,r){return(t=br(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vr(){vr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,s=Object.create(i.prototype),a=new T(n||[]);return o(s,"_invoke",{value:I(e,r,a)}),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",h="suspendedYield",f="executing",v="completed",y={};function m(){}function g(){}function b(){}var w={};u(w,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(x([])));E&&E!==r&&n.call(E,s)&&(w=E);var O=b.prototype=m.prototype=Object.create(w);function L(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,s,a){var c=p(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==pr(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function I(t,r,n){var o=d;return function(i,s){if(o===f)throw Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var c=V(a,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var u=p(t,r,n);if("normal"===u.type){if(o=n.done?v:h,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function V(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,V(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var s=i.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function x(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(pr(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},L(C.prototype),u(C.prototype,a,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new C(l(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},L(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return a.type="throw",a.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:x(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function yr(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function mr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){yr(i,n,o,s,a,"next",e)}function a(e){yr(i,n,o,s,a,"throw",e)}s(void 0)}))}}function gr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,br(n.key),n)}}function br(e){var t=function(e,t){if("object"!=pr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pr(t)?t:t+""}var wr=Re(),Sr=et.r2,Er=function(){return e=function e(t){var n=this,o=t.tcModel,i=t.cvlJson,s=void 0===i?{}:i,a=t.nrvJson,c=void 0===a?{}:a,u=t.tcString,l=t.addtlConsent,p=t.storeTcString,d=t.persist,h=t.ui,f=t.uuid,v=t.gvlVersion,y=t.gvlUiVersion,m=t.repromptVersion,g=t.nextRepromptVersion,b=t.nrvString,w=t.nrvVersion,S=t.nrvUiVersion,E=t.cvlVersion,O=t.cvlUiVersion,L=t.publisherRestrictions,C=t.publisherConsents;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ke()(),this.tcModel=o,this.hasUserSelectedTheirPreference=!!u,this.notifyModelUpdate=this.notifyModelUpdate.bind(this),this.isReady=this.isReady.bind(this),this.openUi=this.openUi.bind(this),this.notifyUsersPreferences=this.notifyUsersPreferences.bind(this),this.hasUserConsentedToAll=this.hasUserConsentedToAll.bind(this),this.getGvl=this.getGvl.bind(this),this.consentToAll=this.consentToAll.bind(this),this.dissentToAll=this.dissentToAll.bind(this),this.hasUserConsentedToMandatory=this.hasUserConsentedToMandatory.bind(this),this.updateConsent=this.updateConsent.bind(this),this.reloadTcModel=this.reloadTcModel.bind(this),this.levelChanged=this.levelChanged.bind(this),this.runApiMethod=this.runApiMethod.bind(this),this.getPurposesByVendorMap=this.getPurposesByVendorMap.bind(this),this.getNonRegisteredVendors=this.getNonRegisteredVendors.bind(this),this.storeTcString=p,this.persist=d,this.publisherConsents=C,this.publisherRestrictions=L,this.ui=h,this.uuid=f,this.lastKnownConsentScreen=void 0,this.gvlVersion=v,this.gvlUiVersion=y,this.acmModel=new Ft({vendorList:Object.values(s),consentString:l,vendorListVersion:E}),this.cvlUiVersion=O,this.nrvModel=new Ft({vendorList:Object.values(c),consentString:b,vendorListVersion:w}),this.nrvUiVersion=S,this.repromptVersion=m,this.nextRepromptVersion=g,this.additionalModel={addtlConsent:"",acmVersion:void 0,molGvlVersion:"",nrvString:"",nrvVersion:void 0,repromptVersion:1};var I,V,A,P,T,x,j,_,k,M=Number(this.tcModel.model.cmpVersion);this.api=new xe(27,M,!0,{getTCData:function(e,t){n.runApiMethod((function(){return n.addAdditionalModelToTCData(t)}),e)},hasUserConsentedToAll:(k=mr(vr().mark((function e(t){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.runApiMethod(mr(vr().mark((function e(){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tcModel.gvlIsReady();case 2:return e.abrupt("return",n.hasUserConsentedToAll());case 3:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return k.apply(this,arguments)}),hasUserDissentedToAll:(_=mr(vr().mark((function e(t){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.runApiMethod(mr(vr().mark((function e(){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tcModel.gvlIsReady();case 2:return e.abrupt("return",n.hasUserDissentedToAll());case 3:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return _.apply(this,arguments)}),getPurposesByVendorMap:(j=mr(vr().mark((function e(t){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.runApiMethod(mr(vr().mark((function e(){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tcModel.gvlIsReady();case 2:return e.abrupt("return",n.getPurposesByVendorMap());case 3:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return j.apply(this,arguments)}),getCustomVendorsConsents:(x=mr(vr().mark((function e(t){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.runApiMethod(mr(vr().mark((function e(){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tcModel.gvlIsReady();case 2:return e.abrupt("return",n.getCustomVendorsConsents());case 3:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return x.apply(this,arguments)}),getNonRegisteredVendorsConsents:function(e){n.runApiMethod(mr(vr().mark((function e(){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tcModel.gvlIsReady();case 2:return e.abrupt("return",n.getNonRegisteredVendorsConsents());case 3:case"end":return e.stop()}}),e)}))),e)},getConsentDegree:(T=mr(vr().mark((function e(t){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.runApiMethod(mr(vr().mark((function e(){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.getConsentDegree());case 1:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return T.apply(this,arguments)}),setUserId:function(e,t){n.runApiMethod((function(){return n.uuid=t,null}),e)},openUi:function(e,t){var r=t.uiLevel,o=t.uuid,i=void 0===o?n.uuid:o;n.runApiMethod((function(){n.uuid=i,n.openUi(r)}),e)},getValidTCData:(P=mr(vr().mark((function e(t){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.runApiMethod(mr(vr().mark((function e(){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){n.tcModel.gvlIsReady().then((function(){var t=!1,n=function(r){t||(t=!0,e(r))};r.g.__tcfapi("addEventListener",2,(function(e){e.tcString.length&&(r.g.__tcfapi("removeEventListener",2,(function(){}),e.listenerId),n(e))})),r.g.__tcfapi("getTCData",2,(function(e){e.tcString.length&&n(e)}))}))})));case 1:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return P.apply(this,arguments)}),consentedVendors:(A=mr(vr().mark((function e(t){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.runApiMethod(mr(vr().mark((function e(){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.consentedVendors());case 1:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return A.apply(this,arguments)}),consentedVendorsDetails:(V=mr(vr().mark((function e(t){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.runApiMethod(mr(vr().mark((function e(){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.consentedVendorsDetails());case 1:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return V.apply(this,arguments)}),getStoredRepromptVersion:function(e){n.runApiMethod((function(){return n.repromptVersion}),e)},getNonRegisteredVendors:function(e){n.runApiMethod((function(){return n.getNonRegisteredVendors()}),e)},hasUserConsentedToMandatory:(I=mr(vr().mark((function e(t){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.runApiMethod(mr(vr().mark((function e(){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tcModel.gvlIsReady();case 2:return e.abrupt("return",n.hasUserConsentedToMandatory());case 3:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return I.apply(this,arguments)})})},t=[{key:"addAdditionalModelToTCData",value:function(e){return"boolean"==typeof e||(e.addtlConsent=F.gdprApplies?this.additionalModel.addtlConsent:void 0,e.acmVersion=F.gdprApplies?this.additionalModel.acmVersion:void 0,e.molGvlVersion=F.gdprApplies?this.additionalModel.molGvlVersion:void 0,e.nrvString=F.gdprApplies?this.additionalModel.nrvString:void 0,e.nrvVersion=F.gdprApplies?this.additionalModel.nrvVersion:void 0,e.repromptVersion=F.gdprApplies?this.additionalModel.repromptVersion:void 0),e}},{key:"runApiMethod",value:(c=mr(vr().mark((function e(t,r){var n;return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:n=e.sent,r(n,!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),wr(e.t0),r(null,!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,t){return c.apply(this,arguments)})},{key:"getGvl",value:function(){return this.tcModel.gvl}},{key:"notifyModelUpdate",value:(a=mr(vr().mark((function e(){var t,r,n,o,i,s,a,c;return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.tcModel.tcString(),this.hasUserSelectedTheirPreference=!0,e.next=4,this.getConsentDegree();case 4:return r=e.sent,n=this.acmModel.getConsentString(),o=this.acmModel.getVendorListVersion(),i=this.nrvModel.getConsentString(),s=this.nrvModel.getVendorListVersion(),a=this.tcModel.molGvlVersion,c={uuid:this.uuid,tcString:t,consentDegree:r,addtlConsent:n,nrvString:i},e.next=13,this.persist.saveTCString(c);case 13:this.repromptVersion=this.nextRepromptVersion,this.additionalModel.addtlConsent=n,this.additionalModel.acmVersion=o,this.additionalModel.molGvlVersion=a,this.additionalModel.nrvString=i,this.additionalModel.repromptVersion=this.repromptVersion,this.additionalModel.nrvVersion=s,this.api.update(t,!1);case 21:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"updateConsent",value:function(e){wr("data",e);var t=function(e,t){var r="".concat(t,"Consents"),n="".concat(t,"LegitimateInterests");return Object.entries(e).reduce((function(e,t){var o=hr(t,2),i=o[0],s=o[1],a=s.consent,c=s.legInterest,u=parseInt(i);return a&&e[r].push(u),c&&e[n].push(u),e}),dr(dr({},r,[]),n,[]))},r=e.purposes,n=void 0===r?{}:r,o=e.specialFeatures,i=void 0===o?{}:o,s=e.vendors,a=void 0===s?{}:s,c=e.nonTcfVendors,u=void 0===c?{}:c,l=e.nonRegisteredVendors,p=void 0===l?{}:l,d=t(a,"vendor"),h=d.vendorConsents,f=d.vendorLegitimateInterests,v=t(n,"purpose"),y=v.purposeConsents,m=v.purposeLegitimateInterests,g=Object.entries(i).reduce((function(e,t){var r=hr(t,2),n=r[0],o=r[1],i=parseInt(n);return o.optIn&&e.push(i),e}),[]);this.acmModel.updateModel(u),this.nrvModel.updateModel(p);var b={vendorConsents:h,vendorLegitimateInterests:f,purposeConsents:y,purposeLegitimateInterests:m,specialFeatureOptins:g,consentScreen:this.lastKnownConsentScreen};wr("options:",b),this.tcModel.updateUserPreferences(b),F.cmpVersion=Sr.version,this.notifyModelUpdate(),wr("model updates",h,f,y,m,this.acmModel.getConsents(),this.nrvModel.getConsents())}},{key:"consentToAll",value:function(){wr("user consenting to all"),this.acmModel.consentToAll(),this.nrvModel.consentToAll(),this.tcModel.consentAll({consentScreen:this.lastKnownConsentScreen}),F.cmpVersion=Sr.version,this.notifyModelUpdate()}},{key:"dissentToAll",value:function(){wr("user dissenting to all"),this.acmModel.dissentToAll(),this.nrvModel.dissentToAll(),this.tcModel.dissentAll({consentScreen:this.lastKnownConsentScreen}),F.cmpVersion=Sr.version,this.notifyModelUpdate()}},{key:"levelChanged",value:function(e){var t=e.currentLevel;try{this.setCurrentLevel(t),wr("last known consent screen:",this.lastKnownConsentScreen)}catch(e){wr(e.message)}}},{key:"setCurrentLevel",value:function(e){var t=e.match(/\d/);if(void 0===t[0])throw new Error("Unknown level: "+e);this.lastKnownConsentScreen=t[0]}},{key:"isReady",value:function(){return this.tcModel.gvlIsReady()}},{key:"hasUserConsentedToAll",value:function(){return!!this.hasUserSelectedTheirPreference&&this.tcModel.hasUserConsentedToAll()&&this.acmModel.hasUserConsentedToAll()&&this.nrvModel.hasUserConsentedToAll()}},{key:"hasUserDissentedToAll",value:function(){return!!this.hasUserSelectedTheirPreference&&this.tcModel.hasUserDissentedToAll()&&this.acmModel.hasUserDissentedToAll()&&this.nrvModel.hasUserDissentedToAll()}},{key:"hasUserConsentedToMandatory",value:function(){return!!this.hasUserSelectedTheirPreference&&this.tcModel.hasUserConsentedToMandatory()&&this.acmModel.hasUserConsentedToAll()&&this.nrvModel.hasUserConsentedToAll()}},{key:"getCustomVendorsConsents",value:function(){return this.acmModel.getConsents()}},{key:"getNonRegisteredVendorsConsents",value:function(){return this.nrvModel.getConsents()}},{key:"getConsentDegree",value:(s=mr(vr().mark((function e(){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tcModel.gvlIsReady();case 2:return e.abrupt("return",this.hasUserSelectedTheirPreference?(this.hasUserConsentedToAll()?"yes":this.hasUserDissentedToAll()&&"no")||"partial":void 0);case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"consentedVendors",value:(i=mr(vr().mark((function e(){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tcModel.gvlIsReady();case 2:return e.abrupt("return",this.tcModel.consentedVendors());case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"consentedVendorsDetails",value:(o=mr(vr().mark((function e(){return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tcModel.gvlIsReady();case 2:return e.abrupt("return",this.tcModel.consentedVendorsDetails());case 3:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getPurposesByVendorMap",value:function(){return Object.entries(this.tcModel.byPurposeVendorMap()).reduce((function(e,t){var r=hr(t,2),n=r[0];return r[1].consent.forEach((function(t){return(e[t]=e[t]||[]).push(n)})),e}),{})}},{key:"getNonRegisteredVendors",value:function(){return this.nrvModel.getVendors()}},{key:"openUi",value:(n=mr(vr().mark((function e(t){var r,n,o,i,s,a,c,u,l,p,d,h,f;return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.gvlVersion===this.gvlUiVersion){e.next=15;break}return wr("openUi, gvlVersion: ".concat(this.gvlVersion,", gvlUiVersion: ").concat(this.gvlUiVersion)),e.next=4,ar("gvl",this.gvlUiVersion);case 4:if(r=e.sent,n=hr(r,2),"string"!=typeof(o=n[1])){e.next=9;break}throw new Error("unable to download GVL version: ".concat(this.gvlUiVersion));case 9:return e.next=11,St({type:"repromptedUser",newGvl:o,existingTcModel:this.tcModel,publisherRestrictions:this.publisherRestrictions,publisherConsents:this.publisherConsents});case 11:i=e.sent,this.tcModel=i,this.gvlVersion=o.version,this.gvlUiVersion=o.version;case 15:if(this.acmModel.getVendorListVersion()===this.cvlUiVersion){e.next=24;break}return s="//cmp.dmgmediaprivacy.co.uk/custom/".concat(this.cvlUiVersion,"/vendor-list.json"),e.next=19,fetch(s);case 19:return a=e.sent,e.next=22,a.json();case 22:c=e.sent,this.acmModel=new Ft({vendorList:Object.values(c),consentString:this.acmModel.getConsentString(),vendorListVersion:this.cvlUiVersion});case 24:if(this.nrvModel.getVendorListVersion().toString()===this.nrvUiVersion){e.next=33;break}return u="//cmp.dmgmediaprivacy.co.uk/nrv/".concat(this.nrvUiVersion,"/vendor-list.json"),e.next=28,fetch(u);case 28:return l=e.sent,e.next=31,l.json();case 31:p=e.sent,this.nrvModel=new Ft({vendorList:Object.values(p),consentString:this.nrvModel.getConsentString(),vendorListVersion:this.nrvUiVersion});case 33:d=this.hasUserSelectedTheirPreference?this.tcModel.tcString():"",h={tcModel:this.tcModel.model,hasUserSelectedTheirPreference:this.hasUserSelectedTheirPreference,acmVendors:this.acmModel.getUiModel(),nonRegisteredVendors:this.nrvModel.getUiModel()},f={reloadTcModel:this.reloadTcModel,updateConsent:this.updateConsent,consentToAll:this.consentToAll,dissentToAll:this.dissentToAll,levelChanged:this.levelChanged},wr("opening UI"),this.setCurrentLevel(t),this.ui.open(t,{cmpModel:h,cmpUpdateHandlers:f,isNewUser:!this.hasUserSelectedTheirPreference}),this.additionalModel.addtlConsent=this.acmModel.getConsentString(),this.additionalModel.acmVersion=this.acmModel.getVendorListVersion().toString(),this.additionalModel.molGvlVersion=this.tcModel.molGvlVersion,this.additionalModel.nrvString=this.nrvModel.getConsentString(),this.additionalModel.nrvVersion=this.nrvModel.getVendorListVersion(),this.additionalModel.repromptVersion=this.repromptVersion,this.api.update(d,!0);case 46:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"notifyUsersPreferences",value:function(){var e=this.hasUserSelectedTheirPreference?this.tcModel.tcString():"";wr("notifying users"),this.additionalModel.addtlConsent=this.acmModel.getConsentString(),this.additionalModel.acmVersion=this.acmModel.getVendorListVersion().toString(),this.additionalModel.molGvlVersion=this.tcModel.molGvlVersion,this.additionalModel.nrvString=this.nrvModel.getConsentString(),this.additionalModel.nrvVersion=this.nrvModel.getVendorListVersion(),this.additionalModel.repromptVersion=this.repromptVersion,this.api.update(e,!1)}},{key:"reloadTcModel",value:function(e){var t=this;this.tcModel.reload(e),this.isReady().then((function(){t.hasUserSelectedTheirPreference=!0,t.notifyUsersPreferences()}))}},{key:"setUuid",value:function(e){this.uuid=e}}],t&&gr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,o,i,s,a,c}();function Or(e){return Lr.apply(this,arguments)}function Lr(){return(Lr=mr(vr().mark((function e(t){var r,n,o,i,s,a,c,u,l,p,d,h,f,v,y,m,g,b,w,S,E,O,L,C,I,V,A;return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.gvlRaw,n=t.cvlJson,o=void 0===n?{}:n,i=t.nrvJson,s=void 0===i?{}:i,a=t.tcString,c=t.addtlConsent,u=t.storeTcString,l=t.persist,p=t.ui,d=t.uuid,h=t.gvlVersion,f=t.gvlUiVersion,v=t.repromptVersion,y=t.nextRepromptVersion,m=t.nrvString,g=t.nrvVersion,b=t.nrvUiVersion,w=t.cvlVersion,S=t.cvlUiVersion,E=t.migrateUserGvl,O=t.existingUser,L=t.newGvlRaw,C=t.publisherRestrictions,I=t.publisherConsents,V=E?"exitingUserSimplifiedGvl":O?"existingUser":"newUser",e.next=4,St({type:V,gvl:r,tcString:a,newGvl:L,publisherRestrictions:C,publisherConsents:I});case 4:return A=e.sent,e.abrupt("return",new Er({tcModel:A,cvlJson:o,nrvJson:s,tcString:a,addtlConsent:c,storeTcString:u,persist:l,ui:p,uuid:d,gvlVersion:h,gvlUiVersion:f,repromptVersion:v,nextRepromptVersion:y,nrvString:m,nrvVersion:g,nrvUiVersion:b,cvlVersion:w,cvlUiVersion:S,publisherRestrictions:C,publisherConsents:I}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cr=function(e){return e>3},Ir=[2,7,8,9,10,11];function Vr(e){return Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vr(e)}function Ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(r),!0).forEach((function(t){Tr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Vr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Vr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Vr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _r(e){var t=function(e){var t=[];return e.forEach((function(e,r){e&&t.push(r)})),t};return Object.entries(e).reduce((function(e,r){var n=xr(r,2),o=n[0],i=n[1];return e[o]=function(e){var r;return(r=e,Array.from(new Set(Object.values(r).map(t).flat()))).reduce((function(t,r){return t[r]=Object.entries(e).reduce(function(e){return function(t,r){var n=xr(r,2),o=n[0];return n[1].has(e)&&(t[o]=!0),t}}(r),{}),t}),{})}(i),e}),{vendors:{},purposes:{},specialFeatures:{}})}var kr=function(e){return{vendors:{consent:e.vendorConsents,legInterest:e.vendorLegitimateInterests},purposes:{consent:e.purposeConsents,legInterest:e.purposeLegitimateInterests},specialFeatures:{optIn:e.specialFeatureOptins}}};var Mr=r(863),Ur=r.n(Mr);function Rr(e){return function(e){if(Array.isArray(e))return Dr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Nr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nr(e,t){if(e){if("string"==typeof e)return Dr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dr(e,t):void 0}}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Gr=function(e){return e.filter((function(e){return"stacks"===e.type})).map((function(e){return e.id}))};function Fr(e){var t=e.cmpModel,r=e.currentLevel,n=e.log,o=e.uiLevel,i=e.consentOrPay,s=e.isMailEssentialSubscriber,a=e.consentOrPaySubscriptionURL,c=e.isUserLoggedIn,u=e.isNewUser,l=e.allowRejectAll,p=e.tcfCacheKey,d=t.tcModel.gvl,h=d.purposes,f=d.specialPurposes,v=d.features,y=d.specialFeatures,m=d.dataCategories,g=i?Ur()(d.stacks,Gr(Ne)):Ur()(d.stacks,Gr(De)),b=i?Ne:De,w=function(e,t){var r=new Set(Rr(t));return Object.entries(e).reduce((function(e,t){var n,o,i=(o=2,function(e){if(Array.isArray(e))return e}(n=t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(n,o)||Nr(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=i[0],a=i[1];return a.purposes=Array.from(new Set([].concat(Rr(a.purposes),Rr(a.flexiblePurposes.filter((function(e){return r.has(e)})))))),a.legIntPurposes=a.legIntPurposes.filter((function(e){return!r.has(e)})),e[s]=a,e}),{})}(function(e,t){return Object.values(e).filter((function(e){var r=0!==e.purposes.length||0!==e.legIntPurposes.length||0!==e.specialPurposes.length;return!r&&t("removing",e.id,e.name),r})).reduce((function(e,t){return e[t.id]=t,e}),{})}(JSON.parse(JSON.stringify(d.vendors)),n),t.tcModel.publisherRestrictions.getRestrictions().map((function(e){return e.purposeId}))),S=i&&!s?function(e,t){var r=Ne.filter((function(e){var t=e.type,r=e.isConsentImmutable;return"stacks"===t&&!r})).map((function(t){var r=t.id;return e.tcModel.gvl.stacks[r].purposes})).flat().map(String);return{purposes:Object.keys(e.tcModel.gvl.purposes).reduce((function(n,o){var i=r.includes(o),s=!t&&i?e.tcModel.purposeConsents.has(parseInt(o)):!r.includes(o);return n[o]=Ir.includes(parseInt(o))?{consent:s,legInterest:t||e.tcModel.purposeLegitimateInterests.has(parseInt(o))}:{consent:s},n}),{}),vendors:Object.values(e.tcModel.gvl.vendors).filter((function(e){return!e.deletedDate})).reduce((function(r,n){return r[n.id]={},n.legIntPurposes.length&&(r[n.id].legInterest=t||e.tcModel.vendorLegitimateInterests.has(n.id)),n.purposes.length&&(r[n.id].consent=!0),r}),{}),nonTcfVendors:e.acmVendors.vendorIds.reduce((function(e,t){return e[t]={consent:!0},e}),{}),nonRegisteredVendors:e.nonRegisteredVendors.vendorIds.reduce((function(e,t){return e[t]={consent:!0},e}),{}),specialFeatures:{1:{optIn:!0},2:{optIn:!0}}}}(t,u):function(e){var t,r,n=e.tcModel,o=n.vendorConsents,i=n.purposeConsents,s=n.specialFeatureOptins,a=(t=e.tcModel,e.hasUserSelectedTheirPreference?(r=[],t.purposeLegitimateInterests.forEach((function(e,t){Ir.includes(t)||r.push(t)})),r.length&&t.purposeLegitimateInterests.unset(r),{purposeLegitimateInterests:t.purposeLegitimateInterests,vendorLegitimateInterests:t.vendorLegitimateInterests}):function(){var e=new se,r=Cr(t.gvl.tcfPolicyVersion)?Object.values(t.gvl.purposes).map((function(e){return e.id})).filter((function(e){return Ir.includes(e)})):t.gvl.purposes;e.set(r);var n=new se,o=Object.values(t.gvl.vendors).filter((function(e){return e.legIntPurposes.length>0&&!e.deletedDate})).map((function(e){return e.id}));return n.set(o),{vendorLegitimateInterests:n,purposeLegitimateInterests:e}}()),c=a.vendorLegitimateInterests,u=a.purposeLegitimateInterests;return Pr(Pr({},_r(kr({vendorConsents:o,vendorLegitimateInterests:c,purposeConsents:i,purposeLegitimateInterests:u,specialFeatureOptins:s}))),{},{nonTcfVendors:e.acmVendors.consents||{},nonRegisteredVendors:e.nonRegisteredVendors.consents||{}})}(t);return{config:{hash:{purposes:h,specialPurposes:f,features:v,specialFeatures:y,vendors:w,stacks:g,nonTcfVendors:t.acmVendors.cvl,nonRegisteredVendors:t.nonRegisteredVendors.cvl,dataCategories:m},userPrefs:S,displayPurposes:b,consentOrPay:i,consentOrPaySubscriptionURL:a,isMailEssentialSubscriber:s,isUserLoggedIn:c,allowRejectAll:l,tcfCacheKey:p},currentLevel:o||r}}function Br(e){return Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(e)}function Hr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(r),!0).forEach((function(t){Qr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kr(n.key),n)}}function Jr(e,t,r){return t&&$r(e.prototype,t),r&&$r(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qr(e,t,r){return(t=Kr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kr(e){var t=function(e,t){if("object"!=Br(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Br(t)?t:t+""}function Yr(e,t,r){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function zr(e,t){return e.get(Xr(e,t))}function qr(e,t,r){return e.set(Xr(e,t),r),r}function Xr(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var Zr=Re(),en=new WeakMap,tn=new WeakMap,rn=new WeakMap,nn=new WeakMap,on=new WeakMap,sn=new WeakMap,an=new WeakMap,cn=new WeakMap,un=new WeakMap,ln=new WeakMap,pn=new WeakMap,dn=new WeakMap,hn=new WeakMap,fn=new WeakMap,vn=new WeakMap,yn=Jr((function e(t){var r=this,n=t.brand,o=t.uiScriptUrl,i=t.renderPlatform,s=t.uiLevel,a=t.clientBroker,c=t.consentOrPay,u=t.isMailEssentialSubscriber,l=t.consentOrPaySubscriptionURL,p=t.isUserLoggedIn,d=t.allowRejectAll,h=t.tcfCacheKey;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Yr(this,en,void 0),Yr(this,tn,void 0),Yr(this,rn,void 0),Yr(this,nn,void 0),Yr(this,on,void 0),Yr(this,sn,void 0),Yr(this,an,void 0),Yr(this,cn,void 0),Yr(this,un,void 0),Yr(this,ln,void 0),Yr(this,pn,void 0),Yr(this,dn,void 0),Yr(this,hn,void 0),Yr(this,fn,void 0),Yr(this,vn,void 0),Qr(this,"open",(function(e,t){var n=t.cmpModel,o=t.cmpUpdateHandlers,i=t.isNewUser,s=Fr({cmpModel:n,currentLevel:zr(sn,r),log:Zr,uiLevel:e,consentOrPay:zr(ln,r),isMailEssentialSubscriber:zr(pn,r),consentOrPaySubscriptionURL:zr(dn,r),isUserLoggedIn:zr(hn,r),isNewUser:i,allowRejectAll:zr(fn,r),tcfCacheKey:zr(vn,r)});if(Zr("open",s),qr(en,r,new Promise((function(e){zr(un,r).once("is_ready",(function(){e()}))}))),zr(tn,r))zr(un,r).emit("open",s);else{var a=function(e,t){var r=function(r){var o=r.key,i=r.newValue;if("mol.ads.cmp.tcf.client"===o){n();var s=i;try{t(s),e.emit("close")}catch(e){console.error(e)}}};window.addEventListener("storage",r);var n=function(){window.removeEventListener("storage",r)};return n}(zr(un,r),o.reloadTcModel);!function(e,t,r,n){var o=function(e){return function(){n&&(n(),n=null),e.apply(void 0,arguments)}};e.on("close",o((function(e){r.updateConsent(e)}))),e.on("close:allow_all",o((function(){r.consentToAll()}))),e.on("close:deny_all",o((function(){r.dissentToAll()}))),e.on("close:reject_all",o((function(){r.updateConsent({})}))),e.on("close:allow_essential",r.dissentToAll),e.on("level_changed",(function(e){Zr("level_changed",e),r.levelChanged(e),t.emit("level_changed",e)}))}(zr(un,r),zr(an,r),o,a),function(e,t){Zr("loadScript",t);var r=e;document.body.appendChild(function(e){var r=document.createElement("script");return r.dataset.state=JSON.stringify(t),r.src=e,r.id="mol-fe-cmp-script",r}(r))}(zr(nn,r),Wr(Wr({},s),{},{renderPlatform:zr(on,r),brand:zr(rn,r),id:zr(cn,r)})),qr(tn,r,!0)}})),Qr(this,"close",(function(){Zr("closing UI"),zr(en,r)&&zr(en,r).then((function(){zr(un,r).emit("close")}))})),Qr(this,"notifyUserPreferenceCaptured",(function(){Zr("publishing user_consent_captured"),zr(un,r).emit("user_consent_captured")})),qr(tn,this,!1),qr(rn,this,n),qr(nn,this,o),qr(on,this,i),qr(sn,this,s),qr(an,this,a),qr(ln,this,!!c),qr(pn,this,!!u),qr(dn,this,l),qr(hn,this,!!p),qr(fn,this,!!d),qr(cn,this,Math.random().toString(36).substring(2)),qr(un,this,new R("@mol-fe/mol-fe-cmp","@mol-ads/mol-ads-tcf",zr(cn,this))),qr(en,this,void 0),qr(vn,this,h)}));function mn(e,t,r){e.on("open",(function(e){var r=e.uiLevel,n=e.uuid;n&&t.setUuid(n),t.openUi(r)})),e.on("dissentToAll",(function(e){var n=e.uuid;r.close(),t.setUuid(n),t.setCurrentLevel("Level1"),t.dissentToAll()})),e.on("consentToAll",(function(e){var n=e.uuid;r.close(),t.setUuid(n),t.setCurrentLevel("Level1"),t.consentToAll()})),e.on("ads-initialised",(function(){r.notifyUserPreferenceCaptured()}))}function gn(e){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(e)}function bn(){bn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,s=Object.create(i.prototype),a=new T(n||[]);return o(s,"_invoke",{value:I(e,r,a)}),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",h="suspendedYield",f="executing",v="completed",y={};function m(){}function g(){}function b(){}var w={};u(w,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(x([])));E&&E!==r&&n.call(E,s)&&(w=E);var O=b.prototype=m.prototype=Object.create(w);function L(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,s,a){var c=p(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==gn(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function I(t,r,n){var o=d;return function(i,s){if(o===f)throw Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var c=V(a,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var u=p(t,r,n);if("normal"===u.type){if(o=n.done?v:h,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function V(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,V(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var s=i.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function x(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(gn(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},L(C.prototype),u(C.prototype,a,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new C(l(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},L(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return a.type="throw",a.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:x(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function wn(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function Sn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){wn(i,n,o,s,a,"next",e)}function a(e){wn(i,n,o,s,a,"throw",e)}s(void 0)}))}}var En=Re(),On=function(e){["complete","loaded","interactive"].includes(document.readyState)?e():document.addEventListener("DOMContentLoaded",e)};function Ln(e,t,r){return Cn.apply(this,arguments)}function Cn(){return Cn=Sn(bn().mark((function e(t,r,n){return bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){var i="".concat(n,"/storage/index.html"),s=Ue?"".concat(i,"?adsDebug=tcfv2"):i,a=document.createElement("iframe");a.style.display="none",a.title="TCFV2 Storage",a.src="".concat(s,"#brokerId=").concat(r);var c=function(){var e=Sn(bn().mark((function e(){var t;return bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:En("loaded"),t=a.contentWindow,a.removeEventListener("load",c),t||o(new Error("Couldn't successfully create CMP"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a.addEventListener("load",c),a.addEventListener("error",o),t.on("storageLoaded",(function(t){if(En("storage",t),!t.canStoreUserPreference){var r=a.parentNode;return r&&(En("unloading iframe"),r.removeChild(a)),void e({tcData:t.tcData})}e({iframe:a,tcData:t.tcData})})),On((function(){return document.body.appendChild(a)}))})));case 1:case"end":return e.stop()}}),e)}))),Cn.apply(this,arguments)}function In(e){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(e)}function Vn(e,t,r){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function An(e,t){return e.get(Tn(e,t))}function Pn(e,t,r){return e.set(Tn(e,t),r),r}function Tn(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function jn(){jn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,s=Object.create(i.prototype),a=new T(n||[]);return o(s,"_invoke",{value:I(e,r,a)}),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",h="suspendedYield",f="executing",v="completed",y={};function m(){}function g(){}function b(){}var w={};u(w,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(x([])));E&&E!==r&&n.call(E,s)&&(w=E);var O=b.prototype=m.prototype=Object.create(w);function L(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,s,a){var c=p(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==In(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function I(t,r,n){var o=d;return function(i,s){if(o===f)throw Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var c=V(a,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var u=p(t,r,n);if("normal"===u.type){if(o=n.done?v:h,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function V(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,V(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var s=i.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function x(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(In(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},L(C.prototype),u(C.prototype,a,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new C(l(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},L(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return a.type="throw",a.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:x(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function _n(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function kn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){_n(i,n,o,s,a,"next",e)}function a(e){_n(i,n,o,s,a,"throw",e)}s(void 0)}))}}function Mn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rn(n.key),n)}}function Un(e,t,r){return t&&Mn(e.prototype,t),r&&Mn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rn(e){var t=function(e,t){if("object"!=In(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=In(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==In(t)?t:t+""}function Nn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dn(e){var t="function"==typeof Map?new Map:void 0;return Dn=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(Gn())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&Fn(o,r.prototype),o}(e,arguments,Bn(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Fn(r,e)},Dn(e)}function Gn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gn=function(){return!!e})()}function Fn(e,t){return Fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fn(e,t)}function Bn(e){return Bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bn(e)}var Hn=Re(),Wn=function(e){function t(e){return Nn(this,t),r=this,n=t,o=["Exceeded ".concat(e)],n=Bn(n),function(e,t){if(t&&("object"==In(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(r,Gn()?Reflect.construct(n,o||[],Bn(r).constructor):n.apply(r,o));var r,n,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fn(e,t)}(t,e),Un(t)}(Dn(Error)),$n=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Jn=function(){var e=kn(jn().mark((function e(t){var r,n=arguments;return jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:new Wn(t),e.next=3,$n(t);case 3:throw r;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return new Promise((function(n,o){var i=Date.now(),s=function(){var a=kn(jn().mark((function a(){var c;return jn().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e();case 2:(c=a.sent)?n(c):Date.now()-i<r?setTimeout(s,t):o(new Error("Timeout: exceeded ".concat(r,"ms")));case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();s()}))},Kn=function(e){var t,r,n="GET",o=3e3,i={};if("string"==typeof e)t=e;else{var s=e.method;n=void 0===s?"GET":s,t=e.url;var a=e.timeout;o=void 0===a?3e3:a;var c=e.headers;i=void 0===c?{}:c,r=e.data}var u=new XMLHttpRequest,l=new Promise((function(e,o){u.onreadystatechange=function(){4===this.readyState&&(this.status>199&&this.status<300?e(this.responseText):o(new Error("Error status ".concat(this.status,": ").concat(this.statusText))))},u.open(n,t,!0),Object.entries(i).forEach((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return xn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xn(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return u.setRequestHeader(o,i)})),r?u.send(r):u.send()}));return o?function(e,t,r){return Promise.race([t,Jn(e,void 0)])}(o,l):l},Yn=new WeakMap,zn=new WeakMap,qn=new WeakMap,Xn=new WeakMap,Zn=new WeakMap,eo=new WeakMap,to=Un((function e(t){var r,n,o,i=this,s=t.backendUrl,a=t.channel,c=t.platform,u=t.domain,l=void 0===u?location.host:u,p=t.cmpModel,d=void 0===p?"tcfv2":p,h=t.tags;Nn(this,e),Vn(this,Yn,void 0),Vn(this,zn,void 0),Vn(this,qn,void 0),Vn(this,Xn,void 0),Vn(this,Zn,void 0),Vn(this,eo,void 0),r=this,n="saveTCString",o=function(){var e=kn(jn().mark((function e(t){var r,n,o,s,a,c,u;return jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.uuid,n=t.tcString,o=t.consentDegree,s=t.nrvString,a=t.addtlConsent,An(Yn,i)){e.next=4;break}return Hn("backendUrl not defined, will not update backend"),e.abrupt("return");case 4:return c=function(){var e=kn(jn().mark((function e(t){return jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Hn("trying to send update to backend. payload:",t),e.next=4,Kn({method:"POST",url:An(Yn,i),headers:{"Content-Type":"application/json"},data:JSON.stringify(t)});case 4:return Hn("update sent to backend successfully"),e.abrupt("return",!0);case 8:e.prev=8,e.t0=e.catch(0),Hn("send to backend failed with:",e.t0.message),Hn("send to backend rescheduled 5s");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u={addtlConsent:a,consent:o,domain:An(Xn,i),euconsent:n,nrvString:s,platform:An(qn,i),uuid:r,version:0,cmp:An(Zn,i)},An(zn,i)&&(u.channel=An(zn,i)),An(eo,i)&&(u.tags=An(eo,i)),e.next=10,Qn((function(){return c(u)}),1e4);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(n=Rn(n))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,Pn(Yn,this,s),Pn(zn,this,a),Pn(qn,this,c),Pn(Xn,this,l),Pn(Zn,this,d),Pn(eo,this,h)}));function ro(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return no(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?no(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function no(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var oo=/(.*)(\d+)/;function io(e){return!isNaN(e)}function so(e){return so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},so(e)}var ao=["gvlVersion","gvlUiVersion"];function co(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function uo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?co(Object(r),!0).forEach((function(t){lo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):co(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lo(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=so(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=so(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==so(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function po(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ho=Re(),fo=function(e){return 2===e.length},vo=function(e,t){return"v".concat(e)===t};function yo(e,t){if(!e)return ho("no tcString, returning configured gvlUiVersion",t),{gvlVersion:"".concat(t),gvlUiVersion:"".concat(t)};var r=Oe.decode(e),n=r.vendorListVersion,o=Number(r.policyVersion),i=Cr(o)?3:2,s=parseInt(n.toString());ho("gvlVersion from tcString",s);var a,c,u=t.toString().split("/");if(fo(u)){var l=(c=2,function(e){if(Array.isArray(e))return e}(a=u)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(a,c)||function(e,t){if(e){if("string"==typeof e)return po(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?po(e,t):void 0}}(a,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=l[0],d=l[1],h="latest"===d?"latest":Math.max(s,Number(d));return vo(i,p)?{gvlVersion:"v".concat(i,"/").concat(s),gvlUiVersion:"v".concat(i,"/").concat(h)}:{gvlVersion:Cr(o)?"v3/".concat(s):"".concat(s),gvlUiVersion:"".concat(t)}}return Cr(o)?{gvlVersion:"v3/".concat(s),gvlUiVersion:"".concat(t)}:{gvlVersion:"".concat(s),gvlUiVersion:"".concat("latest"===t?"latest":Math.max(s,Number(t)))}}function mo(e,t){var r=e.tcString,n=e.nrvVersion,o=e.cvlVersion,i=t.gvlUiVersion,s=t.nrvUiVersion,a=t.cvlUiVersion;return uo(uo(uo({},yo(r,i)),function(e,t){var r=e||t,n=e===t?t.toString():function(e,t){return r=t,io(e)&&io(r)?Math.max(Number(e),Number(t)).toString():function(e,t){return io(e)&&!io(t)}(e,t)?t.toString():function(e,t){var r=e.split("/"),n=r.pop(),o=t.split("/"),i=o.pop();if(r.join("/")===o.join("/")){var s=ro(i.match(oo),3),a=s[1],c=s[2],u=ro(n.match(oo),3),l=u[1],p=u[2];return a===l?"".concat(r.join("/"),"/").concat(a).concat(Math.max(c,p)):t}return t}(e.toString(),t.toString());var r}(r,t);return{nrvVersion:r.toString(),nrvUiVersion:n}}(n,s.toString())),function(e,t){var r,n=Number(t);return e&&!Number(e)?r=e:t&&!Number(t)?r=t:n=(r=e?Number(e):t?Number(t):n)?Math.max(r,n):n,ho("selected cvlVersions",{cvlVersion:r,cvlUiVersion:n}),{cvlVersion:r,cvlUiVersion:n}}(o,a))}var go=function(e){return null==e?void 0:e.replace(/\./g,"/")},bo=function(e,t,r){return t&&r?"".concat(e,"/").concat(t,"/").concat(r):e};var wo=[3,4];function So(e){return So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},So(e)}var Eo=["gvlVersion","gvlUiVersion","migratedGvlVersion","migrateUserGvl"];function Oo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oo(Object(r),!0).forEach((function(t){Co(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Co(e,t,r){return(t=Vo(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Io(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vo(n.key),n)}}function Vo(e){var t=function(e,t){if("object"!=So(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=So(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==So(t)?t:t+""}function Ao(e,t){return e.get(Po(e,t))}function Po(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var To=Re(),xo=new WeakMap,jo=function(){return e=function e(t){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}(this,xo,void 0),n=t,(r=xo).set(Po(r,this),n)},(t=[{key:"get",value:function(e){return e?Object.prototype.hasOwnProperty.call(Ao(xo,this),e)?Ao(xo,this)[e]:void 0:Ao(xo,this)}}])&&Io(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function _o(e,t){var r=e.get(),n=function(e,t){var r=t||{},n=r.tcString,o=void 0===n?void 0:n,i=r.nrvString,s=void 0===i?void 0:i,a=r.nrvVersion,c=void 0===a?void 0:a,u=r.addtlConsent,l=void 0===u?void 0:u,p=r.acmVersion,d=r.molGvlVersion,h=void 0===d?void 0:d,f=e||{},v=f.tcString,y=f.addtlConsent,m=f.cvlVersion,g=f.nrvString,b=f.nrvVersion,w=f.molGvlVersion,S=function(e,t){var r=e.repromptVersion,n=e.nextRepromptVersion,o=(t||{}).repromptVersion,i=void 0===o?0:o,s=Math.max(r,i),a=Math.max(s,n);return To("nextRepromptVersion",a),{nextRepromptVersion:a,repromptVersion:s}}(e,t),E=Lo({tcString:o,nrvString:s,nrvVersion:c,addtlConsent:l,cvlVersion:p,molGvlVersion:h},S),O=Lo({tcString:v,nrvString:g,nrvVersion:b,addtlConsent:y,cvlVersion:m,molGvlVersion:w},S);return To("clientString",v),To("storedString",o),v&&o?function(e,t){var r=Oe.decode(e).lastUpdated,n=Oe.decode(t).lastUpdated;return To("stored",r),To("client",n),r>n?E:O}(o,v):v?O:E}(r,t),o=n.addtlConsent,i=n.nrvString,s=n.nextRepromptVersion,a=n.repromptVersion,c=n.tcString,u=!!r.tcString,l=function(e,t,r){var n=e.molGvlVersion,o=mo(e,t),i=o.gvlVersion,s=o.gvlUiVersion,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(o,ao),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=!e.tcString,s="gvlVersion.Country.platform".split("."),a="gvlSpec.gvlVersion.Country.platform".split("."),c=(null==t?void 0:t.split(".").length)===s.length||(null==t?void 0:t.split(".").length)===a.length,u=e.gvlEnvironment,l=e.geo,p=e.useGeoDeviceVariantGVL,d=void 0!==p&&p,h=d&&!c&&r,f=c?go(t):i&&d?bo(n,l,u):n,v=!c&&d&&r&&bo(n,l,u)||void 0;return{gvlVersion:f,gvlUiVersion:c||d?bo(o,l,u):o,migratedGvlVersion:v,migrateUserGvl:h}}(t,n,r,i,s),u=c.gvlVersion,l=c.gvlUiVersion,p=c.migratedGvlVersion,d=c.migrateUserGvl;return uo(uo({},a),{},{gvlVersion:u,gvlUiVersion:l,migratedGvlVersion:p,migrateUserGvl:d})}(n,r,u),p=l.gvlVersion,d=l.gvlUiVersion,h=l.migratedGvlVersion,f=l.migrateUserGvl,v=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(l,Eo);return new jo(Lo(Lo(Lo({},function(e){var t=e.backendUrl,r=e.brand,n=e.brokerId,o=e.controllerScriptBase,i=e.renderPlatform,s=e.showUi,a=e.uiLevel,c=e.uiScriptUrl,u=e.uuid,l=e.platform,p=e.publisherRestrictions,d={purposes:(null==r?void 0:r.primaryVendor.purposes)||[1,2,3,4,5,6,7,8,9,10],legIntPurposes:(null==r?void 0:r.primaryVendor.legIntPurposes)||[5,6,8,10]};return{backendUrl:t,brand:r,brokerId:n,controllerScriptBase:o,renderPlatform:i,showUi:s,uiLevel:a,uiScriptUrl:c,uuid:u,platform:l,publisherRestrictions:p||wo,publisherConsents:d}}(r)),{},{addtlConsent:o,tcString:c,nrvString:i,nextRepromptVersion:s,repromptVersion:a},v),{},{gvlVersion:p,gvlUiVersion:d,migratedGvlVersion:h,existingUser:u,migrateUserGvl:f}))}function ko(e){return ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ko(e)}var Mo=["gvlVersion","cvlVersion","nrvVersion","migratedGvlVersion"];function Uo(){Uo=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,s=Object.create(i.prototype),a=new T(n||[]);return o(s,"_invoke",{value:I(e,r,a)}),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",h="suspendedYield",f="executing",v="completed",y={};function m(){}function g(){}function b(){}var w={};u(w,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(x([])));E&&E!==r&&n.call(E,s)&&(w=E);var O=b.prototype=m.prototype=Object.create(w);function L(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,s,a){var c=p(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ko(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function I(t,r,n){var o=d;return function(i,s){if(o===f)throw Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:e,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var c=V(a,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var u=p(t,r,n);if("normal"===u.type){if(o=n.done?v:h,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function V(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,V(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var s=i.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function x(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(ko(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},L(C.prototype),u(C.prototype,a,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new C(l(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},L(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return a.type="throw",a.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:x(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Ro(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function No(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ro(Object(r),!0).forEach((function(t){Do(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ro(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Do(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ko(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ko(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ko(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Go(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Fo(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}var Bo=Re();function Ho(e,t){var r=t.get(),n=r.uiLevel,o=r.renderPlatform,i=r.brand,s=r.uiScriptUrl,a=r.consentOrPay,c=r.isMailEssentialSubscriber,u=r.consentOrPaySubscriptionURL,l=r.isUserLoggedIn,p=r.allowRejectAll,d=r.tcfCacheKey;return new yn({uiLevel:n,renderPlatform:o,brand:i,uiScriptUrl:s,clientBroker:e,consentOrPay:a,isMailEssentialSubscriber:c,consentOrPaySubscriptionURL:u,isUserLoggedIn:l,allowRejectAll:p,tcfCacheKey:d})}function Wo(){var e;return e=Uo().mark((function e(t,r){var n,o,i,s,a,c,u,l,p,d,h,f,v,y,m,g,b,w,S,E,O,L,C,I,V,A,P,T,x,j,_,k,M,U,R,N,D,G;return Uo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.get(),o=n.brokerId,i=n.controllerScriptBase,s=n.backendUrl,a=n.channel,c=n.platform,u=n.renderPlatform,l=n.storeUserPreference,p=n.uuid,d=n.showUi,h=n.uiLevel,f=n.cmpModel,v=n.consentOrPay,y=n.dissentUser,m=n.domain,g=n.persistTags,e.t0=!!l,!e.t0){e.next=6;break}return e.next=5,Ln(t,o,i);case 5:e.t0=e.sent;case 6:return b=e.t0,w=b.tcData,S=b.iframe,E=_o(r,w),O=E.get(),L=O.gvlVersion,C=O.cvlVersion,I=O.nrvVersion,V=O.migratedGvlVersion,A=Go(O,Mo),e.next=13,ur({gvlVersion:L,cvlVersion:C,nrvVersion:I,migratedGvlVersion:V});case 13:if(P=e.sent,T=P.gvl,x=P.cvl,j=P.nrv,_=P.newGvl,"string"!=typeof T){e.next=20;break}throw new Error("unable to download GVL version: ".concat(L));case 20:if("string"!=typeof x){e.next=22;break}throw new Error("unable to download CVL version: ".concat(C));case 22:if("string"!=typeof j){e.next=24;break}throw new Error("unable to download NVL version: ".concat(I));case 24:return k=_&&"string"!=typeof _?_:void 0,Bo("gvlJson",T.version,T.json),Bo("cvlJson",x.json),Bo("nrvJson",j.json),Bo("newGvlJson",null==k?void 0:k.json),M=new to({backendUrl:s,channel:a,platform:c||u,cmpModel:f,domain:m,tags:g}),U=Ho(t,r),R=No({cvlJson:x.json,cvlVersion:C,gvlRaw:T,gvlVersion:T.version,newGvlRaw:k,nrvJson:j.json,nrvVersion:I,persist:M,storeTcString:!!l,ui:U,uuid:p},A),e.next=34,Or(R);case 34:return N=e.sent,D="true"===d||!0===d,t.emit("is_loaded"),G={ns:"@mol-ads/mol-ads-cmp",id:o,sender:"mol-ads/mol-ads-cmp",action:"is_loaded"},S&&S.contentWindow.postMessage(G,"*"),e.next=41,N.isReady();case 41:mn(t,N,U),D?N.openUi(h):v&&y?(Bo("dissenting user"),N.setCurrentLevel("Level 1"),N.dissentToAll(),N.notifyUsersPreferences()):N.notifyUsersPreferences(),t.emit("is_ready");case 44:case"end":return e.stop()}}),e)})),Wo=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){Fo(i,n,o,s,a,"next",e)}function a(e){Fo(i,n,o,s,a,"throw",e)}s(void 0)}))},Wo.apply(this,arguments)}setTimeout((function(){var e=document.getElementById("mol-ads-tcfv2-script"),t=function(e){return To("config",e),new jo(Lo({cmpModel:"tcfv2"},e))}(JSON.parse((null==e?void 0:e.dataset.opts)||"{}")),r=t.get().brokerId;!function(e,t){Wo.apply(this,arguments)}(new R("@mol-ads/mol-ads-cmp","mol-ads-cmp",r),t)}),10)})()})();
//# sourceMappingURL=index.js.map